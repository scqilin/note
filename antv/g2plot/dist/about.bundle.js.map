{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@antv/g-svg/esm/constant.js","webpack:///./node_modules/@antv/g-canvas/esm/util/util.js","webpack:///./node_modules/@antv/g-base/esm/util/util.js","webpack:///./node_modules/@antv/g-svg/esm/util/dom.js","webpack:///./node_modules/@antv/g-base/esm/index.js","webpack:///./node_modules/@antv/g-canvas/esm/util/arc-params.js","webpack:///./node_modules/@antv/g-canvas/esm/util/draw.js","webpack:///./node_modules/@antv/g-canvas/esm/util/arrow.js","webpack:///./node_modules/@antv/g-svg/esm/util/svg.js","webpack:///./node_modules/@antv/g-base/esm/util/matrix.js","webpack:///./node_modules/@antv/g-base/esm/util/path.js","webpack:///./node_modules/@antv/g-canvas/esm/shape/base.js","webpack:///./node_modules/@antv/g-canvas/esm/shape/circle.js","webpack:///./node_modules/@antv/g-canvas/esm/shape/ellipse.js","webpack:///./node_modules/@antv/g-canvas/esm/shape/image.js","webpack:///./node_modules/@antv/g-canvas/esm/util/in-stroke/line.js","webpack:///./node_modules/@antv/g-canvas/esm/shape/line.js","webpack:///./node_modules/@antv/g-canvas/esm/shape/marker.js","webpack:///./node_modules/@antv/g-canvas/esm/util/in-path/point-in-path.js","webpack:///./node_modules/@antv/g-canvas/esm/util/in-path/polygon.js","webpack:///./node_modules/@antv/g-canvas/esm/util/in-stroke/arc.js","webpack:///./node_modules/@antv/g-canvas/esm/util/path.js","webpack:///./node_modules/@antv/g-canvas/esm/shape/path.js","webpack:///./node_modules/@antv/g-canvas/esm/util/in-stroke/polyline.js","webpack:///./node_modules/@antv/g-canvas/esm/shape/polygon.js","webpack:///./node_modules/@antv/g-canvas/esm/shape/polyline.js","webpack:///./node_modules/@antv/g-canvas/esm/shape/rect.js","webpack:///./node_modules/@antv/g-canvas/esm/util/in-stroke/rect-radius.js","webpack:///./node_modules/@antv/g-canvas/esm/util/in-stroke/rect.js","webpack:///./node_modules/@antv/g-canvas/esm/shape/text.js","webpack:///./node_modules/@antv/g-svg/esm/util/draw.js","webpack:///./node_modules/@antv/component/lib/tooltip/css-const.js","webpack:///./node_modules/@antv/g-canvas/esm/group.js","webpack:///./node_modules/@antv/g-svg/esm/group.js","webpack:///./node_modules/@antv/g-svg/esm/shape/base.js","webpack:///./node_modules/@antv/g-svg/esm/shape/circle.js","webpack:///./node_modules/@antv/g-svg/esm/shape/dom.js","webpack:///./node_modules/@antv/g-svg/esm/shape/ellipse.js","webpack:///./node_modules/@antv/g-svg/esm/shape/image.js","webpack:///./node_modules/@antv/g-svg/esm/shape/line.js","webpack:///./node_modules/@antv/g-svg/esm/shape/marker/symbols.js","webpack:///./node_modules/@antv/g-svg/esm/shape/marker/index.js","webpack:///./node_modules/@antv/g-svg/esm/shape/path.js","webpack:///./node_modules/@antv/g-svg/esm/shape/polygon.js","webpack:///./node_modules/@antv/g-svg/esm/shape/polyline.js","webpack:///./node_modules/@antv/g-svg/esm/shape/rect.js","webpack:///./node_modules/@antv/g-svg/esm/util/format.js","webpack:///./node_modules/@antv/g-svg/esm/shape/text.js","webpack:///./node_modules/@antv/g-base/lib/types.js","webpack:///./node_modules/@antv/g-base/lib/interfaces.js","webpack:///./node_modules/@antv/g-base/esm/event/graph-event.js","webpack:///./node_modules/@antv/g-base/esm/abstract/base.js","webpack:///./node_modules/@antv/g-base/esm/abstract/container.js","webpack:///./node_modules/@antv/g-base/esm/abstract/element.js","webpack:///./node_modules/@antv/g-canvas/esm/util/parse.js","webpack:///./node_modules/@antv/g-base/lib/bbox/index.js","webpack:///./node_modules/@antv/g-base/lib/util/text.js","webpack:///./node_modules/@antv/g-base/lib/bbox/util.js","webpack:///./node_modules/@antv/g-base/lib/event/graph-event.js","webpack:///./node_modules/@antv/g-base/lib/util/util.js","webpack:///./node_modules/@antv/g-base/lib/util/offscreen.js","webpack:///./node_modules/@antv/g-base/lib/util/matrix.js","webpack:///./node_modules/@antv/g-base/esm/abstract/group.js","webpack:///./node_modules/@antv/g-base/esm/abstract/shape.js","webpack:///./node_modules/@antv/g-canvas/esm/types.js","webpack:///./node_modules/@antv/g-canvas/esm/interfaces.js","webpack:///./node_modules/@antv/g-svg/esm/types.js","webpack:///./node_modules/@antv/g-svg/esm/interfaces.js","webpack:///./node_modules/@antv/g-svg/esm/defs/gradient.js","webpack:///./node_modules/@antv/g-svg/esm/defs/shadow.js","webpack:///./node_modules/@antv/g-svg/esm/defs/arrow.js","webpack:///./node_modules/@antv/g-svg/esm/defs/clip.js","webpack:///./node_modules/@antv/g-svg/esm/defs/pattern.js","webpack:///./node_modules/@antv/g-svg/esm/defs/index.js","webpack:///./node_modules/@antv/g-svg/esm/canvas.js","webpack:///./node_modules/@antv/g-base/esm/animate/timeline.js","webpack:///./node_modules/@antv/g-base/esm/util/color.js","webpack:///./node_modules/@antv/g-base/esm/event/event-contoller.js","webpack:///./node_modules/@antv/g-base/esm/abstract/canvas.js","webpack:///./node_modules/@antv/g-canvas/esm/util/hit.js","webpack:///./node_modules/@antv/g-canvas/esm/canvas.js","webpack:///./node_modules/@antv/component/lib/util/event.js","webpack:///./node_modules/@antv/g-canvas/esm/index.js","webpack:///./node_modules/@antv/g-svg/esm/index.js","webpack:///./node_modules/@antv/g-canvas/lib/util/arc-params.js","webpack:///./src/about.ts","webpack:///./node_modules/@antv/g-base/lib/bbox/register.js","webpack:///./node_modules/@antv/g-base/lib/bbox/rect.js","webpack:///./node_modules/@antv/g-base/lib/bbox/circle.js","webpack:///./node_modules/@antv/g-base/lib/bbox/polyline.js","webpack:///./node_modules/@antv/g-base/lib/bbox/polygon.js","webpack:///./node_modules/@antv/g-base/lib/bbox/text.js","webpack:///./node_modules/@antv/g-base/lib/bbox/path.js","webpack:///./node_modules/@antv/g-base/lib/bbox/line.js","webpack:///./node_modules/@antv/g-base/lib/bbox/ellipse.js","webpack:///./node_modules/@antv/g-canvas/lib/util/util.js","webpack:///./node_modules/@antv/g2/node_modules/tslib/tslib.es6.js","webpack:///./node_modules/@antv/g2/esm/constant.js","webpack:///./node_modules/@antv/g2/esm/engine/index.js","webpack:///./node_modules/@antv/g2/esm/util/dom.js","webpack:///./node_modules/@antv/g2/esm/base.js","webpack:///./node_modules/@antv/component/esm/util/matrix.js","webpack:///./node_modules/@antv/component/esm/util/util.js","webpack:///./node_modules/@antv/component/esm/abstract/component.js","webpack:///./node_modules/@antv/component/esm/abstract/group-component.js","webpack:///./node_modules/@antv/component/esm/util/event.js","webpack:///./node_modules/@antv/component/esm/util/text.js","webpack:///./node_modules/@antv/component/esm/util/label.js","webpack:///./node_modules/@antv/component/esm/util/graphic.js","webpack:///./node_modules/@antv/component/esm/util/theme.js","webpack:///./node_modules/@antv/component/esm/annotation/line.js","webpack:///./node_modules/@antv/component/esm/annotation/text.js","webpack:///./node_modules/@antv/component/esm/annotation/arc.js","webpack:///./node_modules/@antv/component/esm/annotation/region.js","webpack:///./node_modules/@antv/component/esm/annotation/image.js","webpack:///./node_modules/@antv/component/esm/annotation/data-marker.js","webpack:///./node_modules/@antv/component/esm/annotation/data-region.js","webpack:///./node_modules/@antv/component/esm/annotation/region-filter.js","webpack:///./node_modules/@antv/component/esm/annotation/shape.js","webpack:///./node_modules/@antv/component/esm/abstract/html-component.js","webpack:///./node_modules/@antv/component/esm/annotation/html.js","webpack:///./node_modules/@antv/component/esm/util/state.js","webpack:///./node_modules/@antv/component/esm/axis/base.js","webpack:///./node_modules/@antv/component/esm/axis/overlap/auto-ellipsis.js","webpack:///./node_modules/@antv/component/esm/axis/overlap/auto-hide.js","webpack:///./node_modules/@antv/component/esm/axis/overlap/auto-rotate.js","webpack:///./node_modules/@antv/component/esm/axis/line.js","webpack:///./node_modules/@antv/component/esm/crosshair/html-theme.js","webpack:///./node_modules/@antv/component/esm/axis/circle.js","webpack:///./node_modules/@antv/component/esm/crosshair/base.js","webpack:///./node_modules/@antv/component/esm/crosshair/line.js","webpack:///./node_modules/@antv/component/esm/crosshair/circle.js","webpack:///./node_modules/@antv/component/esm/crosshair/css-const.js","webpack:///./node_modules/@antv/component/esm/crosshair/html.js","webpack:///./node_modules/@antv/component/esm/grid/base.js","webpack:///./node_modules/@antv/component/esm/grid/circle.js","webpack:///./node_modules/@antv/component/esm/tooltip/html-theme.js","webpack:///./node_modules/@antv/component/esm/grid/line.js","webpack:///./node_modules/@antv/component/esm/legend/base.js","webpack:///./node_modules/@antv/component/esm/legend/category.js","webpack:///./node_modules/@antv/component/esm/legend/continuous.js","webpack:///./node_modules/@antv/component/esm/tooltip/css-const.js","webpack:///./node_modules/@antv/component/esm/tooltip/html.js","webpack:///./node_modules/@antv/component/esm/util/align.js","webpack:///./node_modules/@antv/component/esm/trend/constant.js","webpack:///./node_modules/@antv/component/esm/trend/path.js","webpack:///./node_modules/@antv/component/esm/trend/trend.js","webpack:///./node_modules/@antv/component/esm/slider/constant.js","webpack:///./node_modules/@antv/component/esm/slider/handler.js","webpack:///./node_modules/@antv/component/esm/slider/slider.js","webpack:///./node_modules/@antv/component/esm/scrollbar/scrollbar.js","webpack:///./node_modules/@antv/g2/esm/dependents.js","webpack:///./node_modules/@antv/g2/esm/util/scale.js","webpack:///./node_modules/@antv/g2/esm/util/axis.js","webpack:///./node_modules/@antv/g2/esm/facet/facet.js","webpack:///./node_modules/@antv/g2/esm/facet/index.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/base.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/callback.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/register.js","webpack:///./node_modules/@antv/g2/esm/util/graphics.js","webpack:///./node_modules/@antv/g2/esm/util/helper.js","webpack:///./node_modules/@antv/g2/esm/util/coordinate.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/util/path.js","webpack:///./node_modules/@antv/g2/esm/util/bbox.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/util.js","webpack:///./node_modules/@antv/g2/esm/interaction/context.js","webpack:///./node_modules/@antv/g2/esm/interaction/interaction.js","webpack:///./node_modules/@antv/g2/esm/interaction/grammar-interaction.js","webpack:///./node_modules/@antv/g2/esm/interaction/index.js","webpack:///./node_modules/@antv/g2/esm/util/theme.js","webpack:///./node_modules/@antv/g2/esm/theme/style-sheet/light.js","webpack:///./node_modules/@antv/g2/esm/theme/index.js","webpack:///./node_modules/@antv/g2/esm/util/tooltip.js","webpack:///./node_modules/@antv/g2/esm/util/padding.js","webpack:///./node_modules/@antv/g2/esm/chart/controller/index.js","webpack:///./node_modules/@antv/g2/esm/chart/controller/coordinate.js","webpack:///./node_modules/@antv/g2/esm/chart/event.js","webpack:///./node_modules/@antv/g2/esm/chart/layout/index.js","webpack:///./node_modules/@antv/g2/esm/chart/util/scale-pool.js","webpack:///./node_modules/@antv/g2/esm/chart/layout/padding-cal.js","webpack:///./node_modules/@antv/g2/esm/chart/layout/auto.js","webpack:///./node_modules/@antv/g2/esm/chart/view.js","webpack:///./node_modules/@antv/g2/esm/chart/chart.js","webpack:///./node_modules/@antv/g2/esm/chart/controller/base.js","webpack:///./node_modules/@antv/g2/esm/animate/animation/index.js","webpack:///./node_modules/@antv/g2/esm/animate/index.js","webpack:///./node_modules/@antv/g2/esm/geometry/element/index.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/index.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/base.js","webpack:///./node_modules/@antv/g2/esm/geometry/util/is-model-change.js","webpack:///./node_modules/@antv/g2/esm/geometry/util/parse-fields.js","webpack:///./node_modules/@antv/g2/esm/geometry/base.js","webpack:///./node_modules/@antv/g2/esm/geometry/util/group-data.js","webpack:///./node_modules/@antv/g2/esm/util/transform.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/util/index.js","webpack:///./node_modules/@antv/g2/esm/component/labels.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/base.js","webpack:///./node_modules/@antv/g2/esm/core.js","webpack:///./node_modules/@antv/g2/esm/theme/style-sheet/dark.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/util/get-path-points.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/util/get-style.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/util/split-points.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/line/util.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/line/index.js","webpack:///./node_modules/@antv/g2/esm/geometry/path.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/area/util.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/area/index.js","webpack:///./node_modules/@antv/g2/esm/geometry/area.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/edge/index.js","webpack:///./node_modules/@antv/g2/esm/geometry/edge.js","webpack:///./node_modules/@antv/g2/esm/geometry/heatmap.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/interval/util.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/interval/index.js","webpack:///./node_modules/@antv/g2/esm/geometry/util/shape-size.js","webpack:///./node_modules/@antv/g2/esm/geometry/interval.js","webpack:///./node_modules/@antv/g2/esm/geometry/line.js","webpack:///./node_modules/@antv/g2/esm/util/marker.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/point/util.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/point/index.js","webpack:///./node_modules/@antv/g2/esm/geometry/point.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/polygon/index.js","webpack:///./node_modules/@antv/g2/esm/geometry/polygon.js","webpack:///./node_modules/@antv/g2/esm/geometry/schema.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/schema/index.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/edge/util.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/area/line.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/area/smooth.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/area/smooth-line.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/edge/arc.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/edge/smooth.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/edge/vhv.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/interval/funnel.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/interval/hollow-rect.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/interval/line.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/interval/pyramid.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/interval/tick.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/line/step.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/schema/box.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/schema/candle.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/polygon/square.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/point/hollow.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/point/image.js","webpack:///./node_modules/@antv/g2/esm/geometry/shape/point/solid.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/interval.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/polar.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/pie/index.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/layout/pie/util.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/layout/overlap.js","webpack:///./node_modules/@antv/g2/esm/util/collision-detect.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/layout/interval/adjust-position.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/layout/point/adjust-position.js","webpack:///./node_modules/@antv/g2/esm/animate/animation/util.js","webpack:///./node_modules/@antv/g2/esm/animate/animation/sector-path-update.js","webpack:///./node_modules/@antv/g2/esm/animate/animation/zoom.js","webpack:///./node_modules/@antv/g2/esm/util/facet.js","webpack:///./node_modules/@antv/g2/esm/facet/circle.js","webpack:///./node_modules/@antv/g2/esm/facet/list.js","webpack:///./node_modules/@antv/g2/esm/facet/matrix.js","webpack:///./node_modules/@antv/g2/esm/facet/mirror.js","webpack:///./node_modules/@antv/g2/esm/facet/rect.js","webpack:///./node_modules/@antv/g2/esm/facet/tree.js","webpack:///./node_modules/@antv/g2/esm/util/stat.js","webpack:///./node_modules/@antv/g2/esm/util/annotation.js","webpack:///./node_modules/@antv/g2/esm/chart/controller/annotation.js","webpack:///./node_modules/@antv/g2/esm/util/grid.js","webpack:///./node_modules/@antv/g2/esm/chart/controller/axis.js","webpack:///./node_modules/@antv/g2/esm/util/direction.js","webpack:///./node_modules/@antv/g2/esm/util/attr.js","webpack:///./node_modules/@antv/g2/esm/util/legend.js","webpack:///./node_modules/@antv/g2/esm/chart/controller/legend.js","webpack:///./node_modules/@antv/g2/esm/chart/controller/slider.js","webpack:///./node_modules/@antv/g2/esm/chart/controller/tooltip.js","webpack:///./node_modules/@antv/g2/esm/chart/controller/scrollbar.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/active-region.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/component/tooltip/geometry.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/component/tooltip/sibling.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/component/tooltip/ellipsis-text.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/state-base.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/state.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/active.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/link-by-color.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/range-state.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/range-active.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/single-state.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/single-active.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/highlight-util.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/highlight.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/highlight-by-color.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/highlight-by-x.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/range-highlight.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/single-highlight.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/range-selected.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/selected.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/single-selected.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/component/list-state.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/component/list-active.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/component/list-highlight.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/component/list-highlight-util.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/component/list-selected.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/component/list-unchecked.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/mask/base.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/mask/circle.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/mask/rect.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/mask/dim-rect.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/mask/path.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/mask/smooth-path.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/cursor.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/data/filter.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/data/range-filter.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/data/sibling-filter.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/filter.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/element/sibling-filter.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/view/button.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/view/drag.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/view/move.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/view/scale-transform.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/view/scale-translate.js","webpack:///./node_modules/@antv/g2/esm/interaction/action/view/scale-zoom.js","webpack:///./node_modules/@antv/g2/esm/index.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/layout/pie/distribute.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/layout/hide-overlap.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/layout/limit-in-shape.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/layout/limit-in-canvas.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/layout/pie/outer.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/layout/adjust-color.js","webpack:///./node_modules/@antv/g2/esm/util/color.js","webpack:///./node_modules/@antv/g2/esm/geometry/label/layout/pie/spider.js","webpack:///./node_modules/@antv/g2/esm/animate/animation/fade.js","webpack:///./node_modules/@antv/g2/esm/animate/animation/grow-in.js","webpack:///./node_modules/@antv/g2/esm/animate/animation/scale-in.js","webpack:///./node_modules/@antv/g2/esm/animate/animation/wave-in.js","webpack:///./node_modules/@antv/g2/esm/animate/animation/position-update.js","webpack:///./node_modules/@antv/g2/esm/animate/animation/path-in.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","SHAPE_TO_TAGS","rect","circle","line","path","marker","text","polyline","polygon","image","ellipse","dom","SVG_ATTR_MAP","opacity","fillStyle","fill","fillOpacity","strokeStyle","strokeOpacity","stroke","x","y","rx","ry","width","height","x1","x2","y1","y2","lineCap","lineJoin","lineWidth","lineDash","lineDashOffset","miterLimit","font","fontSize","fontStyle","fontVariant","fontWeight","fontFamily","startArrow","endArrow","class","id","style","preserveAspectRatio","getPixelRatio","devicePixelRatio","distance","dx","dy","Math","sqrt","inBox","minX","minY","intersectRect","box1","box2","maxX","maxY","mergeRegion","region1","region2","min","max","isSamePoint","point1","point2","removeFromArray","arr","obj","index","indexOf","isBrowser","document","isParent","container","shape","isCanvas","parent","getParent","isAllowCapture","element","cfg","visible","capture","createSVGElement","type","createElementNS","createDom","Error","set","parentNode","appendChild","sortDom","sorter","el","childList","children","sort","fragment","createDocumentFragment","forEach","child","moveTo","targetIndex","siblings","Array","from","childNodes","filter","node","nodeType","nodeName","toLowerCase","target","currentIndex","insertBefore","targetNext","version","vMag","v","vRatio","u","vAngle","acos","getArcParams","startPoint","params","xRotation","PI","arcFlag","sweepFlag","xp","cos","sin","yp","lambda","diff","f","isNaN","cxp","cyp","cx","cy","theta","dTheta","startAngle","endAngle","SHAPE_ATTRS_MAP","applyAttrsToContext","context","attrs","attr","k","name_1","transform","setLineDash","parse","globalAlpha","drawChildren","region","draw","skipDraw","checkRefresh","canvas","refreshElements","parent_1","refresh","setChildrenRefresh","checkChildrenRefresh","hasChanged","isGroup","checkElementRefresh","clearChanged","elements","destroyed","bbox","cacheCanvasBBox","isInView","drawPath","arcParamsCache","currentPoint","startMovePoint","beginPath","command","tangent","getStartTangent","getEndTangent","lineTo","quadraticCurveTo","bezierCurveTo","arcParams","scaleX","scaleY","translate","rotate","scale","arc","closePath","len","refreshElement","changeType","_cacheCanvasBBox","getMergedRegion","minXArr","minYArr","maxXArr","maxYArr","cacheBox","validCache","getCanvasBBox","validBBox","getRefreshRegion","mergeView","viewRegion","atan2","_addDefaultArrow","isStart","rad","arrowShape","isArrowShape","rotateAtPoint","_addCustomizedArrow","arrowAttrs","arrowFill","arrowStroke","arrowLineWidth","restAttrs","getShortenOffset","addStartArrow","addEndArrow","setShadow","model","shadowOffsetX","shadowOffsetY","blur","shadowBlur","color","shadowColor","find","addShadow","setAttribute","removeAttribute","setTransform","matrix","join","console","warn","setClip","clip","getClip","hasAttribute","createPath","addClip","multiplyMatrix","a","b","out","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","multiplyVec2","invert","det","SPACES","PATH_COMMAND","RegExp","PATH_VALUES","parsePathString","pathString","paramCounts","h","q","z","String","replace","concat","catmullRomToBezier","crp","iLen","ellipsePath","res","pathToAbsolute","pathArray","pa0","dots","mx","my","start","crz","toUpperCase","pa","ii","jj","pop","kk","l2c","q2c","ax","ay","a2c","angle","large_arc_flag","sweep_flag","recursive","xy","f1","f2","_120","rx2","ry2","abs","asin","toFixed","df","f2old","x2old","y2old","c1","s1","c2","s2","tan","hx","hy","m1","m2","m3","m4","newres","split","pathToCurve","path2","p2","bx","by","X","Y","qx","qy","attrs2","pcoms1","pcoms2","pfirst","pcom","processPath","nx","ny","T","Q","fixArc","pp","pi","fixM","path1","a1","a2","seg","seg2","seglen","seg2len","parseFloat","p2s","parsePathArray","base3","p1","p3","p4","bezlen","x3","y3","x4","y4","z2","Tvalues","Cvalues","sum","ct","xbase","ybase","comb","curveDim","x0","y0","tvalues","bounds","b2ac","sqrtb2ac","t1","t2","mt","jlen","intersect","denominator","px","py","px2","py2","isPointInsideBBox","rectPath","w","box","r1","r2","r0","vb","bezierBBox","p1x","p1y","c1x","c1y","c2x","c2y","p2x","p2y","findDotsAtSegment","t13","pow","t12","t3","end","alpha","interHelper","bez1","bez2","justCount","bbox1","bbox2","isBBoxIntersect","n1","n2","dots1","dots2","di","di1","dj","dj1","ci","cj","is","intersection","x1m","y1m","x2m","y2m","pj","intr","segment1","segment2","interPathHelper","decasteljau","points","left","right","recurse","middlePoints","reverse","splitSegment","count","segments","leftSegments","map","segment","cmd","splitCurve","temp","fillPath","source","sourceLen","targetLen","ratio","segmentsToFill","floor","filled","reduce","unshift","isEqual","obj1","obj2","item","getMinDiff","del","add","modify","fillPathByDiff","diffMatrix","sourceSegment","targetSegment","dist","levenshteinDistance","changes","minPos","_splitPoints","former","formerEnd","_getSegmentPoints","formatPath","fromPath","toPath","_super","ShapeBase","this","arguments","getDefaultAttrs","lineAppendWidth","getShapeBase","getGroupBase","onCanvasChange","calculateBBox","getHitLineWidth","bboxMethod","halfLineWidth","isFill","isClipShape","isStroke","_applyClip","save","restore","_afterDraw","clipShape","getCanvasViewBox","getViewRange","canvasBBox","strokeAndFill","afterDrawPath","_a","isInShape","refX","refY","isInStrokeOrPath","Circle","absDistance","ellipseDistance","squareX","squareY","Ellipse","halfLineWith","HTMLElement","ImageShape","initAttrs","_setImage","img","isOnlyHitBox","_afterLoading","_this","image_1","Image","onload","callback","crossOrigin","src","Number","getAttribute","onAttrChange","originValue","sx","sy","swidth","sheight","drawImage","inLine","halfWidth","pointToLine","Line","setArrow","startArrowDistance","endArrowDistance","startArrowShape","endArrowShape","getTotalLength","getPoint","pointAt","Symbols","square","diamond","triangle","diffY","Marker","_resetParamsCache","_getR","radius","_getPath","method","symbol","paramsCache","isPointInPath","ctx","dcmp","onSegment","isInPolygon","isHit","point","hasArc","extractPolygons","polygons","polylines","isPointInStroke","prePoint","pointDistance","vec3","isInPolygons","Path","_setPathArr","getSegments","length_1","extractResutl","totalLength","_calculateCurve","_setTcache","subt","tCache","curve","nextSeg","segmentT","segmentL","segmentN","tempLength","endPoint","startTangent","endTangent","inPolyline","isClose","first","last","Polygon","PolyLine","_resetCache","Rect","inRect","r3","r4","Text","textAlign","textBaseline","_assembleFont","_setText","textArr","startsWith","_getSpaceingY","lineHeight","_drawTextArr","subY","spaceingY","subText","fillText","strokeText","_drawText","parentChildren","getChildren","clipPathEl","defsEl","removeChild","children_1","innerHTML","CROSSHAIR_Y","CROSSHAIR_X","NAME_CLASS","VALUE_CLASS","MARKER_CLASS","LIST_ITEM_CLASS","LIST_CLASS","TITLE_CLASS","CONTAINER_CLASS","Group","xArr","yArr","viewRange","allowDraw","isEntityGroup","afterAttrsChange","targetAttrs","canFill","canStroke","getBBox","shadow","_setColor","trim","test","addGradient","addPattern","getBoundingClientRect","clientX","clientY","top","elementFromPoint","isEqualNode","Dom","Element","HTMLDocument","setAttr","toDataURL","ImageData","createElement","getContext","putImageData","addArrow","getDefaultArrow","triangleDown","register","func","remove","getAll","_assembleMarker","symbols","symbolsFactory","_formatPath","newValue","getPointAtLength","Polyline","completed","pathRelatedAttrs","_assembleRect","parseRadius","BASELINE_MAP","middle","bottom","alphabetic","hanging","BASELINE_MAP_FOR_FIREFOX","ANCHOR_MAP","center","_setFont","browser","_b","baseline","textLen_1","arr_1","GraphEvent","event","bubbles","currentTarget","delegateTarget","delegateObject","defaultPrevented","propagationStopped","fromShape","toShape","propagationPath","originalEvent","timeStamp","preventDefault","stopPropagation","toString","Base","defaultCfg","getDefaultCfg","destroy","off","SHAPE_MAP","Container","Infinity","totalMatrix","getTotalMatrix","_applyChildrenMarix","applyMatrix","preTotalMatrix","addShape","args","_i","shapeType","addGroup","group","groupClass","tmpCfg","TmpGroupClass","getCanvas","getShape","ev","_findShape","invertFromMatrix","isClipped","timeline","preParent","setCanvas","setTimeline","_applyElementMatrix","compare","clear","getFirst","getChildByIndex","getLast","getCount","contain","findAll","fn","rst","findById","findByClassName","className","findAllByName","CLONE_CFGS","RESERVED_PORPS","getFormatFromAttrs","toAttrs","fromAttrs","getFormatToAttrs","props","checkExistedAttrs","animations","animation","onFrame","startTime","delay","duration","initAnimate","zIndex","getDefaultMatrix","applyTo","show","hide","setZIndex","toFront","toBack","resetMatrix","getMatrix","setMatrix","currentMatrix","parentMatrix","applyToMatrix","invertMatrix","clipCfg","Cons","clone","originAttrs","_cloneArrayAttr","cons","constructor","cfgName","isAnimatePaused","isPaused","animate","timer","initTimer","repeat","pauseCallback","resumeCallback","animateCfg","easing","_c","formatToAttrs","getTime","pathFormatted","addAnimator","stopAnimate","toEnd","pauseAnimate","pauseTime","_paused","_pauseTime","resumeAnimate","current","emitDelegation","eventObj","relativeShape","paths","getEvents","_loop_1","subName","emitDelegateEvent","this_1","events","eventName","emit","translateX","translateY","newMatrix","move","targetX","targetY","ratioX","ratioY","radian","rotateAtStart","regexLG","regexRG","regexPR","regexColorStop","addStop","steps","gradient","match","itemArr","addColorStop","parseStyle","gradientStr","exec","tanTheta","tanTheta2","createLinearGradient","parseLineGradient","fx","fy","fr","colors","createRadialGradient","parseRadialGradient","patternStr","pattern","createPattern","complete","parsePattern","getBBoxMethod","register_1","getMethod","rect_1","circle_1","polyline_1","polygon_1","text_1","path_1","line_1","ellipse_1","default","assembleFont","getTextWidth","getLineSpaceing","getTextHeight","util_1","offscreen_1","lineCount","isString","getOffScreenContext","isNil","includes","each","measureWidth","measureText","mergeBBox","mergeArrowBBox","is_nil_1","is_function_1","is_string_1","is_object_1","is_array_1","mix_1","each_1","upper_first_1","offScreenCtx","AbstractGroup","AbstractShape","_isInBBox","clearCacheBBox","calculateCanvasBBox","topLeft","topRight","bottomLeft","bottomRight","shadowLeft","shadowRight","shadowTop","shadowBottom","vec","inBBox","stops","Gradient","self","ATTR_MAP","shadowOpacity","SHADOW_DIMENSION","Shadow","_parseShadow","flag","config","keys","update","Arrow","_setDefaultPath","_setMarker","Clip","shapeEl","Pattern","Defs","defaultArrow","arrow","Canvas","autoDraw","renderer","srcElement","tagName","IDENTITY_MATRIX","elapsed","cProps","interf","val","toPathPoint","fromPathPoint","cPathPoint","matrixFn","_update","Timeline","animators","removeAnimator","isAnimating","stop","stopAllAnimations","animator","EVENTS","emitTargetEvent","bubbleEvent","isOverEvent","EventController","draggingShape","dragging","currentShape","mousedownShape","mousedownPoint","_eventCallback","_triggerEvent","_onDocumentMove","pointInfo","_getPointInfo","_emitEvent","_onDocumentMouseUp","_afterDrag","init","_bindEvents","addEventListener","_clearEvents","removeEventListener","_getEventObj","_getShape","clientPoint","getClientByEvent","getPointByEvent","leaveCanvas","preShape","cursor","_onmousedown","button","mousedownTimeStamp","_emitMouseoverEvents","_emitDragoverEvents","isCanvasEmit","_onmouseup","_ondragover","_onmousemove","timeWindow","isFirefox","initContainer","initDom","initEvents","initTimeline","getElementById","setDOMSize","eventController","changeSize","getRenderer","getCursor","setCursor","layerX","offsetX","layerY","offsetY","getPointByClient","clientInfo","touches","changedTouches","getClientByPoint","removeDom","clearEvents","getRefXY","preTest","pixelRatio","ceil","_clearFrame","clearRect","curShape","_getRefreshRegion","drawFrame","_startDraw","_drawAll","_drawRegion","propagationDelegate","graph_event_1","eventObject","mod","toRadian","g2_1","body","padding","chart","Chart","autoFit","theme","year","range","nice","tooltip","showCrosshairs","shared","position","label","render","cache","Map","util_2","getBBoxByArray","quadratic_1","cubic_1","arc_1","path_2_segments_1","is_number_equal_1","getExtraFromSegmentWithAngle","nextPoint","currentAndPre","currentAndNext","preAndNext","currentAngle","xExtra","yExtra","xAngle","yAngle","segmentsWithAngle","getPathBox","to_radian_1","mod_1","request_animation_frame_1","clear_animation_frame_1","extendStatics","setPrototypeOf","__proto__","__extends","__","__assign","assign","__rest","e","getOwnPropertySymbols","propertyIsEnumerable","__spreadArrays","il","jl","LAYER","DIRECTION","COMPONENT_TYPE","VIEW_LIFE_CIRCLE","GEOMETRY_LIFE_CIRCLE","PLOT_EVENTS","ELEMENT_STATE","GROUP_Z_INDEX","GROUP_ATTRS","ENGINES","getEngine","G","registerEngine","engine","isNumber","getChartSize","ele","size","getComputedStyle","clientWidth","parseInt","paddingLeft","paddingRight","clientHeight","paddingTop","paddingBottom","getElementSize","changeVisible","identityMatrix","getMatrixByAngle","getMatrixByTranslate","transformMat3","applyRotate","applyTranslate","translateMatrix","formatPadding","clearDom","regionToBBox","createBBox","getValueByPercent","percent","getCirclePoint","getBBoxWithClip","clipBBox","minX_1","maxX_1","minY_1","maxY_1","leftTop","leftBottom","rightTop","rightBottom","boxMinX","boxMaxX","boxMinY","boxMaxY","toPx","number","getTextPoint","offset","offsetPercent","LOCATION_FIELD_MAP","none","Component","initCfg","locationType","updateAutoRender","animateOption","appear","enter","leave","newCfg","updateInner","afterUpdate","setCapture","getLayoutBBox","getLocationType","getOffset","setOffset","setLocation","location","getLocation","fields","field","isList","isSlider","COPY_PROPERTIES","COPY_PROPERTIES_EXCLUDES","GroupComponent","shapesMap","isRegister","isUpdating","isInit","clearOffScreenCache","getChildComponentById","getElementByLocalId","localId","getElementId","getElementsByName","elem","getContainer","offScreenRender","offScreenGroup","updateElements","deleteElements","applyOffset","initEvent","removeEvent","getInnerLayoutBBox","applyMatrix2BBox","on","evt","once","initGroup","delegateEmit","createOffScreenGroup","getDelegateObject","moveElementTo","isComponent","component","renderInner","appendDelegateObject","registerElement","addComponent","Ctor","restCfg","inst","unregisterElement","addAnimation","elmentName","newElement","originOpacity","removeAnimation","elementName","originElement","updateAnimation","newAttrs","newGroup","originGroup","preElement","elementId","childComponent","origChildComponent","replaceAttrs","getReplaceAttrs","newClipShape","updateClip","registerNewGroup","clearUpdateStatus","parentObject","undefined","deleteArray","callbackAnimCfg","removeElement","charAtLength","str","charCodeAt","getMaxLabelWidth","labels","ellipsisLabel","isVertical","limitLength","labelLength","getLabelLength","codeLength","strLen","ellipsised","reseveLength","newText","startStr","endStr","startIndex","endIndex","startCodeLen","hasAdd","endCodeLen","ellipsisString","renderTag","tagCfg","content","maxLength","autoEllipsis","ellipsisPosition","background","tagGroup","backgroundStyle","textColor","activeTextColor","uncheckedColor","lineColor","regionColor","verticalAxisRotate","horizontalAxisRotate","LineAnnotation","autoRotate","renderLine","renderLabel","getLabelPoint","vector","TextAnnotation","resetLocation","textGroup","ArcAnnotation","renderArc","getArcPath","largeFlag","middlePoint","RegionAnnotation","renderRegion","ImageAnnotation","renderImage","getImageAttrs","DataMarkerAnnotation","direction","autoAdjust","coordinateBBox","display","renderText","renderPoint","getShapeAttrs","textAttrs","isVertival","lineLength","textShape","lineShape","overflow","factor","lineDisplay","pointStyle","lineStyle","textStyle","DataRegionAnnotation","regionStyle","xs","ys","pointsToBBox","RegionFilterAnnotation","layer","shapeIdx","adjustShapeAttrs","ShapeAnnotation","HtmlComponent","containerTpl","containerClassName","pointerEvents","resetStyles","applyStyles","initCapture","initVisible","defaultStyles","domStyles","applyChildrenStyles","cName","containerCss","styles","getElementsByClassName","applyStyle","cssName","resetPosition","HtmlAnnotation","alignX","alignY","html","domWidth","domHeight","round","getStatesStyle","stateStyles","styleName","state","AxisBase","ticks","tickLine","subTickLine","title","verticalFactor","verticalLimitLength","overlapOrder","tickStates","alignTick","displayWithLabel","autoHide","spacing","active","labelStyle","tickLineStyle","inactive","drawLine","drawTicks","drawTitle","getItems","setItems","items","updateItem","clearItems","itemGroup","setItemState","updateTickStates","hasState","getItemStates","clearItemsState","getItemsByState","getSidePoint","getSideVector","getTextAnchor","align","getTextBaseline","base","processOverlap","labelGroup","getLinePath","getTickLineItems","tickLineItems","tickLineLength","tickSegment","tick","getTickPoint","tickValue","tickId","getSubTickLineItems","subTickLineItems","subCount","tickLineCount","pre","next","getTickLineAttrs","tickItem","tickItems","defaultTickLineStyle","drawTick","tickLineGroup","drawTickLines","tickCfg","labelId","subTickLineItems_1","processTicks","drawLabels","applyTickStates","getLabelAttrs","labelCfg","formatter","defaultLabelStyle","afterProcessTicks_1","newStyle","getTitleAttrs","titleCfg","titleHeight","titlePoint","getAxisVector","angleTo","labelShape","labelStateStyle","tickLineId","tickLineShape","tickLineStateStyle","states","tickLineCfg","ellipseLabels","getDefault","ellipsisTail","ellipsisHead","ellipsisMiddle","isRotate","rotated","preBox","curBox","reversed","overlap","reserveOne","labelsGroup","hasHide","curBBox","equidistance","reserveFirst","reserveLast","reserveBoth","preLabel","firstBBox","second","interval","labelRotate","getAngle","maxWidth","isOverlap","setLabelsAngle","fixedAngle","unfixedAngle","isHorizontal","regionX","regionY","axisVector","normal","normalize","verticalVector","labelOffset","titleSpacing","autoProcessOverlap","hasAdjusted","util","verticalFactor_1","newAlign","large","sweep","vecLen","CrosshairBase","textBackground","renderBackground","textPoint","getRotateAngle","textId","textBBox","LineCrosshair","tangentAngle","backgroundColor","HtmlCrosshair","crosshairTpl","textTpl","resetText","initCrossHair","crosshairEl","textEl","alignText","GridBase","alternateColor","closed","getLineType","drawGrid","getAlternatePath","prePoints","regionPath","getGridPath","reversePoints","nextPath","getPathStyle","preItem","lineId","gridPath","regionId","isEven","drawAlternateRegion","lineType","firstPoint","radius_1","sweepFlag_1","LegendBase","layout","maxHeight","getDrawPoint","setDrawPoint","resetDraw","drawLegendContent","drawBackground","Category","currentPageIndex","totalPagesCnt","pageWidth","pageHeight","startX","startY","onNavigationBack","updateNavigation","getCurrentNavigationMatrix","onNavigationAfter","itemSpacing","itemMarginBottom","maxItemWidth","itemWidth","itemHeight","itemName","itemValue","itemStates","itemBackground","alignRight","nameStyle","unchecked","markerStyle","itemElement","offsetGroup","drawItem","getItemHeight","processItems","drawItems","itemContainerGroup","wrapped","subGroup","adjustNavigation","nameCfg","drawMarker","markerCfg","markerAttrs","drawItemText","textName","xPosition","groupId","subContainer","getLimitItemWidth","curX","nameShape","valueShape","applyItemStates","subGroups","navigation","drawNavigation","navigationBBox","pages","widthLimit","itemMarginBottom_1","cntPerPage_1","leftArrow","drawArrow","leftArrowBBox","rightArrow","origBBox","newBBox","rotateMap","up","down","itemStates_1","elName","statesStyle","ContinueLegend","track","rail","handler","slidable","tip","step","defaultLength","getValue","getCurrentValue","getRange","setRange","setValue","resetTrackClip","resetHandlers","bindSliderEvent","bindRailEvent","bindTrackEvent","drawRail","fixedElements","resetTrack","bindHandlersEvent","minValue","getValueByCanvasPoint","maxValue","preValue","curValue","currentValue","curDiff","dValue","drawLabel","labelAlign","alignAttrs","getLabelAlignAttrs","getRailPath","railCfg","getTrackColor","getTrackPath","getRailShape","getClipTrackAttrs","railBBox","getRailBBox","getPointByValue","getTrackAttrs","trackCfg","trackId","trackShape","trackAttrs","draggable","getRailCanvasBBox","isVertcal","resetHandler","getHandlerPath","handlerCfg","oneSixthWidth","triangleX","triangleY","handlerShape","railShape","minLabel","maxLabel","fixedVertail","fixedHorizontal","fitRailLength","minLabelBBox","maxLabelBBox","lengthField","changeRailLength","changeRailPosition","railHeight","maxLabelWidth","visibility","transition","boxShadow","borderRadius","marginBottom","margin","listStyleType","marginRight","float","marginLeft","Tooltip","customContent","itemTpl","xCrosshairTpl","yCrosshairTpl","showTitle","crosshairsRegion","crosshairs","renderCustomContent","resetTitle","renderItems","clearCrosshairs","setTitle","clearItemDoms","setCrossHairsVisible","xCrosshairDom","yCrosshairDom","getHtmlContentNode","cacheDoms","limitBox","getPointByPosition","outSides","getOutSides","getAlignPoint","resetCrosshairs","curContainer","replaceChild","titleDom","listDom","innerText","crosshairBox","resetCrosshair","croshairDom","checkCrosshair","domName","tplName","constName","toCSSGradient","substituteObj","domStr","itemDom","BACKGROUND_STYLE","LINE_STYLE","AREA_STYLE","idx","pointsToPath","dataToPath","smooth","values","getSmoothLinePath","linePathToAreaPath","areaPath","lineYPx","lineY","getAreaLineY","Trend","isArea","areaStyle","FOREGROUND_STYLE","HANDLER_STYLE","TEXT_STYLE","DEFAULT_STYLE","highLightFill","Handler","bindEvents","Slider","onMouseDown","prevX","pageX","prevY","pageY","containerDOM","getContainerDOM","onMouseMove","onMouseUp","offsetXRange","adjustOffsetRange","updateStartEnd","updateUI","oldStart","oldEnd","newStart","newEnd","foregroundStyle","handlerStyle","validCfg","minHandler","maxHandler","trend","trendCfg","minText","maxText","_d","_e","_f","silent","handlerHeight","foregroundShape","minTextShape","maxTextShape","handlerWidth","_dodgeText","minAttrs","maxAttrs","foreground","offsetRange","sorted","minBBox","maxBBox","DEFAULT_THEME","trackColor","thumbColor","hover","Scrollbar","onStartEvent","isMobile","startPos","bindLaterEvent","thumbOffset","endPos","updateThumbOffset","onTrackClick","thumbLen","newOffset","validateRange","onThumbMouseOver","onThumbMouseOut","originalValue","minThumbLen","renderTrackShape","renderThumbShape","trackLen","thumbShape","emitOffsetChange","LineAxis","CircleAxis","LineGrid","CircleGrid","CategoryLegend","ContinuousLegend","Continuous","HtmlTooltip","Html","dateRegex","createScaleByField","scaleDef","validData","getDefaultType","getName","alias","getAxisRegion","coordinate","isRect","TOP","RIGHT","BOTTOM","LEFT","getLineAxisRelativeRegion","isPolar","isTransposed","getCircleAxisRelativeRegion","convert","getAxisFactorByRegion","getAxisThemeCfg","getCircleAxisCenterRadius","circleCenter","isReflectY","startVector","normalVector","getAxisOption","axes","getAxisDirection","axisOption","def","getAxisTitleText","Facet","view","facets","createContainer","getData","generateFacets","renderViews","clearFacetViews","facetToView","facet","createView","beforeEachView","eachView","afterEachView","getLayer","FORE","createFacetViews","removeView","getFieldValues","getRegion","rows","cols","xIndex","yIndex","xRatio","yRatio","getDefaultTitleCfg","getTheme","processAxis","options","getOptions","coordinateOption","geometries","getXYFields","xOption","yOption","getXAxisOption","getYAxisOption","getFacetDataFilter","conditions","datum","condition","Facets","getFacet","registerFacet","ctor","Action","addAction","applyCfg","removeAction","CallbackAction","execute","ActionCache","getActionClass","actionName","actionOption","registerAction","ActionClass","createCallbackAction","action","polarToCartesian","centerX","centerY","angleInRadian","getSectorPath","startAngleInRadian","endAngleInRadian","innerRadius","innerStart","innerEnd","innerMiddlePoint","circlePathCommands","arcSweep","sectorPathCommands","shapeModel","getPointsBox","coordStartAngle","diffAngle","sourceShape","targetShape","isBetween","omit","uniq","sourceArray","targetArray","sourceArray_1","getXDimensionLength","getRadius","getDistanceToCenter","getCenter","isPointInCoordinate","invertPoint","getAngleByPoint","getCoordinateClipCfg","endState","getWidth","getHeight","startAngle_1","endAngle_1","center_1","startState","_convertArr","coord","tmp","catmullRom2bezier","constraint","isLoop","pointList","cp1","cp2","controlPointList","prevPoint","cps","hasConstraint","sub","d0","d1","v1","v2","cp0","smoothBezier","isInCircle","_points2path","getSplinePath","constaint","splinePath","convertPolarPath","cur","transposed","subPath","curPoint","xDim","angleRange","convertPoint","middleConvertPoint","_convertPolarPath","_filterFullCirleLine","BBox","fromRange","fromObject","configurable","contains","subBBox","merge","cut","TOP_LEFT","TOP_RIGHT","RIGHT_TOP","RIGHT_BOTTOM","BOTTOM_LEFT","BOTTOM_RIGHT","LEFT_TOP","LEFT_BOTTOM","shrink","gap","expand","exceed","collide","isPointIn","getMaskBBox","tolerance","maskBBox","getCurrentElement","getDelegationObject","isElementChange","gEvent","isMask","getMaskedElements","maskPath","maskShape","getMaskPath","getElements","pathToPoints","shapePoints","shapeBBox","getIntersectElements","getSiblingMaskElements","sibling","getSiblingPoint","geom","views","subView","getElementsByState","stateName","getElementsBy","getElementValue","record","getModel","getComponents","co","isInBox","getSilbings","normalPoint","getCoordinate","point2Normalize","isInRecords","records","xFiled","yField","isIn","getScaleByField","Context","actions","cacheMap","getAction","getCurrentPoint","getCurrentShape","isInPlot","isPointInPlot","isInComponent","components","Interaction","parseAction","actionStr","createAction","methodName","executeAction","actionObject","STEP_NAMES","GrammarInteraction","callbackCaches","emitCaches","initContext","stepArr","stepName","getActionCallback","bindEvent","trigger","offEvent","subSteps","actionArr","isAllowStep","currentStepName","isAllowExecute","getKey","isEnable","enterStep","afterExecute","actionCallback","debounce","wait","immediate","throttle","leading","trailing","nameArr","Interactions","getInteraction","registerInteraction","interaction","createThemeByStylesheet","styleSheet","shapeStyles","pointFillColor","pointSize","pointBorderColor","pointBorder","pointFillOpacity","pointActiveBorderColor","pointActiveBorder","selected","pointSelectedBorderColor","pointSelectedBorder","pointInactiveFillOpacity","pointInactiveBorderOpacity","hollowPoint","hollowPointFillColor","hollowPointBorder","hollowPointBorderColor","hollowPointBorderOpacity","hollowPointSize","hollowPointActiveBorderColor","hollowPointActiveBorderOpacity","hollowPointSelectedBorder","hollowPointSelectedBorderColor","hollowPointSelectedBorderOpacity","hollowPointInactiveBorderOpacity","area","areaFillColor","areaFillOpacity","areaActiveFillOpacity","areaSelectedFillOpacity","areaInactiveFillOpacity","hollowArea","hollowAreaBorderColor","hollowAreaBorder","hollowAreaBorderOpacity","hollowAreaActiveBorder","hollowAreaSelectedBorder","hollowAreaInactiveBorderOpacity","intervalFillColor","intervalFillOpacity","intervalActiveBorderColor","intervalActiveBorder","intervalSelectedBorderColor","intervalSelectedBorder","intervalInactiveFillOpacity","intervalInactiveBorderOpacity","hollowInterval","hollowIntervalFillColor","hollowIntervalBorderColor","hollowIntervalBorder","hollowIntervalBorderOpacity","hollowIntervalActiveBorderColor","hollowIntervalActiveBorder","hollowIntervalActiveBorderOpacity","hollowIntervalSelectedBorderColor","hollowIntervalSelectedBorder","hollowIntervalSelectedBorderOpacity","hollowIntervalInactiveBorderColor","hollowIntervalInactiveBorder","hollowIntervalInactiveBorderOpacity","lineBorderColor","lineBorder","lineBorderOpacity","lineActiveBorder","lineSelectedBorder","lineInactiveBorderOpacity","axisStyles","axisTitleSpacing","axisTitleTextFillColor","axisTitleTextFontSize","axisTitleTextLineHeight","axisLabelOffset","axisLabelFillColor","axisLabelFontSize","axisLabelLineHeight","axisLineBorder","axisLineBorderColor","axisTickLineBorder","axisTickLineBorderColor","axisTickLineLength","axisGridStyles","axisGridBorderColor","axisGridBorder","axisGridLineDash","legendStyles","legendMarkerSpacing","legendCircleMarkerSize","legendMarkerColor","legendItemNameFillColor","legendItemNameFontSize","legendItemNameLineHeight","legendItemNameFontWeight","flipPage","legendItemSpacing","legendItemMarginBottom","legendPadding","defaultColor","brandColor","columnWidthRatio","maxColumnWidth","minColumnWidth","roseWidthRatio","multiplePieWidthRatio","colors10","paletteQualitative10","colors20","paletteQualitative20","shapes","sizes","geometry","middleAngle","funnel","pyramid","dot","dash","hv","vh","hvh","vhv","bowtie","hexagon","cross","plus","hyphen","schema","candle","edge","axis","common","grid","legend","continuous","sliderRailHeight","sliderRailWidth","sliderRailFillColor","sliderRailBorderColor","sliderRailBorder","sliderLabelTextFillColor","sliderLabelTextFontSize","sliderLabelTextLineHeight","sliderHandlerWidth","sliderHandlerFillColor","sliderHandlerBorderColor","showContent","follow","showMarkers","enterable","shadowOffSetY","tooltipCrosshairsBorderColor","tooltipCrosshairsBorder","tooltipContainerFillColor","tooltipContainerFillOpacity","tooltipContainerShadow","tooltipContainerBorderRadius","tooltipTextFillColor","tooltipTextFontSize","tooltipTextLineHeight","marginTop","annotation","annotationArcBorderColor","annotationArcBorder","annotationLineBorderColor","annotationLineDash","annotationLineBorder","annotationTextFillColor","annotationTextBorderColor","annotationTextBorder","annotationTextFontSize","annotationRegionBorder","annotationRegionBorderColor","annotationRegionFillColor","annotationRegionFillOpacity","dataMarker","annotationDataMarkerLineLength","dataRegion","slider","scrollbar","labelFillColor","labelFontSize","labelBorderColor","labelBorder","fillColorDark","labelFillColorDark","fillColorLight","labelFillColorLight","innerLabels","innerLabelFillColor","innerLabelFontSize","innerLabelBorderColor","innerLabelBorder","pieLabels","labelHeight","labelLine","labelLineBorder","BLACK_COLORS","WHITE_COLORS","QUALITATIVE_10","Themes","paletteSemanticRed","paletteSemanticGreen","paletteSemanticYellow","axisLineDash","axisTitleTextFontWeight","axisSubTickLineBorderColor","axisSubTickLineLength","axisSubTickLineBorder","axisLabelFontWeight","legendTitleTextFillColor","legendTitleTextFontSize","legendTitleTextLineHeight","legendTitleTextFontWeight","legendMarkerSize","legendSquareMarkerSize","legendLineMarkerSize","sliderLabelTextFontWeight","sliderHandlerHeight","sliderHandlerBorder","annotationTextLineHeight","annotationTextFontWeight","tooltipCrosshairsLineDash","tooltipTextFontWeight","labelLineHeight","labelFontWeight","innerLabelLineHeight","innerLabelFontWeight","labelLineBorderColor","pointBorderOpacity","hollowPointActiveBorder","areaActiveFillColor","areaSelectedFillColor","hollowAreaActiveBorderColor","hollowAreaSelectedBorderColor","intervalActiveBorderOpacity","intervalSelectedBorderOpacity","registerTheme","snapEqual","value1","value2","filterYValue","yScale","getYScale","yValue","originData","getXDistance","isCategory","scaleValues","numericValue","getTooltipValueScale","attributes_1","attributes","attribute","getAttributesForLegend","tmpScale","getScale","isLinear","xScale","getXScale","findDataByPoint","geometryType","xField","xValue","rangeMax","rangeMin","getXValueByPoint","firstXValue","firstYValue","lastXValue","isYArray","firstIdx","lastIdx","middleIdx","getTooltipItems","tooltipTitle","titleField","getFields","scales","getText","getTooltipTitle","tooltipOption","addItem","mappingData","callbackParams","itemCfg","fields_1","valueScale","eachValue","getTooltipValue","nameScale","groupScales","getGroupScales","getTooltipName","parsePadding","paddingArray","LOAD_COMPONENT_CONTROLLERS","registerComponentController","plugin","CoordinateController","option","wrapperOption","hasAction","isTheta","C","transpose","execActions","adjust","reflect","dim","getOption","includeActions","Event","fromData","defaultLayout","getController","controller","ScalePool","syncScales","createScale","finalScaleDef","cacheScaleMeta","getScaleMeta","cacheScale","cacheScaleDef","sync","scaleKeys","syncKey","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","isContinuous","change","sm","newScale","syncScale","getSyncKey","removeFromSyncScales","scaleMeta","deleteScale","delete","PaddingCal","inc","getPadding","calculatePadding","isAutoPadding","viewBBox","paddingCal","axisComponents","paddingComponents","otherComponents","AXIS","LEGEND","SLIDER","SCROLLBAR","GRID","TOOLTIP","bboxObject","componentPadding","componentBBox","View","controllers","interactions","limitInPlot","usedControllers","scalePool","layoutFunc","isPreMouseInPlot","isDataChanged","isCoordinateChanged","createdScaleKeys","onCanvasEvent","createViewEvent","doPlotEvent","onDelegateEvents","backgroundGroup","middleGroup","foregroundGroup","appendPadding","syncViewPadding","themeObject","setLayout","calculateViewBBox","initComponentController","initOptions","isUpdate","BEFORE_RENDER","paint","AFTER_RENDER","BEFORE_CLEAR","filteredData","coordinateInstance","getRootView","AFTER_CLEAR","BEFORE_DESTROY","filters","legendOption","scaleOption","guide","coordinateCfg","coordinateController","facetInstance","status","updateOptions","opt","existInteraction","interaciton","createInteraction","removeInteraction","changeData","BEFORE_CHANGE_DATA","AFTER_CHANGE_DATA","sharedOptions","legends","removedView","g","getYScales","tmpMap","getScalesByDim","dimType","defaultKey","getScaleKey","BG","MID","getLegendAttributes","getGroupAttributes","getXY","xScales","yScales","showTooltip","hideTooltip","lockTooltip","unlockTooltip","isTooltipLocked","getSnapRecords","dataArray","dataLen","snapRecords","filterData","every","filterFieldData","adjustCoordinate","curStart","curEnd","bl","tr","renderDataRecursive","BEFORE_PAINT","renderPaddingRecursive","renderLayoutRecursive","renderBackgroundStyleShape","renderPaintRecursive","AFTER_PAINT","backgroundStyleRectShape","initComponents","autoPadding","syncPadding_1","doLayout","paintGeometries","renderComponents","currentScaleDef","mergedScaleDef","doFilterData","createCoordinate","initGeometries","renderFacet","controllerName","currentInPlot","TYPE","MOUSE_LEAVE","LEAVE","MOUSE_ENTER","ENTER","createOrUpdateScales","scaleDefs","getGeometryScales","adjustScales","getScaleFields","groupedFields","getGroupedFields","getGroupFields","adjustCategoryScaleRange","xyScales","scaleOptions","isIdentity","isFullCircle","doAnimation","canvasRegion","annotations","geometryOption","createGeometry","interactionOption","viewOption","annotationComponent","annotationOption","eventCallback","rest","geometry_1","registerGeometry","labelsContainer","localRefresh","supportCSSTransform","defaultInteractions","wrapperElement","onResize","forceFit","updateCanvasStyle","bindAutoFit","initDefaultInteractions","BEFORE_CHANGE_SIZE","AFTER_CHANGE_SIZE","unbindAutoFit","verticalAlign","Controller","includeOption","ANIMATIONS_MAP","getAnimation","registerAnimation","DEFAULT_ANIMATE_CFG","GEOMETRY_ANIMATE_CFG","GEOMETRY_GROUP_APPEAR_ANIMATION","getDefaultAnimateCfg","animateType","doAnimate","parsedAnimateCfg","parseAnimateConfig","animateFunction","shapeFactory","offscreenGroup","getShapeType","drawShape","setShapeInfo","getOffscreenGroup","newShape","origin","syncShapeStyle","getStates","getAnimateCfg","setState","stateStatus","offscreenShape","clearStates","labelBBox","stateOption","defaultShapeType","stateTheme","getStateStyle","shapeKey","stateCfg","shapeStyle","cfg_1","AFTER_DRAW_ANIMATE","BEFORE_DRAW_ANIMATE","GroupCtor","newClip","newChildren","name_2","GEOMETRY_LABELS_MAP","GEOMETRY_LABELS_LAYOUT_MAP","getGeometryLabel","registerGeometryLabel","getGeometryLabelLayout","registerGeometryLabelLayout","layoutFn","ShapeFactoryBase","getShapePoints","shapePoint","getPoints","getDefaultPoints","getDefaultStyle","geometryTheme","getMarker","parsePath","parsedPath","convertNormalPath","parsePoint","parsePoints","ShapeFactoryMap","registerShapeFactory","factoryName","geomObj","registerShape","factory","shapeObj","getShapeFactory","isModelChange","currentModel","preModel","parseFields","Geometry","elementsMap","attributeOption","lastElementsMap","generatePoints","beforeMappingData","adjusts","idFields","hasSorted","sortable","userTheme","positionCfg","createAttrOption","adjustCfg","adjustOption","styleFunc","styleOption","secondParam","thirdParam","labelOption","customInfo","customOption","setCfg","initAttributes","processData","adjustScale","lastAttributeOption","defaultSize","beforeMapping","mappingArray","eachGroup","mapping","createElements","canDoGroupAnimation","yMinPoint","getYMinValue","minYPoint","doGroupAppearAnimate","renderLabels","deletedElement","geometryLabel","getDefaultValue","attrName","getAttributeValues","length_2","getAdjust","adjustType","getShapeMarker","shapeName","xVal","yVal","length_3","dodgeAdjust","dodgeBy","attributeType","eachOpt","length_4","groupFields","length_5","attributeName","getShapes","xScale_1","xField_1","updateStackRange","createShapePointsCfg","normalizeValues","mappingDatum","shapeCfg","getDrawCfg","defaultStyle","getStyleCfg","nextPoints","subIndex","length_6","currentShapeCfg","preShapeCfg","getLabelType","coordinateType","labelType","attrCfg","attrType","AttributeCtor","state_1","categoryScales","groupedArray","groupData","beforeAdjust","subData","subLen","categoryScales_1","adjustData","adjustNames","dodgeRatio","reverseOrder","adjustInstance","process","appendConditions","groups","array","values_1","mergeArray","tmpMin","tmpMax","length_7","currentData","generateShapePoints","nextData","shapeAttr","newRecord","_origin","names","mappingRecord","rstX","rstY","xLen","yLen","labelsMap","labelsRenderer","filterLabelsById","labelChildren","rotateRadian","getRotateMatrix","findLabelTextShape","getlLabelBackgroundInfo","labelItem","boxPadding","rotation","Labels","lastShapesMap","createOffscreenGroup","items_1","renderLabelLine","renderLabelBackground","adjustLabel","data_1","origin_1","coordinate_1","currentAnimateCfg_1","updateAnimateCfg_1","currentChildren_1","currentChild","deleteShape","shapeAppendCfg","isShape","layouts","labelShapes_1","geometryShapes_1","labelItems","labelLineCfg","labelContentShape","backgroundShape","labelShapes","GeometryLabel","getLabelItems","mapppingArray","labelCfgs","getLabelCfgs","labelContent","total","getLabelAlign","getLabelsRenderer","getGeometryShapes","getDefaultLabelCfg","getThemedLabelCfg","defaultLabelCfg","setLabelPosition","labelPointCfg","getDefaultOffset","getOffsetVector","getLabelOffset","offsetPoint","getDimValue","centroid","getPolygonCentroid","getLabelId","labelScales","callbackCfg","originText","getLabelText","originValues","labelTexts","subVal","VERSION","antvDark","legendSpacing","isValueEmpty","isYNil","getPathPoints","connectNulls","showSinglePoint","filtered","getStyle","sizeName","splitPoints","eachY","LineSymbols","getLineMarker","getSinglePath","getPath","isStack","topPoints","bottomPoints","topPath","bottomPath","getRangePath","shapeAttrs","eachLinePoints","getShapeInfo","getPointsAndData","registeredShape","topLinePoints_1","bottomLinePoints_1","pointsData","parsedPoints","pathPoints","eachPoints","getConstraint","yItem","Area","startOnZero","Edge","Heatmap","paletteCache","prepareRange","prepareSize","prepareGreyScaleBlurredCircle","drawWithRange","clearShadowCanvasCtx","colorField","row","getDefaultSize","grayScaleBlurredCanvas","getGrayScaleBlurredCanvas","valueField","getShadowCanvasCtx","drawGrayScaleBlurredCircle","colored","getImageData","colorize","imageShape","getImageShape","shadowCanvas","colorAttr","pixels","palette","rgb2arr","getRectPoints","isPyramid","yMin","yMax","xMin","xMax","getRectPath","isClosed","getFunnelPath","isInPolar","xValues","sourceArr","findMinDistance","normalizedSize","wr","mergeData","getDodgeCount","xDimensionLength","normalizedMaxColumnWidth","normalizedMinColumnWidth","Interval","sizeAttr","MarkerSymbols","diffX","SHAPES","drawPoints","pointPosition","points_1","Point","subX","xOffset","yOffset","Schema","getCPath","to","getQPath","getArcShapePath","arc1","arc2","getArcShapeWeightPath","getSmoothPath","getVHVPath","getTickPoints","getInterpolateShapeAttrs","interpolatePoints","interpolatePoint","nextX","nextY","middleX","middleY","interpolateCallback","getInterpolatePoints","getInterpolatePath","parseValue","min1","max1","median","getBoxPoints","pointsArray","halfSize","getCandleYValues","targetLength","padValue","padEnd","sourceLength","getCandlePoints","yValues","getRectAttrs","IntervalLabel","getLabelValueDir","dir","point0","p0","nextP0","nextP1","HALF_PI","PolarLabel","labelEmit","arcPoint","isToMiddle","getMiddlePoint","getArcPoint","getPointAngle","isLabelEmit","labelPositionCfg","getLabelRotate","labelAngle","PieLabel","isLabelLimit","plotRange","invisible","overlapping","endY","totalHeight","MIN_VALUE","boxes","targets","pos","previousBox","posInCompositeBox","Greedy","bitmap","xGap","yGap","hasGap","fillGap","adjustLabelPosition","getAxes","deg","getProjection","scalars","isProjectionOverlap","projection1","projection2","isIntersect","isIntersectRect","rect1Points","rect2Points","shouldInShape","shouldInShapeSingle","hasSome","dones","some","done","checkShapeOverlap","leftText","rightText","doScaleAnimate","endMatrix","direct","scaledMatrix","transformShape","arcPath","getArcStartPoint","getArcInfo","arcPaths","firstArcPathCommand","lastArcPathCommand","firstIndex","lastIndex","firstStartPoint","lastStartPoint","firstStartAngle","firstEndAngle","lastStartAngle","lastEndAngle","doShapeZoom","getFactTitleConfig","getAnglePoint","renderTitle","avgAngle","facetR","facetData","columnValue","columnField","columnIndex","columnValuesLength","rowValue","rowField","rowIndex","rowValuesLength","List","colValues","getPageCount","getRowCol","col","pageSize","Matrix","columnTitle","rowTitle","facetIndex","Mirror","columnValues","rowValues","Tree","afterChartRender","drawLines","rootFacet","getRows","getChildFacets","setRegion","forceColIndex","xWidth","yWidth","leafs","isLeaf","levelFacets_1","getFacetsByLevel","originColIndex","getRegionIndex","level","addFacetLines","subFacet","subRegion","middle1","middle2","getMedian","getNormalizedValue","scaled","_","num","ANNOTATIONS_AFTER_RENDER","Annotation","foregroundContainer","backgroundContainer","onAfterRender","updated","updateOrCreate","getCacheKey","syncCache","updateCache","doWhat","createAnnotation","getAnnotationTheme","getAnnotationCfg","isTop","NONE","ANNOTATION","extra","regionFilter","parsePosition","xPos","yPos","parsePercentPosition","getRegionPoints","viewData","startXValue","endXValue","xPercent","yPercent","getCoordinateBBox","sp","ep","textContent","_g","_h","apply_1","shapes_1","addShapes_1","_j","render_1","restOptions","_k","html_1","getComponentContainer","newCache","getGridThemeCfg","getLineGridItems","getTicks","preTick","currentTick","middleValue","getCircleGridItems","showGrid","axisTheme","userGrid","themeGrid","OMIT_CFG","AXIS_DEFAULT_ANIMATE_CFG","Axis","gridContainer","axisContainer","updatedCache","updateXAxes","updateYAxes","has","xAxisOption","axisId","getId","gridId","getLineAxisCfg","createLineAxis","getLineGridCfg","createLineGrid","RADIUS","getCircleAxisCfg","createCircleAxis","getCircleGridCfg","CIRCLE","createCircleGrid","yAxisOption","titleText","axisThemeCfg","optionWithTitle","isAxisVertical","canvasWidth","canvasHeight","gridThemeCfg","gridCfg","verticalScale","directionToPosition","parentBBox","tl","br","getMappingValue","restArgs","setMarkerSymbol","getLegendLayout","getLegendOption","getDirection","Legend","layoutBBox","maxSize","getCategoryLegendSizeCfg","existCo","getComponentById","customCfg","getCategoryCfg","createCustomLegend","loopLegends","getContinuousCfg","createFieldLegend","getGeometries","doEach","looped","createContinuousLegend","createCategoryLegend","containMin","containMax","attrValue","scaleValue","attrLegendCfg","mergeLegendCfg","custom","themeMarker","userMarker","customItems","getCustomLegendItems","field_1","colorAttr_1","shapeAttr_1","defaultColor_1","isInPolar_1","getLegendItems","baseCfg","categoryCfg","vw","onChangeFn","resetMeasure","onValueChange","changeViewData","getSliderCfg","updateSlider","createSlider","measureSlider","setTimeout","getMinMaxText","getThemeOptions","ticks_1","groupedData","dataSize","xTickCount","minIndex","maxIndex","isLocked","isVisible","getTitle","dataPoint","getTooltipCfg","lastItems","lastTitle","tooltipMarkersGroup","renderTooltip","renderTooltipMarkers","isCrosshairsFollowCursor","renderCrosshairs","xCrosshair","yCrosshair","guideGroup","tooltipCrosshairsGroup","findItemsFromView","itemArr_1","snapItem","items_2","aItem","yDistance","uniqItems","subItem","isCursorEntered","processOption","processCustomContent","currentCustomContent","getTooltipMarkersGroup","items_3","crosshairsType","renderXCrosshairs","renderYCrosshairs","tooltipCfg","getViewWithGeometry","getTooltipCrosshairsGroup","getCrosshairsText","textCfg","firstItem","getGuideGroup","getTooltipItemsByHitShape","getTooltipItemsByFindData","dataArray_1","geometries_1","tooltipItems","childView","getValidScrollbarCfg","originalAnimate","getScrollRange","updateScrollbar","createScrollbar","measureScrollbar","getScrollbarComponentCfg","cnt","xScaleCfg","yScalesCfg","getStep","getCnt","startIdx","endIdx","realConfig","categorySize","ActiveRegion","xValue_1","elements_1","firstBBox_1","lastBBox_1","groupBBox_1","appendRatio","firstElement","lastElement","innterRadius","TooltipAction","lastTimeStamp","Date","preLoc","curLoc","SiblingTooltip","siblingPoint","EllipsisText","tipContent","tooltipStyles","StateBase","setElementState","enable","setStateEnable","clearViewState","getItem","ElementState","ignoreListItemStates","isItemIgnore","list","setStateByComponent","setElementsStateByItem","setStateByElement","isMathItem","event_1","toggle","reset","ElementActive","LinkByColor","getColorScale","getLinkPath","nextElement","nextBBox","addLinkShape","linkByElement","getElementsByField","group_1","linkGroup","count_1","nextEl","removeLink","link","unlink","ElementRangeState","isStarted","effectSiblings","effectByRecord","setSiblingsState","allElements","setSiblingsStateByRecord","setElementsState","effectElements","ElementRangeActive","ElementSingleState","ElementSingleActive","clearHighlight","setHighlightBy","INACTIVE","ACTIVE","ElementHighlight","setElementHighlight","activeElements","allCancel_1","highlight","HighlightColor","highlightElements","HighlightX","ElementRangeHighlight","ElementSingleHighlight","ElementRangeSelected","ElementMultipleSelected","ElementSingleSelected","ListState","ignoreItemStates","getTriggerListInfo","info","getAllowComponents","allowSetStateByElement","clearAllComponentsState","componentNames","allowSetStateByItem","ignoreStates","setItemsState","triggerInfo","ListActive","ListHighlight","activeItems","ListSelected","ListUnchecked","MaskBase","starting","moving","preMovePoint","emitEvent","createMask","maskAttrs","getMaskAttrs","updateMask","moveStart","moveEnd","resize","CircleMask","RectMask","clampPoint","DimRect","inPlot","normalStart","normalEnd","PathMask","addPoint","SmoothPathMask","getSpline","CursorAction","pointer","crosshair","help","eResize","wResize","nResize","sResize","neResize","nwResize","seResize","swResize","nsResize","ewResize","DataFilter","filterView","unCheckedItems","scale_1","names_1","min_1","max_1","getFilter","RangeFilter","dims","hasDim","normalCurrent","reRender","SiblingFilter","ElementFilter","maskElements_1","byRecord","filterByRecord","filterByBBox","maskElements","ButtonAction","buttonGroup","buttonCfg","activeStyle","getButtonCfg","drawButton","buttonShape","Drag","dragStart","drag","Move","isMoving","startMatrix","ScaleTranslate","cfgFields","cacheScaleDefs","resetDim","startCache","noramlCurrent","translateDim","translateLinear","zoomRatio","zoomIn","zoom","zoomDim","zoomOut","dRatio","zoomLinear","toMin","toMax","isPointInView","isWheelDown","deltaY","greedy","totalHeight_1","lineHeight_1","plotRange_1","halves_1","half","maxLabelsCountForOneSide","isRight","rPow2","dyPow2","antiCollision","innerPoint","itemX","itemY","maxTimes","dxdy","maxDelta","param","nt","times","accessedCache","spiralFill","label1","label2","regionMinX","regionMinY","regionMaxX","regionMaxY","finalX","finalY","labels_1","separateLabels","totalR","labelsContainerRange","dxPow2","dx_offset","smoothConnector","atan","breakPoint","breakPoint3","xSign","slope1","slope2","E","drawLabelline","toRGB","isContrastColorWhite","moveInShape","groupedLabels","sortedCollections","sortedLabels","sortLabels","downFail","inRight","inflectionPoint","totalOffset","seperateLabels","halfHeight","originalPos","pathCommands","curStartAngle","curEndAngle","preStartAngle","preEndAngle","diffStartAngle","diffEndAngle","onFrameStartAngle","onFrameEndAngle","showEnable","processing","rollback","Util"],"mappings":"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","file":"about.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([266,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export var SHAPE_TO_TAGS = {\n    rect: 'path',\n    circle: 'circle',\n    line: 'line',\n    path: 'path',\n    marker: 'path',\n    text: 'text',\n    polyline: 'polyline',\n    polygon: 'polygon',\n    image: 'image',\n    ellipse: 'ellipse',\n    dom: 'foreignObject',\n};\nexport var SVG_ATTR_MAP = {\n    opacity: 'opacity',\n    fillStyle: 'fill',\n    fill: 'fill',\n    fillOpacity: 'fill-opacity',\n    strokeStyle: 'stroke',\n    strokeOpacity: 'stroke-opacity',\n    stroke: 'stroke',\n    x: 'x',\n    y: 'y',\n    r: 'r',\n    rx: 'rx',\n    ry: 'ry',\n    width: 'width',\n    height: 'height',\n    x1: 'x1',\n    x2: 'x2',\n    y1: 'y1',\n    y2: 'y2',\n    lineCap: 'stroke-linecap',\n    lineJoin: 'stroke-linejoin',\n    lineWidth: 'stroke-width',\n    lineDash: 'stroke-dasharray',\n    lineDashOffset: 'stroke-dashoffset',\n    miterLimit: 'stroke-miterlimit',\n    font: 'font',\n    fontSize: 'font-size',\n    fontStyle: 'font-style',\n    fontVariant: 'font-variant',\n    fontWeight: 'font-weight',\n    fontFamily: 'font-family',\n    startArrow: 'marker-start',\n    endArrow: 'marker-end',\n    path: 'd',\n    class: 'class',\n    id: 'id',\n    style: 'style',\n    preserveAspectRatio: 'preserveAspectRatio',\n};\nexport var EVENTS = [\n    'click',\n    'mousedown',\n    'mouseup',\n    'dblclick',\n    'contextmenu',\n    'mouseenter',\n    'mouseleave',\n    'mouseover',\n    'mouseout',\n    'mousemove',\n    'wheel',\n];\n//# sourceMappingURL=constant.js.map","export function getPixelRatio() {\n    return window ? window.devicePixelRatio : 1;\n}\n/**\n * 两点之间的距离\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 结束点 x\n * @param {number} y2 结束点 y\n */\nexport function distance(x1, y1, x2, y2) {\n    var dx = x1 - x2;\n    var dy = y1 - y2;\n    return Math.sqrt(dx * dx + dy * dy);\n}\n/**\n * 是否在包围盒内\n * @param {number} minX   包围盒开始的点 x\n * @param {number} minY   包围盒开始的点 y\n * @param {number} width  宽度\n * @param {number} height 高度\n * @param {[type]} x      检测点的 x\n * @param {[type]} y      监测点的 y\n */\nexport function inBox(minX, minY, width, height, x, y) {\n    return x >= minX && x <= minX + width && y >= minY && y <= minY + height;\n}\nexport function intersectRect(box1, box2) {\n    return !(box2.minX > box1.maxX || box2.maxX < box1.minX || box2.minY > box1.maxY || box2.maxY < box1.minY);\n}\n// 合并两个区域\nexport function mergeRegion(region1, region2) {\n    if (!region1 || !region2) {\n        return region1 || region2;\n    }\n    return {\n        minX: Math.min(region1.minX, region2.minX),\n        minY: Math.min(region1.minY, region2.minY),\n        maxX: Math.max(region1.maxX, region2.maxX),\n        maxY: Math.max(region1.maxY, region2.maxY),\n    };\n}\n/**\n * 判断两个点是否重合，点坐标的格式为 [x, y]\n * @param {Array} point1 第一个点\n * @param {Array} point2 第二个点\n */\nexport function isSamePoint(point1, point2) {\n    return point1[0] === point2[0] && point1[1] === point2[1];\n}\nexport { default as isNil } from '@antv/util/lib/is-nil';\nexport { default as isString } from '@antv/util/lib/is-string';\nexport { default as isFunction } from '@antv/util/lib/is-function';\nexport { default as isArray } from '@antv/util/lib/is-array';\nexport { default as each } from '@antv/util/lib/each';\nexport { default as toRadian } from '@antv/util/lib/to-radian';\nexport { default as mod } from '@antv/util/lib/mod';\nexport { default as isNumberEqual } from '@antv/util/lib/is-number-equal';\nexport { default as requestAnimationFrame } from '@antv/util/lib/request-animation-frame';\nexport { default as clearAnimationFrame } from '@antv/util/lib/clear-animation-frame';\n//# sourceMappingURL=util.js.map","export function removeFromArray(arr, obj) {\n    var index = arr.indexOf(obj);\n    if (index !== -1) {\n        arr.splice(index, 1);\n    }\n}\nexport var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nexport { default as isNil } from '@antv/util/lib/is-nil';\nexport { default as isFunction } from '@antv/util/lib/is-function';\nexport { default as isString } from '@antv/util/lib/is-string';\nexport { default as isObject } from '@antv/util/lib/is-object';\nexport { default as isArray } from '@antv/util/lib/is-array';\nexport { default as mix } from '@antv/util/lib/mix';\nexport { default as each } from '@antv/util/lib/each';\nexport { default as upperFirst } from '@antv/util/lib/upper-first';\n// 是否元素的父容器\nexport function isParent(container, shape) {\n    // 所有 shape 都是 canvas 的子元素\n    if (container.isCanvas()) {\n        return true;\n    }\n    var parent = shape.getParent();\n    var isParent = false;\n    while (parent) {\n        if (parent === container) {\n            isParent = true;\n            break;\n        }\n        parent = parent.getParent();\n    }\n    return isParent;\n}\nexport function isAllowCapture(element) {\n    // @ts-ignore\n    return element.cfg.visible && element.cfg.capture;\n}\n//# sourceMappingURL=util.js.map","import { toArray } from '@antv/util';\nimport { SHAPE_TO_TAGS } from '../constant';\n/**\n * 创建并返回图形的 svg 元素\n * @param type svg类型\n */\nexport function createSVGElement(type) {\n    return document.createElementNS('http://www.w3.org/2000/svg', type);\n}\n/**\n * 创建并返回图形的 dom 元素\n * @param  {IShape} shape 图形\n * @return {SVGElement}\n */\nexport function createDom(shape) {\n    var type = SHAPE_TO_TAGS[shape.type];\n    var parent = shape.getParent();\n    if (!type) {\n        throw new Error(\"the type \" + shape.type + \" is not supported by svg\");\n    }\n    var element = createSVGElement(type);\n    if (shape.get('id')) {\n        element.id = shape.get('id');\n    }\n    shape.set('el', element);\n    shape.set('attrs', {});\n    // 对于 defs 下的 dom 节点，parent 为空，通过 context 统一挂载到 defs 节点下\n    if (parent) {\n        var parentNode = parent.get('el');\n        if (parentNode) {\n            parentNode.appendChild(element);\n        }\n        else {\n            // parentNode maybe null for group\n            parentNode = parent.createDom();\n            parent.set('el', parentNode);\n            parentNode.appendChild(element);\n        }\n    }\n    return element;\n}\n/**\n * 对 dom 元素进行排序\n * @param {IElement} element  元素\n * @param {sorter}   function 排序函数\n */\nexport function sortDom(element, sorter) {\n    var el = element.get('el');\n    var childList = toArray(el.children).sort(sorter);\n    // create empty fragment\n    var fragment = document.createDocumentFragment();\n    childList.forEach(function (child) {\n        fragment.appendChild(child);\n    });\n    el.appendChild(fragment);\n}\n/**\n * 将 dom 元素移动到父元素下的指定位置\n * @param {SVGElement} element     dom 元素\n * @param {number}     targetIndex 目标位置(从 0 开始)\n */\nexport function moveTo(element, targetIndex) {\n    var parentNode = element.parentNode;\n    var siblings = Array.from(parentNode.childNodes).filter(\n    // 要求为元素节点，且不能为 defs 节点\n    function (node) { return node.nodeType === 1 && node.nodeName.toLowerCase() !== 'defs'; });\n    // 获取目标节点\n    var target = siblings[targetIndex];\n    var currentIndex = siblings.indexOf(element);\n    // 如果目标节点存在\n    if (target) {\n        // 当前索引 > 目标索引，直接插入到目标节点之前即可\n        if (currentIndex > targetIndex) {\n            parentNode.insertBefore(element, target);\n        }\n        else if (currentIndex < targetIndex) {\n            // 当前索引 < 目标索引\n            // 获取目标节点的下一个节点\n            var targetNext = siblings[targetIndex + 1];\n            // 如果目标节点的下一个节点存在，插入到该节点之前\n            if (targetNext) {\n                parentNode.insertBefore(element, targetNext);\n            }\n            else {\n                // 如果该节点不存在，则追加到末尾\n                parentNode.appendChild(element);\n            }\n        }\n    }\n    else {\n        parentNode.appendChild(element);\n    }\n}\n//# sourceMappingURL=dom.js.map","/**\n * @fileoverview G 的基础接口定义和所有的抽象类\n * @author dxq613@gmail.com\n */\nimport * as PathUtil from './util/path';\nvar pkg = require('../package.json');\nexport var version = pkg.version;\nexport * from './types';\nexport * from './interfaces';\nexport { default as Event } from './event/graph-event';\nexport { default as Base } from './abstract/base';\nexport { default as AbstractCanvas } from './abstract/canvas';\nexport { default as AbstractGroup } from './abstract/group';\nexport { default as AbstractShape } from './abstract/shape';\nexport { PathUtil };\n//# sourceMappingURL=index.js.map","import { mod, toRadian, isSamePoint } from './util';\n// 向量长度\nfunction vMag(v) {\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n// u.v/|u||v|，计算夹角的余弦值\nfunction vRatio(u, v) {\n    // 当存在一个向量的长度为 0 时，夹角也为 0，即夹角的余弦值为 1\n    return vMag(u) * vMag(v) ? (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v)) : 1;\n}\n// 向量角度\nfunction vAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n}\n// A 0:rx 1:ry 2:x-axis-rotation 3:large-arc-flag 4:sweep-flag 5: x 6: y\nexport default function getArcParams(startPoint, params) {\n    var rx = params[1];\n    var ry = params[2];\n    var xRotation = mod(toRadian(params[3]), Math.PI * 2);\n    var arcFlag = params[4];\n    var sweepFlag = params[5];\n    // 弧形起点坐标\n    var x1 = startPoint[0];\n    var y1 = startPoint[1];\n    // 弧形终点坐标\n    var x2 = params[6];\n    var y2 = params[7];\n    var xp = (Math.cos(xRotation) * (x1 - x2)) / 2.0 + (Math.sin(xRotation) * (y1 - y2)) / 2.0;\n    var yp = (-1 * Math.sin(xRotation) * (x1 - x2)) / 2.0 + (Math.cos(xRotation) * (y1 - y2)) / 2.0;\n    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n    if (lambda > 1) {\n        rx *= Math.sqrt(lambda);\n        ry *= Math.sqrt(lambda);\n    }\n    var diff = rx * rx * (yp * yp) + ry * ry * (xp * xp);\n    var f = diff ? Math.sqrt((rx * rx * (ry * ry) - diff) / diff) : 1;\n    if (arcFlag === sweepFlag) {\n        f *= -1;\n    }\n    if (isNaN(f)) {\n        f = 0;\n    }\n    // 旋转前的起点坐标，且当长半轴和短半轴的长度为 0 时，坐标按 (0, 0) 处理\n    var cxp = ry ? (f * rx * yp) / ry : 0;\n    var cyp = rx ? (f * -ry * xp) / rx : 0;\n    // 椭圆圆心坐标\n    var cx = (x1 + x2) / 2.0 + Math.cos(xRotation) * cxp - Math.sin(xRotation) * cyp;\n    var cy = (y1 + y2) / 2.0 + Math.sin(xRotation) * cxp + Math.cos(xRotation) * cyp;\n    // 起始点的单位向量\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    // 终止点的单位向量\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    // 计算起始点和圆心的连线，与 x 轴正方向的夹角\n    var theta = vAngle([1, 0], u);\n    // 计算圆弧起始点和终止点与椭圆圆心连线的夹角\n    var dTheta = vAngle(u, v);\n    if (vRatio(u, v) <= -1) {\n        dTheta = Math.PI;\n    }\n    if (vRatio(u, v) >= 1) {\n        dTheta = 0;\n    }\n    if (sweepFlag === 0 && dTheta > 0) {\n        dTheta = dTheta - 2 * Math.PI;\n    }\n    if (sweepFlag === 1 && dTheta < 0) {\n        dTheta = dTheta + 2 * Math.PI;\n    }\n    return {\n        cx: cx,\n        cy: cy,\n        // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理\n        rx: isSamePoint(startPoint, [x2, y2]) ? 0 : rx,\n        ry: isSamePoint(startPoint, [x2, y2]) ? 0 : ry,\n        startAngle: theta,\n        endAngle: theta + dTheta,\n        xRotation: xRotation,\n        arcFlag: arcFlag,\n        sweepFlag: sweepFlag,\n    };\n}\n//# sourceMappingURL=arc-params.js.map","import { each, isArray } from '@antv/util';\nimport { parseStyle } from './parse';\nimport getArcParams from './arc-params';\nimport { mergeRegion, intersectRect } from './util';\nimport * as ArrowUtil from '../util/arrow';\nvar SHAPE_ATTRS_MAP = {\n    fill: 'fillStyle',\n    stroke: 'strokeStyle',\n    opacity: 'globalAlpha',\n};\nexport function applyAttrsToContext(context, element) {\n    var attrs = element.attr();\n    for (var k in attrs) {\n        var v = attrs[k];\n        // 转换一下不与 canvas 兼容的属性名\n        var name_1 = SHAPE_ATTRS_MAP[k] ? SHAPE_ATTRS_MAP[k] : k;\n        if (name_1 === 'matrix' && v) {\n            // 设置矩阵\n            context.transform(v[0], v[1], v[3], v[4], v[6], v[7]);\n        }\n        else if (name_1 === 'lineDash' && context.setLineDash) {\n            // 设置虚线，只支持数组形式，非数组形式不做任何操作\n            isArray(v) && context.setLineDash(v);\n        }\n        else {\n            if (name_1 === 'strokeStyle' || name_1 === 'fillStyle') {\n                // 如果存在渐变、pattern 这个开销有些大\n                // 可以考虑缓存机制，通过 hasUpdate 来避免一些运算\n                v = parseStyle(context, element, v);\n            }\n            else if (name_1 === 'globalAlpha') {\n                // opacity 效果可以叠加，子元素的 opacity 需要与父元素 opacity 相乘\n                v = v * context.globalAlpha;\n            }\n            context[name_1] = v;\n        }\n    }\n}\nexport function drawChildren(context, children, region) {\n    for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n        if (child.cfg.visible) {\n            child.draw(context, region);\n        }\n        else {\n            child.skipDraw();\n        }\n    }\n}\n// 这个地方的逻辑比较复杂，简单画了一张图：https://www.yuque.com/antv/ou292n/pcgt5g#OW1QE\nexport function checkRefresh(canvas, children, region) {\n    var refreshElements = canvas.get('refreshElements');\n    // 先遍历需要刷新的元素，将这些元素的父元素也设置 refresh\n    each(refreshElements, function (el) {\n        if (el !== canvas) {\n            var parent_1 = el.cfg.parent;\n            while (parent_1 && parent_1 !== canvas && !parent_1.cfg.refresh) {\n                parent_1.cfg.refresh = true;\n                parent_1 = parent_1.cfg.parent;\n            }\n        }\n    });\n    if (refreshElements[0] === canvas) {\n        setChildrenRefresh(children, region);\n    }\n    else {\n        // 检查所有子元素是否可以刷新\n        checkChildrenRefresh(children, region);\n    }\n}\n// 检查所有的子元素是否应该更新\nexport function checkChildrenRefresh(children, region) {\n    for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n        if (child.cfg.visible) {\n            // 先判断 hasChanged，因为它的优先级判断应该高于 refresh\n            if (child.cfg.hasChanged) {\n                // 如果节点发生了 change，则需要级联设置子元素的 refresh\n                child.cfg.refresh = true;\n                if (child.isGroup()) {\n                    setChildrenRefresh(child.cfg.children, region);\n                }\n            }\n            else if (child.cfg.refresh) {\n                // 如果当前图形/分组 refresh = true，说明其子节点存在 changed\n                if (child.isGroup()) {\n                    checkChildrenRefresh(child.cfg.children, region);\n                }\n            }\n            else {\n                // 这个分支说明此次局部刷新，所有的节点和父元素没有发生变化，仅需要检查包围盒（缓存）是否相交即可\n                var refresh = checkElementRefresh(child, region);\n                child.cfg.refresh = refresh;\n                if (refresh && child.isGroup()) {\n                    // 如果需要刷新，说明子元素也需要刷新，继续进行判定\n                    checkChildrenRefresh(child.cfg.children, region);\n                }\n            }\n        }\n    }\n}\n// 由于对改变的图形放入 refreshElements 时做了优化，判定父元素 changed 时不加入\n// 那么有可能会出现 elements 都为空，所以最终 group\nexport function clearChanged(elements) {\n    for (var i = 0; i < elements.length; i++) {\n        var el = elements[i];\n        el.cfg.hasChanged = false;\n        // 级联清理\n        if (el.isGroup() && !el.destroyed) {\n            clearChanged(el.cfg.children);\n        }\n    }\n}\n// 当某个父元素发生改变时，调用这个方法级联设置 refresh\nfunction setChildrenRefresh(children, region) {\n    for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n        // let refresh = true;\n        // 获取缓存的 bbox，如果这个 bbox 还存在则说明父元素不是矩阵发生了改变\n        // const bbox = child.cfg.canvasBBox;\n        // if (bbox) {\n        //   // 如果这时候\n        //   refresh = intersectRect(bbox, region);\n        // }\n        child.cfg.refresh = true;\n        // 如果需要刷新当前节点，所有的子元素设置 refresh\n        if (child.isGroup()) {\n            setChildrenRefresh(child.get('children'), region);\n        }\n    }\n}\nfunction checkElementRefresh(shape, region) {\n    var bbox = shape.cfg.cacheCanvasBBox;\n    var isAllow = shape.cfg.isInView && bbox && intersectRect(bbox, region);\n    return isAllow;\n}\n// 绘制 path\nexport function drawPath(shape, context, attrs, arcParamsCache) {\n    var path = attrs.path, startArrow = attrs.startArrow, endArrow = attrs.endArrow;\n    var currentPoint = [0, 0]; // 当前图形\n    var startMovePoint = [0, 0]; // 开始 M 的点，可能会有多个\n    var distance = {\n        dx: 0,\n        dy: 0,\n    };\n    context.beginPath();\n    for (var i = 0; i < path.length; i++) {\n        var params = path[i];\n        var command = params[0];\n        if (i === 0 && startArrow && startArrow.d) {\n            var tangent = shape.getStartTangent();\n            distance = ArrowUtil.getShortenOffset(tangent[0][0], tangent[0][1], tangent[1][0], tangent[1][1], startArrow.d);\n        }\n        else if (i === path.length - 2 && path[i + 1][0] === 'Z' && endArrow && endArrow.d) {\n            // 为了防止结尾为 Z 的 segment 缩短不起效，需要取最后两个 segment 特殊处理\n            var lastPath = path[i + 1];\n            if (lastPath[0] === 'Z') {\n                var tangent = shape.getEndTangent();\n                distance = ArrowUtil.getShortenOffset(tangent[0][0], tangent[0][1], tangent[1][0], tangent[1][1], endArrow.d);\n            }\n        }\n        else if (i === path.length - 1 && endArrow && endArrow.d) {\n            if (path[0] !== 'Z') {\n                var tangent = shape.getEndTangent();\n                distance = ArrowUtil.getShortenOffset(tangent[0][0], tangent[0][1], tangent[1][0], tangent[1][1], endArrow.d);\n            }\n        }\n        var dx = distance.dx, dy = distance.dy;\n        // V,H,S,T 都在前面被转换成标准形式\n        switch (command) {\n            case 'M':\n                context.moveTo(params[1] - dx, params[2] - dy);\n                startMovePoint = [params[1], params[2]];\n                break;\n            case 'L':\n                context.lineTo(params[1] - dx, params[2] - dy);\n                break;\n            case 'Q':\n                context.quadraticCurveTo(params[1], params[2], params[3] - dx, params[4] - dy);\n                break;\n            case 'C':\n                context.bezierCurveTo(params[1], params[2], params[3], params[4], params[5] - dx, params[6] - dy);\n                break;\n            case 'A': {\n                var arcParams = void 0;\n                // 为了加速绘制，可以提供参数的缓存，各个图形自己缓存\n                if (arcParamsCache) {\n                    arcParams = arcParamsCache[i];\n                    if (!arcParams) {\n                        arcParams = getArcParams(currentPoint, params);\n                        arcParamsCache[i] = arcParams;\n                    }\n                }\n                else {\n                    arcParams = getArcParams(currentPoint, params);\n                }\n                var cx = arcParams.cx, cy = arcParams.cy, rx = arcParams.rx, ry = arcParams.ry, startAngle = arcParams.startAngle, endAngle = arcParams.endAngle, xRotation = arcParams.xRotation, sweepFlag = arcParams.sweepFlag;\n                // 直接使用椭圆的 api\n                if (context.ellipse) {\n                    context.ellipse(cx, cy, rx, ry, xRotation, startAngle, endAngle, 1 - sweepFlag);\n                }\n                else {\n                    var r = rx > ry ? rx : ry;\n                    var scaleX = rx > ry ? 1 : rx / ry;\n                    var scaleY = rx > ry ? ry / rx : 1;\n                    context.translate(cx, cy);\n                    context.rotate(xRotation);\n                    context.scale(scaleX, scaleY);\n                    context.arc(0, 0, r, startAngle, endAngle, 1 - sweepFlag);\n                    context.scale(1 / scaleX, 1 / scaleY);\n                    context.rotate(-xRotation);\n                    context.translate(-cx, -cy);\n                }\n                break;\n            }\n            case 'Z':\n                context.closePath();\n                break;\n            default:\n                break;\n        }\n        // 有了 Z 后，当前节点从开始 M 的点开始\n        if (command === 'Z') {\n            currentPoint = startMovePoint;\n        }\n        else {\n            var len = params.length;\n            currentPoint = [params[len - 2], params[len - 1]];\n        }\n    }\n}\n// 刷新图形元素(Shape 或者 Group)\nexport function refreshElement(element, changeType) {\n    var canvas = element.get('canvas');\n    // 只有存在于 canvas 上时生效\n    if (canvas) {\n        if (changeType === 'remove') {\n            // 一旦 remove，则无法在 element 上拿到包围盒\n            // destroy 后所有属性都拿不到，所以需要暂存一下\n            // 这是一段 hack 的代码\n            element._cacheCanvasBBox = element.get('cacheCanvasBBox');\n        }\n        // 防止反复刷新\n        if (!element.get('hasChanged')) {\n            // 但是始终要标记为 hasChanged，便于后面进行局部渲染\n            element.set('hasChanged', true);\n            // 本来只有局部渲染模式下，才需要记录更新的元素队列\n            // if (canvas.get('localRefresh')) {\n            //   canvas.refreshElement(element, changeType, canvas);\n            // }\n            // 但对于 https://github.com/antvis/g/issues/422 的场景，全局渲染的模式下也需要记录更新的元素队列\n            // 如果当前元素的父元素发生了改变，可以不放入队列，这句话大概能够提升 15% 的初次渲染性能\n            if (!(element.cfg.parent && element.cfg.parent.get('hasChanged'))) {\n                canvas.refreshElement(element, changeType, canvas);\n                if (canvas.get('autoDraw')) {\n                    canvas.draw();\n                }\n            }\n        }\n    }\n}\nexport function getRefreshRegion(element) {\n    var region;\n    if (!element.destroyed) {\n        var cacheBox = element.get('cacheCanvasBBox');\n        var validCache = cacheBox && !!(cacheBox.width && cacheBox.height);\n        var bbox = element.getCanvasBBox();\n        var validBBox = bbox && !!(bbox.width && bbox.height);\n        // 是否是有效 bbox 判定，一些 NaN 或者 宽高为 0 的情况过滤掉\n        if (validCache && validBBox) {\n            region = mergeRegion(cacheBox, bbox);\n        }\n        else if (validCache) {\n            region = cacheBox;\n        }\n        else if (validBBox) {\n            region = bbox;\n        }\n    }\n    else {\n        // 因为元素已经销毁所以无法获取到缓存的包围盒\n        region = element['_cacheCanvasBBox'];\n    }\n    return region;\n}\nexport function getMergedRegion(elements) {\n    if (!elements.length) {\n        return null;\n    }\n    var minXArr = [];\n    var minYArr = [];\n    var maxXArr = [];\n    var maxYArr = [];\n    each(elements, function (el) {\n        var region = getRefreshRegion(el);\n        if (region) {\n            minXArr.push(region.minX);\n            minYArr.push(region.minY);\n            maxXArr.push(region.maxX);\n            maxYArr.push(region.maxY);\n        }\n    });\n    return {\n        minX: Math.min.apply(null, minXArr),\n        minY: Math.min.apply(null, minYArr),\n        maxX: Math.max.apply(null, maxXArr),\n        maxY: Math.max.apply(null, maxYArr),\n    };\n}\nexport function mergeView(region, viewRegion) {\n    if (!region || !viewRegion) {\n        return null;\n    }\n    // 不相交，则直接返回 null\n    if (!intersectRect(region, viewRegion)) {\n        return null;\n    }\n    return {\n        minX: Math.max(region.minX, viewRegion.minX),\n        minY: Math.max(region.minY, viewRegion.minY),\n        maxX: Math.min(region.maxX, viewRegion.maxX),\n        maxY: Math.min(region.maxY, viewRegion.maxY),\n    };\n}\n//# sourceMappingURL=draw.js.map","import { __assign, __rest } from \"tslib\";\nimport { Path } from '../shape';\nvar sin = Math.sin, cos = Math.cos, atan2 = Math.atan2, PI = Math.PI;\nfunction _addDefaultArrow(shape, attrs, x1, y1, x2, y2, isStart) {\n    var stroke = attrs.stroke, lineWidth = attrs.lineWidth;\n    var x = x1 - x2;\n    var y = y1 - y2;\n    var rad = atan2(y, x);\n    var arrowShape = new Path({\n        type: 'path',\n        canvas: shape.get('canvas'),\n        isArrowShape: true,\n        attrs: {\n            // 默认箭头的边长为 10，夹角为 60 度\n            path: \"M\" + 10 * cos(PI / 6) + \",\" + 10 * sin(PI / 6) + \" L0,0 L\" + 10 * cos(PI / 6) + \",-\" + 10 * sin(PI / 6),\n            // 使用 shape stroke 值\n            stroke: stroke,\n            lineWidth: lineWidth,\n        },\n    });\n    arrowShape.translate(x2, y2);\n    arrowShape.rotateAtPoint(x2, y2, rad);\n    shape.set(isStart ? 'startArrowShape' : 'endArrowShape', arrowShape);\n}\n/**\n * 箭头 path 的设置要求\n * 1. 箭头顶点坐标需要为 (0, 0)\n * 2. 箭头夹角的中心分割线需要与 X 轴正方向对齐\n */\nfunction _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, isStart) {\n    var startArrow = attrs.startArrow, endArrow = attrs.endArrow, stroke = attrs.stroke, lineWidth = attrs.lineWidth;\n    var arrowAttrs = isStart ? startArrow : endArrow;\n    var d = arrowAttrs.d, arrowFill = arrowAttrs.fill, arrowStroke = arrowAttrs.stroke, arrowLineWidth = arrowAttrs.lineWidth, restAttrs = __rest(arrowAttrs, [\"d\", \"fill\", \"stroke\", \"lineWidth\"]);\n    var x = x1 - x2;\n    var y = y1 - y2;\n    var rad = atan2(y, x);\n    if (d) {\n        x2 = x2 - cos(rad) * d;\n        y2 = y2 - sin(rad) * d;\n    }\n    var arrowShape = new Path({\n        type: 'path',\n        canvas: shape.get('canvas'),\n        isArrowShape: true,\n        attrs: __assign(__assign({}, restAttrs), { \n            // 支持单独设置箭头的 stroke 和 lineWidth，若为空则使用 shape 的值\n            stroke: arrowStroke || stroke, lineWidth: arrowLineWidth || lineWidth, \n            // 箭头是否填充需要手动设置，不会继承自 shape 的值\n            fill: arrowFill }),\n    });\n    arrowShape.translate(x2, y2);\n    arrowShape.rotateAtPoint(x2, y2, rad);\n    shape.set(isStart ? 'startArrowShape' : 'endArrowShape', arrowShape);\n}\n/**\n * 如果自定义箭头并且有 d 需要做偏移，如果直接画，线条会超出箭头尖端，因此需要根据箭头偏移 d, 返回线需要缩短的距离\n * |----------------\n * |<|--------------\n * |\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 箭头作用点 x\n * @param {number} y2 箭头作用点 y\n * @param {number} d  箭头沿线条方向的偏移距离\n * @return {{dx: number, dy: number}} 返回线条偏移距离\n */\nexport function getShortenOffset(x1, y1, x2, y2, d) {\n    var rad = atan2(y2 - y1, x2 - x1);\n    return {\n        dx: cos(rad) * d,\n        dy: sin(rad) * d,\n    };\n}\n/**\n * 绘制起始箭头\n * @param {IShape} shape 图形\n * @param {ShapeAttrs} attrs shape 的绘图属性\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 箭头作用点 x\n * @param {number} y2 箭头作用点 y\n */\nexport function addStartArrow(shape, attrs, x1, y1, x2, y2) {\n    if (typeof attrs.startArrow === 'object') {\n        _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, true);\n    }\n    else if (attrs.startArrow) {\n        _addDefaultArrow(shape, attrs, x1, y1, x2, y2, true);\n    }\n    else {\n        shape.set('startArrowShape', null);\n    }\n}\n/**\n * 绘制结束箭头\n * @param {IShape} shape 图形\n * @param {ShapeAttrs} attrs shape 的绘图属性\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 箭头作用点 x\n * @param {number} y2 箭头作用点 y\n */\nexport function addEndArrow(shape, attrs, x1, y1, x2, y2) {\n    if (typeof attrs.endArrow === 'object') {\n        _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, false);\n    }\n    else if (attrs.endArrow) {\n        _addDefaultArrow(shape, attrs, x1, y1, x2, y2, false);\n    }\n    else {\n        shape.set('startArrowShape', null);\n    }\n}\n//# sourceMappingURL=arrow.js.map","import { createDom } from './dom';\nexport function setShadow(model, context) {\n    var el = model.cfg.el;\n    var attrs = model.attr();\n    var cfg = {\n        dx: attrs.shadowOffsetX,\n        dy: attrs.shadowOffsetY,\n        blur: attrs.shadowBlur,\n        color: attrs.shadowColor,\n    };\n    if (!cfg.dx && !cfg.dy && !cfg.blur && !cfg.color) {\n        el.removeAttribute('filter');\n    }\n    else {\n        var id = context.find('filter', cfg);\n        if (!id) {\n            id = context.addShadow(cfg);\n        }\n        el.setAttribute('filter', \"url(#\" + id + \")\");\n    }\n}\nexport function setTransform(model) {\n    var matrix = model.attr().matrix;\n    if (matrix) {\n        var el = model.cfg.el;\n        var transform = [];\n        for (var i = 0; i < 9; i += 3) {\n            transform.push(matrix[i] + \",\" + matrix[i + 1]);\n        }\n        transform = transform.join(',');\n        if (transform.indexOf('NaN') === -1) {\n            el.setAttribute('transform', \"matrix(\" + transform + \")\");\n        }\n        else {\n            console.warn('invalid matrix:', matrix);\n        }\n    }\n}\nexport function setClip(model, context) {\n    var clip = model.getClip();\n    var el = model.get('el');\n    if (!clip) {\n        el.removeAttribute('clip-path');\n    }\n    else if (clip && !el.hasAttribute('clip-path')) {\n        createDom(clip);\n        clip.createPath(context);\n        var id = context.addClip(clip);\n        el.setAttribute('clip-path', \"url(#\" + id + \")\");\n    }\n}\n//# sourceMappingURL=svg.js.map","/**\n * @fileoverview 矩阵运算，本来是要引入 gl-matrix, 但是考虑到 g-mobile 对大小有限制，同时 g-webgl 使用的 matrix 不一致\n * 所以，这里仅实现 2D 几个运算，上层自己引入 gl-matrix\n * @author dxq613@gmail.com\n */\n/**\n * 3阶矩阵相乘\n * @param {number[]} a 矩阵1\n * @param {number[]} b 矩阵2\n */\nexport function multiplyMatrix(a, b) {\n    var out = [];\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a10 = a[3];\n    var a11 = a[4];\n    var a12 = a[5];\n    var a20 = a[6];\n    var a21 = a[7];\n    var a22 = a[8];\n    var b00 = b[0];\n    var b01 = b[1];\n    var b02 = b[2];\n    var b10 = b[3];\n    var b11 = b[4];\n    var b12 = b[5];\n    var b20 = b[6];\n    var b21 = b[7];\n    var b22 = b[8];\n    out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n    out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n    out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n    out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n    out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n    out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n    out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n    out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n    out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n    return out;\n}\n/**\n * 3阶矩阵同2阶向量相乘\n * @param {number[]} m 矩阵\n * @param {number[]} v 二阶向量\n */\nexport function multiplyVec2(m, v) {\n    var out = [];\n    var x = v[0];\n    var y = v[1];\n    out[0] = m[0] * x + m[3] * y + m[6];\n    out[1] = m[1] * x + m[4] * y + m[7];\n    return out;\n}\n/**\n * 矩阵的逆\n * @param {number[]} a 矩阵\n */\nexport function invert(a) {\n    var out = [];\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a10 = a[3];\n    var a11 = a[4];\n    var a12 = a[5];\n    var a20 = a[6];\n    var a21 = a[7];\n    var a22 = a[8];\n    var b01 = a22 * a11 - a12 * a21;\n    var b11 = -a22 * a10 + a12 * a20;\n    var b21 = a21 * a10 - a11 * a20;\n    // Calculate the determinant\n    var det = a00 * b01 + a01 * b11 + a02 * b21;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n    out[0] = b01 * det;\n    out[1] = (-a22 * a01 + a02 * a21) * det;\n    out[2] = (a12 * a01 - a02 * a11) * det;\n    out[3] = b11 * det;\n    out[4] = (a22 * a00 - a02 * a20) * det;\n    out[5] = (-a12 * a00 + a02 * a10) * det;\n    out[6] = b21 * det;\n    out[7] = (-a21 * a00 + a01 * a20) * det;\n    out[8] = (a11 * a00 - a01 * a10) * det;\n    return out;\n}\n//# sourceMappingURL=matrix.js.map","import { each, isArray } from '@antv/util';\nvar SPACES = '\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029';\nvar PATH_COMMAND = new RegExp(\"([a-z])[\" + SPACES + \",]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[\" + SPACES + \"]*,?[\" + SPACES + \"]*)+)\", 'ig');\nvar PATH_VALUES = new RegExp(\"(-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?)[\" + SPACES + \"]*,?[\" + SPACES + \"]*\", 'ig');\n// Parse given path string into an array of arrays of path segments\nvar parsePathString = function (pathString) {\n    if (!pathString) {\n        return null;\n    }\n    if (isArray(pathString)) {\n        return pathString;\n    }\n    var paramCounts = {\n        a: 7,\n        c: 6,\n        o: 2,\n        h: 1,\n        l: 2,\n        m: 2,\n        r: 4,\n        q: 4,\n        s: 4,\n        t: 2,\n        v: 1,\n        u: 3,\n        z: 0,\n    };\n    var data = [];\n    String(pathString).replace(PATH_COMMAND, function (a, b, c) {\n        var params = [];\n        var name = b.toLowerCase();\n        c.replace(PATH_VALUES, function (a, b) {\n            b && params.push(+b);\n        });\n        if (name === 'm' && params.length > 2) {\n            data.push([b].concat(params.splice(0, 2)));\n            name = 'l';\n            b = b === 'm' ? 'l' : 'L';\n        }\n        if (name === 'o' && params.length === 1) {\n            data.push([b, params[0]]);\n        }\n        if (name === 'r') {\n            data.push([b].concat(params));\n        }\n        else {\n            while (params.length >= paramCounts[name]) {\n                data.push([b].concat(params.splice(0, paramCounts[name])));\n                if (!paramCounts[name]) {\n                    break;\n                }\n            }\n        }\n        return pathString;\n    });\n    return data;\n};\n// http://schepers.cc/getting-to-the-point\nvar catmullRomToBezier = function (crp, z) {\n    var d = [];\n    // @ts-ignore\n    for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {\n        var p = [\n            {\n                x: +crp[i - 2],\n                y: +crp[i - 1],\n            },\n            {\n                x: +crp[i],\n                y: +crp[i + 1],\n            },\n            {\n                x: +crp[i + 2],\n                y: +crp[i + 3],\n            },\n            {\n                x: +crp[i + 4],\n                y: +crp[i + 5],\n            },\n        ];\n        if (z) {\n            if (!i) {\n                p[0] = {\n                    x: +crp[iLen - 2],\n                    y: +crp[iLen - 1],\n                };\n            }\n            else if (iLen - 4 === i) {\n                p[3] = {\n                    x: +crp[0],\n                    y: +crp[1],\n                };\n            }\n            else if (iLen - 2 === i) {\n                p[2] = {\n                    x: +crp[0],\n                    y: +crp[1],\n                };\n                p[3] = {\n                    x: +crp[2],\n                    y: +crp[3],\n                };\n            }\n        }\n        else {\n            if (iLen - 4 === i) {\n                p[3] = p[2];\n            }\n            else if (!i) {\n                p[0] = {\n                    x: +crp[i],\n                    y: +crp[i + 1],\n                };\n            }\n        }\n        d.push([\n            'C',\n            (-p[0].x + 6 * p[1].x + p[2].x) / 6,\n            (-p[0].y + 6 * p[1].y + p[2].y) / 6,\n            (p[1].x + 6 * p[2].x - p[3].x) / 6,\n            (p[1].y + 6 * p[2].y - p[3].y) / 6,\n            p[2].x,\n            p[2].y,\n        ]);\n    }\n    return d;\n};\nvar ellipsePath = function (x, y, rx, ry, a) {\n    var res = [];\n    if (a === null && ry === null) {\n        ry = rx;\n    }\n    x = +x;\n    y = +y;\n    rx = +rx;\n    ry = +ry;\n    if (a !== null) {\n        var rad = Math.PI / 180;\n        var x1 = x + rx * Math.cos(-ry * rad);\n        var x2 = x + rx * Math.cos(-a * rad);\n        var y1 = y + rx * Math.sin(-ry * rad);\n        var y2 = y + rx * Math.sin(-a * rad);\n        res = [\n            ['M', x1, y1],\n            ['A', rx, rx, 0, +(a - ry > 180), 0, x2, y2],\n        ];\n    }\n    else {\n        res = [['M', x, y], ['m', 0, -ry], ['a', rx, ry, 0, 1, 1, 0, 2 * ry], ['a', rx, ry, 0, 1, 1, 0, -2 * ry], ['z']];\n    }\n    return res;\n};\nvar pathToAbsolute = function (pathArray) {\n    pathArray = parsePathString(pathArray);\n    if (!pathArray || !pathArray.length) {\n        return [['M', 0, 0]];\n    }\n    var res = [];\n    var x = 0;\n    var y = 0;\n    var mx = 0;\n    var my = 0;\n    var start = 0;\n    var pa0;\n    var dots;\n    if (pathArray[0][0] === 'M') {\n        x = +pathArray[0][1];\n        y = +pathArray[0][2];\n        mx = x;\n        my = y;\n        start++;\n        res[0] = ['M', x, y];\n    }\n    var crz = pathArray.length === 3 &&\n        pathArray[0][0] === 'M' &&\n        pathArray[1][0].toUpperCase() === 'R' &&\n        pathArray[2][0].toUpperCase() === 'Z';\n    for (var r = void 0, pa = void 0, i = start, ii = pathArray.length; i < ii; i++) {\n        res.push((r = []));\n        pa = pathArray[i];\n        pa0 = pa[0];\n        if (pa0 !== pa0.toUpperCase()) {\n            r[0] = pa0.toUpperCase();\n            switch (r[0]) {\n                case 'A':\n                    r[1] = pa[1];\n                    r[2] = pa[2];\n                    r[3] = pa[3];\n                    r[4] = pa[4];\n                    r[5] = pa[5];\n                    r[6] = +pa[6] + x;\n                    r[7] = +pa[7] + y;\n                    break;\n                case 'V':\n                    r[1] = +pa[1] + y;\n                    break;\n                case 'H':\n                    r[1] = +pa[1] + x;\n                    break;\n                case 'R':\n                    dots = [x, y].concat(pa.slice(1));\n                    for (var j = 2, jj = dots.length; j < jj; j++) {\n                        dots[j] = +dots[j] + x;\n                        dots[++j] = +dots[j] + y;\n                    }\n                    res.pop();\n                    res = res.concat(catmullRomToBezier(dots, crz));\n                    break;\n                case 'O':\n                    res.pop();\n                    dots = ellipsePath(x, y, pa[1], pa[2]);\n                    dots.push(dots[0]);\n                    res = res.concat(dots);\n                    break;\n                case 'U':\n                    res.pop();\n                    res = res.concat(ellipsePath(x, y, pa[1], pa[2], pa[3]));\n                    r = ['U'].concat(res[res.length - 1].slice(-2));\n                    break;\n                case 'M':\n                    mx = +pa[1] + x;\n                    my = +pa[2] + y;\n                    break; // for lint\n                default:\n                    for (var j = 1, jj = pa.length; j < jj; j++) {\n                        r[j] = +pa[j] + (j % 2 ? x : y);\n                    }\n            }\n        }\n        else if (pa0 === 'R') {\n            dots = [x, y].concat(pa.slice(1));\n            res.pop();\n            res = res.concat(catmullRomToBezier(dots, crz));\n            r = ['R'].concat(pa.slice(-2));\n        }\n        else if (pa0 === 'O') {\n            res.pop();\n            dots = ellipsePath(x, y, pa[1], pa[2]);\n            dots.push(dots[0]);\n            res = res.concat(dots);\n        }\n        else if (pa0 === 'U') {\n            res.pop();\n            res = res.concat(ellipsePath(x, y, pa[1], pa[2], pa[3]));\n            r = ['U'].concat(res[res.length - 1].slice(-2));\n        }\n        else {\n            for (var k = 0, kk = pa.length; k < kk; k++) {\n                r[k] = pa[k];\n            }\n        }\n        pa0 = pa0.toUpperCase();\n        if (pa0 !== 'O') {\n            switch (r[0]) {\n                case 'Z':\n                    x = +mx;\n                    y = +my;\n                    break;\n                case 'H':\n                    x = r[1];\n                    break;\n                case 'V':\n                    y = r[1];\n                    break;\n                case 'M':\n                    mx = r[r.length - 2];\n                    my = r[r.length - 1];\n                    break; // for lint\n                default:\n                    x = r[r.length - 2];\n                    y = r[r.length - 1];\n            }\n        }\n    }\n    return res;\n};\nvar l2c = function (x1, y1, x2, y2) {\n    return [x1, y1, x2, y2, x2, y2];\n};\nvar q2c = function (x1, y1, ax, ay, x2, y2) {\n    var _13 = 1 / 3;\n    var _23 = 2 / 3;\n    return [_13 * x1 + _23 * ax, _13 * y1 + _23 * ay, _13 * x2 + _23 * ax, _13 * y2 + _23 * ay, x2, y2];\n};\nvar a2c = function (x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n    // for more information of where this math came from visit:\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n    if (rx === ry) {\n        rx += 1;\n    }\n    var _120 = (Math.PI * 120) / 180;\n    var rad = (Math.PI / 180) * (+angle || 0);\n    var res = [];\n    var xy;\n    var f1;\n    var f2;\n    var cx;\n    var cy;\n    var rotate = function (x, y, rad) {\n        var X = x * Math.cos(rad) - y * Math.sin(rad);\n        var Y = x * Math.sin(rad) + y * Math.cos(rad);\n        return {\n            x: X,\n            y: Y,\n        };\n    };\n    if (!recursive) {\n        xy = rotate(x1, y1, -rad);\n        x1 = xy.x;\n        y1 = xy.y;\n        xy = rotate(x2, y2, -rad);\n        x2 = xy.x;\n        y2 = xy.y;\n        if (x1 === x2 && y1 === y2) {\n            // 若弧的起始点和终点重叠则错开一点\n            x2 += 1;\n            y2 += 1;\n        }\n        // const cos = Math.cos(Math.PI / 180 * angle);\n        // const sin = Math.sin(Math.PI / 180 * angle);\n        var x = (x1 - x2) / 2;\n        var y = (y1 - y2) / 2;\n        var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n        if (h > 1) {\n            h = Math.sqrt(h);\n            rx = h * rx;\n            ry = h * ry;\n        }\n        var rx2 = rx * rx;\n        var ry2 = ry * ry;\n        var k = (large_arc_flag === sweep_flag ? -1 : 1) *\n            Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));\n        cx = (k * rx * y) / ry + (x1 + x2) / 2;\n        cy = (k * -ry * x) / rx + (y1 + y2) / 2;\n        // @ts-ignore\n        f1 = Math.asin(((y1 - cy) / ry).toFixed(9));\n        // @ts-ignore\n        f2 = Math.asin(((y2 - cy) / ry).toFixed(9));\n        f1 = x1 < cx ? Math.PI - f1 : f1;\n        f2 = x2 < cx ? Math.PI - f2 : f2;\n        f1 < 0 && (f1 = Math.PI * 2 + f1);\n        f2 < 0 && (f2 = Math.PI * 2 + f2);\n        if (sweep_flag && f1 > f2) {\n            f1 = f1 - Math.PI * 2;\n        }\n        if (!sweep_flag && f2 > f1) {\n            f2 = f2 - Math.PI * 2;\n        }\n    }\n    else {\n        f1 = recursive[0];\n        f2 = recursive[1];\n        cx = recursive[2];\n        cy = recursive[3];\n    }\n    var df = f2 - f1;\n    if (Math.abs(df) > _120) {\n        var f2old = f2;\n        var x2old = x2;\n        var y2old = y2;\n        f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\n        x2 = cx + rx * Math.cos(f2);\n        y2 = cy + ry * Math.sin(f2);\n        res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\n    }\n    df = f2 - f1;\n    var c1 = Math.cos(f1);\n    var s1 = Math.sin(f1);\n    var c2 = Math.cos(f2);\n    var s2 = Math.sin(f2);\n    var t = Math.tan(df / 4);\n    var hx = (4 / 3) * rx * t;\n    var hy = (4 / 3) * ry * t;\n    var m1 = [x1, y1];\n    var m2 = [x1 + hx * s1, y1 - hy * c1];\n    var m3 = [x2 + hx * s2, y2 - hy * c2];\n    var m4 = [x2, y2];\n    m2[0] = 2 * m1[0] - m2[0];\n    m2[1] = 2 * m1[1] - m2[1];\n    if (recursive) {\n        return [m2, m3, m4].concat(res);\n    }\n    res = [m2, m3, m4]\n        .concat(res)\n        .join()\n        .split(',');\n    var newres = [];\n    for (var i = 0, ii = res.length; i < ii; i++) {\n        newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n    }\n    return newres;\n};\nvar pathToCurve = function (path, path2) {\n    var p = pathToAbsolute(path);\n    var p2 = path2 && pathToAbsolute(path2);\n    var attrs = {\n        x: 0,\n        y: 0,\n        bx: 0,\n        by: 0,\n        X: 0,\n        Y: 0,\n        qx: null,\n        qy: null,\n    };\n    var attrs2 = {\n        x: 0,\n        y: 0,\n        bx: 0,\n        by: 0,\n        X: 0,\n        Y: 0,\n        qx: null,\n        qy: null,\n    };\n    var pcoms1 = []; // path commands of original path p\n    var pcoms2 = []; // path commands of original path p2\n    var pfirst = ''; // temporary holder for original path command\n    var pcom = ''; // holder for previous path command of original path\n    var ii;\n    var processPath = function (path, d, pcom) {\n        var nx;\n        var ny;\n        if (!path) {\n            return ['C', d.x, d.y, d.x, d.y, d.x, d.y];\n        }\n        !(path[0] in\n            {\n                T: 1,\n                Q: 1,\n            }) && (d.qx = d.qy = null);\n        switch (path[0]) {\n            case 'M':\n                d.X = path[1];\n                d.Y = path[2];\n                break;\n            case 'A':\n                path = ['C'].concat(a2c.apply(0, [d.x, d.y].concat(path.slice(1))));\n                break;\n            case 'S':\n                if (pcom === 'C' || pcom === 'S') {\n                    // In \"S\" case we have to take into account, if the previous command is C/S.\n                    nx = d.x * 2 - d.bx; // And reflect the previous\n                    ny = d.y * 2 - d.by; // command's control point relative to the current point.\n                }\n                else {\n                    // or some else or nothing\n                    nx = d.x;\n                    ny = d.y;\n                }\n                path = ['C', nx, ny].concat(path.slice(1));\n                break;\n            case 'T':\n                if (pcom === 'Q' || pcom === 'T') {\n                    // In \"T\" case we have to take into account, if the previous command is Q/T.\n                    d.qx = d.x * 2 - d.qx; // And make a reflection similar\n                    d.qy = d.y * 2 - d.qy; // to case \"S\".\n                }\n                else {\n                    // or something else or nothing\n                    d.qx = d.x;\n                    d.qy = d.y;\n                }\n                path = ['C'].concat(q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n                break;\n            case 'Q':\n                d.qx = path[1];\n                d.qy = path[2];\n                path = ['C'].concat(q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n                break;\n            case 'L':\n                path = ['C'].concat(l2c(d.x, d.y, path[1], path[2]));\n                break;\n            case 'H':\n                path = ['C'].concat(l2c(d.x, d.y, path[1], d.y));\n                break;\n            case 'V':\n                path = ['C'].concat(l2c(d.x, d.y, d.x, path[1]));\n                break;\n            case 'Z':\n                path = ['C'].concat(l2c(d.x, d.y, d.X, d.Y));\n                break;\n            default:\n                break;\n        }\n        return path;\n    };\n    var fixArc = function (pp, i) {\n        if (pp[i].length > 7) {\n            pp[i].shift();\n            var pi = pp[i];\n            while (pi.length) {\n                pcoms1[i] = 'A'; // if created multiple C:s, their original seg is saved\n                p2 && (pcoms2[i] = 'A'); // the same as above\n                pp.splice(i++, 0, ['C'].concat(pi.splice(0, 6)));\n            }\n            pp.splice(i, 1);\n            ii = Math.max(p.length, (p2 && p2.length) || 0);\n        }\n    };\n    var fixM = function (path1, path2, a1, a2, i) {\n        if (path1 && path2 && path1[i][0] === 'M' && path2[i][0] !== 'M') {\n            path2.splice(i, 0, ['M', a2.x, a2.y]);\n            a1.bx = 0;\n            a1.by = 0;\n            a1.x = path1[i][1];\n            a1.y = path1[i][2];\n            ii = Math.max(p.length, (p2 && p2.length) || 0);\n        }\n    };\n    ii = Math.max(p.length, (p2 && p2.length) || 0);\n    for (var i = 0; i < ii; i++) {\n        p[i] && (pfirst = p[i][0]); // save current path command\n        if (pfirst !== 'C') {\n            // C is not saved yet, because it may be result of conversion\n            pcoms1[i] = pfirst; // Save current path command\n            i && (pcom = pcoms1[i - 1]); // Get previous path command pcom\n        }\n        p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath\n        if (pcoms1[i] !== 'A' && pfirst === 'C')\n            pcoms1[i] = 'C'; // A is the only command\n        // which may produce multiple C:s\n        // so we have to make sure that C is also C in original path\n        fixArc(p, i); // fixArc adds also the right amount of A:s to pcoms1\n        if (p2) {\n            // the same procedures is done to p2\n            p2[i] && (pfirst = p2[i][0]);\n            if (pfirst !== 'C') {\n                pcoms2[i] = pfirst;\n                i && (pcom = pcoms2[i - 1]);\n            }\n            p2[i] = processPath(p2[i], attrs2, pcom);\n            if (pcoms2[i] !== 'A' && pfirst === 'C') {\n                pcoms2[i] = 'C';\n            }\n            fixArc(p2, i);\n        }\n        fixM(p, p2, attrs, attrs2, i);\n        fixM(p2, p, attrs2, attrs, i);\n        var seg = p[i];\n        var seg2 = p2 && p2[i];\n        var seglen = seg.length;\n        var seg2len = p2 && seg2.length;\n        attrs.x = seg[seglen - 2];\n        attrs.y = seg[seglen - 1];\n        attrs.bx = parseFloat(seg[seglen - 4]) || attrs.x;\n        attrs.by = parseFloat(seg[seglen - 3]) || attrs.y;\n        attrs2.bx = p2 && (parseFloat(seg2[seg2len - 4]) || attrs2.x);\n        attrs2.by = p2 && (parseFloat(seg2[seg2len - 3]) || attrs2.y);\n        attrs2.x = p2 && seg2[seg2len - 2];\n        attrs2.y = p2 && seg2[seg2len - 1];\n    }\n    return p2 ? [p, p2] : p;\n};\nvar p2s = /,?([a-z]),?/gi;\nvar parsePathArray = function (path) {\n    return path.join(',').replace(p2s, '$1');\n};\nvar base3 = function (t, p1, p2, p3, p4) {\n    var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4;\n    var t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;\n    return t * t2 - 3 * p1 + 3 * p2;\n};\nvar bezlen = function (x1, y1, x2, y2, x3, y3, x4, y4, z) {\n    if (z === null) {\n        z = 1;\n    }\n    z = z > 1 ? 1 : z < 0 ? 0 : z;\n    var z2 = z / 2;\n    var n = 12;\n    var Tvalues = [\n        -0.1252,\n        0.1252,\n        -0.3678,\n        0.3678,\n        -0.5873,\n        0.5873,\n        -0.7699,\n        0.7699,\n        -0.9041,\n        0.9041,\n        -0.9816,\n        0.9816,\n    ];\n    var Cvalues = [0.2491, 0.2491, 0.2335, 0.2335, 0.2032, 0.2032, 0.1601, 0.1601, 0.1069, 0.1069, 0.0472, 0.0472];\n    var sum = 0;\n    for (var i = 0; i < n; i++) {\n        var ct = z2 * Tvalues[i] + z2;\n        var xbase = base3(ct, x1, x2, x3, x4);\n        var ybase = base3(ct, y1, y2, y3, y4);\n        var comb = xbase * xbase + ybase * ybase;\n        sum += Cvalues[i] * Math.sqrt(comb);\n    }\n    return z2 * sum;\n};\nvar curveDim = function (x0, y0, x1, y1, x2, y2, x3, y3) {\n    var tvalues = [];\n    var bounds = [[], []];\n    var a;\n    var b;\n    var c;\n    var t;\n    for (var i = 0; i < 2; ++i) {\n        if (i === 0) {\n            b = 6 * x0 - 12 * x1 + 6 * x2;\n            a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n            c = 3 * x1 - 3 * x0;\n        }\n        else {\n            b = 6 * y0 - 12 * y1 + 6 * y2;\n            a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n            c = 3 * y1 - 3 * y0;\n        }\n        if (Math.abs(a) < 1e-12) {\n            if (Math.abs(b) < 1e-12) {\n                continue;\n            }\n            t = -c / b;\n            if (t > 0 && t < 1) {\n                tvalues.push(t);\n            }\n            continue;\n        }\n        var b2ac = b * b - 4 * c * a;\n        var sqrtb2ac = Math.sqrt(b2ac);\n        if (b2ac < 0) {\n            continue;\n        }\n        var t1 = (-b + sqrtb2ac) / (2 * a);\n        if (t1 > 0 && t1 < 1) {\n            tvalues.push(t1);\n        }\n        var t2 = (-b - sqrtb2ac) / (2 * a);\n        if (t2 > 0 && t2 < 1) {\n            tvalues.push(t2);\n        }\n    }\n    var j = tvalues.length;\n    var jlen = j;\n    var mt;\n    while (j--) {\n        t = tvalues[j];\n        mt = 1 - t;\n        bounds[0][j] = mt * mt * mt * x0 + 3 * mt * mt * t * x1 + 3 * mt * t * t * x2 + t * t * t * x3;\n        bounds[1][j] = mt * mt * mt * y0 + 3 * mt * mt * t * y1 + 3 * mt * t * t * y2 + t * t * t * y3;\n    }\n    bounds[0][jlen] = x0;\n    bounds[1][jlen] = y0;\n    bounds[0][jlen + 1] = x3;\n    bounds[1][jlen + 1] = y3;\n    bounds[0].length = bounds[1].length = jlen + 2;\n    return {\n        min: {\n            x: Math.min.apply(0, bounds[0]),\n            y: Math.min.apply(0, bounds[1]),\n        },\n        max: {\n            x: Math.max.apply(0, bounds[0]),\n            y: Math.max.apply(0, bounds[1]),\n        },\n    };\n};\nvar intersect = function (x1, y1, x2, y2, x3, y3, x4, y4) {\n    if (Math.max(x1, x2) < Math.min(x3, x4) ||\n        Math.min(x1, x2) > Math.max(x3, x4) ||\n        Math.max(y1, y2) < Math.min(y3, y4) ||\n        Math.min(y1, y2) > Math.max(y3, y4)) {\n        return;\n    }\n    var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4);\n    var ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4);\n    var denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n    if (!denominator) {\n        return;\n    }\n    var px = nx / denominator;\n    var py = ny / denominator;\n    var px2 = +px.toFixed(2);\n    var py2 = +py.toFixed(2);\n    if (px2 < +Math.min(x1, x2).toFixed(2) ||\n        px2 > +Math.max(x1, x2).toFixed(2) ||\n        px2 < +Math.min(x3, x4).toFixed(2) ||\n        px2 > +Math.max(x3, x4).toFixed(2) ||\n        py2 < +Math.min(y1, y2).toFixed(2) ||\n        py2 > +Math.max(y1, y2).toFixed(2) ||\n        py2 < +Math.min(y3, y4).toFixed(2) ||\n        py2 > +Math.max(y3, y4).toFixed(2)) {\n        return;\n    }\n    return {\n        x: px,\n        y: py,\n    };\n};\nvar isPointInsideBBox = function (bbox, x, y) {\n    return x >= bbox.x && x <= bbox.x + bbox.width && y >= bbox.y && y <= bbox.y + bbox.height;\n};\nvar rectPath = function (x, y, w, h, r) {\n    if (r) {\n        return [\n            ['M', +x + +r, y],\n            ['l', w - r * 2, 0],\n            ['a', r, r, 0, 0, 1, r, r],\n            ['l', 0, h - r * 2],\n            ['a', r, r, 0, 0, 1, -r, r],\n            ['l', r * 2 - w, 0],\n            ['a', r, r, 0, 0, 1, -r, -r],\n            ['l', 0, r * 2 - h],\n            ['a', r, r, 0, 0, 1, r, -r],\n            ['z'],\n        ];\n    }\n    var res = [['M', x, y], ['l', w, 0], ['l', 0, h], ['l', -w, 0], ['z']];\n    // @ts-ignore\n    res.parsePathArray = parsePathArray;\n    return res;\n};\nvar box = function (x, y, width, height) {\n    if (x === null) {\n        x = y = width = height = 0;\n    }\n    if (y === null) {\n        y = x.y;\n        width = x.width;\n        height = x.height;\n        x = x.x;\n    }\n    return {\n        x: x,\n        y: y,\n        width: width,\n        w: width,\n        height: height,\n        h: height,\n        x2: x + width,\n        y2: y + height,\n        cx: x + width / 2,\n        cy: y + height / 2,\n        r1: Math.min(width, height) / 2,\n        r2: Math.max(width, height) / 2,\n        r0: Math.sqrt(width * width + height * height) / 2,\n        path: rectPath(x, y, width, height),\n        vb: [x, y, width, height].join(' '),\n    };\n};\nvar isBBoxIntersect = function (bbox1, bbox2) {\n    bbox1 = box(bbox1);\n    bbox2 = box(bbox2);\n    return (isPointInsideBBox(bbox2, bbox1.x, bbox1.y) ||\n        isPointInsideBBox(bbox2, bbox1.x2, bbox1.y) ||\n        isPointInsideBBox(bbox2, bbox1.x, bbox1.y2) ||\n        isPointInsideBBox(bbox2, bbox1.x2, bbox1.y2) ||\n        isPointInsideBBox(bbox1, bbox2.x, bbox2.y) ||\n        isPointInsideBBox(bbox1, bbox2.x2, bbox2.y) ||\n        isPointInsideBBox(bbox1, bbox2.x, bbox2.y2) ||\n        isPointInsideBBox(bbox1, bbox2.x2, bbox2.y2) ||\n        (((bbox1.x < bbox2.x2 && bbox1.x > bbox2.x) || (bbox2.x < bbox1.x2 && bbox2.x > bbox1.x)) &&\n            ((bbox1.y < bbox2.y2 && bbox1.y > bbox2.y) || (bbox2.y < bbox1.y2 && bbox2.y > bbox1.y))));\n};\nvar bezierBBox = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n    if (!isArray(p1x)) {\n        p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];\n    }\n    var bbox = curveDim.apply(null, p1x);\n    return box(bbox.min.x, bbox.min.y, bbox.max.x - bbox.min.x, bbox.max.y - bbox.min.y);\n};\nvar findDotsAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n    var t1 = 1 - t;\n    var t13 = Math.pow(t1, 3);\n    var t12 = Math.pow(t1, 2);\n    var t2 = t * t;\n    var t3 = t2 * t;\n    var x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x;\n    var y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y;\n    var mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x);\n    var my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y);\n    var nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x);\n    var ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y);\n    var ax = t1 * p1x + t * c1x;\n    var ay = t1 * p1y + t * c1y;\n    var cx = t1 * c2x + t * p2x;\n    var cy = t1 * c2y + t * p2y;\n    var alpha = 90 - (Math.atan2(mx - nx, my - ny) * 180) / Math.PI;\n    // (mx > nx || my < ny) && (alpha += 180);\n    return {\n        x: x,\n        y: y,\n        m: {\n            x: mx,\n            y: my,\n        },\n        n: {\n            x: nx,\n            y: ny,\n        },\n        start: {\n            x: ax,\n            y: ay,\n        },\n        end: {\n            x: cx,\n            y: cy,\n        },\n        alpha: alpha,\n    };\n};\nvar interHelper = function (bez1, bez2, justCount) {\n    var bbox1 = bezierBBox(bez1);\n    var bbox2 = bezierBBox(bez2);\n    if (!isBBoxIntersect(bbox1, bbox2)) {\n        return justCount ? 0 : [];\n    }\n    var l1 = bezlen.apply(0, bez1);\n    var l2 = bezlen.apply(0, bez2);\n    var n1 = ~~(l1 / 8);\n    var n2 = ~~(l2 / 8);\n    var dots1 = [];\n    var dots2 = [];\n    var xy = {};\n    var res = justCount ? 0 : [];\n    for (var i = 0; i < n1 + 1; i++) {\n        var d = findDotsAtSegment.apply(0, bez1.concat(i / n1));\n        dots1.push({\n            x: d.x,\n            y: d.y,\n            t: i / n1,\n        });\n    }\n    for (var i = 0; i < n2 + 1; i++) {\n        var d = findDotsAtSegment.apply(0, bez2.concat(i / n2));\n        dots2.push({\n            x: d.x,\n            y: d.y,\n            t: i / n2,\n        });\n    }\n    for (var i = 0; i < n1; i++) {\n        for (var j = 0; j < n2; j++) {\n            var di = dots1[i];\n            var di1 = dots1[i + 1];\n            var dj = dots2[j];\n            var dj1 = dots2[j + 1];\n            var ci = Math.abs(di1.x - di.x) < 0.001 ? 'y' : 'x';\n            var cj = Math.abs(dj1.x - dj.x) < 0.001 ? 'y' : 'x';\n            var is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);\n            if (is) {\n                if (xy[is.x.toFixed(4)] === is.y.toFixed(4)) {\n                    continue;\n                }\n                xy[is.x.toFixed(4)] = is.y.toFixed(4);\n                var t1 = di.t + Math.abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t);\n                var t2 = dj.t + Math.abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);\n                if (t1 >= 0 && t1 <= 1 && t2 >= 0 && t2 <= 1) {\n                    if (justCount) {\n                        // @ts-ignore\n                        res += 1;\n                    }\n                    else {\n                        // @ts-ignore\n                        res.push({\n                            x: is.x,\n                            y: is.y,\n                            t1: t1,\n                            t2: t2,\n                        });\n                    }\n                }\n            }\n        }\n    }\n    return res;\n};\nvar interPathHelper = function (path1, path2, justCount) {\n    path1 = pathToCurve(path1);\n    path2 = pathToCurve(path2);\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n    var x1m;\n    var y1m;\n    var x2m;\n    var y2m;\n    var bez1;\n    var bez2;\n    var res = justCount ? 0 : [];\n    for (var i = 0, ii = path1.length; i < ii; i++) {\n        var pi = path1[i];\n        if (pi[0] === 'M') {\n            x1 = x1m = pi[1];\n            y1 = y1m = pi[2];\n        }\n        else {\n            if (pi[0] === 'C') {\n                bez1 = [x1, y1].concat(pi.slice(1));\n                x1 = bez1[6];\n                y1 = bez1[7];\n            }\n            else {\n                bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];\n                x1 = x1m;\n                y1 = y1m;\n            }\n            for (var j = 0, jj = path2.length; j < jj; j++) {\n                var pj = path2[j];\n                if (pj[0] === 'M') {\n                    x2 = x2m = pj[1];\n                    y2 = y2m = pj[2];\n                }\n                else {\n                    if (pj[0] === 'C') {\n                        bez2 = [x2, y2].concat(pj.slice(1));\n                        x2 = bez2[6];\n                        y2 = bez2[7];\n                    }\n                    else {\n                        bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];\n                        x2 = x2m;\n                        y2 = y2m;\n                    }\n                    var intr = interHelper(bez1, bez2, justCount);\n                    if (justCount) {\n                        // @ts-ignore\n                        res += intr;\n                    }\n                    else {\n                        // @ts-ignore\n                        for (var k = 0, kk = intr.length; k < kk; k++) {\n                            intr[k].segment1 = i;\n                            intr[k].segment2 = j;\n                            intr[k].bez1 = bez1;\n                            intr[k].bez2 = bez2;\n                        }\n                        // @ts-ignore\n                        res = res.concat(intr);\n                    }\n                }\n            }\n        }\n    }\n    return res;\n};\nvar intersection = function (path1, path2) {\n    return interPathHelper(path1, path2);\n};\nfunction decasteljau(points, t) {\n    var left = [];\n    var right = [];\n    function recurse(points, t) {\n        if (points.length === 1) {\n            left.push(points[0]);\n            right.push(points[0]);\n        }\n        else {\n            var middlePoints = [];\n            for (var i = 0; i < points.length - 1; i++) {\n                if (i === 0) {\n                    left.push(points[0]);\n                }\n                if (i === points.length - 2) {\n                    right.push(points[i + 1]);\n                }\n                middlePoints[i] = [\n                    (1 - t) * points[i][0] + t * points[i + 1][0],\n                    (1 - t) * points[i][1] + t * points[i + 1][1],\n                ];\n            }\n            recurse(middlePoints, t);\n        }\n    }\n    if (points.length) {\n        recurse(points, t);\n    }\n    return { left: left, right: right.reverse() };\n}\nfunction splitCurve(start, end, count) {\n    var points = [[start[1], start[2]]];\n    count = count || 2;\n    var segments = [];\n    if (end[0] === 'A') {\n        points.push(end[6]);\n        points.push(end[7]);\n    }\n    else if (end[0] === 'C') {\n        points.push([end[1], end[2]]);\n        points.push([end[3], end[4]]);\n        points.push([end[5], end[6]]);\n    }\n    else if (end[0] === 'S' || end[0] === 'Q') {\n        points.push([end[1], end[2]]);\n        points.push([end[3], end[4]]);\n    }\n    else {\n        points.push([end[1], end[2]]);\n    }\n    var leftSegments = points;\n    var t = 1 / count;\n    for (var i = 0; i < count - 1; i++) {\n        var rt = t / (1 - t * i);\n        var split = decasteljau(leftSegments, rt);\n        segments.push(split.left);\n        leftSegments = split.right;\n    }\n    segments.push(leftSegments);\n    var result = segments.map(function (segment) {\n        var cmd = [];\n        if (segment.length === 4) {\n            cmd.push('C');\n            cmd = cmd.concat(segment[2]);\n        }\n        if (segment.length >= 3) {\n            if (segment.length === 3) {\n                cmd.push('Q');\n            }\n            cmd = cmd.concat(segment[1]);\n        }\n        if (segment.length === 2) {\n            cmd.push('L');\n        }\n        cmd = cmd.concat(segment[segment.length - 1]);\n        return cmd;\n    });\n    return result;\n}\nvar splitSegment = function (start, end, count) {\n    if (count === 1) {\n        return [[].concat(start)];\n    }\n    var segments = [];\n    if (end[0] === 'L' || end[0] === 'C' || end[0] === 'Q') {\n        segments = segments.concat(splitCurve(start, end, count));\n    }\n    else {\n        var temp = [].concat(start);\n        if (temp[0] === 'M') {\n            temp[0] = 'L';\n        }\n        for (var i = 0; i <= count - 1; i++) {\n            segments.push(temp);\n        }\n    }\n    return segments;\n};\nvar fillPath = function (source, target) {\n    if (source.length === 1) {\n        return source;\n    }\n    var sourceLen = source.length - 1;\n    var targetLen = target.length - 1;\n    var ratio = sourceLen / targetLen;\n    var segmentsToFill = [];\n    if (source.length === 1 && source[0][0] === 'M') {\n        for (var i = 0; i < targetLen - sourceLen; i++) {\n            source.push(source[0]);\n        }\n        return source;\n    }\n    for (var i = 0; i < targetLen; i++) {\n        var index = Math.floor(ratio * i);\n        segmentsToFill[index] = (segmentsToFill[index] || 0) + 1;\n    }\n    var filled = segmentsToFill.reduce(function (filled, count, i) {\n        if (i === sourceLen) {\n            return filled.concat(source[sourceLen]);\n        }\n        return filled.concat(splitSegment(source[i], source[i + 1], count));\n    }, []);\n    filled.unshift(source[0]);\n    if (target[targetLen] === 'Z' || target[targetLen] === 'z') {\n        filled.push('Z');\n    }\n    return filled;\n};\nvar isEqual = function (obj1, obj2) {\n    if (obj1.length !== obj2.length) {\n        return false;\n    }\n    var result = true;\n    each(obj1, function (item, i) {\n        if (item !== obj2[i]) {\n            result = false;\n            return false;\n        }\n    });\n    return result;\n};\nfunction getMinDiff(del, add, modify) {\n    var type = null;\n    var min = modify;\n    if (add < min) {\n        min = add;\n        type = 'add';\n    }\n    if (del < min) {\n        min = del;\n        type = 'del';\n    }\n    return {\n        type: type,\n        min: min,\n    };\n}\n/*\n * https://en.wikipedia.org/wiki/Levenshtein_distance\n * 计算两条path的编辑距离\n */\nvar levenshteinDistance = function (source, target) {\n    var sourceLen = source.length;\n    var targetLen = target.length;\n    var sourceSegment;\n    var targetSegment;\n    var temp = 0;\n    if (sourceLen === 0 || targetLen === 0) {\n        return null;\n    }\n    var dist = [];\n    for (var i = 0; i <= sourceLen; i++) {\n        dist[i] = [];\n        dist[i][0] = { min: i };\n    }\n    for (var j = 0; j <= targetLen; j++) {\n        dist[0][j] = { min: j };\n    }\n    for (var i = 1; i <= sourceLen; i++) {\n        sourceSegment = source[i - 1];\n        for (var j = 1; j <= targetLen; j++) {\n            targetSegment = target[j - 1];\n            if (isEqual(sourceSegment, targetSegment)) {\n                temp = 0;\n            }\n            else {\n                temp = 1;\n            }\n            var del = dist[i - 1][j].min + 1;\n            var add = dist[i][j - 1].min + 1;\n            var modify = dist[i - 1][j - 1].min + temp;\n            dist[i][j] = getMinDiff(del, add, modify);\n        }\n    }\n    return dist;\n};\nvar fillPathByDiff = function (source, target) {\n    var diffMatrix = levenshteinDistance(source, target);\n    var sourceLen = source.length;\n    var targetLen = target.length;\n    var changes = [];\n    var index = 1;\n    var minPos = 1;\n    // 如果source和target不是完全不相等\n    if (diffMatrix[sourceLen][targetLen].min !== sourceLen) {\n        // 获取从source到target所需改动\n        for (var i = 1; i <= sourceLen; i++) {\n            var min = diffMatrix[i][i].min;\n            minPos = i;\n            for (var j = index; j <= targetLen; j++) {\n                if (diffMatrix[i][j].min < min) {\n                    min = diffMatrix[i][j].min;\n                    minPos = j;\n                }\n            }\n            index = minPos;\n            if (diffMatrix[i][index].type) {\n                changes.push({ index: i - 1, type: diffMatrix[i][index].type });\n            }\n        }\n        // 对source进行增删path\n        for (var i = changes.length - 1; i >= 0; i--) {\n            index = changes[i].index;\n            if (changes[i].type === 'add') {\n                source.splice(index, 0, [].concat(source[index]));\n            }\n            else {\n                source.splice(index, 1);\n            }\n        }\n    }\n    // source尾部补齐\n    sourceLen = source.length;\n    var diff = targetLen - sourceLen;\n    if (sourceLen < targetLen) {\n        for (var i = 0; i < diff; i++) {\n            if (source[sourceLen - 1][0] === 'z' || source[sourceLen - 1][0] === 'Z') {\n                source.splice(sourceLen - 2, 0, source[sourceLen - 2]);\n            }\n            else {\n                source.push(source[sourceLen - 1]);\n            }\n            sourceLen += 1;\n        }\n    }\n    return source;\n};\n// 将两个点均分成count个点\nfunction _splitPoints(points, former, count) {\n    var result = [].concat(points);\n    var index;\n    var t = 1 / (count + 1);\n    var formerEnd = _getSegmentPoints(former)[0];\n    for (var i = 1; i <= count; i++) {\n        t *= i;\n        index = Math.floor(points.length * t);\n        if (index === 0) {\n            result.unshift([formerEnd[0] * t + points[index][0] * (1 - t), formerEnd[1] * t + points[index][1] * (1 - t)]);\n        }\n        else {\n            result.splice(index, 0, [\n                formerEnd[0] * t + points[index][0] * (1 - t),\n                formerEnd[1] * t + points[index][1] * (1 - t),\n            ]);\n        }\n    }\n    return result;\n}\n/*\n * 抽取pathSegment中的关键点\n * M,L,A,Q,H,V一个端点\n * Q, S抽取一个端点，一个控制点\n * C抽取一个端点，两个控制点\n */\nfunction _getSegmentPoints(segment) {\n    var points = [];\n    switch (segment[0]) {\n        case 'M':\n            points.push([segment[1], segment[2]]);\n            break;\n        case 'L':\n            points.push([segment[1], segment[2]]);\n            break;\n        case 'A':\n            points.push([segment[6], segment[7]]);\n            break;\n        case 'Q':\n            points.push([segment[3], segment[4]]);\n            points.push([segment[1], segment[2]]);\n            break;\n        case 'T':\n            points.push([segment[1], segment[2]]);\n            break;\n        case 'C':\n            points.push([segment[5], segment[6]]);\n            points.push([segment[1], segment[2]]);\n            points.push([segment[3], segment[4]]);\n            break;\n        case 'S':\n            points.push([segment[3], segment[4]]);\n            points.push([segment[1], segment[2]]);\n            break;\n        case 'H':\n            points.push([segment[1], segment[1]]);\n            break;\n        case 'V':\n            points.push([segment[1], segment[1]]);\n            break;\n        default:\n    }\n    return points;\n}\nvar formatPath = function (fromPath, toPath) {\n    if (fromPath.length <= 1) {\n        return fromPath;\n    }\n    var points;\n    for (var i = 0; i < toPath.length; i++) {\n        if (fromPath[i][0] !== toPath[i][0]) {\n            // 获取fromPath的pathSegment的端点，根据toPath的指令对其改造\n            points = _getSegmentPoints(fromPath[i]);\n            switch (toPath[i][0]) {\n                case 'M':\n                    fromPath[i] = ['M'].concat(points[0]);\n                    break;\n                case 'L':\n                    fromPath[i] = ['L'].concat(points[0]);\n                    break;\n                case 'A':\n                    fromPath[i] = [].concat(toPath[i]);\n                    fromPath[i][6] = points[0][0];\n                    fromPath[i][7] = points[0][1];\n                    break;\n                case 'Q':\n                    if (points.length < 2) {\n                        if (i > 0) {\n                            points = _splitPoints(points, fromPath[i - 1], 1);\n                        }\n                        else {\n                            fromPath[i] = toPath[i];\n                            break;\n                        }\n                    }\n                    fromPath[i] = ['Q'].concat(points.reduce(function (arr, i) {\n                        return arr.concat(i);\n                    }, []));\n                    break;\n                case 'T':\n                    fromPath[i] = ['T'].concat(points[0]);\n                    break;\n                case 'C':\n                    if (points.length < 3) {\n                        if (i > 0) {\n                            points = _splitPoints(points, fromPath[i - 1], 2);\n                        }\n                        else {\n                            fromPath[i] = toPath[i];\n                            break;\n                        }\n                    }\n                    fromPath[i] = ['C'].concat(points.reduce(function (arr, i) {\n                        return arr.concat(i);\n                    }, []));\n                    break;\n                case 'S':\n                    if (points.length < 2) {\n                        if (i > 0) {\n                            points = _splitPoints(points, fromPath[i - 1], 1);\n                        }\n                        else {\n                            fromPath[i] = toPath[i];\n                            break;\n                        }\n                    }\n                    fromPath[i] = ['S'].concat(points.reduce(function (arr, i) {\n                        return arr.concat(i);\n                    }, []));\n                    break;\n                default:\n                    fromPath[i] = toPath[i];\n            }\n        }\n    }\n    return fromPath;\n};\nexport { catmullRomToBezier, fillPath, fillPathByDiff, formatPath, intersection, parsePathArray, parsePathString, pathToAbsolute, pathToCurve, rectPath, };\n//# sourceMappingURL=path.js.map","import { __assign, __extends } from \"tslib\";\nimport { AbstractShape } from '@antv/g-base';\nimport { isNil, intersectRect } from '../util/util';\nimport { applyAttrsToContext, refreshElement } from '../util/draw';\nimport { getBBoxMethod } from '@antv/g-base/lib/bbox/index';\nimport * as Shape from './index';\nimport Group from '../group';\nvar ShapeBase = /** @class */ (function (_super) {\n    __extends(ShapeBase, _super);\n    function ShapeBase() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ShapeBase.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        // 设置默认值\n        return __assign(__assign({}, attrs), { lineWidth: 1, lineAppendWidth: 0, strokeOpacity: 1, fillOpacity: 1 });\n    };\n    ShapeBase.prototype.getShapeBase = function () {\n        return Shape;\n    };\n    ShapeBase.prototype.getGroupBase = function () {\n        return Group;\n    };\n    /**\n     * 一些方法调用会引起画布变化\n     * @param {ChangeType} changeType 改变的类型\n     */\n    ShapeBase.prototype.onCanvasChange = function (changeType) {\n        refreshElement(this, changeType);\n    };\n    ShapeBase.prototype.calculateBBox = function () {\n        var type = this.get('type');\n        var lineWidth = this.getHitLineWidth();\n        // const attrs = this.attr();\n        var bboxMethod = getBBoxMethod(type);\n        var box = bboxMethod(this);\n        var halfLineWidth = lineWidth / 2;\n        var minX = box.x - halfLineWidth;\n        var minY = box.y - halfLineWidth;\n        var maxX = box.x + box.width + halfLineWidth;\n        var maxY = box.y + box.height + halfLineWidth;\n        return {\n            x: minX,\n            minX: minX,\n            y: minY,\n            minY: minY,\n            width: box.width + lineWidth,\n            height: box.height + lineWidth,\n            maxX: maxX,\n            maxY: maxY,\n        };\n    };\n    ShapeBase.prototype.isFill = function () {\n        return !!this.attrs['fill'] || this.isClipShape();\n    };\n    ShapeBase.prototype.isStroke = function () {\n        return !!this.attrs['stroke'];\n    };\n    // 同 shape 中的方法重复了\n    ShapeBase.prototype._applyClip = function (context, clip) {\n        if (clip) {\n            context.save();\n            // 将 clip 的属性挂载到 context 上\n            applyAttrsToContext(context, clip);\n            // 绘制 clip 路径\n            clip.createPath(context);\n            context.restore();\n            // 裁剪\n            context.clip();\n            clip._afterDraw();\n        }\n    };\n    // 绘制图形时需要考虑 region 限制\n    ShapeBase.prototype.draw = function (context, region) {\n        var clip = this.cfg.clipShape;\n        // 如果指定了 region，同时不允许刷新时，直接返回\n        if (region) {\n            if (this.cfg.refresh === false) {\n                // this._afterDraw();\n                this.set('hasChanged', false);\n                return;\n            }\n            // 是否相交需要考虑 clip 的包围盒\n            var bbox = this.getCanvasBBox();\n            if (!intersectRect(region, bbox)) {\n                // 图形的包围盒与重绘区域不相交时，也需要清除标记\n                this.set('hasChanged', false);\n                // 存在多种情形需要更新 cacheCanvasBBox 和 isInview 的判定\n                // 1. 之前图形在视窗内，但是现在不再视窗内\n                // 2. 如果当前的图形以及父元素都没有发生过变化，refresh = false 不会走到这里，所以这里的图形都是父元素发生变化，但是没有在视图内的元素\n                if (this.cfg.isInView) {\n                    this._afterDraw();\n                }\n                return;\n            }\n        }\n        context.save();\n        // 先将 attrs 应用到上下文中，再设置 clip。因为 clip 应该被当前元素的 matrix 所影响\n        applyAttrsToContext(context, this);\n        this._applyClip(context, clip);\n        this.drawPath(context);\n        context.restore();\n        this._afterDraw();\n    };\n    ShapeBase.prototype.getCanvasViewBox = function () {\n        var canvas = this.cfg.canvas;\n        if (canvas) {\n            // @ts-ignore\n            return canvas.getViewRange();\n        }\n        return null;\n    };\n    ShapeBase.prototype.cacheCanvasBBox = function () {\n        var canvasBBox = this.getCanvasViewBox();\n        // 绘制的时候缓存包围盒\n        if (canvasBBox) {\n            var bbox = this.getCanvasBBox();\n            var isInView = intersectRect(bbox, canvasBBox);\n            this.set('isInView', isInView);\n            // 不再视窗内 cacheCanvasBBox 设置成 null，会提升局部渲染的性能，\n            // 因为在局部渲染影响的包围盒计算时不考虑这个图形的包围盒\n            // 父元素 cacheCanvasBBox 计算的时候也不计算\n            if (isInView) {\n                this.set('cacheCanvasBBox', bbox);\n            }\n            else {\n                this.set('cacheCanvasBBox', null);\n            }\n        }\n    };\n    ShapeBase.prototype._afterDraw = function () {\n        this.cacheCanvasBBox();\n        // 绘制后消除标记\n        this.set('hasChanged', false);\n        this.set('refresh', null);\n    };\n    ShapeBase.prototype.skipDraw = function () {\n        this.set('cacheCanvasBBox', null);\n        this.set('isInView', null);\n        this.set('hasChanged', false);\n    };\n    /**\n     * 绘制图形的路径\n     * @param {CanvasRenderingContext2D} context 上下文\n     */\n    ShapeBase.prototype.drawPath = function (context) {\n        this.createPath(context);\n        this.strokeAndFill(context);\n        this.afterDrawPath(context);\n    };\n    /**\n     * @protected\n     * 填充图形\n     * @param {CanvasRenderingContext2D} context context 上下文\n     */\n    ShapeBase.prototype.fill = function (context) {\n        context.fill();\n    };\n    /**\n     * @protected\n     * 绘制图形边框\n     * @param {CanvasRenderingContext2D} context context 上下文\n     */\n    ShapeBase.prototype.stroke = function (context) {\n        context.stroke();\n    };\n    // 绘制或者填充\n    ShapeBase.prototype.strokeAndFill = function (context) {\n        var _a = this.attrs, lineWidth = _a.lineWidth, opacity = _a.opacity, strokeOpacity = _a.strokeOpacity, fillOpacity = _a.fillOpacity;\n        if (this.isFill()) {\n            if (!isNil(fillOpacity) && fillOpacity !== 1) {\n                context.globalAlpha = fillOpacity;\n                this.fill(context);\n                context.globalAlpha = opacity;\n            }\n            else {\n                this.fill(context);\n            }\n        }\n        if (this.isStroke()) {\n            if (lineWidth > 0) {\n                if (!isNil(strokeOpacity) && strokeOpacity !== 1) {\n                    context.globalAlpha = strokeOpacity;\n                }\n                this.stroke(context);\n            }\n        }\n        this.afterDrawPath(context);\n    };\n    /**\n     * @protected\n     * 绘制图形的路径\n     * @param {CanvasRenderingContext2D} context 上下文\n     */\n    ShapeBase.prototype.createPath = function (context) { };\n    /**\n     * 绘制完成 path 后的操作\n     * @param {CanvasRenderingContext2D} context 上下文\n     */\n    ShapeBase.prototype.afterDrawPath = function (context) { };\n    ShapeBase.prototype.isInShape = function (refX, refY) {\n        // return HitUtil.isHitShape(this, refX, refY);\n        var isStroke = this.isStroke();\n        var isFill = this.isFill();\n        var lineWidth = this.getHitLineWidth();\n        return this.isInStrokeOrPath(refX, refY, isStroke, isFill, lineWidth);\n    };\n    // 之所以不拆成 isInStroke 和 isInPath 在于两者存在一些共同的计算\n    ShapeBase.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {\n        return false;\n    };\n    /**\n     * 获取线拾取的宽度\n     * @returns {number} 线的拾取宽度\n     */\n    ShapeBase.prototype.getHitLineWidth = function () {\n        if (!this.isStroke()) {\n            return 0;\n        }\n        var attrs = this.attrs;\n        return attrs['lineWidth'] + attrs['lineAppendWidth'];\n    };\n    return ShapeBase;\n}(AbstractShape));\nexport default ShapeBase;\n//# sourceMappingURL=base.js.map","/**\n * @fileoverview 圆\n * @author dxq613@gmail.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport ShapeBase from './base';\nimport { distance } from '../util/util';\n// TODO: 暂时不需要圆的工具方法，后续如果需要支持 pointAt，tangentAngle 时再引入\n// import CircleUtil from '@antv/g-math/lib/circle';\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Circle.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, r: 0 });\n    };\n    Circle.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {\n        var attrs = this.attr();\n        var cx = attrs.x;\n        var cy = attrs.y;\n        var r = attrs.r;\n        var halfLineWidth = lineWidth / 2;\n        var absDistance = distance(cx, cy, x, y);\n        // 直接用距离，如果同时存在边和填充时，可以减少两次计算\n        if (isFill && isStroke) {\n            return absDistance <= r + halfLineWidth;\n        }\n        if (isFill) {\n            return absDistance <= r;\n        }\n        if (isStroke) {\n            return absDistance >= r - halfLineWidth && absDistance <= r + halfLineWidth;\n        }\n        return false;\n    };\n    Circle.prototype.createPath = function (context) {\n        var attrs = this.attr();\n        var cx = attrs.x;\n        var cy = attrs.y;\n        var r = attrs.r;\n        context.beginPath();\n        context.arc(cx, cy, r, 0, Math.PI * 2, false);\n        context.closePath();\n    };\n    return Circle;\n}(ShapeBase));\nexport default Circle;\n//# sourceMappingURL=circle.js.map","/**\n * @fileoverview 椭圆\n * @author dxq613@gmail.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport ShapeBase from './base';\n// 暂时不需要\n// import EllipseUtil from '@antv/g-math/lib/ellipse';\n// 根据椭圆公式计算 x*x/rx*rx + y*y/ry*ry;\nfunction ellipseDistance(squareX, squareY, rx, ry) {\n    return squareX / (rx * rx) + squareY / (ry * ry);\n}\nvar Ellipse = /** @class */ (function (_super) {\n    __extends(Ellipse, _super);\n    function Ellipse() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Ellipse.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, rx: 0, ry: 0 });\n    };\n    Ellipse.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {\n        var attrs = this.attr();\n        var halfLineWith = lineWidth / 2;\n        var cx = attrs.x;\n        var cy = attrs.y;\n        var rx = attrs.rx, ry = attrs.ry;\n        var squareX = (x - cx) * (x - cx);\n        var squareY = (y - cy) * (y - cy);\n        // 使用椭圆的公式： x*x/rx*rx + y*y/ry*ry = 1;\n        if (isFill && isStroke) {\n            return ellipseDistance(squareX, squareY, rx + halfLineWith, ry + halfLineWith) <= 1;\n        }\n        if (isFill) {\n            return ellipseDistance(squareX, squareY, rx, ry) <= 1;\n        }\n        if (isStroke) {\n            return (ellipseDistance(squareX, squareY, rx - halfLineWith, ry - halfLineWith) >= 1 &&\n                ellipseDistance(squareX, squareY, rx + halfLineWith, ry + halfLineWith) <= 1);\n        }\n        return false;\n    };\n    Ellipse.prototype.createPath = function (context) {\n        var attrs = this.attr();\n        var cx = attrs.x;\n        var cy = attrs.y;\n        var rx = attrs.rx;\n        var ry = attrs.ry;\n        context.beginPath();\n        // 兼容逻辑\n        if (context.ellipse) {\n            context.ellipse(cx, cy, rx, ry, 0, 0, Math.PI * 2, false);\n        }\n        else {\n            // 如果不支持，则使用圆来绘制，进行变形\n            var r = rx > ry ? rx : ry;\n            var scaleX = rx > ry ? 1 : rx / ry;\n            var scaleY = rx > ry ? ry / rx : 1;\n            context.save();\n            context.translate(cx, cy);\n            context.scale(scaleX, scaleY);\n            context.arc(0, 0, r, 0, Math.PI * 2);\n            context.restore();\n            context.closePath();\n        }\n    };\n    return Ellipse;\n}(ShapeBase));\nexport default Ellipse;\n//# sourceMappingURL=ellipse.js.map","/**\n * @fileoverview 图片\n * @author dxq613@gmail.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport ShapeBase from './base';\nimport { isString, isNil } from '../util/util';\nfunction isCanvas(dom) {\n    return dom instanceof HTMLElement && isString(dom.nodeName) && dom.nodeName.toUpperCase() === 'CANVAS';\n}\nvar ImageShape = /** @class */ (function (_super) {\n    __extends(ImageShape, _super);\n    function ImageShape() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ImageShape.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, width: 0, height: 0 });\n    };\n    ImageShape.prototype.initAttrs = function (attrs) {\n        this._setImage(attrs.img);\n    };\n    // image 不计算 stroke\n    ImageShape.prototype.isStroke = function () {\n        return false;\n    };\n    // 仅仅使用包围盒检测来进行拾取\n    // 所以不需要复写 isInStrokeOrPath 的方法\n    ImageShape.prototype.isOnlyHitBox = function () {\n        return true;\n    };\n    ImageShape.prototype._afterLoading = function () {\n        if (this.get('toDraw') === true) {\n            var canvas = this.get('canvas');\n            if (canvas) {\n                // 这段应该改成局部渲染\n                canvas.draw();\n            }\n            else {\n                // 这种方式如果发生遮挡会出现问题\n                this.createPath(this.get('context'));\n            }\n        }\n    };\n    ImageShape.prototype._setImage = function (img) {\n        var _this = this;\n        var attrs = this.attrs;\n        if (isString(img)) {\n            var image_1 = new Image();\n            image_1.onload = function () {\n                // 图片未加载完，则已经被销毁\n                if (_this.destroyed) {\n                    return false;\n                }\n                // 缓存原始地址，可以做对比，防止重复加载图片\n                // 如果考虑到在加载过程中可能替换 img 属性，则情况更加复杂\n                // this.set('imgSrc', img);\n                // 这里会循环调用 _setImage 方法，但不会再走这个分支\n                _this.attr('img', image_1);\n                _this.set('loading', false);\n                _this._afterLoading();\n                var callback = _this.get('callback');\n                if (callback) {\n                    callback.call(_this);\n                }\n            };\n            // 设置跨域\n            image_1.crossOrigin = 'Anonymous';\n            image_1.src = img;\n            // loading 过程中不绘制\n            this.set('loading', true);\n        }\n        else if (img instanceof Image) {\n            // 如果是一个 image 对象，则设置宽高\n            if (!attrs.width) {\n                attrs.width = img.width;\n            }\n            if (!attrs.height) {\n                attrs.height = img.height;\n            }\n        }\n        else if (isCanvas(img)) {\n            // 如果设置了 canvas 对象\n            if (!attrs.width) {\n                attrs.width = Number(img.getAttribute('width'));\n            }\n            if (!attrs.height) {\n                attrs.height, Number(img.getAttribute('height'));\n            }\n        }\n    };\n    ImageShape.prototype.onAttrChange = function (name, value, originValue) {\n        _super.prototype.onAttrChange.call(this, name, value, originValue);\n        // 如果加载的已经是当前图片，则不再处理\n        if (name === 'img') {\n            // 可以加缓冲，&& this.get('imgSrc') !== value\n            this._setImage(value);\n        }\n    };\n    ImageShape.prototype.createPath = function (context) {\n        // 正在加载则不绘制\n        if (this.get('loading')) {\n            this.set('toDraw', true); // 加载完成后绘制\n            this.set('context', context);\n            return;\n        }\n        var attrs = this.attr();\n        var x = attrs.x, y = attrs.y, width = attrs.width, height = attrs.height, sx = attrs.sx, sy = attrs.sy, swidth = attrs.swidth, sheight = attrs.sheight;\n        var img = attrs.img;\n        if (img instanceof Image || isCanvas(img)) {\n            if (!isNil(sx) && !isNil(sy) && !isNil(swidth) && !isNil(sheight)) {\n                context.drawImage(img, sx, sy, swidth, sheight, x, y, width, height);\n            }\n            else {\n                context.drawImage(img, x, y, width, height);\n            }\n        }\n    };\n    return ImageShape;\n}(ShapeBase));\nexport default ImageShape;\n//# sourceMappingURL=image.js.map","import LineUtil from '@antv/g-math/lib/line';\nexport default function inLine(x1, y1, x2, y2, lineWidth, x, y) {\n    var minX = Math.min(x1, x2);\n    var maxX = Math.max(x1, x2);\n    var minY = Math.min(y1, y2);\n    var maxY = Math.max(y1, y2);\n    var halfWidth = lineWidth / 2;\n    // 因为目前的方案是计算点到直线的距离，而有可能会在延长线上，所以要先判断是否在包围盒内\n    // 这种方案会在水平或者竖直的情况下载线的延长线上有半 lineWidth 的误差\n    if (!(x >= minX - halfWidth && x <= maxX + halfWidth && y >= minY - halfWidth && y <= maxY + halfWidth)) {\n        return false;\n    }\n    // 因为已经计算了包围盒，所以仅需要计算到直线的距离即可，可以显著提升性能\n    return LineUtil.pointToLine(x1, y1, x2, y2, x, y) <= lineWidth / 2;\n}\n//# sourceMappingURL=line.js.map","import { __assign, __extends } from \"tslib\";\n/**\n * @fileoverview 圆\n * @author dxq613@gmail.com\n */\nimport LineUtil from '@antv/g-math/lib/line';\nimport ShapeBase from './base';\nimport inLine from '../util/in-stroke/line';\nimport * as ArrowUtil from '../util/arrow';\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Line.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x1: 0, y1: 0, x2: 0, y2: 0, startArrow: false, endArrow: false });\n    };\n    Line.prototype.initAttrs = function (attrs) {\n        this.setArrow();\n    };\n    // 更新属性时，检测是否更改了箭头\n    Line.prototype.onAttrChange = function (name, value, originValue) {\n        _super.prototype.onAttrChange.call(this, name, value, originValue);\n        // 由于箭头的绘制依赖于 line 的诸多 attrs，因此这里不再对每个 attr 进行判断，attr 每次变化都会影响箭头的更新\n        this.setArrow();\n    };\n    Line.prototype.setArrow = function () {\n        var attrs = this.attr();\n        var x1 = attrs.x1, y1 = attrs.y1, x2 = attrs.x2, y2 = attrs.y2, startArrow = attrs.startArrow, endArrow = attrs.endArrow;\n        if (startArrow) {\n            ArrowUtil.addStartArrow(this, attrs, x2, y2, x1, y1);\n        }\n        if (endArrow) {\n            ArrowUtil.addEndArrow(this, attrs, x1, y1, x2, y2);\n        }\n    };\n    Line.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {\n        if (!isStroke || !lineWidth) {\n            return false;\n        }\n        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;\n        return inLine(x1, y1, x2, y2, lineWidth, x, y);\n    };\n    Line.prototype.createPath = function (context) {\n        var attrs = this.attr();\n        var x1 = attrs.x1, y1 = attrs.y1, x2 = attrs.x2, y2 = attrs.y2, startArrow = attrs.startArrow, endArrow = attrs.endArrow;\n        var startArrowDistance = {\n            dx: 0,\n            dy: 0,\n        };\n        var endArrowDistance = {\n            dx: 0,\n            dy: 0,\n        };\n        if (startArrow && startArrow.d) {\n            startArrowDistance = ArrowUtil.getShortenOffset(x1, y1, x2, y2, attrs.startArrow.d);\n        }\n        if (endArrow && endArrow.d) {\n            endArrowDistance = ArrowUtil.getShortenOffset(x1, y1, x2, y2, attrs.endArrow.d);\n        }\n        context.beginPath();\n        // 如果自定义箭头，线条相应缩进\n        context.moveTo(x1 + startArrowDistance.dx, y1 + startArrowDistance.dy);\n        context.lineTo(x2 - endArrowDistance.dx, y2 - endArrowDistance.dy);\n    };\n    Line.prototype.afterDrawPath = function (context) {\n        var startArrowShape = this.get('startArrowShape');\n        var endArrowShape = this.get('endArrowShape');\n        if (startArrowShape) {\n            startArrowShape.draw(context);\n        }\n        if (endArrowShape) {\n            endArrowShape.draw(context);\n        }\n    };\n    /**\n     * Get length of line\n     * @return {number} length\n     */\n    Line.prototype.getTotalLength = function () {\n        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;\n        return LineUtil.length(x1, y1, x2, y2);\n    };\n    /**\n     * Get point according to ratio\n     * @param {number} ratio\n     * @return {Point} point\n     */\n    Line.prototype.getPoint = function (ratio) {\n        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;\n        return LineUtil.pointAt(x1, y1, x2, y2, ratio);\n    };\n    return Line;\n}(ShapeBase));\nexport default Line;\n//# sourceMappingURL=line.js.map","/**\n * @fileoverview Marker\n * @author dxq613@gmail.com\n */\nimport { __extends } from \"tslib\";\nimport { isNil } from '@antv/util';\nimport path2Absolute from '@antv/path-util/lib/path-2-absolute';\nimport ShapeBase from './base';\nimport { isFunction } from '../util/util';\nimport { drawPath } from '../util/draw';\nvar Symbols = {\n    // 圆\n    circle: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['A', r, r, 0, 1, 0, x + r, y],\n            ['A', r, r, 0, 1, 0, x - r, y],\n        ];\n    },\n    // 正方形\n    square: function (x, y, r) {\n        return [['M', x - r, y - r], ['L', x + r, y - r], ['L', x + r, y + r], ['L', x - r, y + r], ['Z']];\n    },\n    // 菱形\n    diamond: function (x, y, r) {\n        return [['M', x - r, y], ['L', x, y - r], ['L', x + r, y], ['L', x, y + r], ['Z']];\n    },\n    // 三角形\n    triangle: function (x, y, r) {\n        var diffY = r * Math.sin((1 / 3) * Math.PI);\n        return [['M', x - r, y + diffY], ['L', x, y - diffY], ['L', x + r, y + diffY], ['Z']];\n    },\n    // 倒三角形\n    'triangle-down': function (x, y, r) {\n        var diffY = r * Math.sin((1 / 3) * Math.PI);\n        return [['M', x - r, y - diffY], ['L', x + r, y - diffY], ['L', x, y + diffY], ['Z']];\n    },\n};\nvar Marker = /** @class */ (function (_super) {\n    __extends(Marker, _super);\n    function Marker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Marker.prototype.initAttrs = function (attrs) {\n        this._resetParamsCache();\n    };\n    // 重置绘制 path 存储的缓存\n    Marker.prototype._resetParamsCache = function () {\n        // 为了加速 path 的绘制、拾取和计算，这个地方可以缓存很多东西\n        // 这些缓存都是第一次需要时计算和存储，虽然增加了复杂度，但是频繁调用的方法，性能有很大提升\n        this.set('paramsCache', {}); // 清理缓存\n    };\n    // 更新属性时，检测是否更改了 path\n    Marker.prototype.onAttrChange = function (name, value, originValue) {\n        _super.prototype.onAttrChange.call(this, name, value, originValue);\n        if (['symbol', 'x', 'y', 'r', 'radius'].indexOf(name) !== -1) {\n            // path 相关属性更改时，清理缓存\n            this._resetParamsCache();\n        }\n    };\n    // 仅仅使用包围盒检测来进行拾取\n    // 所以不需要复写 isInStrokeOrPath 的方法\n    Marker.prototype.isOnlyHitBox = function () {\n        return true;\n    };\n    Marker.prototype._getR = function (attrs) {\n        // 兼容 r 和 radius 两种写法，推荐使用 r\n        return isNil(attrs.r) ? attrs.radius : attrs.r;\n    };\n    Marker.prototype._getPath = function () {\n        var attrs = this.attr();\n        var x = attrs.x, y = attrs.y;\n        var symbol = attrs.symbol || 'circle';\n        var r = this._getR(attrs);\n        var method;\n        var path;\n        if (isFunction(symbol)) {\n            method = symbol;\n            path = method(x, y, r);\n            // 将 path 转成绝对路径\n            path = path2Absolute(path);\n        }\n        else {\n            // 内置 symbol 的 path 都是绝对路径，直接绘制即可，不需要对 path 进行特殊处理\n            method = Marker.Symbols[symbol];\n            path = method(x, y, r);\n        }\n        if (!method) {\n            console.warn(symbol + \" marker is not supported.\");\n            return null;\n        }\n        return path;\n    };\n    Marker.prototype.createPath = function (context) {\n        var path = this._getPath();\n        var paramsCache = this.get('paramsCache');\n        drawPath(this, context, { path: path }, paramsCache);\n    };\n    Marker.Symbols = Symbols;\n    return Marker;\n}(ShapeBase));\nexport default Marker;\n//# sourceMappingURL=marker.js.map","import { getOffScreenContext } from '@antv/g-base/lib/util/offscreen';\nexport default function isPointInPath(shape, x, y) {\n    var ctx = getOffScreenContext();\n    shape.createPath(ctx);\n    return ctx.isPointInPath(x, y);\n}\n//# sourceMappingURL=point-in-path.js.map","/**\n * @fileoverview 判断点是否在多边形内\n * @author dxq613@gmail.com\n */\n// 多边形的射线检测，参考：https://blog.csdn.net/WilliamSun0122/article/details/77994526\nvar tolerance = 1e-6;\n// 三态函数，判断两个double在eps精度下的大小关系\nfunction dcmp(x) {\n    if (Math.abs(x) < tolerance) {\n        return 0;\n    }\n    return x < 0 ? -1 : 1;\n}\n// 判断点Q是否在p1和p2的线段上\nfunction onSegment(p1, p2, q) {\n    if ((q[0] - p1[0]) * (p2[1] - p1[1]) === (p2[0] - p1[0]) * (q[1] - p1[1]) &&\n        Math.min(p1[0], p2[0]) <= q[0] &&\n        q[0] <= Math.max(p1[0], p2[0]) &&\n        Math.min(p1[1], p2[1]) <= q[1] &&\n        q[1] <= Math.max(p1[1], p2[1])) {\n        return true;\n    }\n    return false;\n}\n// 判断点P在多边形内-射线法\nexport default function isInPolygon(points, x, y) {\n    var isHit = false;\n    var n = points.length;\n    if (n <= 2) {\n        // svg 中点小于 3 个时，不显示，也无法被拾取\n        return false;\n    }\n    for (var i = 0; i < n; i++) {\n        var p1 = points[i];\n        var p2 = points[(i + 1) % n];\n        if (onSegment(p1, p2, [x, y])) {\n            // 点在多边形一条边上\n            return true;\n        }\n        // 前一个判断min(p1[1],p2[1])<P.y<=max(p1[1],p2[1])\n        // 后一个判断被测点 在 射线与边交点 的左边\n        if (dcmp(p1[1] - y) > 0 !== dcmp(p2[1] - y) > 0 &&\n            dcmp(x - ((y - p1[1]) * (p1[0] - p2[0])) / (p1[1] - p2[1]) - p1[0]) < 0) {\n            isHit = !isHit;\n        }\n    }\n    return isHit;\n}\n//# sourceMappingURL=polygon.js.map","import { distance } from '../util';\nexport default function arc(cx, cy, r, startAngle, endAngle, lineWidth, x, y) {\n    var angle = (Math.atan2(y - cy, x - cx) + Math.PI * 2) % (Math.PI * 2); // 转换到 0 - 2 * Math.PI 之间\n    if (angle < startAngle || angle > endAngle) {\n        return false;\n    }\n    var point = {\n        x: cx + r * Math.cos(angle),\n        y: cy + r * Math.sin(angle),\n    };\n    return distance(point.x, point.y, x, y) <= lineWidth / 2;\n}\n//# sourceMappingURL=arc.js.map","import { __assign } from \"tslib\";\n/**\n * @fileoverview path 的一些工具\n * @author dxq613@gmail.com\n */\nimport { PathUtil } from '@antv/g-base';\nimport QuadUtil from '@antv/g-math/lib/quadratic';\nimport CubicUtil from '@antv/g-math/lib/cubic';\nimport { inBox } from './util';\nimport inLine from './in-stroke/line';\nimport inArc from './in-stroke/arc';\nimport { ext } from '@antv/matrix-util';\nimport * as vec3 from 'gl-matrix/vec3';\nvar transform = ext.transform;\nfunction hasArc(path) {\n    var hasArc = false;\n    var count = path.length;\n    for (var i = 0; i < count; i++) {\n        var params = path[i];\n        var cmd = params[0];\n        if (cmd === 'C' || cmd === 'A' || cmd === 'Q') {\n            hasArc = true;\n            break;\n        }\n    }\n    return hasArc;\n}\nfunction isPointInStroke(segments, lineWidth, x, y, length) {\n    var isHit = false;\n    var halfWidth = lineWidth / 2;\n    for (var i = 0; i < segments.length; i++) {\n        var segment = segments[i];\n        var currentPoint = segment.currentPoint, params = segment.params, prePoint = segment.prePoint, box = segment.box;\n        // 如果在前面已经生成过包围盒，直接按照包围盒计算\n        if (box && !inBox(box.x - halfWidth, box.y - halfWidth, box.width + lineWidth, box.height + lineWidth, x, y)) {\n            continue;\n        }\n        switch (segment.command) {\n            // L 和 Z 都是直线， M 不进行拾取\n            case 'L':\n            case 'Z':\n                isHit = inLine(prePoint[0], prePoint[1], currentPoint[0], currentPoint[1], lineWidth, x, y);\n                break;\n            case 'Q':\n                var qDistance = QuadUtil.pointDistance(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], x, y);\n                isHit = qDistance <= lineWidth / 2;\n                break;\n            case 'C':\n                var cDistance = CubicUtil.pointDistance(prePoint[0], // 上一段结束位置, 即 C 的起始点\n                prePoint[1], params[1], // 'C' 的参数，1、2 为第一个控制点，3、4 为第二个控制点，5、6 为结束点\n                params[2], params[3], params[4], params[5], params[6], x, y, length);\n                isHit = cDistance <= lineWidth / 2;\n                break;\n            case 'A':\n                // 计算点到椭圆圆弧的距离，暂时使用近似算法，后面可以改成切割法求最近距离\n                var arcParams = segment.arcParams;\n                var cx = arcParams.cx, cy = arcParams.cy, rx = arcParams.rx, ry = arcParams.ry, startAngle = arcParams.startAngle, endAngle = arcParams.endAngle, xRotation = arcParams.xRotation;\n                var p = [x, y, 1];\n                var r = rx > ry ? rx : ry;\n                var scaleX = rx > ry ? 1 : rx / ry;\n                var scaleY = rx > ry ? ry / rx : 1;\n                var m = transform(null, [\n                    ['t', -cx, -cy],\n                    ['r', -xRotation],\n                    ['s', 1 / scaleX, 1 / scaleY],\n                ]);\n                vec3.transformMat3(p, p, m);\n                isHit = inArc(0, 0, r, startAngle, endAngle, lineWidth, p[0], p[1]);\n                break;\n            default:\n                break;\n        }\n        if (isHit) {\n            break;\n        }\n    }\n    return isHit;\n}\n/**\n * 提取出内部的闭合多边形和非闭合的多边形，假设 path 不存在圆弧\n * @param {Array} path 路径\n * @returns {Array} 点的集合\n */\nfunction extractPolygons(path) {\n    var count = path.length;\n    var polygons = [];\n    var polylines = [];\n    var points = []; // 防止第一个命令不是 'M'\n    for (var i = 0; i < count; i++) {\n        var params = path[i];\n        var cmd = params[0];\n        if (cmd === 'M') {\n            // 遇到 'M' 判定是否是新数组，新数组中没有点\n            if (points.length) {\n                // 如果存在点，则说明没有遇到 'Z'，开始了一个新的多边形\n                polylines.push(points);\n                points = []; // 创建新的点\n            }\n            points.push([params[1], params[2]]);\n        }\n        else if (cmd === 'Z') {\n            if (points.length) {\n                // 存在点\n                polygons.push(points);\n                points = []; // 开始新的点集合\n            }\n            // 如果不存在点，同时 'Z'，则说明是错误，不处理\n        }\n        else {\n            points.push([params[1], params[2]]);\n        }\n    }\n    // 说明 points 未放入 polygons 或者 polyline\n    // 仅当只有一个 M，没有 Z 时会发生这种情况\n    if (points.length > 0) {\n        polylines.push(points);\n    }\n    return {\n        polygons: polygons,\n        polylines: polylines,\n    };\n}\nexport default __assign({ hasArc: hasArc,\n    extractPolygons: extractPolygons,\n    isPointInStroke: isPointInStroke }, PathUtil);\n//# sourceMappingURL=path.js.map","import { __assign, __extends } from \"tslib\";\nimport CubicUtil from '@antv/g-math/lib/cubic';\nimport { each, isNil } from '@antv/util';\nimport ShapeBase from './base';\nimport path2Absolute from '@antv/path-util/lib/path-2-absolute';\nimport path2Segment from '@antv/path-util/lib/path-2-segments';\nimport { drawPath } from '../util/draw';\nimport isPointInPath from '../util/in-path/point-in-path';\nimport isInPolygon from '../util/in-path/polygon';\nimport PathUtil from '../util/path';\nimport * as ArrowUtil from '../util/arrow';\n// 是否在多个多边形内部\nfunction isInPolygons(polygons, x, y) {\n    var isHit = false;\n    for (var i = 0; i < polygons.length; i++) {\n        var points = polygons[i];\n        isHit = isInPolygon(points, x, y);\n        if (isHit) {\n            break;\n        }\n    }\n    return isHit;\n}\nvar Path = /** @class */ (function (_super) {\n    __extends(Path, _super);\n    function Path() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Path.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { startArrow: false, endArrow: false });\n    };\n    Path.prototype.initAttrs = function (attrs) {\n        this._setPathArr(attrs.path);\n        this.setArrow();\n    };\n    // 更新属性时，检测是否更改了 path\n    Path.prototype.onAttrChange = function (name, value, originValue) {\n        _super.prototype.onAttrChange.call(this, name, value, originValue);\n        if (name === 'path') {\n            this._setPathArr(value);\n        }\n        // 由于箭头的绘制依赖于 line 的诸多 attrs，因此这里不再对每个 attr 进行判断，attr 每次变化都会影响箭头的更新\n        this.setArrow();\n    };\n    // 将 path 转换成绝对路径\n    Path.prototype._setPathArr = function (path) {\n        // 转换 path 的格式\n        this.attrs.path = path2Absolute(path);\n        var hasArc = PathUtil.hasArc(path);\n        // 为了加速 path 的绘制、拾取和计算，这个地方可以缓存很多东西\n        // 这些缓存都是第一次需要时计算和存储，虽然增加了复杂度，但是频繁调用的方法，性能有很大提升\n        this.set('hasArc', hasArc);\n        this.set('paramsCache', {}); // 清理缓存\n        this.set('segments', null); // 延迟生成 path，在动画场景下可能不会有拾取\n        this.set('curve', null);\n        this.set('tCache', null);\n        this.set('totalLength', null);\n    };\n    Path.prototype.getSegments = function () {\n        var segments = this.get('segements');\n        if (!segments) {\n            segments = path2Segment(this.attr('path'));\n            this.set('segments', segments);\n        }\n        return segments;\n    };\n    Path.prototype.setArrow = function () {\n        var attrs = this.attr();\n        var startArrow = attrs.startArrow, endArrow = attrs.endArrow;\n        if (startArrow) {\n            var tangent = this.getStartTangent();\n            ArrowUtil.addStartArrow(this, attrs, tangent[0][0], tangent[0][1], tangent[1][0], tangent[1][1]);\n        }\n        if (endArrow) {\n            var tangent = this.getEndTangent();\n            ArrowUtil.addEndArrow(this, attrs, tangent[0][0], tangent[0][1], tangent[1][0], tangent[1][1]);\n        }\n    };\n    Path.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {\n        var segments = this.getSegments();\n        var hasArc = this.get('hasArc');\n        var isHit = false;\n        if (isStroke) {\n            var length_1 = this.getTotalLength();\n            isHit = PathUtil.isPointInStroke(segments, lineWidth, x, y, length_1);\n        }\n        if (!isHit && isFill) {\n            if (hasArc) {\n                // 存在曲线时，暂时使用 canvas 的 api 计算，后续可以进行多边形切割\n                isHit = isPointInPath(this, x, y);\n            }\n            else {\n                var path = this.attr('path');\n                var extractResutl = PathUtil.extractPolygons(path);\n                // 提取出来的多边形包含闭合的和非闭合的，在这里统一按照多边形处理\n                isHit = isInPolygons(extractResutl.polygons, x, y) || isInPolygons(extractResutl.polylines, x, y);\n            }\n        }\n        return isHit;\n    };\n    Path.prototype.createPath = function (context) {\n        var attrs = this.attr();\n        var paramsCache = this.get('paramsCache'); // 由于计算圆弧的参数成本很大，所以要缓存\n        drawPath(this, context, attrs, paramsCache);\n    };\n    Path.prototype.afterDrawPath = function (context) {\n        var startArrowShape = this.get('startArrowShape');\n        var endArrowShape = this.get('endArrowShape');\n        if (startArrowShape) {\n            startArrowShape.draw(context);\n        }\n        if (endArrowShape) {\n            endArrowShape.draw(context);\n        }\n    };\n    /**\n     * Get total length of path\n     * @return {number} length\n     */\n    Path.prototype.getTotalLength = function () {\n        var totalLength = this.get('totalLength');\n        if (!isNil(totalLength)) {\n            return totalLength;\n        }\n        this._calculateCurve();\n        this._setTcache();\n        return this.get('totalLength');\n    };\n    /**\n     * Get point according to ratio\n     * @param {number} ratio\n     * @return {Point} point\n     */\n    Path.prototype.getPoint = function (ratio) {\n        var tCache = this.get('tCache');\n        if (!tCache) {\n            this._calculateCurve();\n            this._setTcache();\n            tCache = this.get('tCache');\n        }\n        var subt;\n        var index;\n        var curve = this.get('curve');\n        if (!tCache || tCache.length === 0) {\n            if (curve) {\n                return {\n                    x: curve[0][1],\n                    y: curve[0][2],\n                };\n            }\n            return null;\n        }\n        each(tCache, function (v, i) {\n            if (ratio >= v[0] && ratio <= v[1]) {\n                subt = (ratio - v[0]) / (v[1] - v[0]);\n                index = i;\n            }\n        });\n        var seg = curve[index];\n        if (isNil(seg) || isNil(index)) {\n            return null;\n        }\n        var l = seg.length;\n        var nextSeg = curve[index + 1];\n        return CubicUtil.pointAt(seg[l - 2], seg[l - 1], nextSeg[1], nextSeg[2], nextSeg[3], nextSeg[4], nextSeg[5], nextSeg[6], subt);\n    };\n    Path.prototype._calculateCurve = function () {\n        var path = this.attr().path;\n        this.set('curve', PathUtil.pathToCurve(path));\n    };\n    Path.prototype._setTcache = function () {\n        var totalLength = 0;\n        var tempLength = 0;\n        // 每段 curve 对应起止点的长度比例列表，形如: [[0, 0.25], [0.25, 0.6]. [0.6, 0.9], [0.9, 1]]\n        var tCache = [];\n        var segmentT;\n        var segmentL;\n        var segmentN;\n        var l;\n        var curve = this.get('curve');\n        if (!curve) {\n            return;\n        }\n        each(curve, function (segment, i) {\n            segmentN = curve[i + 1];\n            l = segment.length;\n            if (segmentN) {\n                totalLength +=\n                    CubicUtil.length(segment[l - 2], segment[l - 1], segmentN[1], segmentN[2], segmentN[3], segmentN[4], segmentN[5], segmentN[6]) || 0;\n            }\n        });\n        this.set('totalLength', totalLength);\n        if (totalLength === 0) {\n            this.set('tCache', []);\n            return;\n        }\n        each(curve, function (segment, i) {\n            segmentN = curve[i + 1];\n            l = segment.length;\n            if (segmentN) {\n                segmentT = [];\n                segmentT[0] = tempLength / totalLength;\n                segmentL = CubicUtil.length(segment[l - 2], segment[l - 1], segmentN[1], segmentN[2], segmentN[3], segmentN[4], segmentN[5], segmentN[6]);\n                // 当 path 不连续时，segmentL 可能为空，为空时需要作为 0 处理\n                tempLength += segmentL || 0;\n                segmentT[1] = tempLength / totalLength;\n                tCache.push(segmentT);\n            }\n        });\n        this.set('tCache', tCache);\n    };\n    /**\n     * Get start tangent vector\n     * @return {Array}\n     */\n    Path.prototype.getStartTangent = function () {\n        var segments = this.getSegments();\n        var result;\n        if (segments.length > 1) {\n            var startPoint = segments[0].currentPoint;\n            var endPoint = segments[1].currentPoint;\n            var tangent = segments[1].startTangent;\n            result = [];\n            if (tangent) {\n                result.push([startPoint[0] - tangent[0], startPoint[1] - tangent[1]]);\n                result.push([startPoint[0], startPoint[1]]);\n            }\n            else {\n                result.push([endPoint[0], endPoint[1]]);\n                result.push([startPoint[0], startPoint[1]]);\n            }\n        }\n        return result;\n    };\n    /**\n     * Get end tangent vector\n     * @return {Array}\n     */\n    Path.prototype.getEndTangent = function () {\n        var segments = this.getSegments();\n        var length = segments.length;\n        var result;\n        if (length > 1) {\n            var startPoint = segments[length - 2].currentPoint;\n            var endPoint = segments[length - 1].currentPoint;\n            var tangent = segments[length - 1].endTangent;\n            result = [];\n            if (tangent) {\n                result.push([endPoint[0] - tangent[0], endPoint[1] - tangent[1]]);\n                result.push([endPoint[0], endPoint[1]]);\n            }\n            else {\n                result.push([startPoint[0], startPoint[1]]);\n                result.push([endPoint[0], endPoint[1]]);\n            }\n        }\n        return result;\n    };\n    return Path;\n}(ShapeBase));\nexport default Path;\n//# sourceMappingURL=path.js.map","import inLine from './line';\nexport default function inPolyline(points, lineWidth, x, y, isClose) {\n    var count = points.length;\n    if (count < 2) {\n        return false;\n    }\n    for (var i = 0; i < count - 1; i++) {\n        var x1 = points[i][0];\n        var y1 = points[i][1];\n        var x2 = points[i + 1][0];\n        var y2 = points[i + 1][1];\n        if (inLine(x1, y1, x2, y2, lineWidth, x, y)) {\n            return true;\n        }\n    }\n    // 如果封闭，则计算起始点和结束点的边\n    if (isClose) {\n        var first = points[0];\n        var last = points[count - 1];\n        if (inLine(first[0], first[1], last[0], last[1], lineWidth, x, y)) {\n            return true;\n        }\n    }\n    return false;\n}\n//# sourceMappingURL=polyline.js.map","/**\n * @fileoverview 多边形\n * @author dxq613@gmail.com\n */\nimport { __extends } from \"tslib\";\nimport ShapeBase from './base';\nimport inPolyline from '../util/in-stroke/polyline';\nimport isInPolygon from '../util/in-path/polygon';\nvar Polygon = /** @class */ (function (_super) {\n    __extends(Polygon, _super);\n    function Polygon() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Polygon.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {\n        var points = this.attr().points;\n        var isHit = false;\n        if (isStroke) {\n            isHit = inPolyline(points, lineWidth, x, y, true);\n        }\n        if (!isHit && isFill) {\n            isHit = isInPolygon(points, x, y); // isPointInPath(shape, x, y);\n        }\n        return isHit;\n    };\n    Polygon.prototype.createPath = function (context) {\n        var attrs = this.attr();\n        var points = attrs.points;\n        if (points.length < 2) {\n            return;\n        }\n        context.beginPath();\n        for (var i = 0; i < points.length; i++) {\n            var point = points[i];\n            if (i === 0) {\n                context.moveTo(point[0], point[1]);\n            }\n            else {\n                context.lineTo(point[0], point[1]);\n            }\n        }\n        context.closePath();\n    };\n    return Polygon;\n}(ShapeBase));\nexport default Polygon;\n//# sourceMappingURL=polygon.js.map","import { __assign, __extends } from \"tslib\";\nimport LineUtil from '@antv/g-math/lib/line';\nimport PolylineUtil from '@antv/g-math/lib/polyline';\nimport { each, isNil } from '@antv/util';\nimport ShapeBase from './base';\nimport inPolyline from '../util/in-stroke/polyline';\nimport * as ArrowUtil from '../util/arrow';\nvar PolyLine = /** @class */ (function (_super) {\n    __extends(PolyLine, _super);\n    function PolyLine() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PolyLine.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { startArrow: false, endArrow: false });\n    };\n    PolyLine.prototype.initAttrs = function (attrs) {\n        this.setArrow();\n    };\n    // 更新属性时，检测是否更改了 points\n    PolyLine.prototype.onAttrChange = function (name, value, originValue) {\n        _super.prototype.onAttrChange.call(this, name, value, originValue);\n        this.setArrow();\n        if (['points'].indexOf(name) !== -1) {\n            this._resetCache();\n        }\n    };\n    PolyLine.prototype._resetCache = function () {\n        this.set('totalLength', null);\n        this.set('tCache', null);\n    };\n    PolyLine.prototype.setArrow = function () {\n        var attrs = this.attr();\n        var _a = this.attrs, points = _a.points, startArrow = _a.startArrow, endArrow = _a.endArrow;\n        var length = points.length;\n        var x1 = points[0][0];\n        var y1 = points[0][1];\n        var x2 = points[length - 1][0];\n        var y2 = points[length - 1][1];\n        if (startArrow) {\n            ArrowUtil.addStartArrow(this, attrs, points[1][0], points[1][1], x1, y1);\n        }\n        if (endArrow) {\n            ArrowUtil.addEndArrow(this, attrs, points[length - 2][0], points[length - 2][1], x2, y2);\n        }\n    };\n    // 不允许 fill\n    PolyLine.prototype.isFill = function () {\n        return false;\n    };\n    PolyLine.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {\n        // 没有设置 stroke 不能被拾取, 没有线宽不能被拾取\n        if (!isStroke || !lineWidth) {\n            return false;\n        }\n        var points = this.attr().points;\n        return inPolyline(points, lineWidth, x, y, false);\n    };\n    // 始终填充\n    PolyLine.prototype.isStroke = function () {\n        return true;\n    };\n    PolyLine.prototype.createPath = function (context) {\n        var _a = this.attr(), points = _a.points, startArrow = _a.startArrow, endArrow = _a.endArrow;\n        var length = points.length;\n        if (points.length < 2) {\n            return;\n        }\n        var x1 = points[0][0];\n        var y1 = points[0][1];\n        var x2 = points[length - 1][0];\n        var y2 = points[length - 1][1];\n        // 如果定义了箭头，并且是自定义箭头，线条相应缩进\n        if (startArrow && startArrow.d) {\n            var distance = ArrowUtil.getShortenOffset(x1, y1, points[1][0], points[1][1], startArrow.d);\n            x1 += distance.dx;\n            y1 += distance.dy;\n        }\n        if (endArrow && endArrow.d) {\n            var distance = ArrowUtil.getShortenOffset(points[length - 2][0], points[length - 2][1], x2, y2, endArrow.d);\n            x2 -= distance.dx;\n            y2 -= distance.dy;\n        }\n        context.beginPath();\n        context.moveTo(x1, y1);\n        for (var i = 0; i < length - 1; i++) {\n            var point = points[i];\n            context.lineTo(point[0], point[1]);\n        }\n        context.lineTo(x2, y2);\n    };\n    PolyLine.prototype.afterDrawPath = function (context) {\n        var startArrowShape = this.get('startArrowShape');\n        var endArrowShape = this.get('endArrowShape');\n        if (startArrowShape) {\n            startArrowShape.draw(context);\n        }\n        if (endArrowShape) {\n            endArrowShape.draw(context);\n        }\n    };\n    /**\n     * Get length of polyline\n     * @return {number} length\n     */\n    PolyLine.prototype.getTotalLength = function () {\n        var points = this.attr().points;\n        // get totalLength from cache\n        var totalLength = this.get('totalLength');\n        if (!isNil(totalLength)) {\n            return totalLength;\n        }\n        this.set('totalLength', PolylineUtil.length(points));\n        return this.get('totalLength');\n    };\n    /**\n     * Get point according to ratio\n     * @param {number} ratio\n     * @return {Point} point\n     */\n    PolyLine.prototype.getPoint = function (ratio) {\n        var points = this.attr().points;\n        // get tCache from cache\n        var tCache = this.get('tCache');\n        if (!tCache) {\n            this._setTcache();\n            tCache = this.get('tCache');\n        }\n        var subt;\n        var index;\n        each(tCache, function (v, i) {\n            if (ratio >= v[0] && ratio <= v[1]) {\n                subt = (ratio - v[0]) / (v[1] - v[0]);\n                index = i;\n            }\n        });\n        return LineUtil.pointAt(points[index][0], points[index][1], points[index + 1][0], points[index + 1][1], subt);\n    };\n    PolyLine.prototype._setTcache = function () {\n        var points = this.attr().points;\n        if (!points || points.length === 0) {\n            return;\n        }\n        var totalLength = this.getTotalLength();\n        if (totalLength <= 0) {\n            return;\n        }\n        var tempLength = 0;\n        var tCache = [];\n        var segmentT;\n        var segmentL;\n        each(points, function (p, i) {\n            if (points[i + 1]) {\n                segmentT = [];\n                segmentT[0] = tempLength / totalLength;\n                segmentL = LineUtil.length(p[0], p[1], points[i + 1][0], points[i + 1][1]);\n                tempLength += segmentL;\n                segmentT[1] = tempLength / totalLength;\n                tCache.push(segmentT);\n            }\n        });\n        this.set('tCache', tCache);\n    };\n    /**\n     * Get start tangent vector\n     * @return {Array}\n     */\n    PolyLine.prototype.getStartTangent = function () {\n        var points = this.attr().points;\n        var result = [];\n        result.push([points[1][0], points[1][1]]);\n        result.push([points[0][0], points[0][1]]);\n        return result;\n    };\n    /**\n     * Get end tangent vector\n     * @return {Array}\n     */\n    PolyLine.prototype.getEndTangent = function () {\n        var points = this.attr().points;\n        var l = points.length - 1;\n        var result = [];\n        result.push([points[l - 1][0], points[l - 1][1]]);\n        result.push([points[l][0], points[l][1]]);\n        return result;\n    };\n    return PolyLine;\n}(ShapeBase));\nexport default PolyLine;\n//# sourceMappingURL=polyline.js.map","/**\n * @fileoverview 矩形\n * @author dxq613@gmail.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport ShapeBase from './base';\nimport { parseRadius } from '../util/parse';\nimport { inBox } from '../util/util';\nimport inRect from '../util/in-stroke/rect';\nimport inRectWithRadius from '../util/in-stroke/rect-radius';\nimport isPointInPath from '../util/in-path/point-in-path';\nvar Rect = /** @class */ (function (_super) {\n    __extends(Rect, _super);\n    function Rect() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Rect.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, width: 0, height: 0, radius: 0 });\n    };\n    Rect.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {\n        var attrs = this.attr();\n        var minX = attrs.x;\n        var minY = attrs.y;\n        var width = attrs.width;\n        var height = attrs.height;\n        var radius = attrs.radius;\n        // 无圆角时的策略\n        if (!radius) {\n            var halfWidth = lineWidth / 2;\n            // 同时填充和带有边框\n            if (isFill && isStroke) {\n                return inBox(minX - halfWidth, minY - halfWidth, width + halfWidth, height + halfWidth, x, y);\n            }\n            // 仅填充\n            if (isFill) {\n                return inBox(minX, minY, width, height, x, y);\n            }\n            if (isStroke) {\n                return inRect(minX, minY, width, height, lineWidth, x, y);\n            }\n        }\n        else {\n            var isHit = false;\n            if (isStroke) {\n                isHit = inRectWithRadius(minX, minY, width, height, radius, lineWidth, x, y);\n            }\n            // 仅填充时带有圆角的矩形直接通过图形拾取\n            // 以后可以改成纯数学的近似拾取，将圆弧切割成多边形\n            if (!isHit && isFill) {\n                isHit = isPointInPath(this, x, y);\n            }\n            return isHit;\n        }\n    };\n    Rect.prototype.createPath = function (context) {\n        var attrs = this.attr();\n        var x = attrs.x;\n        var y = attrs.y;\n        var width = attrs.width;\n        var height = attrs.height;\n        var radius = attrs.radius;\n        context.beginPath();\n        if (radius === 0) {\n            // 改成原生的rect方法\n            context.rect(x, y, width, height);\n        }\n        else {\n            var _a = parseRadius(radius), r1 = _a[0], r2 = _a[1], r3 = _a[2], r4 = _a[3];\n            context.moveTo(x + r1, y);\n            context.lineTo(x + width - r2, y);\n            r2 !== 0 && context.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\n            context.lineTo(x + width, y + height - r3);\n            r3 !== 0 && context.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\n            context.lineTo(x + r4, y + height);\n            r4 !== 0 && context.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\n            context.lineTo(x, y + r1);\n            r1 !== 0 && context.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\n            context.closePath();\n        }\n    };\n    return Rect;\n}(ShapeBase));\nexport default Rect;\n//# sourceMappingURL=rect.js.map","import inLine from './line';\nimport inArc from './arc';\nexport default function rectWithRadius(minX, minY, width, height, radius, lineWidth, x, y) {\n    var halfWidth = lineWidth / 2;\n    return (inLine(minX + radius, minY, minX + width - radius, minY, lineWidth, x, y) ||\n        inLine(minX + width, minY + radius, minX + width, minY + height - radius, lineWidth, x, y) ||\n        inLine(minX + width - radius, minY + height, minX + radius, minY + height, lineWidth, x, y) ||\n        inLine(minX, minY + height - radius, minX, minY + radius, lineWidth, x, y) ||\n        inArc(minX + width - radius, minY + radius, radius, 1.5 * Math.PI, 2 * Math.PI, lineWidth, x, y) ||\n        inArc(minX + width - radius, minY + height - radius, radius, 0, 0.5 * Math.PI, lineWidth, x, y) ||\n        inArc(minX + radius, minY + height - radius, radius, 0.5 * Math.PI, Math.PI, lineWidth, x, y) ||\n        inArc(minX + radius, minY + radius, radius, Math.PI, 1.5 * Math.PI, lineWidth, x, y));\n}\n//# sourceMappingURL=rect-radius.js.map","import { inBox } from '../util';\nexport default function inRect(minX, minY, width, height, lineWidth, x, y) {\n    var halfWidth = lineWidth / 2;\n    // 将四个边看做矩形来检测，比边的检测算法要快\n    return (inBox(minX - halfWidth, minY - halfWidth, width, lineWidth, x, y) || // 上边\n        inBox(minX + width - halfWidth, minY - halfWidth, lineWidth, height, x, y) || // 右边\n        inBox(minX + halfWidth, minY + height - halfWidth, width, lineWidth, x, y) || // 下边\n        inBox(minX - halfWidth, minY + halfWidth, lineWidth, height, x, y)); // 左边\n}\n//# sourceMappingURL=rect.js.map","/**\n * @fileoverview 文本\n * @author dxq613@gmail.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport ShapeBase from './base';\nimport { isNil, isString, each } from '../util/util';\nimport { getTextHeight, assembleFont } from '@antv/g-base/lib/util/text';\nvar Text = /** @class */ (function (_super) {\n    __extends(Text, _super);\n    function Text() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // 默认文本属性\n    Text.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, text: null, fontSize: 12, fontFamily: 'sans-serif', fontStyle: 'normal', fontWeight: 'normal', fontVariant: 'normal', textAlign: 'start', textBaseline: 'bottom' });\n    };\n    // 仅仅使用包围盒检测来进行拾取\n    Text.prototype.isOnlyHitBox = function () {\n        return true;\n    };\n    // 初始化时组合 font，同时判断 text 是否换行\n    Text.prototype.initAttrs = function (attrs) {\n        this._assembleFont();\n        if (attrs.text) {\n            this._setText(attrs.text);\n        }\n    };\n    // 组装字体\n    Text.prototype._assembleFont = function () {\n        var attrs = this.attrs;\n        attrs.font = assembleFont(attrs);\n    };\n    // 如果文本换行，则缓存数组\n    Text.prototype._setText = function (text) {\n        var textArr = null;\n        if (isString(text) && text.indexOf('\\n') !== -1) {\n            textArr = text.split('\\n');\n        }\n        this.set('textArr', textArr);\n    };\n    // 更新属性时，检测是否更改了 font、text\n    Text.prototype.onAttrChange = function (name, value, originValue) {\n        _super.prototype.onAttrChange.call(this, name, value, originValue);\n        if (name.startsWith('font')) {\n            this._assembleFont();\n        }\n        if (name === 'text') {\n            this._setText(value);\n        }\n    };\n    // 这个方法在 text 时没有可以做的事情，如果要支持文字背景时可以考虑\n    // createPath(context) {\n    // }\n    // 如果文本多行，需要获取文本间距\n    Text.prototype._getSpaceingY = function () {\n        var attrs = this.attrs;\n        var lineHeight = attrs.lineHeight;\n        var fontSize = attrs.fontSize * 1;\n        return lineHeight ? lineHeight - fontSize : fontSize * 0.14;\n    };\n    // 绘制文本，考虑多行的场景\n    Text.prototype._drawTextArr = function (context, textArr, isFill) {\n        var attrs = this.attrs;\n        var textBaseline = attrs.textBaseline;\n        var x = attrs.x;\n        var y = attrs.y;\n        var fontSize = attrs.fontSize * 1;\n        var spaceingY = this._getSpaceingY();\n        var height = getTextHeight(attrs.text, attrs.fontSize, attrs.lineHeight);\n        var subY;\n        each(textArr, function (subText, index) {\n            subY = y + index * (spaceingY + fontSize) - height + fontSize; // bottom;\n            if (textBaseline === 'middle')\n                subY += height - fontSize - (height - fontSize) / 2;\n            if (textBaseline === 'top')\n                subY += height - fontSize;\n            if (isFill) {\n                context.fillText(subText, x, subY);\n            }\n            else {\n                context.strokeText(subText, x, subY);\n            }\n        });\n    };\n    // 绘制文本，同时考虑填充和绘制边框\n    Text.prototype._drawText = function (context, isFill) {\n        var attrs = this.attr();\n        var x = attrs.x;\n        var y = attrs.y;\n        var textArr = this.get('textArr');\n        if (textArr) {\n            this._drawTextArr(context, textArr, isFill);\n        }\n        else {\n            var text = attrs.text;\n            if (isFill) {\n                context.fillText(text, x, y);\n            }\n            else {\n                context.strokeText(text, x, y);\n            }\n        }\n    };\n    // 复写绘制和填充的逻辑：对于文本，应该先绘制边框，再进行填充\n    Text.prototype.strokeAndFill = function (context) {\n        var _a = this.attrs, lineWidth = _a.lineWidth, opacity = _a.opacity, strokeOpacity = _a.strokeOpacity, fillOpacity = _a.fillOpacity;\n        if (this.isStroke()) {\n            if (lineWidth > 0) {\n                if (!isNil(strokeOpacity) && strokeOpacity !== 1) {\n                    context.globalAlpha = opacity;\n                }\n                this.stroke(context);\n            }\n        }\n        if (this.isFill()) {\n            if (!isNil(fillOpacity) && fillOpacity !== 1) {\n                context.globalAlpha = fillOpacity;\n                this.fill(context);\n                context.globalAlpha = opacity;\n            }\n            else {\n                this.fill(context);\n            }\n        }\n        this.afterDrawPath(context);\n    };\n    // 复写填充逻辑\n    Text.prototype.fill = function (context) {\n        this._drawText(context, true);\n    };\n    // 复写绘制边框的逻辑\n    Text.prototype.stroke = function (context) {\n        this._drawText(context, false);\n    };\n    return Text;\n}(ShapeBase));\nexport default Text;\n//# sourceMappingURL=text.js.map","import { setTransform, setClip } from './svg';\nimport { sortDom, moveTo } from './dom';\nexport function drawChildren(context, children) {\n    children.forEach(function (child) {\n        child.draw(context);\n    });\n}\n/**\n * 更新元素，包括 group 和 shape\n * @param {IElement} element       SVG 元素\n * @param {ChangeType} changeType  更新类型\n */\nexport function refreshElement(element, changeType) {\n    // 对于还没有挂载到画布下的元素，canvas 可能为空\n    var canvas = element.get('canvas');\n    // 只有挂载到画布下，才对元素进行实际渲染\n    if (canvas && canvas.get('autoDraw')) {\n        var context = canvas.get('context');\n        var parent_1 = element.getParent();\n        var parentChildren = parent_1 ? parent_1.getChildren() : [canvas];\n        var el = element.get('el');\n        if (changeType === 'remove') {\n            var isClipShape = element.get('isClipShape');\n            // 对于 clip，不仅需要将 clipShape 对于的 SVG 元素删除，还需要将上层的 clipPath 元素也删除\n            if (isClipShape) {\n                var clipPathEl = el && el.parentNode;\n                var defsEl = clipPathEl && clipPathEl.parentNode;\n                if (clipPathEl && defsEl) {\n                    defsEl.removeChild(clipPathEl);\n                }\n            }\n            else if (el && el.parentNode) {\n                el.parentNode.removeChild(el);\n            }\n        }\n        else if (changeType === 'show') {\n            el.setAttribute('visibility', 'visible');\n        }\n        else if (changeType === 'hide') {\n            el.setAttribute('visibility', 'hidden');\n        }\n        else if (changeType === 'zIndex') {\n            moveTo(el, parentChildren.indexOf(element));\n        }\n        else if (changeType === 'sort') {\n            var children_1 = element.get('children');\n            if (children_1 && children_1.length) {\n                sortDom(element, function (a, b) {\n                    return children_1.indexOf(a) - children_1.indexOf(b) ? 1 : 0;\n                });\n            }\n        }\n        else if (changeType === 'clear') {\n            // el maybe null for group\n            if (el) {\n                el.innerHTML = '';\n            }\n        }\n        else if (changeType === 'matrix') {\n            setTransform(element);\n        }\n        else if (changeType === 'clip') {\n            setClip(element, context);\n        }\n        else if (changeType === 'attr') {\n            // 已在 afterAttrsChange 进行了处理，此处 do nothing\n        }\n        else if (changeType === 'add') {\n            element.draw(context);\n        }\n    }\n}\n//# sourceMappingURL=draw.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CROSSHAIR_Y = exports.CROSSHAIR_X = exports.NAME_CLASS = exports.VALUE_CLASS = exports.MARKER_CLASS = exports.LIST_ITEM_CLASS = exports.LIST_CLASS = exports.TITLE_CLASS = exports.CONTAINER_CLASS = void 0;\nexports.CONTAINER_CLASS = 'g2-tooltip';\nexports.TITLE_CLASS = 'g2-tooltip-title';\nexports.LIST_CLASS = 'g2-tooltip-list';\nexports.LIST_ITEM_CLASS = 'g2-tooltip-list-item';\nexports.MARKER_CLASS = 'g2-tooltip-marker';\nexports.VALUE_CLASS = 'g2-tooltip-value';\nexports.NAME_CLASS = 'g2-tooltip-name';\nexports.CROSSHAIR_X = 'g2-tooltip-crosshair-x';\nexports.CROSSHAIR_Y = 'g2-tooltip-crosshair-y';\n//# sourceMappingURL=css-const.js.map","import { __extends } from \"tslib\";\nimport { AbstractGroup } from '@antv/g-base';\nimport * as Shape from './shape';\nimport { applyAttrsToContext, drawChildren, refreshElement } from './util/draw';\nimport { each } from '@antv/util';\nimport { intersectRect } from './util/util';\nvar Group = /** @class */ (function (_super) {\n    __extends(Group, _super);\n    function Group() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 一些方法调用会引起画布变化\n     * @param {ChangeType} changeType 改变的类型\n     */\n    Group.prototype.onCanvasChange = function (changeType) {\n        refreshElement(this, changeType);\n    };\n    Group.prototype.getShapeBase = function () {\n        return Shape;\n    };\n    Group.prototype.getGroupBase = function () {\n        return Group;\n    };\n    // 同 shape 中的方法重复了\n    Group.prototype._applyClip = function (context, clip) {\n        if (clip) {\n            context.save();\n            // 将 clip 的属性挂载到 context 上\n            applyAttrsToContext(context, clip);\n            // 绘制 clip 路径\n            clip.createPath(context);\n            context.restore();\n            // 裁剪\n            context.clip();\n            clip._afterDraw();\n        }\n    };\n    // 这个方法以前直接使用的 getCanvasBBox，由于 group 上没有缓存，所以每次重新计算，导致性能开销比较大\n    // 大概能够节省全局渲染 15-20% 的性能，如果不在这里加缓存优化后 10W 个节点无法达到 5-6 ms，大概能够 30-40ms\n    Group.prototype.cacheCanvasBBox = function () {\n        var children = this.cfg.children;\n        var xArr = [];\n        var yArr = [];\n        each(children, function (child) {\n            var bbox = child.cfg.cacheCanvasBBox;\n            // isInview 的判定是一旦图形或者分组渲染就要计算是否在视图内，\n            // 这个判定 10W 个图形下差不多能够节省 5-6 ms 的开销\n            if (bbox && child.cfg.isInView) {\n                xArr.push(bbox.minX, bbox.maxX);\n                yArr.push(bbox.minY, bbox.maxY);\n            }\n        });\n        var bbox = null;\n        if (xArr.length) {\n            var minX = Math.min.apply(null, xArr);\n            var maxX = Math.max.apply(null, xArr);\n            var minY = Math.min.apply(null, yArr);\n            var maxY = Math.max.apply(null, yArr);\n            bbox = {\n                minX: minX,\n                minY: minY,\n                x: minX,\n                y: minY,\n                maxX: maxX,\n                maxY: maxY,\n                width: maxX - minX,\n                height: maxY - minY,\n            };\n            var canvas = this.cfg.canvas;\n            if (canvas) {\n                var viewRange = canvas.getViewRange();\n                // 如果这个地方判定 isInView == false 设置 bbox 为 false 的话，拾取的性能会更高\n                // 但是目前 10W 图形的拾取在 2-5ms 内，这个优化意义不大，可以后期观察再看\n                this.set('isInView', intersectRect(bbox, viewRange));\n            }\n        }\n        else {\n            this.set('isInView', false);\n        }\n        this.set('cacheCanvasBBox', bbox);\n    };\n    Group.prototype.draw = function (context, region) {\n        var children = this.cfg.children;\n        var allowDraw = region ? this.cfg.refresh : true; // 局部刷新需要判定\n        // 这个地方需要判定，在 G6 的场景每个 group 都有 transform 的场景下性能会开销非常大\n        // 通过 refresh 的判定，可以不刷新没有发生过变化的分组，不在视窗内的分组等等\n        // 如果想进一步提升局部渲染性能，可以进一步优化 refresh 的判定，依然有潜力\n        if (children.length && allowDraw) {\n            context.save();\n            // group 上的矩阵和属性也会应用到上下文上\n            // 先将 attrs 应用到上下文中，再设置 clip。因为 clip 应该被当前元素的 matrix 所影响\n            applyAttrsToContext(context, this);\n            this._applyClip(context, this.getClip());\n            drawChildren(context, children, region);\n            context.restore();\n            this.cacheCanvasBBox();\n        }\n        // 这里的成本比较大，如果不绘制则不再\n        // this.set('cacheCanvasBBox', this.getCanvasBBox());\n        this.cfg.refresh = null;\n        // 绘制后，消除更新标记\n        this.set('hasChanged', false);\n    };\n    // 绘制时被跳过，一般发生在分组隐藏时\n    Group.prototype.skipDraw = function () {\n        this.set('cacheCanvasBBox', null);\n        this.set('hasChanged', false);\n    };\n    return Group;\n}(AbstractGroup));\nexport default Group;\n//# sourceMappingURL=group.js.map","import { __extends } from \"tslib\";\nimport { AbstractGroup } from '@antv/g-base';\nimport { each } from '@antv/util';\nimport * as Shape from './shape';\nimport { drawChildren, refreshElement } from './util/draw';\nimport { setClip, setTransform } from './util/svg';\nimport { SVG_ATTR_MAP } from './constant';\nimport { createSVGElement } from './util/dom';\nvar Group = /** @class */ (function (_super) {\n    __extends(Group, _super);\n    function Group() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // SVG 中分组对应实体标签 <g>\n    Group.prototype.isEntityGroup = function () {\n        return true;\n    };\n    Group.prototype.createDom = function () {\n        var element = createSVGElement('g');\n        this.set('el', element);\n        var parent = this.getParent();\n        if (parent) {\n            var parentNode = parent.get('el');\n            if (parentNode) {\n                parentNode.appendChild(element);\n            }\n            else {\n                // parentNode maybe null for group\n                parentNode = parent.createDom();\n                parent.set('el', parentNode);\n                parentNode.appendChild(element);\n            }\n        }\n        return element;\n    };\n    // 覆盖基类的 afterAttrsChange 方法\n    Group.prototype.afterAttrsChange = function (targetAttrs) {\n        _super.prototype.afterAttrsChange.call(this, targetAttrs);\n        var canvas = this.get('canvas');\n        // 只有挂载到画布下，才对元素进行实际渲染\n        if (canvas && canvas.get('autoDraw')) {\n            var context = canvas.get('context');\n            this.createPath(context, targetAttrs);\n        }\n    };\n    /**\n     * 一些方法调用会引起画布变化\n     * @param {ChangeType} changeType 改变的类型\n     */\n    Group.prototype.onCanvasChange = function (changeType) {\n        refreshElement(this, changeType);\n    };\n    Group.prototype.getShapeBase = function () {\n        return Shape;\n    };\n    Group.prototype.getGroupBase = function () {\n        return Group;\n    };\n    Group.prototype.draw = function (context) {\n        var children = this.getChildren();\n        var el = this.get('el');\n        if (this.get('destroyed')) {\n            if (el) {\n                el.parentNode.removeChild(el);\n            }\n        }\n        else {\n            if (!el) {\n                this.createDom();\n            }\n            setClip(this, context);\n            this.createPath(context);\n            if (children.length) {\n                drawChildren(context, children);\n            }\n        }\n    };\n    /**\n     * 绘制分组的路径\n     * @param {Defs} context 上下文\n     * @param {ShapeAttrs} targetAttrs 渲染的目标属性\n     */\n    Group.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n        setTransform(this);\n    };\n    return Group;\n}(AbstractGroup));\nexport default Group;\n//# sourceMappingURL=group.js.map","import { __assign, __extends } from \"tslib\";\nimport { AbstractShape } from '@antv/g-base';\nimport { setShadow, setTransform, setClip } from '../util/svg';\nimport { createDom } from '../util/dom';\nimport { refreshElement } from '../util/draw';\nimport { SVG_ATTR_MAP } from '../constant';\nimport * as Shape from './index';\nimport Group from '../group';\nimport { getBBoxMethod } from '@antv/g-base/lib/bbox/index';\nvar ShapeBase = /** @class */ (function (_super) {\n    __extends(ShapeBase, _super);\n    function ShapeBase() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'svg';\n        _this.canFill = false;\n        _this.canStroke = false;\n        return _this;\n    }\n    ShapeBase.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        // 设置默认值\n        return __assign(__assign({}, attrs), { lineWidth: 1, lineAppendWidth: 0, strokeOpacity: 1, fillOpacity: 1 });\n    };\n    // 覆盖基类的 afterAttrsChange 方法\n    ShapeBase.prototype.afterAttrsChange = function (targetAttrs) {\n        _super.prototype.afterAttrsChange.call(this, targetAttrs);\n        var canvas = this.get('canvas');\n        // 只有挂载到画布下，才对元素进行实际渲染\n        if (canvas && canvas.get('autoDraw')) {\n            var context = canvas.get('context');\n            this.draw(context, targetAttrs);\n        }\n    };\n    ShapeBase.prototype.getShapeBase = function () {\n        return Shape;\n    };\n    ShapeBase.prototype.getGroupBase = function () {\n        return Group;\n    };\n    /**\n     * 一些方法调用会引起画布变化\n     * @param {ChangeType} changeType 改变的类型\n     */\n    ShapeBase.prototype.onCanvasChange = function (changeType) {\n        refreshElement(this, changeType);\n    };\n    ShapeBase.prototype.calculateBBox = function () {\n        var el = this.get('el');\n        var bbox = null;\n        // 包围盒计算依赖于绘制，如果还没有生成对应的 Dom 元素，则包围盒的长宽均为 0\n        if (el) {\n            bbox = el.getBBox();\n        }\n        else {\n            var bboxMethod = getBBoxMethod(this.get('type'));\n            if (bboxMethod) {\n                bbox = bboxMethod(this);\n            }\n        }\n        if (bbox) {\n            var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;\n            var lineWidth = this.getHitLineWidth();\n            var halfWidth = lineWidth / 2;\n            var minX = x - halfWidth;\n            var minY = y - halfWidth;\n            var maxX = x + width + halfWidth;\n            var maxY = y + height + halfWidth;\n            return {\n                x: minX,\n                y: minY,\n                minX: minX,\n                minY: minY,\n                maxX: maxX,\n                maxY: maxY,\n                width: width + lineWidth,\n                height: height + lineWidth,\n            };\n        }\n        return {\n            x: 0,\n            y: 0,\n            minX: 0,\n            minY: 0,\n            maxX: 0,\n            maxY: 0,\n            width: 0,\n            height: 0,\n        };\n    };\n    ShapeBase.prototype.isFill = function () {\n        var _a = this.attr(), fill = _a.fill, fillStyle = _a.fillStyle;\n        return (fill || fillStyle || this.isClipShape()) && this.canFill;\n    };\n    ShapeBase.prototype.isStroke = function () {\n        var _a = this.attr(), stroke = _a.stroke, strokeStyle = _a.strokeStyle;\n        return (stroke || strokeStyle) && this.canStroke;\n    };\n    ShapeBase.prototype.draw = function (context, targetAttrs) {\n        var el = this.get('el');\n        if (this.get('destroyed')) {\n            if (el) {\n                el.parentNode.removeChild(el);\n            }\n        }\n        else {\n            if (!el) {\n                createDom(this);\n            }\n            setClip(this, context);\n            this.createPath(context, targetAttrs);\n            this.shadow(context, targetAttrs);\n            this.strokeAndFill(context, targetAttrs);\n            this.transform(targetAttrs);\n        }\n    };\n    /**\n     * @protected\n     * 绘制图形的路径\n     * @param {Defs} context 上下文\n     * @param {ShapeAttrs} targetAttrs 渲染的目标属性\n     */\n    ShapeBase.prototype.createPath = function (context, targetAttrs) { };\n    // stroke and fill\n    ShapeBase.prototype.strokeAndFill = function (context, targetAttrs) {\n        var attrs = targetAttrs || this.attr();\n        var fill = attrs.fill, fillStyle = attrs.fillStyle, stroke = attrs.stroke, strokeStyle = attrs.strokeStyle, fillOpacity = attrs.fillOpacity, strokeOpacity = attrs.strokeOpacity, lineWidth = attrs.lineWidth;\n        var el = this.get('el');\n        if (this.canFill) {\n            // 初次渲染和更新渲染的逻辑有所不同: 初次渲染值为空时，需要设置为 none，否则就会是黑色，而更新渲染则不需要\n            if (!targetAttrs) {\n                this._setColor(context, 'fill', fill || fillStyle);\n            }\n            else if ('fill' in attrs) {\n                this._setColor(context, 'fill', fill);\n            }\n            else if ('fillStyle' in attrs) {\n                // compatible with fillStyle\n                this._setColor(context, 'fill', fillStyle);\n            }\n            if (fillOpacity) {\n                el.setAttribute(SVG_ATTR_MAP['fillOpacity'], fillOpacity);\n            }\n        }\n        if (this.canStroke && lineWidth > 0) {\n            if (!targetAttrs) {\n                this._setColor(context, 'stroke', stroke || strokeStyle);\n            }\n            else if ('stroke' in attrs) {\n                this._setColor(context, 'stroke', stroke);\n            }\n            else if ('strokeStyle' in attrs) {\n                // compatible with strokeStyle\n                this._setColor(context, 'stroke', strokeStyle);\n            }\n            if (strokeOpacity) {\n                el.setAttribute(SVG_ATTR_MAP['strokeOpacity'], strokeOpacity);\n            }\n            if (lineWidth) {\n                el.setAttribute(SVG_ATTR_MAP['lineWidth'], lineWidth);\n            }\n        }\n    };\n    ShapeBase.prototype._setColor = function (context, attr, value) {\n        var el = this.get('el');\n        if (!value) {\n            // need to set `none` to avoid default value\n            el.setAttribute(SVG_ATTR_MAP[attr], 'none');\n            return;\n        }\n        value = value.trim();\n        if (/^[r,R,L,l]{1}[\\s]*\\(/.test(value)) {\n            var id = context.find('gradient', value);\n            if (!id) {\n                id = context.addGradient(value);\n            }\n            el.setAttribute(SVG_ATTR_MAP[attr], \"url(#\" + id + \")\");\n        }\n        else if (/^[p,P]{1}[\\s]*\\(/.test(value)) {\n            var id = context.find('pattern', value);\n            if (!id) {\n                id = context.addPattern(value);\n            }\n            el.setAttribute(SVG_ATTR_MAP[attr], \"url(#\" + id + \")\");\n        }\n        else {\n            el.setAttribute(SVG_ATTR_MAP[attr], value);\n        }\n    };\n    ShapeBase.prototype.shadow = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var _a = targetAttrs || attrs, shadowOffsetX = _a.shadowOffsetX, shadowOffsetY = _a.shadowOffsetY, shadowBlur = _a.shadowBlur, shadowColor = _a.shadowColor;\n        if (shadowOffsetX || shadowOffsetY || shadowBlur || shadowColor) {\n            setShadow(this, context);\n        }\n    };\n    ShapeBase.prototype.transform = function (targetAttrs) {\n        var attrs = this.attr();\n        var matrix = (targetAttrs || attrs).matrix;\n        if (matrix) {\n            setTransform(this);\n        }\n    };\n    ShapeBase.prototype.isInShape = function (refX, refY) {\n        return this.isPointInPath(refX, refY);\n    };\n    ShapeBase.prototype.isPointInPath = function (refX, refY) {\n        var el = this.get('el');\n        var canvas = this.get('canvas');\n        var bbox = canvas.get('el').getBoundingClientRect();\n        var clientX = refX + bbox.left;\n        var clientY = refY + bbox.top;\n        var element = document.elementFromPoint(clientX, clientY);\n        if (element && element.isEqualNode(el)) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * 获取线拾取的宽度\n     * @returns {number} 线的拾取宽度\n     */\n    ShapeBase.prototype.getHitLineWidth = function () {\n        var _a = this.attrs, lineWidth = _a.lineWidth, lineAppendWidth = _a.lineAppendWidth;\n        if (this.isStroke()) {\n            return lineWidth + lineAppendWidth;\n        }\n        return 0;\n    };\n    return ShapeBase;\n}(AbstractShape));\nexport default ShapeBase;\n//# sourceMappingURL=base.js.map","/**\n * @fileoverview circle\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'circle';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Circle.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, r: 0 });\n    };\n    Circle.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            // 圆和椭圆的点坐标属性不是 x, y，而是 cx, cy\n            if (attr === 'x' || attr === 'y') {\n                el.setAttribute(\"c\" + attr, value);\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    return Circle;\n}(ShapeBase));\nexport default Circle;\n//# sourceMappingURL=circle.js.map","/**\n * @fileoverview dom\n * @author dengfuping_develop@163.com\n */\nimport { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Dom = /** @class */ (function (_super) {\n    __extends(Dom, _super);\n    function Dom() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'dom';\n        _this.canFill = false;\n        _this.canStroke = false;\n        return _this;\n    }\n    Dom.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n        if (typeof attrs['html'] === 'function') {\n            var element = attrs['html'].call(this, attrs);\n            if (element instanceof Element || element instanceof HTMLDocument) {\n                var children = el.childNodes;\n                for (var i = children.length - 1; i >= 0; i--) {\n                    el.removeChild(children[i]);\n                }\n                el.appendChild(element); // append to el if it's an element\n            }\n            else {\n                el.innerHTML = element; // set innerHTML\n            }\n        }\n        else {\n            el.innerHTML = attrs['html']; // set innerHTML\n        }\n    };\n    return Dom;\n}(ShapeBase));\nexport default Dom;\n//# sourceMappingURL=dom.js.map","/**\n * @fileoverview ellipse\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Ellipse = /** @class */ (function (_super) {\n    __extends(Ellipse, _super);\n    function Ellipse() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'ellipse';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Ellipse.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, rx: 0, ry: 0 });\n    };\n    Ellipse.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            // 圆和椭圆的点坐标属性不是 x, y，而是 cx, cy\n            if (attr === 'x' || attr === 'y') {\n                el.setAttribute(\"c\" + attr, value);\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    return Ellipse;\n}(ShapeBase));\nexport default Ellipse;\n//# sourceMappingURL=ellipse.js.map","/**\n * @fileoverview image\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each, isString } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Image = /** @class */ (function (_super) {\n    __extends(Image, _super);\n    function Image() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'image';\n        _this.canFill = false;\n        _this.canStroke = false;\n        return _this;\n    }\n    Image.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, width: 0, height: 0 });\n    };\n    Image.prototype.createPath = function (context, targetAttrs) {\n        var _this = this;\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'img') {\n                _this._setImage(attrs.img);\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    Image.prototype.setAttr = function (name, value) {\n        this.attrs[name] = value;\n        if (name === 'img') {\n            this._setImage(value);\n        }\n    };\n    Image.prototype._setImage = function (img) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        if (isString(img)) {\n            el.setAttribute('href', img);\n        }\n        else if (img instanceof window.Image) {\n            if (!attrs.width) {\n                el.setAttribute('width', img.width);\n                this.attr('width', img.width);\n            }\n            if (!attrs.height) {\n                el.setAttribute('height', img.height);\n                this.attr('height', img.height);\n            }\n            el.setAttribute('href', img.src);\n        }\n        else if (img instanceof HTMLElement && isString(img.nodeName) && img.nodeName.toUpperCase() === 'CANVAS') {\n            // @ts-ignore\n            el.setAttribute('href', img.toDataURL());\n        }\n        else if (img instanceof ImageData) {\n            var canvas = document.createElement('canvas');\n            canvas.setAttribute('width', \"\" + img.width);\n            canvas.setAttribute('height', \"\" + img.height);\n            canvas.getContext('2d').putImageData(img, 0, 0);\n            if (!attrs.width) {\n                el.setAttribute('width', \"\" + img.width);\n                this.attr('width', img.width);\n            }\n            if (!attrs.height) {\n                el.setAttribute('height', \"\" + img.height);\n                this.attr('height', img.height);\n            }\n            el.setAttribute('href', canvas.toDataURL());\n        }\n    };\n    return Image;\n}(ShapeBase));\nexport default Image;\n//# sourceMappingURL=image.js.map","import { __assign, __extends } from \"tslib\";\n/**\n * @fileoverview line\n * @author dengfuping_develop@163.com\n */\nimport LineUtil from '@antv/g-math/lib/line';\nimport { each, isObject } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'line';\n        _this.canFill = false;\n        _this.canStroke = true;\n        return _this;\n    }\n    Line.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x1: 0, y1: 0, x2: 0, y2: 0, startArrow: false, endArrow: false });\n    };\n    Line.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'startArrow' || attr === 'endArrow') {\n                if (value) {\n                    var id = isObject(value)\n                        ? context.addArrow(attrs, SVG_ATTR_MAP[attr])\n                        : context.getDefaultArrow(attrs, SVG_ATTR_MAP[attr]);\n                    el.setAttribute(SVG_ATTR_MAP[attr], \"url(#\" + id + \")\");\n                }\n                else {\n                    el.removeAttribute(SVG_ATTR_MAP[attr]);\n                }\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    /**\n     * Use math calculation to get length of line\n     * @return {number} length\n     */\n    Line.prototype.getTotalLength = function () {\n        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;\n        return LineUtil.length(x1, y1, x2, y2);\n    };\n    /**\n     * Use math calculation to get point according to ratio as same sa Canvas version\n     * @param {number} ratio\n     * @return {Point} point\n     */\n    Line.prototype.getPoint = function (ratio) {\n        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;\n        return LineUtil.pointAt(x1, y1, x2, y2, ratio);\n    };\n    return Line;\n}(ShapeBase));\nexport default Line;\n//# sourceMappingURL=line.js.map","var Symbols = {\n    // 圆\n    circle: function (x, y, r) {\n        return [['M', x, y], ['m', -r, 0], ['a', r, r, 0, 1, 0, r * 2, 0], ['a', r, r, 0, 1, 0, -r * 2, 0]];\n    },\n    // 正方形\n    square: function (x, y, r) {\n        return [['M', x - r, y - r], ['L', x + r, y - r], ['L', x + r, y + r], ['L', x - r, y + r], ['Z']];\n    },\n    // 菱形\n    diamond: function (x, y, r) {\n        return [['M', x - r, y], ['L', x, y - r], ['L', x + r, y], ['L', x, y + r], ['Z']];\n    },\n    // 三角形\n    triangle: function (x, y, r) {\n        var diffY = r * Math.sin((1 / 3) * Math.PI);\n        return [['M', x - r, y + diffY], ['L', x, y - diffY], ['L', x + r, y + diffY], ['z']];\n    },\n    // 倒三角形\n    triangleDown: function (x, y, r) {\n        var diffY = r * Math.sin((1 / 3) * Math.PI);\n        return [['M', x - r, y - diffY], ['L', x + r, y - diffY], ['L', x, y + diffY], ['Z']];\n    },\n};\nexport default {\n    get: function (type) {\n        return Symbols[type];\n    },\n    register: function (type, func) {\n        Symbols[type] = func;\n    },\n    remove: function (type) {\n        delete Symbols[type];\n    },\n    getAll: function () {\n        return Symbols;\n    },\n};\n//# sourceMappingURL=symbols.js.map","/**\n * @fileoverview marker\n * @author dengfuping_develop@163.com\n */\nimport { __extends } from \"tslib\";\nimport { isArray, isFunction } from '@antv/util';\nimport ShapeBase from '../base';\nimport symbolsFactory from './symbols';\nvar Marker = /** @class */ (function (_super) {\n    __extends(Marker, _super);\n    function Marker() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'marker';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Marker.prototype.createPath = function (context) {\n        var el = this.get('el');\n        el.setAttribute('d', this._assembleMarker());\n    };\n    Marker.prototype._assembleMarker = function () {\n        var d = this._getPath();\n        if (isArray(d)) {\n            return d\n                .map(function (path) {\n                return path.join(' ');\n            })\n                .join('');\n        }\n        return d;\n    };\n    Marker.prototype._getPath = function () {\n        var attrs = this.attr();\n        var x = attrs.x, y = attrs.y;\n        // 兼容 r 和 radius 两种写法，推荐使用 r\n        var r = attrs.r || attrs.radius;\n        var symbol = attrs.symbol || 'circle';\n        var method;\n        if (isFunction(symbol)) {\n            method = symbol;\n        }\n        else {\n            method = symbolsFactory.get(symbol);\n        }\n        if (!method) {\n            console.warn(method + \" symbol is not exist.\");\n            return null;\n        }\n        return method(x, y, r);\n    };\n    // 作为其静态属性\n    Marker.symbolsFactory = symbolsFactory;\n    return Marker;\n}(ShapeBase));\nexport default Marker;\n//# sourceMappingURL=index.js.map","import { __assign, __extends } from \"tslib\";\nimport { each, isArray, isObject } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Path = /** @class */ (function (_super) {\n    __extends(Path, _super);\n    function Path() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'path';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Path.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { startArrow: false, endArrow: false });\n    };\n    Path.prototype.createPath = function (context, targetAttrs) {\n        var _this = this;\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'path' && isArray(value)) {\n                el.setAttribute('d', _this._formatPath(value));\n            }\n            else if (attr === 'startArrow' || attr === 'endArrow') {\n                if (value) {\n                    var id = isObject(value)\n                        ? context.addArrow(attrs, SVG_ATTR_MAP[attr])\n                        : context.getDefaultArrow(attrs, SVG_ATTR_MAP[attr]);\n                    el.setAttribute(SVG_ATTR_MAP[attr], \"url(#\" + id + \")\");\n                }\n                else {\n                    el.removeAttribute(SVG_ATTR_MAP[attr]);\n                }\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    Path.prototype._formatPath = function (value) {\n        var newValue = value\n            .map(function (path) {\n            return path.join(' ');\n        })\n            .join('');\n        if (~newValue.indexOf('NaN')) {\n            return '';\n        }\n        return newValue;\n    };\n    /**\n     * Get total length of path\n     * 尽管通过浏览器的 SVGPathElement.getTotalLength() 接口获取的 path 长度，\n     * 与 Canvas 版本通过数学计算的方式得到的长度有一些细微差异，但最大误差在个位数像素，精度上可以能接受\n     * @return {number} length\n     */\n    Path.prototype.getTotalLength = function () {\n        var el = this.get('el');\n        return el ? el.getTotalLength() : null;\n    };\n    /**\n     * Get point according to ratio\n     * @param {number} ratio\n     * @return {Point} point\n     */\n    Path.prototype.getPoint = function (ratio) {\n        var el = this.get('el');\n        var totalLength = this.getTotalLength();\n        // @see https://github.com/antvis/g/issues/634\n        if (totalLength === 0) {\n            return null;\n        }\n        var point = el ? el.getPointAtLength(ratio * totalLength) : null;\n        return point\n            ? {\n                x: point.x,\n                y: point.y,\n            }\n            : null;\n    };\n    return Path;\n}(ShapeBase));\nexport default Path;\n//# sourceMappingURL=path.js.map","import { __extends } from \"tslib\";\n/**\n * @fileoverview polygon\n * @author dengfuping_develop@163.com\n */\nimport { each, isArray } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Polygon = /** @class */ (function (_super) {\n    __extends(Polygon, _super);\n    function Polygon() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'polygon';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Polygon.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'points' && isArray(value) && value.length >= 2) {\n                el.setAttribute('points', value.map(function (point) { return point[0] + \",\" + point[1]; }).join(' '));\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    return Polygon;\n}(ShapeBase));\nexport default Polygon;\n//# sourceMappingURL=polygon.js.map","import { __assign, __extends } from \"tslib\";\nimport LineUtil from '@antv/g-math/lib/line';\nimport PolylineUtil from '@antv/g-math/lib/polyline';\nimport { each, isArray, isNil } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Polyline = /** @class */ (function (_super) {\n    __extends(Polyline, _super);\n    function Polyline() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'polyline';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Polyline.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { startArrow: false, endArrow: false });\n    };\n    // 更新属性时，检测是否更改了 points\n    Polyline.prototype.onAttrChange = function (name, value, originValue) {\n        _super.prototype.onAttrChange.call(this, name, value, originValue);\n        if (['points'].indexOf(name) !== -1) {\n            this._resetCache();\n        }\n    };\n    Polyline.prototype._resetCache = function () {\n        this.set('totalLength', null);\n        this.set('tCache', null);\n    };\n    Polyline.prototype.createPath = function (context, targetAttrs) {\n        var attrs = this.attr();\n        var el = this.get('el');\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'points' && isArray(value) && value.length >= 2) {\n                el.setAttribute('points', value.map(function (point) { return point[0] + \",\" + point[1]; }).join(' '));\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    /**\n     * Get length of polyline\n     * @return {number} length\n     */\n    Polyline.prototype.getTotalLength = function () {\n        var points = this.attr().points;\n        // get totalLength from cache\n        var totalLength = this.get('totalLength');\n        if (!isNil(totalLength)) {\n            return totalLength;\n        }\n        this.set('totalLength', PolylineUtil.length(points));\n        return this.get('totalLength');\n    };\n    /**\n     * Get point according to ratio\n     * @param {number} ratio\n     * @return {Point} point\n     */\n    Polyline.prototype.getPoint = function (ratio) {\n        var points = this.attr().points;\n        // get tCache from cache\n        var tCache = this.get('tCache');\n        if (!tCache) {\n            this._setTcache();\n            tCache = this.get('tCache');\n        }\n        var subt;\n        var index;\n        each(tCache, function (v, i) {\n            if (ratio >= v[0] && ratio <= v[1]) {\n                subt = (ratio - v[0]) / (v[1] - v[0]);\n                index = i;\n            }\n        });\n        return LineUtil.pointAt(points[index][0], points[index][1], points[index + 1][0], points[index + 1][1], subt);\n    };\n    Polyline.prototype._setTcache = function () {\n        var points = this.attr().points;\n        if (!points || points.length === 0) {\n            return;\n        }\n        var totalLength = this.getTotalLength();\n        if (totalLength <= 0) {\n            return;\n        }\n        var tempLength = 0;\n        var tCache = [];\n        var segmentT;\n        var segmentL;\n        each(points, function (p, i) {\n            if (points[i + 1]) {\n                segmentT = [];\n                segmentT[0] = tempLength / totalLength;\n                segmentL = LineUtil.length(p[0], p[1], points[i + 1][0], points[i + 1][1]);\n                tempLength += segmentL;\n                segmentT[1] = tempLength / totalLength;\n                tCache.push(segmentT);\n            }\n        });\n        this.set('tCache', tCache);\n    };\n    /**\n     * Get start tangent vector\n     * @return {Array}\n     */\n    Polyline.prototype.getStartTangent = function () {\n        var points = this.attr().points;\n        var result = [];\n        result.push([points[1][0], points[1][1]]);\n        result.push([points[0][0], points[0][1]]);\n        return result;\n    };\n    /**\n     * Get end tangent vector\n     * @return {Array}\n     */\n    Polyline.prototype.getEndTangent = function () {\n        var points = this.attr().points;\n        var l = points.length - 1;\n        var result = [];\n        result.push([points[l - 1][0], points[l - 1][1]]);\n        result.push([points[l][0], points[l][1]]);\n        return result;\n    };\n    return Polyline;\n}(ShapeBase));\nexport default Polyline;\n//# sourceMappingURL=polyline.js.map","/**\n * @fileoverview rect\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each, isArray } from '@antv/util';\nimport ShapeBase from './base';\nimport { SVG_ATTR_MAP } from '../constant';\nimport { parseRadius } from '../util/format';\nvar Rect = /** @class */ (function (_super) {\n    __extends(Rect, _super);\n    function Rect() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'rect';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Rect.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, width: 0, height: 0, radius: 0 });\n    };\n    Rect.prototype.createPath = function (context, targetAttrs) {\n        var _this = this;\n        var attrs = this.attr();\n        var el = this.get('el');\n        // 加上状态量，用来标记 path 是否已组装\n        var completed = false;\n        // 和组装 path 相关的绘图属性\n        var pathRelatedAttrs = ['x', 'y', 'width', 'height', 'radius'];\n        each(targetAttrs || attrs, function (value, attr) {\n            if (pathRelatedAttrs.indexOf(attr) !== -1 && !completed) {\n                el.setAttribute('d', _this._assembleRect(attrs));\n                completed = true;\n            }\n            else if (pathRelatedAttrs.indexOf(attr) === -1 && SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    Rect.prototype._assembleRect = function (attrs) {\n        var x = attrs.x;\n        var y = attrs.y;\n        var w = attrs.width;\n        var h = attrs.height;\n        var radius = attrs.radius;\n        if (!radius) {\n            return \"M \" + x + \",\" + y + \" l \" + w + \",0 l 0,\" + h + \" l\" + -w + \" 0 z\";\n        }\n        var r = parseRadius(radius);\n        if (isArray(radius)) {\n            if (radius.length === 1) {\n                r.r1 = r.r2 = r.r3 = r.r4 = radius[0];\n            }\n            else if (radius.length === 2) {\n                r.r1 = r.r3 = radius[0];\n                r.r2 = r.r4 = radius[1];\n            }\n            else if (radius.length === 3) {\n                r.r1 = radius[0];\n                r.r2 = r.r4 = radius[1];\n                r.r3 = radius[2];\n            }\n            else {\n                r.r1 = radius[0];\n                r.r2 = radius[1];\n                r.r3 = radius[2];\n                r.r4 = radius[3];\n            }\n        }\n        else {\n            r.r1 = r.r2 = r.r3 = r.r4 = radius;\n        }\n        var d = [\n            [\"M \" + (x + r.r1) + \",\" + y],\n            [\"l \" + (w - r.r1 - r.r2) + \",0\"],\n            [\"a \" + r.r2 + \",\" + r.r2 + \",0,0,1,\" + r.r2 + \",\" + r.r2],\n            [\"l 0,\" + (h - r.r2 - r.r3)],\n            [\"a \" + r.r3 + \",\" + r.r3 + \",0,0,1,\" + -r.r3 + \",\" + r.r3],\n            [\"l \" + (r.r3 + r.r4 - w) + \",0\"],\n            [\"a \" + r.r4 + \",\" + r.r4 + \",0,0,1,\" + -r.r4 + \",\" + -r.r4],\n            [\"l 0,\" + (r.r4 + r.r1 - h)],\n            [\"a \" + r.r1 + \",\" + r.r1 + \",0,0,1,\" + r.r1 + \",\" + -r.r1],\n            ['z'],\n        ];\n        return d.join(' ');\n    };\n    return Rect;\n}(ShapeBase));\nexport default Rect;\n//# sourceMappingURL=rect.js.map","import { each, isArray, isString } from '@antv/util';\nvar regexTags = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi;\nvar regexDot = /[^\\s\\,]+/gi;\nexport function parseRadius(radius) {\n    var r1 = 0;\n    var r2 = 0;\n    var r3 = 0;\n    var r4 = 0;\n    if (isArray(radius)) {\n        if (radius.length === 1) {\n            r1 = r2 = r3 = r4 = radius[0];\n        }\n        else if (radius.length === 2) {\n            r1 = r3 = radius[0];\n            r2 = r4 = radius[1];\n        }\n        else if (radius.length === 3) {\n            r1 = radius[0];\n            r2 = r4 = radius[1];\n            r3 = radius[2];\n        }\n        else {\n            r1 = radius[0];\n            r2 = radius[1];\n            r3 = radius[2];\n            r4 = radius[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = radius;\n    }\n    return {\n        r1: r1,\n        r2: r2,\n        r3: r3,\n        r4: r4,\n    };\n}\nexport function parsePath(path) {\n    path = path || [];\n    if (isArray(path)) {\n        return path;\n    }\n    if (isString(path)) {\n        path = path.match(regexTags);\n        each(path, function (item, index) {\n            item = item.match(regexDot);\n            if (item[0].length > 1) {\n                var tag = item[0].charAt(0);\n                item.splice(1, 0, item[0].substr(1));\n                item[0] = tag;\n            }\n            each(item, function (sub, i) {\n                if (!isNaN(sub)) {\n                    item[i] = +sub;\n                }\n            });\n            path[index] = item;\n        });\n        return path;\n    }\n}\n//# sourceMappingURL=format.js.map","/**\n * @fileoverview text\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { detect } from 'detect-browser';\nimport { setTransform } from '../util/svg';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar LETTER_SPACING = 0.3;\nvar BASELINE_MAP = {\n    top: 'before-edge',\n    middle: 'central',\n    bottom: 'after-edge',\n    alphabetic: 'baseline',\n    hanging: 'hanging',\n};\n// for FireFox\nvar BASELINE_MAP_FOR_FIREFOX = {\n    top: 'text-before-edge',\n    middle: 'central',\n    bottom: 'text-after-edge',\n    alphabetic: 'alphabetic',\n    hanging: 'hanging',\n};\nvar ANCHOR_MAP = {\n    left: 'left',\n    start: 'left',\n    center: 'middle',\n    right: 'end',\n    end: 'end',\n};\nvar Text = /** @class */ (function (_super) {\n    __extends(Text, _super);\n    function Text() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'text';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Text.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, text: null, fontSize: 12, fontFamily: 'sans-serif', fontStyle: 'normal', fontWeight: 'normal', fontVariant: 'normal', textAlign: 'start', textBaseline: 'bottom' });\n    };\n    Text.prototype.createPath = function (context, targetAttrs) {\n        var _this = this;\n        var attrs = this.attr();\n        var el = this.get('el');\n        this._setFont();\n        each(targetAttrs || attrs, function (value, attr) {\n            if (attr === 'text') {\n                _this._setText(\"\" + value);\n            }\n            else if (attr === 'matrix' && value) {\n                setTransform(_this);\n            }\n            else if (SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n        el.setAttribute('paint-order', 'stroke');\n        el.setAttribute('style', 'stroke-linecap:butt; stroke-linejoin:miter;');\n    };\n    Text.prototype._setFont = function () {\n        var el = this.get('el');\n        var _a = this.attr(), textBaseline = _a.textBaseline, textAlign = _a.textAlign;\n        var browser = detect();\n        if (browser && browser.name === 'firefox') {\n            // compatible with FireFox browser, ref: https://github.com/antvis/g/issues/119\n            el.setAttribute('dominant-baseline', BASELINE_MAP_FOR_FIREFOX[textBaseline] || 'alphabetic');\n        }\n        else {\n            el.setAttribute('alignment-baseline', BASELINE_MAP[textBaseline] || 'baseline');\n        }\n        el.setAttribute('text-anchor', ANCHOR_MAP[textAlign] || 'left');\n    };\n    Text.prototype._setText = function (text) {\n        var el = this.get('el');\n        var _a = this.attr(), x = _a.x, _b = _a.textBaseline, baseline = _b === void 0 ? 'bottom' : _b;\n        if (!text) {\n            el.innerHTML = '';\n        }\n        else if (~text.indexOf('\\n')) {\n            var textArr = text.split('\\n');\n            var textLen_1 = textArr.length - 1;\n            var arr_1 = '';\n            each(textArr, function (segment, i) {\n                if (i === 0) {\n                    if (baseline === 'alphabetic') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"\" + -textLen_1 + \"em\\\">\" + segment + \"</tspan>\";\n                    }\n                    else if (baseline === 'top') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"0.9em\\\">\" + segment + \"</tspan>\";\n                    }\n                    else if (baseline === 'middle') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"\" + -(textLen_1 - 1) / 2 + \"em\\\">\" + segment + \"</tspan>\";\n                    }\n                    else if (baseline === 'bottom') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"-\" + (textLen_1 + LETTER_SPACING) + \"em\\\">\" + segment + \"</tspan>\";\n                    }\n                    else if (baseline === 'hanging') {\n                        arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"\" + (-(textLen_1 - 1) - LETTER_SPACING) + \"em\\\">\" + segment + \"</tspan>\";\n                    }\n                }\n                else {\n                    arr_1 += \"<tspan x=\\\"\" + x + \"\\\" dy=\\\"1em\\\">\" + segment + \"</tspan>\";\n                }\n            });\n            el.innerHTML = arr_1;\n        }\n        else {\n            el.innerHTML = text;\n        }\n    };\n    return Text;\n}(ShapeBase));\nexport default Text;\n//# sourceMappingURL=text.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=interfaces.js.map","var GraphEvent = /** @class */ (function () {\n    function GraphEvent(type, event) {\n        /**\n         * 是否允许冒泡\n         * @type {boolean}\n         */\n        this.bubbles = true;\n        /**\n         * 触发对象\n         * @type {object}\n         */\n        this.target = null;\n        /**\n         * 监听对象\n         * @type {object}\n         */\n        this.currentTarget = null;\n        /**\n         * 委托对象\n         * @type {object}\n         */\n        this.delegateTarget = null;\n        /**\n         * 委托事件监听对象的代理对象，即 ev.delegateObject = ev.currentTarget.get('delegateObject')\n         * @type {object}\n         */\n        this.delegateObject = null;\n        /**\n         * 是否阻止了原生事件\n         * @type {boolean}\n         */\n        this.defaultPrevented = false;\n        /**\n         * 是否阻止传播（向上冒泡）\n         * @type {boolean}\n         */\n        this.propagationStopped = false;\n        /**\n         * 触发事件的图形\n         * @type {IShape}\n         */\n        this.shape = null;\n        /**\n         * 开始触发事件的图形\n         * @type {IShape}\n         */\n        this.fromShape = null;\n        /**\n         * 事件结束时的触发图形\n         * @type {IShape}\n         */\n        this.toShape = null;\n        // 触发事件的路径\n        this.propagationPath = [];\n        this.type = type;\n        this.name = type;\n        this.originalEvent = event;\n        this.timeStamp = event.timeStamp;\n    }\n    /**\n     * 阻止浏览器默认的行为\n     */\n    GraphEvent.prototype.preventDefault = function () {\n        this.defaultPrevented = true;\n        if (this.originalEvent.preventDefault) {\n            this.originalEvent.preventDefault();\n        }\n    };\n    /**\n     * 阻止冒泡\n     */\n    GraphEvent.prototype.stopPropagation = function () {\n        this.propagationStopped = true;\n    };\n    GraphEvent.prototype.toString = function () {\n        var type = this.type;\n        return \"[Event (type=\" + type + \")]\";\n    };\n    GraphEvent.prototype.save = function () { };\n    GraphEvent.prototype.restore = function () { };\n    return GraphEvent;\n}());\nexport default GraphEvent;\n//# sourceMappingURL=graph-event.js.map","import { __extends } from \"tslib\";\nimport EE from '@antv/event-emitter';\nimport { mix } from '../util/util';\nvar Base = /** @class */ (function (_super) {\n    __extends(Base, _super);\n    function Base(cfg) {\n        var _this = _super.call(this) || this;\n        /**\n         * 是否被销毁\n         * @type {boolean}\n         */\n        _this.destroyed = false;\n        var defaultCfg = _this.getDefaultCfg();\n        _this.cfg = mix(defaultCfg, cfg);\n        return _this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    Base.prototype.getDefaultCfg = function () {\n        return {};\n    };\n    // 实现接口的方法\n    Base.prototype.get = function (name) {\n        return this.cfg[name];\n    };\n    // 实现接口的方法\n    Base.prototype.set = function (name, value) {\n        this.cfg[name] = value;\n    };\n    // 实现接口的方法\n    Base.prototype.destroy = function () {\n        this.cfg = {\n            destroyed: true,\n        };\n        this.off();\n        this.destroyed = true;\n    };\n    return Base;\n}(EE));\nexport default Base;\n//# sourceMappingURL=base.js.map","import { __extends } from \"tslib\";\nimport Element from './element';\nimport { isFunction, isObject, each, removeFromArray, upperFirst, isAllowCapture } from '../util/util';\nvar SHAPE_MAP = {};\nvar INDEX = '_INDEX';\n/**\n * 设置 canvas\n * @param {IElement} element 元素\n * @param {ICanvas}  canvas  画布\n */\nfunction setCanvas(element, canvas) {\n    element.set('canvas', canvas);\n    if (element.isGroup()) {\n        var children = element.get('children');\n        if (children.length) {\n            children.forEach(function (child) {\n                setCanvas(child, canvas);\n            });\n        }\n    }\n}\n/**\n * 设置 timeline\n * @param {IElement} element  元素\n * @param {Timeline} timeline 时间轴\n */\nfunction setTimeline(element, timeline) {\n    element.set('timeline', timeline);\n    if (element.isGroup()) {\n        var children = element.get('children');\n        if (children.length) {\n            children.forEach(function (child) {\n                setTimeline(child, timeline);\n            });\n        }\n    }\n}\nfunction contains(container, element) {\n    var children = container.getChildren();\n    return children.indexOf(element) >= 0;\n}\nfunction removeChild(container, element, destroy) {\n    if (destroy === void 0) { destroy = true; }\n    // 不再调用 element.remove() 方法，会出现循环调用\n    if (destroy) {\n        element.destroy();\n    }\n    else {\n        element.set('parent', null);\n        element.set('canvas', null);\n    }\n    removeFromArray(container.getChildren(), element);\n}\nfunction getComparer(compare) {\n    return function (left, right) {\n        var result = compare(left, right);\n        return result === 0 ? left[INDEX] - right[INDEX] : result;\n    };\n}\nvar Container = /** @class */ (function (_super) {\n    __extends(Container, _super);\n    function Container() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Container.prototype.isCanvas = function () {\n        return false;\n    };\n    // 根据子节点确定 BBox\n    Container.prototype.getBBox = function () {\n        // 所有的值可能在画布的可视区外\n        var minX = Infinity;\n        var maxX = -Infinity;\n        var minY = Infinity;\n        var maxY = -Infinity;\n        var xArr = [];\n        var yArr = [];\n        // 将可见元素、图形以及不为空的图形分组筛选出来，用于包围盒合并\n        var children = this.getChildren().filter(function (child) {\n            return child.get('visible') && (!child.isGroup() || (child.isGroup() && child.getChildren().length > 0));\n        });\n        if (children.length > 0) {\n            each(children, function (child) {\n                var box = child.getBBox();\n                xArr.push(box.minX, box.maxX);\n                yArr.push(box.minY, box.maxY);\n            });\n            minX = Math.min.apply(null, xArr);\n            maxX = Math.max.apply(null, xArr);\n            minY = Math.min.apply(null, yArr);\n            maxY = Math.max.apply(null, yArr);\n        }\n        else {\n            minX = 0;\n            maxX = 0;\n            minY = 0;\n            maxY = 0;\n        }\n        var box = {\n            x: minX,\n            y: minY,\n            minX: minX,\n            minY: minY,\n            maxX: maxX,\n            maxY: maxY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n        return box;\n    };\n    // 获取画布的包围盒\n    Container.prototype.getCanvasBBox = function () {\n        var minX = Infinity;\n        var maxX = -Infinity;\n        var minY = Infinity;\n        var maxY = -Infinity;\n        var xArr = [];\n        var yArr = [];\n        // 将可见元素、图形以及不为空的图形分组筛选出来，用于包围盒合并\n        var children = this.getChildren().filter(function (child) {\n            return child.get('visible') && (!child.isGroup() || (child.isGroup() && child.getChildren().length > 0));\n        });\n        if (children.length > 0) {\n            each(children, function (child) {\n                var box = child.getCanvasBBox();\n                xArr.push(box.minX, box.maxX);\n                yArr.push(box.minY, box.maxY);\n            });\n            minX = Math.min.apply(null, xArr);\n            maxX = Math.max.apply(null, xArr);\n            minY = Math.min.apply(null, yArr);\n            maxY = Math.max.apply(null, yArr);\n        }\n        else {\n            minX = 0;\n            maxX = 0;\n            minY = 0;\n            maxY = 0;\n        }\n        var box = {\n            x: minX,\n            y: minY,\n            minX: minX,\n            minY: minY,\n            maxX: maxX,\n            maxY: maxY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n        return box;\n    };\n    Container.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        cfg['children'] = [];\n        return cfg;\n    };\n    Container.prototype.onAttrChange = function (name, value, originValue) {\n        _super.prototype.onAttrChange.call(this, name, value, originValue);\n        if (name === 'matrix') {\n            var totalMatrix = this.getTotalMatrix();\n            this._applyChildrenMarix(totalMatrix);\n        }\n    };\n    // 不但应用到自己身上还要应用于子元素\n    Container.prototype.applyMatrix = function (matrix) {\n        var preTotalMatrix = this.getTotalMatrix();\n        _super.prototype.applyMatrix.call(this, matrix);\n        var totalMatrix = this.getTotalMatrix();\n        // totalMatrix 没有发生变化时，这里仅考虑两者都为 null 时\n        // 不继续向下传递矩阵\n        if (totalMatrix === preTotalMatrix) {\n            return;\n        }\n        this._applyChildrenMarix(totalMatrix);\n    };\n    // 在子元素上设置矩阵\n    Container.prototype._applyChildrenMarix = function (totalMatrix) {\n        var children = this.getChildren();\n        each(children, function (child) {\n            child.applyMatrix(totalMatrix);\n        });\n    };\n    // 兼容老版本的接口\n    Container.prototype.addShape = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var type = args[0];\n        var cfg = args[1];\n        if (isObject(type)) {\n            cfg = type;\n        }\n        else {\n            cfg['type'] = type;\n        }\n        var shapeType = SHAPE_MAP[cfg.type];\n        if (!shapeType) {\n            shapeType = upperFirst(cfg.type);\n            SHAPE_MAP[cfg.type] = shapeType;\n        }\n        var ShapeBase = this.getShapeBase();\n        var shape = new ShapeBase[shapeType](cfg);\n        this.add(shape);\n        return shape;\n    };\n    Container.prototype.addGroup = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var groupClass = args[0], cfg = args[1];\n        var group;\n        if (isFunction(groupClass)) {\n            if (cfg) {\n                group = new groupClass(cfg);\n            }\n            else {\n                group = new groupClass({\n                    // canvas,\n                    parent: this,\n                });\n            }\n        }\n        else {\n            var tmpCfg = groupClass || {};\n            var TmpGroupClass = this.getGroupBase();\n            group = new TmpGroupClass(tmpCfg);\n        }\n        this.add(group);\n        return group;\n    };\n    Container.prototype.getCanvas = function () {\n        var canvas;\n        if (this.isCanvas()) {\n            canvas = this;\n        }\n        else {\n            canvas = this.get('canvas');\n        }\n        return canvas;\n    };\n    Container.prototype.getShape = function (x, y, ev) {\n        // 如果不支持拾取，则直接返回\n        if (!isAllowCapture(this)) {\n            return null;\n        }\n        var children = this.getChildren();\n        var shape;\n        // 如果容器是 group\n        if (!this.isCanvas()) {\n            var v = [x, y, 1];\n            // 将 x, y 转换成对应于 group 的局部坐标\n            v = this.invertFromMatrix(v);\n            if (!this.isClipped(v[0], v[1])) {\n                shape = this._findShape(children, v[0], v[1], ev);\n            }\n        }\n        else {\n            shape = this._findShape(children, x, y, ev);\n        }\n        return shape;\n    };\n    Container.prototype._findShape = function (children, x, y, ev) {\n        var shape = null;\n        for (var i = children.length - 1; i >= 0; i--) {\n            var child = children[i];\n            if (isAllowCapture(child)) {\n                if (child.isGroup()) {\n                    shape = child.getShape(x, y, ev);\n                }\n                else if (child.isHit(x, y)) {\n                    shape = child;\n                }\n            }\n            if (shape) {\n                break;\n            }\n        }\n        return shape;\n    };\n    Container.prototype.add = function (element) {\n        var canvas = this.getCanvas();\n        var children = this.getChildren();\n        var timeline = this.get('timeline');\n        var preParent = element.getParent();\n        if (preParent) {\n            removeChild(preParent, element, false);\n        }\n        element.set('parent', this);\n        if (canvas) {\n            setCanvas(element, canvas);\n        }\n        if (timeline) {\n            setTimeline(element, timeline);\n        }\n        children.push(element);\n        element.onCanvasChange('add');\n        this._applyElementMatrix(element);\n    };\n    // 将当前容器的矩阵应用到子元素\n    Container.prototype._applyElementMatrix = function (element) {\n        var totalMatrix = this.getTotalMatrix();\n        // 添加图形或者分组时，需要把当前图元的矩阵设置进去\n        if (totalMatrix) {\n            element.applyMatrix(totalMatrix);\n        }\n    };\n    Container.prototype.getChildren = function () {\n        return this.get('children');\n    };\n    Container.prototype.sort = function () {\n        var children = this.getChildren();\n        // 稳定排序\n        each(children, function (child, index) {\n            child[INDEX] = index;\n            return child;\n        });\n        children.sort(getComparer(function (obj1, obj2) {\n            return obj1.get('zIndex') - obj2.get('zIndex');\n        }));\n        this.onCanvasChange('sort');\n    };\n    Container.prototype.clear = function () {\n        this.set('clearing', true);\n        if (this.destroyed) {\n            return;\n        }\n        var children = this.getChildren();\n        for (var i = children.length - 1; i >= 0; i--) {\n            children[i].destroy(); // 销毁子元素\n        }\n        this.set('children', []);\n        this.onCanvasChange('clear');\n        this.set('clearing', false);\n    };\n    Container.prototype.destroy = function () {\n        if (this.get('destroyed')) {\n            return;\n        }\n        this.clear();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * 获取第一个子元素\n     * @return {IElement} 第一个元素\n     */\n    Container.prototype.getFirst = function () {\n        return this.getChildByIndex(0);\n    };\n    /**\n     * 获取最后一个子元素\n     * @return {IElement} 元素\n     */\n    Container.prototype.getLast = function () {\n        var children = this.getChildren();\n        return this.getChildByIndex(children.length - 1);\n    };\n    /**\n     * 根据索引获取子元素\n     * @return {IElement} 第一个元素\n     */\n    Container.prototype.getChildByIndex = function (index) {\n        var children = this.getChildren();\n        return children[index];\n    };\n    /**\n     * 子元素的数量\n     * @return {number} 子元素数量\n     */\n    Container.prototype.getCount = function () {\n        var children = this.getChildren();\n        return children.length;\n    };\n    /**\n     * 是否包含对应元素\n     * @param {IElement} element 元素\n     * @return {boolean}\n     */\n    Container.prototype.contain = function (element) {\n        var children = this.getChildren();\n        return children.indexOf(element) > -1;\n    };\n    /**\n     * 移除对应子元素\n     * @param {IElement} element 子元素\n     * @param {boolean} destroy 是否销毁子元素，默认为 true\n     */\n    Container.prototype.removeChild = function (element, destroy) {\n        if (destroy === void 0) { destroy = true; }\n        if (this.contain(element)) {\n            element.remove(destroy);\n        }\n    };\n    /**\n     * 查找所有匹配的元素\n     * @param  {ElementFilterFn}   fn  匹配函数\n     * @return {IElement[]} 元素数组\n     */\n    Container.prototype.findAll = function (fn) {\n        var rst = [];\n        var children = this.getChildren();\n        each(children, function (element) {\n            if (fn(element)) {\n                rst.push(element);\n            }\n            if (element.isGroup()) {\n                rst = rst.concat(element.findAll(fn));\n            }\n        });\n        return rst;\n    };\n    /**\n     * 查找元素，找到第一个返回\n     * @param  {ElementFilterFn} fn    匹配函数\n     * @return {IElement|null} 元素，可以为空\n     */\n    Container.prototype.find = function (fn) {\n        var rst = null;\n        var children = this.getChildren();\n        each(children, function (element) {\n            if (fn(element)) {\n                rst = element;\n            }\n            else if (element.isGroup()) {\n                rst = element.find(fn);\n            }\n            if (rst) {\n                return false;\n            }\n        });\n        return rst;\n    };\n    /**\n     * 根据 ID 查找元素\n     * @param {string} id 元素 id\n     * @return {IElement|null} 元素\n     */\n    Container.prototype.findById = function (id) {\n        return this.find(function (element) {\n            return element.get('id') === id;\n        });\n    };\n    /**\n     * 该方法即将废弃，不建议使用\n     * 根据 className 查找元素\n     * TODO: 该方式定义暂时只给 G6 3.3 以后的版本使用，待 G6 中的 findByClassName 方法移除后，G 也需要同步移除\n     * @param {string} className 元素 className\n     * @return {IElement | null} 元素\n     */\n    Container.prototype.findByClassName = function (className) {\n        return this.find(function (element) {\n            return element.get('className') === className;\n        });\n    };\n    /**\n     * 根据 name 查找元素列表\n     * @param {string}      name 元素名称\n     * @return {IElement[]} 元素\n     */\n    Container.prototype.findAllByName = function (name) {\n        return this.findAll(function (element) {\n            return element.get('name') === name;\n        });\n    };\n    return Container;\n}(Element));\nexport default Container;\n//# sourceMappingURL=container.js.map","import { __extends } from \"tslib\";\nimport { each, isEqual, isFunction, isNumber, isObject, isArray, noop, mix, upperFirst, uniqueId } from '@antv/util';\nimport { ext } from '@antv/matrix-util';\nimport { removeFromArray, isParent } from '../util/util';\nimport { multiplyMatrix, multiplyVec2, invert } from '../util/matrix';\nimport Base from './base';\nvar transform = ext.transform;\nvar MATRIX = 'matrix';\nvar CLONE_CFGS = ['zIndex', 'capture', 'visible', 'type'];\n// 可以在 toAttrs 中设置，但不属于绘图属性的字段\nvar RESERVED_PORPS = ['repeat'];\nvar DELEGATION_SPLIT = ':';\nvar WILDCARD = '*';\n// 需要考虑数组嵌套数组的场景\n// 数组嵌套对象的场景不考虑\nfunction _cloneArrayAttr(arr) {\n    var result = [];\n    for (var i = 0; i < arr.length; i++) {\n        if (isArray(arr[i])) {\n            result.push([].concat(arr[i]));\n        }\n        else {\n            result.push(arr[i]);\n        }\n    }\n    return result;\n}\nfunction getFormatFromAttrs(toAttrs, shape) {\n    var fromAttrs = {};\n    var attrs = shape.attrs;\n    for (var k in toAttrs) {\n        fromAttrs[k] = attrs[k];\n    }\n    return fromAttrs;\n}\nfunction getFormatToAttrs(props, shape) {\n    var toAttrs = {};\n    var attrs = shape.attr();\n    each(props, function (v, k) {\n        if (RESERVED_PORPS.indexOf(k) === -1 && !isEqual(attrs[k], v)) {\n            toAttrs[k] = v;\n        }\n    });\n    return toAttrs;\n}\nfunction checkExistedAttrs(animations, animation) {\n    if (animation.onFrame) {\n        return animations;\n    }\n    var startTime = animation.startTime, delay = animation.delay, duration = animation.duration;\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    each(animations, function (item) {\n        // 后一个动画开始执行的时间 < 前一个动画的结束时间 && 后一个动画的执行时间 > 前一个动画的延迟\n        if (startTime + delay < item.startTime + item.delay + item.duration && duration > item.delay) {\n            each(animation.toAttrs, function (v, k) {\n                if (hasOwnProperty.call(item.toAttrs, k)) {\n                    delete item.toAttrs[k];\n                    delete item.fromAttrs[k];\n                }\n            });\n        }\n    });\n    return animations;\n}\nvar Element = /** @class */ (function (_super) {\n    __extends(Element, _super);\n    function Element(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        /**\n         * @protected\n         * 图形属性\n         * @type {ShapeAttrs}\n         */\n        _this.attrs = {};\n        var attrs = _this.getDefaultAttrs();\n        mix(attrs, cfg.attrs);\n        _this.attrs = attrs;\n        _this.initAttrs(attrs);\n        _this.initAnimate(); // 初始化动画\n        return _this;\n    }\n    // override\n    Element.prototype.getDefaultCfg = function () {\n        return {\n            visible: true,\n            capture: true,\n            zIndex: 0,\n        };\n    };\n    /**\n     * @protected\n     * 获取默认的属相\n     */\n    Element.prototype.getDefaultAttrs = function () {\n        return {\n            matrix: this.getDefaultMatrix(),\n            opacity: 1,\n        };\n    };\n    /**\n     * @protected\n     * 一些方法调用会引起画布变化\n     * @param {ChangeType} changeType 改变的类型\n     */\n    Element.prototype.onCanvasChange = function (changeType) { };\n    /**\n     * @protected\n     * 初始化属性，有些属性需要加工\n     * @param {object} attrs 属性值\n     */\n    Element.prototype.initAttrs = function (attrs) { };\n    /**\n     * @protected\n     * 初始化动画\n     */\n    Element.prototype.initAnimate = function () {\n        this.set('animable', true);\n        this.set('animating', false);\n    };\n    Element.prototype.isGroup = function () {\n        return false;\n    };\n    Element.prototype.getParent = function () {\n        return this.get('parent');\n    };\n    Element.prototype.getCanvas = function () {\n        return this.get('canvas');\n    };\n    Element.prototype.attr = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var name = args[0], value = args[1];\n        if (!name)\n            return this.attrs;\n        if (isObject(name)) {\n            for (var k in name) {\n                this.setAttr(k, name[k]);\n            }\n            this.afterAttrsChange(name);\n            return this;\n        }\n        if (args.length === 2) {\n            this.setAttr(name, value);\n            this.afterAttrsChange((_a = {},\n                _a[name] = value,\n                _a));\n            return this;\n        }\n        return this.attrs[name];\n    };\n    // 是否被裁剪，被裁剪则不显示，不参与拾取\n    Element.prototype.isClipped = function (refX, refY) {\n        var clip = this.getClip();\n        return clip && !clip.isHit(refX, refY);\n    };\n    /**\n     * 内部设置属性值的接口\n     * @param {string} name 属性名\n     * @param {any} value 属性值\n     */\n    Element.prototype.setAttr = function (name, value) {\n        var originValue = this.attrs[name];\n        if (originValue !== value) {\n            this.attrs[name] = value;\n            this.onAttrChange(name, value, originValue);\n        }\n    };\n    /**\n     * @protected\n     * 属性值发生改变\n     * @param {string} name 属性名\n     * @param {any} value 属性值\n     * @param {any} originValue 属性值\n     */\n    Element.prototype.onAttrChange = function (name, value, originValue) {\n        if (name === 'matrix') {\n            this.set('totalMatrix', null);\n        }\n    };\n    /**\n     * 属性更改后需要做的事情\n     * @protected\n     */\n    Element.prototype.afterAttrsChange = function (targetAttrs) {\n        if (this.cfg.isClipShape) {\n            var applyTo = this.cfg.applyTo;\n            if (applyTo) {\n                applyTo.onCanvasChange('clip');\n            }\n        }\n        else {\n            this.onCanvasChange('attr');\n        }\n    };\n    Element.prototype.show = function () {\n        // 不是高频操作直接使用 set\n        this.set('visible', true);\n        this.onCanvasChange('show');\n        return this;\n    };\n    Element.prototype.hide = function () {\n        // 不是高频操作直接使用 set\n        this.set('visible', false);\n        this.onCanvasChange('hide');\n        return this;\n    };\n    Element.prototype.setZIndex = function (zIndex) {\n        this.set('zIndex', zIndex);\n        var parent = this.getParent();\n        if (parent) {\n            // 改变 zIndex 不应该立即触发渲染 (调用 onCanvasChange('zIndex'))，需要经过 sort 再触发\n            parent.sort();\n        }\n        return this;\n    };\n    Element.prototype.toFront = function () {\n        var parent = this.getParent();\n        if (!parent) {\n            return;\n        }\n        var children = parent.getChildren();\n        var el = this.get('el');\n        var index = children.indexOf(this);\n        children.splice(index, 1);\n        children.push(this);\n        this.onCanvasChange('zIndex');\n    };\n    Element.prototype.toBack = function () {\n        var parent = this.getParent();\n        if (!parent) {\n            return;\n        }\n        var children = parent.getChildren();\n        var el = this.get('el');\n        var index = children.indexOf(this);\n        children.splice(index, 1);\n        children.unshift(this);\n        this.onCanvasChange('zIndex');\n    };\n    Element.prototype.remove = function (destroy) {\n        if (destroy === void 0) { destroy = true; }\n        var parent = this.getParent();\n        if (parent) {\n            removeFromArray(parent.getChildren(), this);\n            if (!parent.get('clearing')) {\n                // 如果父元素正在清理，当前元素不触发 remove\n                this.onCanvasChange('remove');\n            }\n        }\n        else {\n            this.onCanvasChange('remove');\n        }\n        if (destroy) {\n            this.destroy();\n        }\n    };\n    Element.prototype.resetMatrix = function () {\n        this.attr(MATRIX, this.getDefaultMatrix());\n        this.onCanvasChange('matrix');\n    };\n    Element.prototype.getMatrix = function () {\n        return this.attr(MATRIX);\n    };\n    Element.prototype.setMatrix = function (m) {\n        this.attr(MATRIX, m);\n        this.onCanvasChange('matrix');\n    };\n    // 获取总的 matrix\n    Element.prototype.getTotalMatrix = function () {\n        var totalMatrix = this.cfg.totalMatrix;\n        if (!totalMatrix) {\n            var currentMatrix = this.attr('matrix');\n            var parentMatrix = this.cfg.parentMatrix;\n            if (parentMatrix && currentMatrix) {\n                totalMatrix = multiplyMatrix(parentMatrix, currentMatrix);\n            }\n            else {\n                totalMatrix = currentMatrix || parentMatrix;\n            }\n            this.set('totalMatrix', totalMatrix);\n        }\n        return totalMatrix;\n    };\n    // 上层分组设置 matrix\n    Element.prototype.applyMatrix = function (matrix) {\n        var currentMatrix = this.attr('matrix');\n        var totalMatrix = null;\n        if (matrix && currentMatrix) {\n            totalMatrix = multiplyMatrix(matrix, currentMatrix);\n        }\n        else {\n            totalMatrix = currentMatrix || matrix;\n        }\n        this.set('totalMatrix', totalMatrix);\n        this.set('parentMatrix', matrix);\n    };\n    /**\n     * @protected\n     * 获取默认的矩阵\n     * @returns {number[]|null} 默认的矩阵\n     */\n    Element.prototype.getDefaultMatrix = function () {\n        return null;\n    };\n    // 将向量应用设置的矩阵\n    Element.prototype.applyToMatrix = function (v) {\n        var matrix = this.attr('matrix');\n        if (matrix) {\n            return multiplyVec2(matrix, v);\n        }\n        return v;\n    };\n    // 根据设置的矩阵，将向量转换相对于图形/分组的位置\n    Element.prototype.invertFromMatrix = function (v) {\n        var matrix = this.attr('matrix');\n        if (matrix) {\n            var invertMatrix = invert(matrix);\n            if (invertMatrix) {\n                return multiplyVec2(invertMatrix, v);\n            }\n        }\n        return v;\n    };\n    // 设置 clip\n    Element.prototype.setClip = function (clipCfg) {\n        var canvas = this.getCanvas();\n        // 应该只设置当前元素的 clip，不应该去修改 clip 本身，方便 clip 被复用\n        // TODO: setClip 的传参既 shape 配置，也支持 shape 对象\n        // const preShape = this.get('clipShape');\n        // if (preShape) {\n        //   // 将之前的 clipShape 销毁\n        //   preShape.destroy();\n        // }\n        var clipShape = null;\n        // 如果配置项为 null，则不移除 clipShape\n        if (clipCfg) {\n            var ShapeBase = this.getShapeBase();\n            var shapeType = upperFirst(clipCfg.type);\n            var Cons = ShapeBase[shapeType];\n            if (Cons) {\n                clipShape = new Cons({\n                    type: clipCfg.type,\n                    isClipShape: true,\n                    applyTo: this,\n                    attrs: clipCfg.attrs,\n                    canvas: canvas,\n                });\n            }\n        }\n        this.set('clipShape', clipShape);\n        this.onCanvasChange('clip');\n        return clipShape;\n    };\n    Element.prototype.getClip = function () {\n        // 高频率调用的地方直接使用 this.cfg.xxx\n        var clipShape = this.cfg.clipShape;\n        // 未设置时返回 Null，保证一致性\n        if (!clipShape) {\n            return null;\n        }\n        return clipShape;\n    };\n    Element.prototype.clone = function () {\n        var _this = this;\n        var originAttrs = this.attrs;\n        var attrs = {};\n        each(originAttrs, function (i, k) {\n            if (isArray(originAttrs[k])) {\n                attrs[k] = _cloneArrayAttr(originAttrs[k]);\n            }\n            else {\n                attrs[k] = originAttrs[k];\n            }\n        });\n        var cons = this.constructor;\n        // @ts-ignore\n        var clone = new cons({ attrs: attrs });\n        each(CLONE_CFGS, function (cfgName) {\n            clone.set(cfgName, _this.get(cfgName));\n        });\n        return clone;\n    };\n    Element.prototype.destroy = function () {\n        var destroyed = this.destroyed;\n        if (destroyed) {\n            return;\n        }\n        this.attrs = {};\n        _super.prototype.destroy.call(this);\n        // this.onCanvasChange('destroy');\n    };\n    /**\n     * 是否处于动画暂停状态\n     * @return {boolean} 是否处于动画暂停状态\n     */\n    Element.prototype.isAnimatePaused = function () {\n        return this.get('_pause').isPaused;\n    };\n    /**\n     * 执行动画，支持多种函数签名\n     * 1. animate(toAttrs: ElementAttrs, duration: number, easing?: string, callback?: () => void, delay?: number)\n     * 2. animate(onFrame: OnFrame, duration: number, easing?: string, callback?: () => void, delay?: number)\n     * 3. animate(toAttrs: ElementAttrs, cfg: AnimateCfg)\n     * 4. animate(onFrame: OnFrame, cfg: AnimateCfg)\n     * 各个参数的含义为:\n     *   toAttrs  动画最终状态\n     *   onFrame  自定义帧动画函数\n     *   duration 动画执行时间\n     *   easing   动画缓动效果\n     *   callback 动画执行后的回调\n     *   delay    动画延迟时间\n     */\n    Element.prototype.animate = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        this.set('animating', true);\n        var timeline = this.get('timeline');\n        if (!timeline) {\n            timeline = this.get('canvas').get('timeline');\n            this.set('timeline', timeline);\n        }\n        var animations = this.get('animations') || [];\n        // 初始化 tick\n        if (!timeline.timer) {\n            timeline.initTimer();\n        }\n        var toAttrs = args[0], duration = args[1], _a = args[2], easing = _a === void 0 ? 'easeLinear' : _a, _b = args[3], callback = _b === void 0 ? noop : _b, _c = args[4], delay = _c === void 0 ? 0 : _c;\n        var onFrame;\n        var repeat;\n        var pauseCallback;\n        var resumeCallback;\n        var animateCfg;\n        // 第二个参数，既可以是动画最终状态 toAttrs，也可以是自定义帧动画函数 onFrame\n        if (isFunction(toAttrs)) {\n            onFrame = toAttrs;\n            toAttrs = {};\n        }\n        else if (isObject(toAttrs) && toAttrs.onFrame) {\n            // 兼容 3.0 中的写法，onFrame 和 repeat 可在 toAttrs 中设置\n            onFrame = toAttrs.onFrame;\n            repeat = toAttrs.repeat;\n        }\n        // 第二个参数，既可以是执行时间 duration，也可以是动画参数 animateCfg\n        if (isObject(duration)) {\n            animateCfg = duration;\n            duration = animateCfg.duration;\n            easing = animateCfg.easing || 'easeLinear';\n            delay = animateCfg.delay || 0;\n            // animateCfg 中的设置优先级更高\n            repeat = animateCfg.repeat || repeat || false;\n            callback = animateCfg.callback || noop;\n            pauseCallback = animateCfg.pauseCallback || noop;\n            resumeCallback = animateCfg.resumeCallback || noop;\n        }\n        else {\n            // 第四个参数，既可以是回调函数 callback，也可以是延迟时间 delay\n            if (isNumber(callback)) {\n                delay = callback;\n                callback = null;\n            }\n            // 第三个参数，既可以是缓动参数 easing，也可以是回调函数 callback\n            if (isFunction(easing)) {\n                callback = easing;\n                easing = 'easeLinear';\n            }\n            else {\n                easing = easing || 'easeLinear';\n            }\n        }\n        var formatToAttrs = getFormatToAttrs(toAttrs, this);\n        var animation = {\n            fromAttrs: getFormatFromAttrs(formatToAttrs, this),\n            toAttrs: formatToAttrs,\n            duration: duration,\n            easing: easing,\n            repeat: repeat,\n            callback: callback,\n            pauseCallback: pauseCallback,\n            resumeCallback: resumeCallback,\n            delay: delay,\n            startTime: timeline.getTime(),\n            id: uniqueId(),\n            onFrame: onFrame,\n            pathFormatted: false,\n        };\n        // 如果动画元素队列中已经有这个图形了\n        if (animations.length > 0) {\n            // 先检查是否需要合并属性。若有相同的动画，将该属性从前一个动画中删除,直接用后一个动画中\n            animations = checkExistedAttrs(animations, animation);\n        }\n        else {\n            // 否则将图形添加到动画元素队列\n            timeline.addAnimator(this);\n        }\n        animations.push(animation);\n        this.set('animations', animations);\n        this.set('_pause', { isPaused: false });\n    };\n    /**\n     * 停止动画\n     * @param {boolean} toEnd 是否到动画的最终状态\n     */\n    Element.prototype.stopAnimate = function (toEnd) {\n        var _this = this;\n        if (toEnd === void 0) { toEnd = true; }\n        var animations = this.get('animations');\n        each(animations, function (animation) {\n            // 将动画执行到最后一帧\n            if (toEnd) {\n                if (animation.onFrame) {\n                    _this.attr(animation.onFrame(1));\n                }\n                else {\n                    _this.attr(animation.toAttrs);\n                }\n            }\n            if (animation.callback) {\n                // 动画停止时的回调\n                animation.callback();\n            }\n        });\n        this.set('animating', false);\n        this.set('animations', []);\n    };\n    /**\n     * 暂停动画\n     */\n    Element.prototype.pauseAnimate = function () {\n        var timeline = this.get('timeline');\n        var animations = this.get('animations');\n        var pauseTime = timeline.getTime();\n        each(animations, function (animation) {\n            animation._paused = true;\n            animation._pauseTime = pauseTime;\n            if (animation.pauseCallback) {\n                // 动画暂停时的回调\n                animation.pauseCallback();\n            }\n        });\n        // 记录下是在什么时候暂停的\n        this.set('_pause', {\n            isPaused: true,\n            pauseTime: pauseTime,\n        });\n        return this;\n    };\n    /**\n     * 恢复动画\n     */\n    Element.prototype.resumeAnimate = function () {\n        var timeline = this.get('timeline');\n        var current = timeline.getTime();\n        var animations = this.get('animations');\n        var pauseTime = this.get('_pause').pauseTime;\n        // 之后更新属性需要计算动画已经执行的时长，如果暂停了，就把初始时间调后\n        each(animations, function (animation) {\n            animation.startTime = animation.startTime + (current - pauseTime);\n            animation._paused = false;\n            animation._pauseTime = null;\n            if (animation.resumeCallback) {\n                animation.resumeCallback();\n            }\n        });\n        this.set('_pause', {\n            isPaused: false,\n        });\n        this.set('animations', animations);\n        return this;\n    };\n    /**\n     * 触发委托事件\n     * @param  {string}     type 事件类型\n     * @param  {GraphEvent} eventObj 事件对象\n     */\n    Element.prototype.emitDelegation = function (type, eventObj) {\n        var _this = this;\n        var paths = eventObj.propagationPath;\n        var events = this.getEvents();\n        var relativeShape;\n        if (type === 'mouseenter') {\n            relativeShape = eventObj.fromShape;\n        }\n        else if (type === 'mouseleave') {\n            relativeShape = eventObj.toShape;\n        }\n        var _loop_1 = function (i) {\n            var element = paths[i];\n            // 暂定跟 name 绑定\n            var name_1 = element.get('name');\n            if (name_1) {\n                // 第一个 mouseenter 和 mouseleave 的停止即可，因为后面的都是前面的 Parent\n                if (\n                // 只有 element 是 Group 或者 Canvas 的时候，才需要判断 isParent\n                (element.isGroup() || (element.isCanvas && element.isCanvas())) &&\n                    relativeShape &&\n                    isParent(element, relativeShape)) {\n                    return \"break\";\n                }\n                if (isArray(name_1)) {\n                    each(name_1, function (subName) {\n                        _this.emitDelegateEvent(element, subName, eventObj);\n                    });\n                }\n                else {\n                    this_1.emitDelegateEvent(element, name_1, eventObj);\n                }\n            }\n        };\n        var this_1 = this;\n        // 至少有一个对象，且第一个对象为 shape\n        for (var i = 0; i < paths.length; i++) {\n            var state_1 = _loop_1(i);\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    Element.prototype.emitDelegateEvent = function (element, name, eventObj) {\n        var events = this.getEvents();\n        // 事件委托的形式 name:type\n        var eventName = name + DELEGATION_SPLIT + eventObj.type;\n        if (events[eventName] || events[WILDCARD]) {\n            // 对于通配符 *，事件名称 = 委托事件名称\n            eventObj.name = eventName;\n            eventObj.currentTarget = element;\n            eventObj.delegateTarget = this;\n            // 将委托事件的监听对象 delegateObject 挂载到事件对象上\n            eventObj.delegateObject = element.get('delegateObject');\n            this.emit(eventName, eventObj);\n        }\n    };\n    /**\n     * 移动元素\n     * @param {number} translateX 水平移动距离\n     * @param {number} translateY 垂直移动距离\n     * @return {IElement} 元素\n     */\n    Element.prototype.translate = function (translateX, translateY) {\n        if (translateX === void 0) { translateX = 0; }\n        if (translateY === void 0) { translateY = 0; }\n        var matrix = this.getMatrix();\n        var newMatrix = transform(matrix, [['t', translateX, translateY]]);\n        this.setMatrix(newMatrix);\n        return this;\n    };\n    /**\n     * 移动元素到目标位置\n     * @param {number} targetX 目标位置的水平坐标\n     * @param {number} targetX 目标位置的垂直坐标\n     * @return {IElement} 元素\n     */\n    Element.prototype.move = function (targetX, targetY) {\n        var x = this.attr('x') || 0;\n        var y = this.attr('y') || 0;\n        this.translate(targetX - x, targetY - y);\n        return this;\n    };\n    /**\n     * 移动元素到目标位置，等价于 move 方法。由于 moveTo 的语义性更强，因此在文档中推荐使用 moveTo 方法\n     * @param {number} targetX 目标位置的 x 轴坐标\n     * @param {number} targetY 目标位置的 y 轴坐标\n     * @return {IElement} 元素\n     */\n    Element.prototype.moveTo = function (targetX, targetY) {\n        return this.move(targetX, targetY);\n    };\n    /**\n     * 缩放元素\n     * @param {number} ratioX 水平缩放比例\n     * @param {number} ratioY 垂直缩放比例\n     * @return {IElement} 元素\n     */\n    Element.prototype.scale = function (ratioX, ratioY) {\n        var matrix = this.getMatrix();\n        var newMatrix = transform(matrix, [['s', ratioX, ratioY || ratioX]]);\n        this.setMatrix(newMatrix);\n        return this;\n    };\n    /**\n     * 以画布左上角 (0, 0) 为中心旋转元素\n     * @param {number} radian 旋转角度(弧度值)\n     * @return {IElement} 元素\n     */\n    Element.prototype.rotate = function (radian) {\n        var matrix = this.getMatrix();\n        var newMatrix = transform(matrix, [['r', radian]]);\n        this.setMatrix(newMatrix);\n        return this;\n    };\n    /**\n     * 以起始点为中心旋转元素\n     * @param {number} radian 旋转角度(弧度值)\n     * @return {IElement} 元素\n     */\n    Element.prototype.rotateAtStart = function (rotate) {\n        var _a = this.attr(), x = _a.x, y = _a.y;\n        var matrix = this.getMatrix();\n        var newMatrix = transform(matrix, [\n            ['t', -x, -y],\n            ['r', rotate],\n            ['t', x, y],\n        ]);\n        this.setMatrix(newMatrix);\n        return this;\n    };\n    /**\n     * 以任意点 (x, y) 为中心旋转元素\n     * @param {number} radian 旋转角度(弧度值)\n     * @return {IElement} 元素\n     */\n    Element.prototype.rotateAtPoint = function (x, y, rotate) {\n        var matrix = this.getMatrix();\n        var newMatrix = transform(matrix, [\n            ['t', -x, -y],\n            ['r', rotate],\n            ['t', x, y],\n        ]);\n        this.setMatrix(newMatrix);\n        return this;\n    };\n    return Element;\n}(Base));\nexport default Element;\n//# sourceMappingURL=element.js.map","import { isString, each, isArray } from './util';\nvar regexTags = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi;\nvar regexDot = /[^\\s\\,]+/gi;\nvar regexLG = /^l\\s*\\(\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexRG = /^r\\s*\\(\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nvar regexColorStop = /[\\d.]+:(#[^\\s]+|[^\\)]+\\))/gi;\nfunction addStop(steps, gradient) {\n    var arr = steps.match(regexColorStop);\n    each(arr, function (item) {\n        var itemArr = item.split(':');\n        gradient.addColorStop(itemArr[0], itemArr[1]);\n    });\n}\n/**\n * 将边和填充设置的颜色转换成线性渐变对象\n * @param {CanvasRenderingContext2D} context canvas 上下文\n * @param {IElement}                 element  图形元素\n * @param {string}                   gradientStr   颜色\n * @returns {any} 渐变对象\n */\nexport function parseLineGradient(context, element, gradientStr) {\n    var arr = regexLG.exec(gradientStr);\n    var angle = (parseFloat(arr[1]) % 360) * (Math.PI / 180);\n    var steps = arr[2];\n    var box = element.getBBox();\n    var start;\n    var end;\n    if (angle >= 0 && angle < (1 / 2) * Math.PI) {\n        start = {\n            x: box.minX,\n            y: box.minY,\n        };\n        end = {\n            x: box.maxX,\n            y: box.maxY,\n        };\n    }\n    else if ((1 / 2) * Math.PI <= angle && angle < Math.PI) {\n        start = {\n            x: box.maxX,\n            y: box.minY,\n        };\n        end = {\n            x: box.minX,\n            y: box.maxY,\n        };\n    }\n    else if (Math.PI <= angle && angle < (3 / 2) * Math.PI) {\n        start = {\n            x: box.maxX,\n            y: box.maxY,\n        };\n        end = {\n            x: box.minX,\n            y: box.minY,\n        };\n    }\n    else {\n        start = {\n            x: box.minX,\n            y: box.maxY,\n        };\n        end = {\n            x: box.maxX,\n            y: box.minY,\n        };\n    }\n    var tanTheta = Math.tan(angle);\n    var tanTheta2 = tanTheta * tanTheta;\n    var x = (end.x - start.x + tanTheta * (end.y - start.y)) / (tanTheta2 + 1) + start.x;\n    var y = (tanTheta * (end.x - start.x + tanTheta * (end.y - start.y))) / (tanTheta2 + 1) + start.y;\n    var gradient = context.createLinearGradient(start.x, start.y, x, y);\n    addStop(steps, gradient);\n    return gradient;\n}\n/**\n * 将边和填充设置的颜色转换成圆形渐变对象\n * @param {CanvasRenderingContext2D} context canvas 上下文\n * @param {IElement}                 element  图形元素\n * @param {string}                   gradientStr   颜色\n * @returns {any} 渐变对象\n */\nexport function parseRadialGradient(context, element, gradientStr) {\n    var arr = regexRG.exec(gradientStr);\n    var fx = parseFloat(arr[1]);\n    var fy = parseFloat(arr[2]);\n    var fr = parseFloat(arr[3]);\n    var steps = arr[4];\n    // 环半径为0时，默认无渐变，取渐变序列的最后一个颜色\n    if (fr === 0) {\n        var colors = steps.match(regexColorStop);\n        return colors[colors.length - 1].split(':')[1];\n    }\n    var box = element.getBBox();\n    var width = box.maxX - box.minX;\n    var height = box.maxY - box.minY;\n    var r = Math.sqrt(width * width + height * height) / 2;\n    var gradient = context.createRadialGradient(box.minX + width * fx, box.minY + height * fy, 0, box.minX + width / 2, box.minY + height / 2, fr * r);\n    addStop(steps, gradient);\n    return gradient;\n}\n/**\n * 边和填充设置的颜色转换成 pattern\n * @param {CanvasRenderingContext2D} context canvas 上下文\n * @param {IElement}                 element  图形元素\n * @param {string}                   patternStr   生成 pattern 的字符串\n */\nexport function parsePattern(context, element, patternStr) {\n    // 在转换过程中进行了缓存\n    if (element.get('patternSource') && element.get('patternSource') === patternStr) {\n        return element.get('pattern');\n    }\n    var pattern;\n    var img;\n    var arr = regexPR.exec(patternStr);\n    var repeat = arr[1];\n    var source = arr[2];\n    // Function to be called when pattern loads\n    function onload() {\n        // Create pattern\n        pattern = context.createPattern(img, repeat);\n        element.set('pattern', pattern); // be a cache\n        element.set('patternSource', patternStr);\n    }\n    switch (repeat) {\n        case 'a':\n            repeat = 'repeat';\n            break;\n        case 'x':\n            repeat = 'repeat-x';\n            break;\n        case 'y':\n            repeat = 'repeat-y';\n            break;\n        case 'n':\n            repeat = 'no-repeat';\n            break;\n        default:\n            repeat = 'no-repeat';\n    }\n    img = new Image();\n    // If source URL is not a data URL\n    if (!source.match(/^data:/i)) {\n        // Set crossOrigin for this image\n        img.crossOrigin = 'Anonymous';\n    }\n    img.src = source;\n    if (img.complete) {\n        onload();\n    }\n    else {\n        img.onload = onload;\n        // Fix onload() bug in IE9\n        img.src = img.src;\n    }\n    return pattern;\n}\nexport function parseStyle(context, element, color) {\n    if (isString(color)) {\n        if (color[1] === '(' || color[2] === '(') {\n            if (color[0] === 'l') {\n                // regexLG.test(color)\n                return parseLineGradient(context, element, color);\n            }\n            if (color[0] === 'r') {\n                // regexRG.test(color)\n                return parseRadialGradient(context, element, color);\n            }\n            if (color[0] === 'p') {\n                // regexPR.test(color)\n                return parsePattern(context, element, color);\n            }\n        }\n        return color;\n    }\n}\nexport function parseRadius(radius) {\n    var r1 = 0;\n    var r2 = 0;\n    var r3 = 0;\n    var r4 = 0;\n    if (isArray(radius)) {\n        if (radius.length === 1) {\n            r1 = r2 = r3 = r4 = radius[0];\n        }\n        else if (radius.length === 2) {\n            r1 = r3 = radius[0];\n            r2 = r4 = radius[1];\n        }\n        else if (radius.length === 3) {\n            r1 = radius[0];\n            r2 = r4 = radius[1];\n            r3 = radius[2];\n        }\n        else {\n            r1 = radius[0];\n            r2 = radius[1];\n            r3 = radius[2];\n            r4 = radius[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = radius;\n    }\n    return [r1, r2, r3, r4];\n}\n//# sourceMappingURL=parse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBBoxMethod = void 0;\nvar register_1 = require(\"./register\");\nObject.defineProperty(exports, \"getBBoxMethod\", { enumerable: true, get: function () { return register_1.getMethod; } });\nvar rect_1 = require(\"./rect\");\nvar circle_1 = require(\"./circle\");\nvar polyline_1 = require(\"./polyline\");\nvar polygon_1 = require(\"./polygon\");\nvar text_1 = require(\"./text\");\nvar path_1 = require(\"./path\");\nvar line_1 = require(\"./line\");\nvar ellipse_1 = require(\"./ellipse\");\nregister_1.register('rect', rect_1.default);\nregister_1.register('image', rect_1.default); // image 使用 rect 的包围盒计算\nregister_1.register('circle', circle_1.default);\nregister_1.register('marker', circle_1.default); // marker 使用 circle 的计算方案\nregister_1.register('polyline', polyline_1.default);\nregister_1.register('polygon', polygon_1.default);\nregister_1.register('text', text_1.default);\nregister_1.register('path', path_1.default);\nregister_1.register('line', line_1.default);\nregister_1.register('ellipse', ellipse_1.default);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assembleFont = exports.getTextWidth = exports.getLineSpaceing = exports.getTextHeight = void 0;\nvar util_1 = require(\"./util\");\nvar offscreen_1 = require(\"./offscreen\");\n/**\n * 获取文本的高度\n * @param text 文本\n * @param fontSize 字体大小\n * @param lineHeight 行高，可以为空\n */\nfunction getTextHeight(text, fontSize, lineHeight) {\n    var lineCount = 1;\n    if (util_1.isString(text)) {\n        lineCount = text.split('\\n').length;\n    }\n    if (lineCount > 1) {\n        var spaceingY = getLineSpaceing(fontSize, lineHeight);\n        return fontSize * lineCount + spaceingY * (lineCount - 1);\n    }\n    return fontSize;\n}\nexports.getTextHeight = getTextHeight;\n/**\n * 获取行间距如果文本多行，需要获取文本间距\n * @param fontSize 字体大小\n * @param lineHeight 行高\n */\nfunction getLineSpaceing(fontSize, lineHeight) {\n    return lineHeight ? lineHeight - fontSize : fontSize * 0.14;\n}\nexports.getLineSpaceing = getLineSpaceing;\n/**\n * 字体宽度\n * @param text 文本\n * @param font 字体\n */\nfunction getTextWidth(text, font) {\n    var context = offscreen_1.getOffScreenContext(); // 获取离屏的 ctx 进行计算\n    var width = 0;\n    // null 或者 undefined 时，宽度为 0\n    if (util_1.isNil(text) || text === '') {\n        return width;\n    }\n    context.save();\n    context.font = font;\n    if (util_1.isString(text) && text.includes('\\n')) {\n        var textArr = text.split('\\n');\n        util_1.each(textArr, function (subText) {\n            var measureWidth = context.measureText(subText).width;\n            if (width < measureWidth) {\n                width = measureWidth;\n            }\n        });\n    }\n    else {\n        width = context.measureText(text).width;\n    }\n    context.restore();\n    return width;\n}\nexports.getTextWidth = getTextWidth;\nfunction assembleFont(attrs) {\n    var fontSize = attrs.fontSize, fontFamily = attrs.fontFamily, fontWeight = attrs.fontWeight, fontStyle = attrs.fontStyle, fontVariant = attrs.fontVariant;\n    return [fontStyle, fontVariant, fontWeight, fontSize + \"px\", fontFamily].join(' ').trim();\n}\nexports.assembleFont = assembleFont;\n//# sourceMappingURL=text.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mergeArrowBBox = exports.mergeBBox = void 0;\n// 合并包围盒\nfunction mergeBBox(bbox1, bbox2) {\n    if (!bbox1 || !bbox2) {\n        return bbox1 || bbox2;\n    }\n    return {\n        minX: Math.min(bbox1.minX, bbox2.minX),\n        minY: Math.min(bbox1.minY, bbox2.minY),\n        maxX: Math.max(bbox1.maxX, bbox2.maxX),\n        maxY: Math.max(bbox1.maxY, bbox2.maxY),\n    };\n}\nexports.mergeBBox = mergeBBox;\n// 合并箭头的包围盒\nfunction mergeArrowBBox(shape, bbox) {\n    var startArrowShape = shape.get('startArrowShape');\n    var endArrowShape = shape.get('endArrowShape');\n    var startArrowBBox = null;\n    var endArrowBBox = null;\n    if (startArrowShape) {\n        startArrowBBox = startArrowShape.getCanvasBBox();\n        bbox = mergeBBox(bbox, startArrowBBox);\n    }\n    if (endArrowShape) {\n        endArrowBBox = endArrowShape.getCanvasBBox();\n        bbox = mergeBBox(bbox, endArrowBBox);\n    }\n    return bbox;\n}\nexports.mergeArrowBBox = mergeArrowBBox;\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GraphEvent = /** @class */ (function () {\n    function GraphEvent(type, event) {\n        /**\n         * 是否允许冒泡\n         * @type {boolean}\n         */\n        this.bubbles = true;\n        /**\n         * 触发对象\n         * @type {object}\n         */\n        this.target = null;\n        /**\n         * 监听对象\n         * @type {object}\n         */\n        this.currentTarget = null;\n        /**\n         * 委托对象\n         * @type {object}\n         */\n        this.delegateTarget = null;\n        /**\n         * 委托事件监听对象的代理对象，即 ev.delegateObject = ev.currentTarget.get('delegateObject')\n         * @type {object}\n         */\n        this.delegateObject = null;\n        /**\n         * 是否阻止了原生事件\n         * @type {boolean}\n         */\n        this.defaultPrevented = false;\n        /**\n         * 是否阻止传播（向上冒泡）\n         * @type {boolean}\n         */\n        this.propagationStopped = false;\n        /**\n         * 触发事件的图形\n         * @type {IShape}\n         */\n        this.shape = null;\n        /**\n         * 开始触发事件的图形\n         * @type {IShape}\n         */\n        this.fromShape = null;\n        /**\n         * 事件结束时的触发图形\n         * @type {IShape}\n         */\n        this.toShape = null;\n        // 触发事件的路径\n        this.propagationPath = [];\n        this.type = type;\n        this.name = type;\n        this.originalEvent = event;\n        this.timeStamp = event.timeStamp;\n    }\n    /**\n     * 阻止浏览器默认的行为\n     */\n    GraphEvent.prototype.preventDefault = function () {\n        this.defaultPrevented = true;\n        if (this.originalEvent.preventDefault) {\n            this.originalEvent.preventDefault();\n        }\n    };\n    /**\n     * 阻止冒泡\n     */\n    GraphEvent.prototype.stopPropagation = function () {\n        this.propagationStopped = true;\n    };\n    GraphEvent.prototype.toString = function () {\n        var type = this.type;\n        return \"[Event (type=\" + type + \")]\";\n    };\n    GraphEvent.prototype.save = function () { };\n    GraphEvent.prototype.restore = function () { };\n    return GraphEvent;\n}());\nexports.default = GraphEvent;\n//# sourceMappingURL=graph-event.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isAllowCapture = exports.isParent = exports.isBrowser = exports.removeFromArray = void 0;\nfunction removeFromArray(arr, obj) {\n    var index = arr.indexOf(obj);\n    if (index !== -1) {\n        arr.splice(index, 1);\n    }\n}\nexports.removeFromArray = removeFromArray;\nexports.isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nvar is_nil_1 = require(\"@antv/util/lib/is-nil\");\nObject.defineProperty(exports, \"isNil\", { enumerable: true, get: function () { return is_nil_1.default; } });\nvar is_function_1 = require(\"@antv/util/lib/is-function\");\nObject.defineProperty(exports, \"isFunction\", { enumerable: true, get: function () { return is_function_1.default; } });\nvar is_string_1 = require(\"@antv/util/lib/is-string\");\nObject.defineProperty(exports, \"isString\", { enumerable: true, get: function () { return is_string_1.default; } });\nvar is_object_1 = require(\"@antv/util/lib/is-object\");\nObject.defineProperty(exports, \"isObject\", { enumerable: true, get: function () { return is_object_1.default; } });\nvar is_array_1 = require(\"@antv/util/lib/is-array\");\nObject.defineProperty(exports, \"isArray\", { enumerable: true, get: function () { return is_array_1.default; } });\nvar mix_1 = require(\"@antv/util/lib/mix\");\nObject.defineProperty(exports, \"mix\", { enumerable: true, get: function () { return mix_1.default; } });\nvar each_1 = require(\"@antv/util/lib/each\");\nObject.defineProperty(exports, \"each\", { enumerable: true, get: function () { return each_1.default; } });\nvar upper_first_1 = require(\"@antv/util/lib/upper-first\");\nObject.defineProperty(exports, \"upperFirst\", { enumerable: true, get: function () { return upper_first_1.default; } });\n// 是否元素的父容器\nfunction isParent(container, shape) {\n    // 所有 shape 都是 canvas 的子元素\n    if (container.isCanvas()) {\n        return true;\n    }\n    var parent = shape.getParent();\n    var isParent = false;\n    while (parent) {\n        if (parent === container) {\n            isParent = true;\n            break;\n        }\n        parent = parent.getParent();\n    }\n    return isParent;\n}\nexports.isParent = isParent;\nfunction isAllowCapture(element) {\n    // @ts-ignore\n    return element.cfg.visible && element.cfg.capture;\n}\nexports.isAllowCapture = isAllowCapture;\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getOffScreenContext = void 0;\n// 全局设置一个唯一离屏的 ctx，用于计算 isPointInPath\nvar offScreenCtx = null;\nfunction getOffScreenContext() {\n    if (!offScreenCtx) {\n        var canvas = document.createElement('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        offScreenCtx = canvas.getContext('2d');\n    }\n    return offScreenCtx;\n}\nexports.getOffScreenContext = getOffScreenContext;\n//# sourceMappingURL=offscreen.js.map","\"use strict\";\n/**\n * @fileoverview 矩阵运算，本来是要引入 gl-matrix, 但是考虑到 g-mobile 对大小有限制，同时 g-webgl 使用的 matrix 不一致\n * 所以，这里仅实现 2D 几个运算，上层自己引入 gl-matrix\n * @author dxq613@gmail.com\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.invert = exports.multiplyVec2 = exports.multiplyMatrix = void 0;\n/**\n * 3阶矩阵相乘\n * @param {number[]} a 矩阵1\n * @param {number[]} b 矩阵2\n */\nfunction multiplyMatrix(a, b) {\n    var out = [];\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a10 = a[3];\n    var a11 = a[4];\n    var a12 = a[5];\n    var a20 = a[6];\n    var a21 = a[7];\n    var a22 = a[8];\n    var b00 = b[0];\n    var b01 = b[1];\n    var b02 = b[2];\n    var b10 = b[3];\n    var b11 = b[4];\n    var b12 = b[5];\n    var b20 = b[6];\n    var b21 = b[7];\n    var b22 = b[8];\n    out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n    out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n    out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n    out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n    out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n    out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n    out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n    out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n    out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n    return out;\n}\nexports.multiplyMatrix = multiplyMatrix;\n/**\n * 3阶矩阵同2阶向量相乘\n * @param {number[]} m 矩阵\n * @param {number[]} v 二阶向量\n */\nfunction multiplyVec2(m, v) {\n    var out = [];\n    var x = v[0];\n    var y = v[1];\n    out[0] = m[0] * x + m[3] * y + m[6];\n    out[1] = m[1] * x + m[4] * y + m[7];\n    return out;\n}\nexports.multiplyVec2 = multiplyVec2;\n/**\n * 矩阵的逆\n * @param {number[]} a 矩阵\n */\nfunction invert(a) {\n    var out = [];\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a10 = a[3];\n    var a11 = a[4];\n    var a12 = a[5];\n    var a20 = a[6];\n    var a21 = a[7];\n    var a22 = a[8];\n    var b01 = a22 * a11 - a12 * a21;\n    var b11 = -a22 * a10 + a12 * a20;\n    var b21 = a21 * a10 - a11 * a20;\n    // Calculate the determinant\n    var det = a00 * b01 + a01 * b11 + a02 * b21;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n    out[0] = b01 * det;\n    out[1] = (-a22 * a01 + a02 * a21) * det;\n    out[2] = (a12 * a01 - a02 * a11) * det;\n    out[3] = b11 * det;\n    out[4] = (a22 * a00 - a02 * a20) * det;\n    out[5] = (-a12 * a00 + a02 * a10) * det;\n    out[6] = b21 * det;\n    out[7] = (-a21 * a00 + a01 * a20) * det;\n    out[8] = (a11 * a00 - a01 * a10) * det;\n    return out;\n}\nexports.invert = invert;\n//# sourceMappingURL=matrix.js.map","import { __extends } from \"tslib\";\nimport Container from './container';\nvar AbstractGroup = /** @class */ (function (_super) {\n    __extends(AbstractGroup, _super);\n    function AbstractGroup() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AbstractGroup.prototype.isGroup = function () {\n        return true;\n    };\n    AbstractGroup.prototype.isEntityGroup = function () {\n        return false;\n    };\n    AbstractGroup.prototype.clone = function () {\n        var clone = _super.prototype.clone.call(this);\n        // 获取构造函数\n        var children = this.getChildren();\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            clone.add(child.clone());\n        }\n        return clone;\n    };\n    return AbstractGroup;\n}(Container));\nexport default AbstractGroup;\n//# sourceMappingURL=group.js.map","import { __extends } from \"tslib\";\nimport Element from './element';\nimport { multiplyVec2 } from '../util/matrix';\nvar AbstractShape = /** @class */ (function (_super) {\n    __extends(AbstractShape, _super);\n    function AbstractShape(cfg) {\n        return _super.call(this, cfg) || this;\n    }\n    // 是否在包围盒内\n    AbstractShape.prototype._isInBBox = function (refX, refY) {\n        var bbox = this.getBBox();\n        return bbox.minX <= refX && bbox.maxX >= refX && bbox.minY <= refY && bbox.maxY >= refY;\n    };\n    /**\n     * 属性更改后需要做的事情\n     * @protected\n     * @param {ShapeAttrs} targetAttrs 渲染的图像属性\n     */\n    AbstractShape.prototype.afterAttrsChange = function (targetAttrs) {\n        _super.prototype.afterAttrsChange.call(this, targetAttrs);\n        this.clearCacheBBox();\n    };\n    // 计算包围盒时，需要缓存，这是一个高频的操作\n    AbstractShape.prototype.getBBox = function () {\n        var bbox = this.cfg.bbox;\n        if (!bbox) {\n            bbox = this.calculateBBox();\n            this.set('bbox', bbox);\n        }\n        return bbox;\n    };\n    // 计算相对于画布的包围盒\n    AbstractShape.prototype.getCanvasBBox = function () {\n        var canvasBBox = this.cfg.canvasBBox;\n        if (!canvasBBox) {\n            canvasBBox = this.calculateCanvasBBox();\n            this.set('canvasBBox', canvasBBox);\n        }\n        return canvasBBox;\n    };\n    AbstractShape.prototype.applyMatrix = function (matrix) {\n        _super.prototype.applyMatrix.call(this, matrix);\n        // 清理掉缓存的包围盒\n        this.set('canvasBBox', null);\n    };\n    /**\n     * 计算相对于画布的包围盒，默认等同于 bbox\n     * @return {BBox} 包围盒\n     */\n    AbstractShape.prototype.calculateCanvasBBox = function () {\n        var bbox = this.getBBox();\n        var totalMatrix = this.getTotalMatrix();\n        var minX = bbox.minX, minY = bbox.minY, maxX = bbox.maxX, maxY = bbox.maxY;\n        if (totalMatrix) {\n            var topLeft = multiplyVec2(totalMatrix, [bbox.minX, bbox.minY]);\n            var topRight = multiplyVec2(totalMatrix, [bbox.maxX, bbox.minY]);\n            var bottomLeft = multiplyVec2(totalMatrix, [bbox.minX, bbox.maxY]);\n            var bottomRight = multiplyVec2(totalMatrix, [bbox.maxX, bbox.maxY]);\n            minX = Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);\n            maxX = Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);\n            minY = Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]);\n            maxY = Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]);\n        }\n        var attrs = this.attrs;\n        // 如果存在 shadow 则计算 shadow\n        if (attrs.shadowColor) {\n            var _a = attrs.shadowBlur, shadowBlur = _a === void 0 ? 0 : _a, _b = attrs.shadowOffsetX, shadowOffsetX = _b === void 0 ? 0 : _b, _c = attrs.shadowOffsetY, shadowOffsetY = _c === void 0 ? 0 : _c;\n            var shadowLeft = minX - shadowBlur + shadowOffsetX;\n            var shadowRight = maxX + shadowBlur + shadowOffsetX;\n            var shadowTop = minY - shadowBlur + shadowOffsetY;\n            var shadowBottom = maxY + shadowBlur + shadowOffsetY;\n            minX = Math.min(minX, shadowLeft);\n            maxX = Math.max(maxX, shadowRight);\n            minY = Math.min(minY, shadowTop);\n            maxY = Math.max(maxY, shadowBottom);\n        }\n        return {\n            x: minX,\n            y: minY,\n            minX: minX,\n            minY: minY,\n            maxX: maxX,\n            maxY: maxY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    };\n    /**\n     * @protected\n     * 清理缓存的 bbox\n     */\n    AbstractShape.prototype.clearCacheBBox = function () {\n        this.set('bbox', null);\n        this.set('canvasBBox', null);\n    };\n    // 实现接口\n    AbstractShape.prototype.isClipShape = function () {\n        return this.get('isClipShape');\n    };\n    /**\n     * @protected\n     * 不同的图形自己实现是否在图形内部的逻辑，要判断边和填充区域\n     * @param  {number}  refX 相对于图形的坐标 x\n     * @param  {number}  refY 相对于图形的坐标 Y\n     * @return {boolean} 点是否在图形内部\n     */\n    AbstractShape.prototype.isInShape = function (refX, refY) {\n        return false;\n    };\n    /**\n     * 是否仅仅使用 BBox 检测就可以判定拾取到图形\n     * 默认是 false，但是有些图形例如 image、marker 等都可直接使用 BBox 的检测而不需要使用图形拾取\n     * @return {Boolean} 仅仅使用 BBox 进行拾取\n     */\n    AbstractShape.prototype.isOnlyHitBox = function () {\n        return false;\n    };\n    // 不同的 Shape 各自实现\n    AbstractShape.prototype.isHit = function (x, y) {\n        var startArrowShape = this.get('startArrowShape');\n        var endArrowShape = this.get('endArrowShape');\n        var vec = [x, y, 1];\n        vec = this.invertFromMatrix(vec);\n        var refX = vec[0], refY = vec[1];\n        var inBBox = this._isInBBox(refX, refY);\n        // 跳过图形的拾取，在某些图形中可以省略一倍的检测成本\n        if (this.isOnlyHitBox()) {\n            return inBBox;\n        }\n        // 被裁减掉的和不在包围盒内的不进行计算\n        if (inBBox && !this.isClipped(refX, refY)) {\n            // 对图形进行拾取判断\n            if (this.isInShape(refX, refY)) {\n                return true;\n            }\n            // 对起始箭头进行拾取判断\n            if (startArrowShape && startArrowShape.isHit(refX, refY)) {\n                return true;\n            }\n            // 对结束箭头进行拾取判断\n            if (endArrowShape && endArrowShape.isHit(refX, refY)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    return AbstractShape;\n}(Element));\nexport default AbstractShape;\n//# sourceMappingURL=shape.js.map","// 导出 g-base 中的 types\nexport * from '@antv/g-base/lib/types';\n//# sourceMappingURL=types.js.map","// 导出 g-base 中的 interfaces\nexport * from '@antv/g-base/lib/interfaces';\n//# sourceMappingURL=interfaces.js.map","// 导出 g-base 中的 types\nexport * from '@antv/g-base/lib/types';\n//# sourceMappingURL=types.js.map","// 导出 g-base 中的 interfaces\nexport * from '@antv/g-base/lib/interfaces';\n//# sourceMappingURL=interfaces.js.map","/**\n * @fileoverview gradient\n * @author dengfuping_develop@163.com\n */\nimport { each, mod, toRadian, uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar regexLG = /^l\\s*\\(\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexRG = /^r\\s*\\(\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexColorStop = /[\\d.]+:(#[^\\s]+|[^\\)]+\\))/gi;\nfunction addStop(steps) {\n    var arr = steps.match(regexColorStop);\n    if (!arr) {\n        return '';\n    }\n    var stops = '';\n    arr.sort(function (a, b) {\n        a = a.split(':');\n        b = b.split(':');\n        return Number(a[0]) - Number(b[0]);\n    });\n    each(arr, function (item) {\n        item = item.split(':');\n        stops += \"<stop offset=\\\"\" + item[0] + \"\\\" stop-color=\\\"\" + item[1] + \"\\\"></stop>\";\n    });\n    return stops;\n}\nfunction parseLineGradient(color, el) {\n    var arr = regexLG.exec(color);\n    var angle = mod(toRadian(parseFloat(arr[1])), Math.PI * 2);\n    var steps = arr[2];\n    var start;\n    var end;\n    if (angle >= 0 && angle < 0.5 * Math.PI) {\n        start = {\n            x: 0,\n            y: 0,\n        };\n        end = {\n            x: 1,\n            y: 1,\n        };\n    }\n    else if (0.5 * Math.PI <= angle && angle < Math.PI) {\n        start = {\n            x: 1,\n            y: 0,\n        };\n        end = {\n            x: 0,\n            y: 1,\n        };\n    }\n    else if (Math.PI <= angle && angle < 1.5 * Math.PI) {\n        start = {\n            x: 1,\n            y: 1,\n        };\n        end = {\n            x: 0,\n            y: 0,\n        };\n    }\n    else {\n        start = {\n            x: 0,\n            y: 1,\n        };\n        end = {\n            x: 1,\n            y: 0,\n        };\n    }\n    var tanTheta = Math.tan(angle);\n    var tanTheta2 = tanTheta * tanTheta;\n    var x = (end.x - start.x + tanTheta * (end.y - start.y)) / (tanTheta2 + 1) + start.x;\n    var y = (tanTheta * (end.x - start.x + tanTheta * (end.y - start.y))) / (tanTheta2 + 1) + start.y;\n    el.setAttribute('x1', start.x);\n    el.setAttribute('y1', start.y);\n    el.setAttribute('x2', x);\n    el.setAttribute('y2', y);\n    el.innerHTML = addStop(steps);\n}\nfunction parseRadialGradient(color, self) {\n    var arr = regexRG.exec(color);\n    var cx = parseFloat(arr[1]);\n    var cy = parseFloat(arr[2]);\n    var r = parseFloat(arr[3]);\n    var steps = arr[4];\n    self.setAttribute('cx', cx);\n    self.setAttribute('cy', cy);\n    self.setAttribute('r', r);\n    self.innerHTML = addStop(steps);\n}\nvar Gradient = /** @class */ (function () {\n    function Gradient(cfg) {\n        this.cfg = {};\n        var el = null;\n        var id = uniqueId('gradient_');\n        if (cfg.toLowerCase()[0] === 'l') {\n            el = createSVGElement('linearGradient');\n            parseLineGradient(cfg, el);\n        }\n        else {\n            el = createSVGElement('radialGradient');\n            parseRadialGradient(cfg, el);\n        }\n        el.setAttribute('id', id);\n        this.el = el;\n        this.id = id;\n        this.cfg = cfg;\n        return this;\n    }\n    Gradient.prototype.match = function (type, attr) {\n        return this.cfg === attr;\n    };\n    return Gradient;\n}());\nexport default Gradient;\n//# sourceMappingURL=gradient.js.map","/**\n * @fileoverview shadow\n * @author dengfuping_develop@163.com\n */\nimport { each, uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar ATTR_MAP = {\n    shadowColor: 'color',\n    shadowOpacity: 'opacity',\n    shadowBlur: 'blur',\n    shadowOffsetX: 'dx',\n    shadowOffsetY: 'dy',\n};\nvar SHADOW_DIMENSION = {\n    x: '-40%',\n    y: '-40%',\n    width: '200%',\n    height: '200%',\n};\nvar Shadow = /** @class */ (function () {\n    function Shadow(cfg) {\n        this.type = 'filter';\n        this.cfg = {};\n        this.type = 'filter';\n        var el = createSVGElement('filter');\n        // expand the filter region to fill in shadows\n        each(SHADOW_DIMENSION, function (v, k) {\n            el.setAttribute(k, v);\n        });\n        this.el = el;\n        this.id = uniqueId('filter_');\n        this.el.id = this.id;\n        this.cfg = cfg;\n        this._parseShadow(cfg, el);\n        return this;\n    }\n    Shadow.prototype.match = function (type, cfg) {\n        if (this.type !== type) {\n            return false;\n        }\n        var flag = true;\n        var config = this.cfg;\n        each(Object.keys(config), function (attr) {\n            if (config[attr] !== cfg[attr]) {\n                flag = false;\n                return false;\n            }\n        });\n        return flag;\n    };\n    Shadow.prototype.update = function (name, value) {\n        var config = this.cfg;\n        config[ATTR_MAP[name]] = value;\n        this._parseShadow(config, this.el);\n        return this;\n    };\n    Shadow.prototype._parseShadow = function (config, el) {\n        var child = \"<feDropShadow\\n      dx=\\\"\" + (config.dx || 0) + \"\\\"\\n      dy=\\\"\" + (config.dy || 0) + \"\\\"\\n      stdDeviation=\\\"\" + (config.blur ? config.blur / 10 : 0) + \"\\\"\\n      flood-color=\\\"\" + (config.color ? config.color : '#000') + \"\\\"\\n      flood-opacity=\\\"\" + (config.opacity ? config.opacity : 1) + \"\\\"\\n      />\";\n        el.innerHTML = child;\n    };\n    return Shadow;\n}());\nexport default Shadow;\n//# sourceMappingURL=shadow.js.map","/**\n * @fileoverview arrow\n * @author dengfuping_develop@163.com\n */\nimport { isArray, uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar Arrow = /** @class */ (function () {\n    function Arrow(attrs, type) {\n        this.cfg = {};\n        var el = createSVGElement('marker');\n        var id = uniqueId('marker_');\n        el.setAttribute('id', id);\n        var shape = createSVGElement('path');\n        shape.setAttribute('stroke', attrs.stroke || 'none');\n        shape.setAttribute('fill', attrs.fill || 'none');\n        el.appendChild(shape);\n        el.setAttribute('overflow', 'visible');\n        el.setAttribute('orient', 'auto-start-reverse');\n        this.el = el;\n        this.child = shape;\n        this.id = id;\n        var cfg = attrs[type === 'marker-start' ? 'startArrow' : 'endArrow'];\n        this.stroke = attrs.stroke || '#000';\n        if (cfg === true) {\n            this._setDefaultPath(type, shape);\n        }\n        else {\n            this.cfg = cfg; // when arrow config exists\n            this._setMarker(attrs.lineWidth, shape);\n        }\n        return this;\n    }\n    Arrow.prototype.match = function () {\n        return false;\n    };\n    Arrow.prototype._setDefaultPath = function (type, el) {\n        var parent = this.el;\n        // 默认箭头的边长为 10，夹角为 60 度\n        el.setAttribute('d', \"M0,0 L\" + 10 * Math.cos(Math.PI / 6) + \",5 L0,10\");\n        parent.setAttribute('refX', \"\" + 10 * Math.cos(Math.PI / 6));\n        parent.setAttribute('refY', \"\" + 5);\n    };\n    Arrow.prototype._setMarker = function (r, el) {\n        var parent = this.el;\n        var path = this.cfg.path;\n        var d = this.cfg.d;\n        if (isArray(path)) {\n            path = path\n                .map(function (segment) {\n                return segment.join(' ');\n            })\n                .join('');\n        }\n        el.setAttribute('d', path);\n        parent.appendChild(el);\n        if (d) {\n            parent.setAttribute('refX', \"\" + d / r);\n        }\n    };\n    Arrow.prototype.update = function (fill) {\n        var child = this.child;\n        if (child.attr) {\n            child.attr('fill', fill);\n        }\n        else {\n            child.setAttribute('fill', fill);\n        }\n    };\n    return Arrow;\n}());\nexport default Arrow;\n//# sourceMappingURL=arrow.js.map","/**\n * @fileoverview clip\n * @author dengfuping_develop@163.com\n */\nimport { uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar Clip = /** @class */ (function () {\n    function Clip(cfg) {\n        this.type = 'clip';\n        this.cfg = {};\n        var el = createSVGElement('clipPath');\n        this.el = el;\n        this.id = uniqueId('clip_');\n        el.id = this.id;\n        var shapeEl = cfg.cfg.el;\n        el.appendChild(shapeEl);\n        this.cfg = cfg;\n        return this;\n    }\n    Clip.prototype.match = function () {\n        return false;\n    };\n    Clip.prototype.remove = function () {\n        var el = this.el;\n        el.parentNode.removeChild(el);\n    };\n    return Clip;\n}());\nexport default Clip;\n//# sourceMappingURL=clip.js.map","/**\n * @fileoverview pattern\n * @author dengfuping_develop@163.com\n */\nimport { uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nvar Pattern = /** @class */ (function () {\n    function Pattern(cfg) {\n        this.cfg = {};\n        var el = createSVGElement('pattern');\n        el.setAttribute('patternUnits', 'userSpaceOnUse');\n        var child = createSVGElement('image');\n        el.appendChild(child);\n        var id = uniqueId('pattern_');\n        el.id = id;\n        this.el = el;\n        this.id = id;\n        this.cfg = cfg;\n        var arr = regexPR.exec(cfg);\n        var source = arr[2];\n        child.setAttribute('href', source);\n        var img = new Image();\n        if (!source.match(/^data:/i)) {\n            img.crossOrigin = 'Anonymous';\n        }\n        img.src = source;\n        function onload() {\n            el.setAttribute('width', \"\" + img.width);\n            el.setAttribute('height', \"\" + img.height);\n        }\n        if (img.complete) {\n            onload();\n        }\n        else {\n            img.onload = onload;\n            // Fix onload() bug in IE9\n            img.src = img.src;\n        }\n        return this;\n    }\n    Pattern.prototype.match = function (type, attr) {\n        return this.cfg === attr;\n    };\n    return Pattern;\n}());\nexport default Pattern;\n//# sourceMappingURL=pattern.js.map","/**\n * @fileoverview defs\n * @author dengfuping_develop@163.com\n */\nimport { uniqueId } from '@antv/util';\nimport Gradient from './gradient';\nimport Shadow from './shadow';\nimport Arrow from './arrow';\nimport Clip from './clip';\nimport Pattern from './pattern';\nimport { createSVGElement } from '../util/dom';\nvar Defs = /** @class */ (function () {\n    function Defs(canvas) {\n        var el = createSVGElement('defs');\n        var id = uniqueId('defs_');\n        el.id = id;\n        canvas.appendChild(el);\n        this.children = [];\n        this.defaultArrow = {};\n        this.el = el;\n        this.canvas = canvas;\n    }\n    Defs.prototype.find = function (type, attr) {\n        var children = this.children;\n        var result = null;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].match(type, attr)) {\n                result = children[i].id;\n                break;\n            }\n        }\n        return result;\n    };\n    Defs.prototype.findById = function (id) {\n        var children = this.children;\n        var flag = null;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].id === id) {\n                flag = children[i];\n                break;\n            }\n        }\n        return flag;\n    };\n    Defs.prototype.add = function (item) {\n        this.children.push(item);\n        item.canvas = this.canvas;\n        item.parent = this;\n    };\n    Defs.prototype.getDefaultArrow = function (attrs, name) {\n        var stroke = attrs.stroke || attrs.strokeStyle;\n        if (this.defaultArrow[stroke]) {\n            return this.defaultArrow[stroke].id;\n        }\n        var arrow = new Arrow(attrs, name);\n        this.defaultArrow[stroke] = arrow;\n        this.el.appendChild(arrow.el);\n        this.add(arrow);\n        return arrow.id;\n    };\n    Defs.prototype.addGradient = function (cfg) {\n        var gradient = new Gradient(cfg);\n        this.el.appendChild(gradient.el);\n        this.add(gradient);\n        return gradient.id;\n    };\n    Defs.prototype.addArrow = function (attrs, name) {\n        var arrow = new Arrow(attrs, name);\n        this.el.appendChild(arrow.el);\n        this.add(arrow);\n        return arrow.id;\n    };\n    Defs.prototype.addShadow = function (cfg) {\n        var shadow = new Shadow(cfg);\n        this.el.appendChild(shadow.el);\n        this.add(shadow);\n        return shadow.id;\n    };\n    Defs.prototype.addPattern = function (cfg) {\n        var pattern = new Pattern(cfg);\n        this.el.appendChild(pattern.el);\n        this.add(pattern);\n        return pattern.id;\n    };\n    Defs.prototype.addClip = function (cfg) {\n        var clip = new Clip(cfg);\n        this.el.appendChild(clip.el);\n        this.add(clip);\n        return clip.id;\n    };\n    return Defs;\n}());\nexport default Defs;\n//# sourceMappingURL=index.js.map","import { __assign, __extends } from \"tslib\";\nimport { AbstractCanvas } from '@antv/g-base';\nimport { SHAPE_TO_TAGS } from './constant';\nimport { drawChildren } from './util/draw';\nimport { setTransform, setClip } from './util/svg';\nimport { sortDom, createSVGElement } from './util/dom';\nimport * as Shape from './shape';\nimport Group from './group';\nimport Defs from './defs';\nvar Canvas = /** @class */ (function (_super) {\n    __extends(Canvas, _super);\n    function Canvas(cfg) {\n        return _super.call(this, __assign(__assign({}, cfg), { autoDraw: true, \n            // 设置渲染引擎为 canvas，只读属性\n            renderer: 'svg' })) || this;\n    }\n    Canvas.prototype.getShapeBase = function () {\n        return Shape;\n    };\n    Canvas.prototype.getGroupBase = function () {\n        return Group;\n    };\n    // 覆盖 Container 中通过遍历的方式获取 shape 对象的逻辑，直接走 SVG 的 dom 拾取即可\n    Canvas.prototype.getShape = function (x, y, ev) {\n        var target = ev.target || ev.srcElement;\n        if (!SHAPE_TO_TAGS[target.tagName]) {\n            var parent_1 = target.parentNode;\n            while (parent_1 && !SHAPE_TO_TAGS[parent_1.tagName]) {\n                parent_1 = parent_1.parentNode;\n            }\n            target = parent_1;\n        }\n        return this.find(function (child) { return child.get('el') === target; });\n    };\n    // 复写基类的方法生成标签\n    Canvas.prototype.createDom = function () {\n        var element = createSVGElement('svg');\n        var context = new Defs(element);\n        element.setAttribute('width', \"\" + this.get('width'));\n        element.setAttribute('height', \"\" + this.get('height'));\n        // 缓存 context 对象\n        this.set('context', context);\n        return element;\n    };\n    /**\n     * 一些方法调用会引起画布变化\n     * @param {ChangeType} changeType 改变的类型\n     */\n    Canvas.prototype.onCanvasChange = function (changeType) {\n        var context = this.get('context');\n        var el = this.get('el');\n        if (changeType === 'sort') {\n            var children_1 = this.get('children');\n            if (children_1 && children_1.length) {\n                sortDom(this, function (a, b) {\n                    return children_1.indexOf(a) - children_1.indexOf(b) ? 1 : 0;\n                });\n            }\n        }\n        else if (changeType === 'clear') {\n            // el maybe null for canvas\n            if (el) {\n                // 清空 SVG 元素\n                el.innerHTML = '';\n                var defsEl = context.el;\n                // 清空 defs 元素\n                defsEl.innerHTML = '';\n                // 将清空后的 defs 元素挂载到 el 下\n                el.appendChild(defsEl);\n            }\n        }\n        else if (changeType === 'matrix') {\n            setTransform(this);\n        }\n        else if (changeType === 'clip') {\n            setClip(this, context);\n        }\n        else if (changeType === 'changeSize') {\n            el.setAttribute('width', \"\" + this.get('width'));\n            el.setAttribute('height', \"\" + this.get('height'));\n        }\n    };\n    // 复写基类的 draw 方法\n    Canvas.prototype.draw = function () {\n        var context = this.get('context');\n        var children = this.getChildren();\n        setClip(this, context);\n        if (children.length) {\n            drawChildren(context, children);\n        }\n    };\n    return Canvas;\n}(AbstractCanvas));\nexport default Canvas;\n//# sourceMappingURL=canvas.js.map","import { isEqual, isNumber, isFunction } from '@antv/util';\nimport * as d3Timer from 'd3-timer';\nimport * as d3Ease from 'd3-ease';\nimport { interpolate, interpolateArray } from 'd3-interpolate'; // 目前整体动画只需要数值和数组的差值计算\nimport * as PathUtil from '../util/path';\nimport { isColorProp, isGradientColor } from '../util/color';\nvar IDENTITY_MATRIX = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n/**\n * 使用 ratio 进行插值计算来更新属性\n * @param {IElement}  shape    元素\n * @param {Animation} animation 动画\n * @param {number}    ratio    比例\n * @return {boolean}  动画是否执行完成\n */\nfunction _update(shape, animation, ratio) {\n    var cProps = {}; // 此刻属性\n    var fromAttrs = animation.fromAttrs, toAttrs = animation.toAttrs;\n    if (shape.destroyed) {\n        return;\n    }\n    var interf; //  差值函数\n    for (var k in toAttrs) {\n        if (!isEqual(fromAttrs[k], toAttrs[k])) {\n            if (k === 'path') {\n                var toPath = toAttrs[k];\n                var fromPath = fromAttrs[k];\n                if (toPath.length > fromPath.length) {\n                    toPath = PathUtil.parsePathString(toAttrs[k]); // 终点状态\n                    fromPath = PathUtil.parsePathString(fromAttrs[k]); // 起始状态\n                    fromPath = PathUtil.fillPathByDiff(fromPath, toPath);\n                    fromPath = PathUtil.formatPath(fromPath, toPath);\n                    animation.fromAttrs.path = fromPath;\n                    animation.toAttrs.path = toPath;\n                }\n                else if (!animation.pathFormatted) {\n                    toPath = PathUtil.parsePathString(toAttrs[k]);\n                    fromPath = PathUtil.parsePathString(fromAttrs[k]);\n                    fromPath = PathUtil.formatPath(fromPath, toPath);\n                    animation.fromAttrs.path = fromPath;\n                    animation.toAttrs.path = toPath;\n                    animation.pathFormatted = true;\n                }\n                cProps[k] = [];\n                for (var i = 0; i < toPath.length; i++) {\n                    var toPathPoint = toPath[i];\n                    var fromPathPoint = fromPath[i];\n                    var cPathPoint = [];\n                    for (var j = 0; j < toPathPoint.length; j++) {\n                        if (isNumber(toPathPoint[j]) && fromPathPoint && isNumber(fromPathPoint[j])) {\n                            interf = interpolate(fromPathPoint[j], toPathPoint[j]);\n                            cPathPoint.push(interf(ratio));\n                        }\n                        else {\n                            cPathPoint.push(toPathPoint[j]);\n                        }\n                    }\n                    cProps[k].push(cPathPoint);\n                }\n            }\n            else if (k === 'matrix') {\n                /*\n                 对矩阵进行插值时，需要保证矩阵不为空，为空则使用单位矩阵\n                 TODO: 二维和三维场景下单位矩阵不同，之后 WebGL 版需要做进一步处理\n                 */\n                var matrixFn = interpolateArray(fromAttrs[k] || IDENTITY_MATRIX, toAttrs[k] || IDENTITY_MATRIX);\n                var currentMatrix = matrixFn(ratio);\n                cProps[k] = currentMatrix;\n            }\n            else if (isColorProp(k) && isGradientColor(toAttrs[k])) {\n                cProps[k] = toAttrs[k];\n            }\n            else if (!isFunction(toAttrs[k])) {\n                // 非函数类型的值才能做插值\n                interf = interpolate(fromAttrs[k], toAttrs[k]);\n                cProps[k] = interf(ratio);\n            }\n        }\n    }\n    shape.attr(cProps);\n}\n/**\n * 根据自定义帧动画函数 onFrame 来更新属性\n * @param {IElement}  shape    元素\n * @param {Animation} animation 动画\n * @param {number}    elapsed  动画执行时间(毫秒)\n * @return {boolean}  动画是否执行完成\n */\nfunction update(shape, animation, elapsed) {\n    var startTime = animation.startTime, delay = animation.delay;\n    // 如果还没有开始执行或暂停，先不更新\n    if (elapsed < startTime + delay || animation._paused) {\n        return false;\n    }\n    var ratio;\n    var duration = animation.duration;\n    var easing = animation.easing;\n    // 已执行时间\n    elapsed = elapsed - startTime - animation.delay;\n    if (animation.repeat) {\n        // 如果动画重复执行，则 elapsed > duration，计算 ratio 时需取模\n        ratio = (elapsed % duration) / duration;\n        ratio = d3Ease[easing](ratio);\n    }\n    else {\n        ratio = elapsed / duration;\n        if (ratio < 1) {\n            // 动画未执行完\n            ratio = d3Ease[easing](ratio);\n        }\n        else {\n            // 动画已执行完\n            if (animation.onFrame) {\n                shape.attr(animation.onFrame(1));\n            }\n            else {\n                shape.attr(animation.toAttrs);\n            }\n            return true;\n        }\n    }\n    if (animation.onFrame) {\n        var attrs = animation.onFrame(ratio);\n        shape.attr(attrs);\n    }\n    else {\n        _update(shape, animation, ratio);\n    }\n    return false;\n}\nvar Timeline = /** @class */ (function () {\n    /**\n     * 时间轴构造函数，依赖于画布\n     * @param {}\n     */\n    function Timeline(canvas) {\n        /**\n         * 执行动画的元素列表\n         * @type {IElement[]}\n         */\n        this.animators = [];\n        /**\n         * 当前时间\n         * @type {number}\n         */\n        this.current = 0;\n        /**\n         * 定时器\n         * @type {d3Timer.Timer}\n         */\n        this.timer = null;\n        this.canvas = canvas;\n    }\n    /**\n     * 初始化定时器\n     */\n    Timeline.prototype.initTimer = function () {\n        var _this = this;\n        var isFinished = false;\n        var shape;\n        var animations;\n        var animation;\n        this.timer = d3Timer.timer(function (elapsed) {\n            _this.current = elapsed;\n            if (_this.animators.length > 0) {\n                for (var i = _this.animators.length - 1; i >= 0; i--) {\n                    shape = _this.animators[i];\n                    if (shape.destroyed) {\n                        // 如果已经被销毁，直接移出队列\n                        _this.removeAnimator(i);\n                        continue;\n                    }\n                    if (!shape.isAnimatePaused()) {\n                        animations = shape.get('animations');\n                        for (var j = animations.length - 1; j >= 0; j--) {\n                            animation = animations[j];\n                            isFinished = update(shape, animation, elapsed);\n                            if (isFinished) {\n                                animations.splice(j, 1);\n                                isFinished = false;\n                                if (animation.callback) {\n                                    animation.callback();\n                                }\n                            }\n                        }\n                    }\n                    if (animations.length === 0) {\n                        _this.removeAnimator(i);\n                    }\n                }\n                var autoDraw = _this.canvas.get('autoDraw');\n                // 非自动渲染模式下，手动调用 canvas.draw() 重新渲染\n                if (!autoDraw) {\n                    _this.canvas.draw();\n                }\n            }\n        });\n    };\n    /**\n     * 增加动画元素\n     */\n    Timeline.prototype.addAnimator = function (shape) {\n        this.animators.push(shape);\n    };\n    /**\n     * 移除动画元素\n     */\n    Timeline.prototype.removeAnimator = function (index) {\n        this.animators.splice(index, 1);\n    };\n    /**\n     * 是否有动画在执行\n     */\n    Timeline.prototype.isAnimating = function () {\n        return !!this.animators.length;\n    };\n    /**\n     * 停止定时器\n     */\n    Timeline.prototype.stop = function () {\n        if (this.timer) {\n            this.timer.stop();\n        }\n    };\n    /**\n     * 停止时间轴上所有元素的动画，并置空动画元素列表\n     * @param {boolean} toEnd 是否到动画的最终状态，用来透传给动画元素的 stopAnimate 方法\n     */\n    Timeline.prototype.stopAllAnimations = function (toEnd) {\n        if (toEnd === void 0) { toEnd = true; }\n        this.animators.forEach(function (animator) {\n            animator.stopAnimate(toEnd);\n        });\n        this.animators = [];\n        this.canvas.draw();\n    };\n    /**\n     * 获取当前时间\n     */\n    Timeline.prototype.getTime = function () {\n        return this.current;\n    };\n    return Timeline;\n}());\nexport default Timeline;\n//# sourceMappingURL=timeline.js.map","export var isColorProp = function (prop) { return ['fill', 'stroke', 'fillStyle', 'strokeStyle'].includes(prop); };\nexport var isGradientColor = function (val) { return /^[r,R,L,l]{1}[\\s]*\\(/.test(val); };\n//# sourceMappingURL=color.js.map","/**\n * @fileoverview 事件处理器\n * @author dxq613@gmail.com\n */\nimport GraphEvent from './graph-event';\nimport { each, isParent } from '../util/util';\nvar CLICK_OFFSET = 40;\nvar LEFT_BTN_CODE = 0;\nvar DELEGATION_SPLIT = ':';\nvar EVENTS = [\n    'mousedown',\n    'mouseup',\n    'dblclick',\n    'mouseout',\n    'mouseover',\n    'mousemove',\n    'mouseleave',\n    'mouseenter',\n    'touchstart',\n    'touchmove',\n    'touchend',\n    'dragenter',\n    'dragover',\n    'dragleave',\n    'drop',\n    'contextmenu',\n    'mousewheel',\n];\n// 是否有委托事件监听\nfunction hasDelegation(events, type) {\n    for (var key in events) {\n        if (events.hasOwnProperty(key) && key.indexOf(DELEGATION_SPLIT + type) >= 0) {\n            return true;\n        }\n    }\n    return false;\n}\n// 触发目标事件，目标只能是 shape 或 canvas\nfunction emitTargetEvent(target, type, eventObj) {\n    eventObj.name = type;\n    eventObj.target = target;\n    eventObj.currentTarget = target;\n    eventObj.delegateTarget = target;\n    target.emit(type, eventObj);\n}\n// 事件冒泡, enter 和 leave 需要对 fromShape 和 toShape 进行判同\nfunction bubbleEvent(container, type, eventObj) {\n    if (eventObj.bubbles) {\n        var relativeShape = void 0;\n        var isOverEvent = false;\n        if (type === 'mouseenter') {\n            relativeShape = eventObj.fromShape;\n            isOverEvent = true;\n        }\n        else if (type === 'mouseleave') {\n            isOverEvent = true;\n            relativeShape = eventObj.toShape;\n        }\n        // canvas 上的 mouseenter， mouseleave 事件，仅当进入或者移出 canvas 时触发\n        if (container.isCanvas() && isOverEvent) {\n            return;\n        }\n        // 如果相关图形同当前图形在同一个容器内，不触发事件\n        if (relativeShape && isParent(container, relativeShape)) {\n            // 阻止继续向上冒泡\n            eventObj.bubbles = false;\n            return;\n        }\n        // 事件名称可能在委托过程中被修改，因此事件冒泡时需要重新设置事件名称\n        eventObj.name = type;\n        eventObj.currentTarget = container;\n        eventObj.delegateTarget = container;\n        container.emit(type, eventObj);\n    }\n}\nvar EventController = /** @class */ (function () {\n    function EventController(cfg) {\n        var _this = this;\n        // 正在被拖拽的图形\n        this.draggingShape = null;\n        this.dragging = false;\n        // 当前鼠标/touch所在位置的图形\n        this.currentShape = null;\n        this.mousedownShape = null;\n        this.mousedownPoint = null;\n        // 统一处理所有的回调\n        this._eventCallback = function (ev) {\n            var type = ev.type;\n            _this._triggerEvent(type, ev);\n        };\n        // 在 document 处理拖拽到画布外的事件，处理从图形上移除画布未被捕捉的问题\n        this._onDocumentMove = function (ev) {\n            var canvas = _this.canvas;\n            var el = canvas.get('el');\n            if (el !== ev.target) {\n                // 不在 canvas 上移动\n                if (_this.dragging || _this.currentShape) {\n                    var pointInfo = _this._getPointInfo(ev);\n                    // 还在拖拽过程中\n                    if (_this.dragging) {\n                        _this._emitEvent('drag', ev, pointInfo, _this.draggingShape);\n                    }\n                    // 说明从某个图形直接移动到了画布外面，\n                    // 修复了 mouseleave 的 bug 后不再出现这种情况\n                    // if (this.currentShape) {\n                    //   this._emitEvent('mouseleave', ev, pointInfo, this.currentShape, this.currentShape, null);\n                    //   this.currentShape = null;\n                    // }\n                }\n            }\n        };\n        // 在 document 上处理拖拽到外面，释放鼠标时触发 dragend\n        this._onDocumentMouseUp = function (ev) {\n            var canvas = _this.canvas;\n            var el = canvas.get('el');\n            if (el !== ev.target) {\n                // 不在 canvas 上移动\n                if (_this.dragging) {\n                    var pointInfo = _this._getPointInfo(ev);\n                    if (_this.draggingShape) {\n                        // 如果存在拖拽的图形，则也触发 drop 事件\n                        _this._emitEvent('drop', ev, pointInfo, null);\n                    }\n                    _this._emitEvent('dragend', ev, pointInfo, _this.draggingShape);\n                    _this._afterDrag(_this.draggingShape, pointInfo, ev);\n                }\n            }\n        };\n        this.canvas = cfg.canvas;\n    }\n    EventController.prototype.init = function () {\n        this._bindEvents();\n    };\n    // 注册事件\n    EventController.prototype._bindEvents = function () {\n        var _this = this;\n        var el = this.canvas.get('el');\n        each(EVENTS, function (eventName) {\n            el.addEventListener(eventName, _this._eventCallback);\n        });\n        if (document) {\n            // 处理移动到外面没有触发 shape mouse leave 的事件\n            // 处理拖拽到外部的问题\n            document.addEventListener('mousemove', this._onDocumentMove);\n            // 处理拖拽过程中在外部释放鼠标的问题\n            document.addEventListener('mouseup', this._onDocumentMouseUp);\n        }\n    };\n    // 清理事件\n    EventController.prototype._clearEvents = function () {\n        var _this = this;\n        var el = this.canvas.get('el');\n        each(EVENTS, function (eventName) {\n            el.removeEventListener(eventName, _this._eventCallback);\n        });\n        if (document) {\n            document.removeEventListener('mousemove', this._onDocumentMove);\n            document.removeEventListener('mouseup', this._onDocumentMouseUp);\n        }\n    };\n    EventController.prototype._getEventObj = function (type, event, point, target, fromShape, toShape) {\n        var eventObj = new GraphEvent(type, event);\n        eventObj.fromShape = fromShape;\n        eventObj.toShape = toShape;\n        eventObj.x = point.x;\n        eventObj.y = point.y;\n        eventObj.clientX = point.clientX;\n        eventObj.clientY = point.clientY;\n        eventObj.propagationPath.push(target);\n        // 事件的x,y应该是基于画布左上角的，与canvas的matrix无关\n        return eventObj;\n    };\n    // 根据点获取图形，提取成独立方法，便于后续优化\n    EventController.prototype._getShape = function (point, ev) {\n        return this.canvas.getShape(point.x, point.y, ev);\n    };\n    // 获取事件的当前点的信息\n    EventController.prototype._getPointInfo = function (ev) {\n        var canvas = this.canvas;\n        var clientPoint = canvas.getClientByEvent(ev);\n        var point = canvas.getPointByEvent(ev);\n        return {\n            x: point.x,\n            y: point.y,\n            clientX: clientPoint.x,\n            clientY: clientPoint.y,\n        };\n    };\n    // 触发事件\n    EventController.prototype._triggerEvent = function (type, ev) {\n        var pointInfo = this._getPointInfo(ev);\n        // 每次都获取图形有一定成本，后期可以考虑进行缓存策略\n        var shape = this._getShape(pointInfo, ev);\n        var method = this[\"_on\" + type];\n        var leaveCanvas = false;\n        if (method) {\n            method.call(this, pointInfo, shape, ev);\n        }\n        else {\n            var preShape = this.currentShape;\n            // 如果进入、移出画布时存在图形，则要分别触发事件\n            if (type === 'mouseenter' || type === 'dragenter' || type === 'mouseover') {\n                this._emitEvent(type, ev, pointInfo, null, null, shape); // 先进入画布\n                if (shape) {\n                    this._emitEvent(type, ev, pointInfo, shape, null, shape); // 再触发图形的事件\n                }\n                if (type === 'mouseenter' && this.draggingShape) {\n                    // 如果正在拖拽图形, 则触发 dragleave\n                    this._emitEvent('dragenter', ev, pointInfo, null);\n                }\n            }\n            else if (type === 'mouseleave' || type === 'dragleave' || type === 'mouseout') {\n                leaveCanvas = true;\n                if (preShape) {\n                    this._emitEvent(type, ev, pointInfo, preShape, preShape, null); // 先触发图形的事件\n                }\n                this._emitEvent(type, ev, pointInfo, null, preShape, null); // 再触发离开画布事件\n                if (type === 'mouseleave' && this.draggingShape) {\n                    this._emitEvent('dragleave', ev, pointInfo, null);\n                }\n            }\n            else {\n                this._emitEvent(type, ev, pointInfo, shape, null, null); // 一般事件中不需要考虑 from, to\n            }\n        }\n        if (!leaveCanvas) {\n            this.currentShape = shape;\n        }\n        // 当鼠标从画布移动到 shape 或者从 preShape 移动到 shape 时，应用 shape 上的鼠标样式\n        if (shape && !shape.get('destroyed')) {\n            var canvas = this.canvas;\n            var el = canvas.get('el');\n            el.style.cursor = shape.attr('cursor') || canvas.get('cursor');\n        }\n    };\n    // 记录下点击的位置、图形，便于拖拽事件、click 事件的判定\n    EventController.prototype._onmousedown = function (pointInfo, shape, event) {\n        // 只有鼠标左键的 mousedown 事件才会设置 mousedownShape 等属性，避免鼠标右键的 mousedown 事件引起其他事件发生\n        if (event.button === LEFT_BTN_CODE) {\n            this.mousedownShape = shape;\n            this.mousedownPoint = pointInfo;\n            this.mousedownTimeStamp = event.timeStamp;\n        }\n        this._emitEvent('mousedown', event, pointInfo, shape, null, null); // mousedown 不考虑fromShape, toShape\n    };\n    // mouseleave 和 mouseenter 都是成对存在的\n    // mouseenter 和 mouseover 同时触发\n    EventController.prototype._emitMouseoverEvents = function (event, pointInfo, fromShape, toShape) {\n        var el = this.canvas.get('el');\n        if (fromShape !== toShape) {\n            if (fromShape) {\n                this._emitEvent('mouseout', event, pointInfo, fromShape, fromShape, toShape);\n                this._emitEvent('mouseleave', event, pointInfo, fromShape, fromShape, toShape);\n                // 当鼠标从 fromShape 移动到画布上时，重置鼠标样式\n                if (!toShape || toShape.get('destroyed')) {\n                    el.style.cursor = this.canvas.get('cursor');\n                }\n            }\n            if (toShape) {\n                this._emitEvent('mouseover', event, pointInfo, toShape, fromShape, toShape);\n                this._emitEvent('mouseenter', event, pointInfo, toShape, fromShape, toShape);\n            }\n        }\n    };\n    // dragover 不等同于 mouseover，而等同于 mousemove\n    EventController.prototype._emitDragoverEvents = function (event, pointInfo, fromShape, toShape, isCanvasEmit) {\n        if (toShape) {\n            if (toShape !== fromShape) {\n                if (fromShape) {\n                    this._emitEvent('dragleave', event, pointInfo, fromShape, fromShape, toShape);\n                }\n                this._emitEvent('dragenter', event, pointInfo, toShape, fromShape, toShape);\n            }\n            if (!isCanvasEmit) {\n                this._emitEvent('dragover', event, pointInfo, toShape);\n            }\n        }\n        else if (fromShape) {\n            // TODO: 此处判断有问题，当 drag 图形时，也会触发一次 dragleave 事件，因为此时 toShape 为 null，这不是所期望的\n            // 经过空白区域\n            this._emitEvent('dragleave', event, pointInfo, fromShape, fromShape, toShape);\n        }\n        if (isCanvasEmit) {\n            this._emitEvent('dragover', event, pointInfo, toShape);\n        }\n    };\n    // drag 完成后，需要做一些清理工作\n    EventController.prototype._afterDrag = function (draggingShape, pointInfo, event) {\n        if (draggingShape) {\n            draggingShape.set('capture', true); // 恢复可以拾取\n            this.draggingShape = null;\n        }\n        this.dragging = false;\n        // drag 完成后，有可能 draggingShape 已经移动到了当前位置，所以不能直接取当前图形\n        var shape = this._getShape(pointInfo, event);\n        // 拖拽完成后，进行 enter，leave 的判定\n        if (shape !== draggingShape) {\n            this._emitMouseoverEvents(event, pointInfo, draggingShape, shape);\n        }\n        this.currentShape = shape; // 更新当前 shape，如果不处理当前图形的 mouseleave 事件可能会出问题\n    };\n    // 按键抬起时，会终止拖拽、触发点击\n    EventController.prototype._onmouseup = function (pointInfo, shape, event) {\n        // eevent.button === 0 表示鼠标左键事件，此处加上判断主要是为了避免右键鼠标会触发 mouseup 和 click 事件\n        // ref: https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n        if (event.button === LEFT_BTN_CODE) {\n            var draggingShape = this.draggingShape;\n            if (this.dragging) {\n                // 存在可以拖拽的图形，同时拖拽到其他图形上时触发 drag 事件\n                if (draggingShape) {\n                    this._emitEvent('drop', event, pointInfo, shape);\n                }\n                this._emitEvent('dragend', event, pointInfo, draggingShape);\n                this._afterDrag(draggingShape, pointInfo, event);\n            }\n            else {\n                this._emitEvent('mouseup', event, pointInfo, shape); // 先触发 mouseup 再触发 click\n                if (shape === this.mousedownShape) {\n                    this._emitEvent('click', event, pointInfo, shape);\n                }\n                this.mousedownShape = null;\n                this.mousedownPoint = null;\n            }\n        }\n    };\n    // 当触发浏览器的 dragover 事件时，不会再触发 mousemove ，所以这时候的 dragenter, dragleave 事件需要重新处理\n    EventController.prototype._ondragover = function (pointInfo, shape, event) {\n        event.preventDefault(); // 如果不对 dragover 进行 preventDefault，则不会在 canvas 上触发 drop 事件\n        var preShape = this.currentShape;\n        this._emitDragoverEvents(event, pointInfo, preShape, shape, true);\n    };\n    // 大量的图形事件，都通过 mousemove 模拟\n    EventController.prototype._onmousemove = function (pointInfo, shape, event) {\n        var canvas = this.canvas;\n        var preShape = this.currentShape;\n        var draggingShape = this.draggingShape;\n        // 正在拖拽时\n        if (this.dragging) {\n            // 正在拖拽中\n            if (draggingShape) {\n                // 如果拖拽了 shape 会触发 dragenter, dragleave, dragover 和 drag 事件\n                this._emitDragoverEvents(event, pointInfo, preShape, shape, false);\n            }\n            // 如果存在 draggingShape 则会在 draggingShape 上触发 drag 事件，冒泡到 canvas 上\n            // 否则在 canvas 上触发 drag 事件\n            this._emitEvent('drag', event, pointInfo, draggingShape);\n        }\n        else {\n            var mousedownPoint = this.mousedownPoint;\n            if (mousedownPoint) {\n                // 当鼠标点击下去，同时移动时，进行 drag 判定\n                var mousedownShape = this.mousedownShape;\n                var now = event.timeStamp;\n                var timeWindow = now - this.mousedownTimeStamp;\n                var dx = mousedownPoint.clientX - pointInfo.clientX;\n                var dy = mousedownPoint.clientY - pointInfo.clientY;\n                var dist = dx * dx + dy * dy;\n                if (timeWindow > 120 || dist > CLICK_OFFSET) {\n                    if (mousedownShape && mousedownShape.get('draggable')) {\n                        // 设置了 draggable 的 shape 才能触发 drag 相关的事件\n                        draggingShape = this.mousedownShape; // 拖动鼠标点下时的 shape\n                        draggingShape.set('capture', false); // 禁止继续拾取，否则无法进行 dragover,dragenter,dragleave,drop的判定\n                        this.draggingShape = draggingShape;\n                        this.dragging = true;\n                        this._emitEvent('dragstart', event, pointInfo, draggingShape);\n                        // 清理按下鼠标时缓存的值\n                        this.mousedownShape = null;\n                        this.mousedownPoint = null;\n                    }\n                    else if (!mousedownShape && canvas.get('draggable')) {\n                        // 设置了 draggable 的 canvas 才能触发 drag 相关的事件\n                        this.dragging = true;\n                        this._emitEvent('dragstart', event, pointInfo, null);\n                        // 清理按下鼠标时缓存的值\n                        this.mousedownShape = null;\n                        this.mousedownPoint = null;\n                    }\n                    else {\n                        this._emitMouseoverEvents(event, pointInfo, preShape, shape);\n                        this._emitEvent('mousemove', event, pointInfo, shape);\n                    }\n                }\n                else {\n                    this._emitMouseoverEvents(event, pointInfo, preShape, shape);\n                    this._emitEvent('mousemove', event, pointInfo, shape);\n                }\n            }\n            else {\n                // 没有按键按下时，则直接触发 mouse over 相关的各种事件\n                this._emitMouseoverEvents(event, pointInfo, preShape, shape);\n                // 始终触发移动\n                this._emitEvent('mousemove', event, pointInfo, shape);\n            }\n        }\n    };\n    // 触发事件\n    EventController.prototype._emitEvent = function (type, event, pointInfo, shape, fromShape, toShape) {\n        var eventObj = this._getEventObj(type, event, pointInfo, shape, fromShape, toShape);\n        // 存在 shape 触发，则进行冒泡处理\n        if (shape) {\n            eventObj.shape = shape;\n            // 触发 shape 上的事件\n            emitTargetEvent(shape, type, eventObj);\n            var parent_1 = shape.getParent();\n            // 执行冒泡\n            while (parent_1) {\n                // 委托事件要先触发\n                parent_1.emitDelegation(type, eventObj);\n                // 事件冒泡停止，不能妨碍委托事件\n                if (!eventObj.propagationStopped) {\n                    bubbleEvent(parent_1, type, eventObj);\n                }\n                eventObj.propagationPath.push(parent_1);\n                parent_1 = parent_1.getParent();\n            }\n        }\n        else {\n            // 如果没有 shape 直接在 canvas 上触发\n            var canvas = this.canvas;\n            // 直接触发 canvas 上的事件\n            emitTargetEvent(canvas, type, eventObj);\n        }\n    };\n    EventController.prototype.destroy = function () {\n        // 清理事件\n        this._clearEvents();\n        // 清理缓存的对象\n        this.canvas = null;\n        this.currentShape = null;\n        this.draggingShape = null;\n        this.mousedownPoint = null;\n        this.mousedownShape = null;\n        this.mousedownTimeStamp = null;\n    };\n    return EventController;\n}());\nexport default EventController;\n//# sourceMappingURL=event-contoller.js.map","import { __extends } from \"tslib\";\nimport { detect } from 'detect-browser';\nimport Container from './container';\nimport { isBrowser, isNil, isString } from '../util/util';\nimport Timeline from '../animate/timeline';\nimport EventController from '../event/event-contoller';\nvar PX_SUFFIX = 'px';\nvar browser = detect();\nvar isFirefox = browser && browser.name === 'firefox';\nvar Canvas = /** @class */ (function (_super) {\n    __extends(Canvas, _super);\n    function Canvas(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.initContainer();\n        _this.initDom();\n        _this.initEvents();\n        _this.initTimeline();\n        return _this;\n    }\n    Canvas.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        // set default cursor style for canvas\n        cfg['cursor'] = 'default';\n        // CSS transform 目前尚未经过长时间验证，为了避免影响上层业务，默认关闭，上层按需开启\n        cfg['supportCSSTransform'] = false;\n        return cfg;\n    };\n    /**\n     * @protected\n     * 初始化容器\n     */\n    Canvas.prototype.initContainer = function () {\n        var container = this.get('container');\n        if (isString(container)) {\n            container = document.getElementById(container);\n            this.set('container', container);\n        }\n    };\n    /**\n     * @protected\n     * 初始化 DOM\n     */\n    Canvas.prototype.initDom = function () {\n        var el = this.createDom();\n        this.set('el', el);\n        // 附加到容器\n        var container = this.get('container');\n        container.appendChild(el);\n        // 设置初始宽度\n        this.setDOMSize(this.get('width'), this.get('height'));\n    };\n    /**\n     * @protected\n     * 初始化绑定的事件\n     */\n    Canvas.prototype.initEvents = function () {\n        var eventController = new EventController({\n            canvas: this,\n        });\n        eventController.init();\n        this.set('eventController', eventController);\n    };\n    /**\n     * @protected\n     * 初始化时间轴\n     */\n    Canvas.prototype.initTimeline = function () {\n        var timeline = new Timeline(this);\n        this.set('timeline', timeline);\n    };\n    /**\n     * @protected\n     * 修改画布对应的 DOM 的大小\n     * @param {number} width  宽度\n     * @param {number} height 高度\n     */\n    Canvas.prototype.setDOMSize = function (width, height) {\n        var el = this.get('el');\n        if (isBrowser) {\n            el.style.width = width + PX_SUFFIX;\n            el.style.height = height + PX_SUFFIX;\n        }\n    };\n    // 实现接口\n    Canvas.prototype.changeSize = function (width, height) {\n        this.setDOMSize(width, height);\n        this.set('width', width);\n        this.set('height', height);\n        this.onCanvasChange('changeSize');\n    };\n    /**\n     * 获取当前的渲染引擎\n     * @return {Renderer} 返回当前的渲染引擎\n     */\n    Canvas.prototype.getRenderer = function () {\n        return this.get('renderer');\n    };\n    /**\n     * 获取画布的 cursor 样式\n     * @return {Cursor}\n     */\n    Canvas.prototype.getCursor = function () {\n        return this.get('cursor');\n    };\n    /**\n     * 设置画布的 cursor 样式\n     * @param {Cursor} cursor  cursor 样式\n     */\n    Canvas.prototype.setCursor = function (cursor) {\n        this.set('cursor', cursor);\n        var el = this.get('el');\n        if (isBrowser && el) {\n            // 直接设置样式，不等待鼠标移动时再设置\n            el.style.cursor = cursor;\n        }\n    };\n    // 实现接口\n    Canvas.prototype.getPointByEvent = function (ev) {\n        var supportCSSTransform = this.get('supportCSSTransform');\n        if (supportCSSTransform) {\n            // For Firefox <= 38\n            if (isFirefox && !isNil(ev.layerX) && ev.layerX !== ev.offsetX) {\n                return {\n                    x: ev.layerX,\n                    y: ev.layerY,\n                };\n            }\n            if (!isNil(ev.offsetX)) {\n                // For IE6+, Firefox >= 39, Chrome, Safari, Opera\n                return {\n                    x: ev.offsetX,\n                    y: ev.offsetY,\n                };\n            }\n        }\n        // should calculate by self for other cases, like Safari in ios\n        // TODO: support CSS transform\n        var _a = this.getClientByEvent(ev), clientX = _a.x, clientY = _a.y;\n        return this.getPointByClient(clientX, clientY);\n    };\n    // 获取 touch 事件的 clientX 和 clientY 需要单独处理\n    Canvas.prototype.getClientByEvent = function (ev) {\n        var clientInfo = ev;\n        if (ev.touches) {\n            if (ev.type === 'touchend') {\n                clientInfo = ev.changedTouches[0];\n            }\n            else {\n                clientInfo = ev.touches[0];\n            }\n        }\n        return {\n            x: clientInfo.clientX,\n            y: clientInfo.clientY,\n        };\n    };\n    // 实现接口\n    Canvas.prototype.getPointByClient = function (clientX, clientY) {\n        var el = this.get('el');\n        var bbox = el.getBoundingClientRect();\n        return {\n            x: clientX - bbox.left,\n            y: clientY - bbox.top,\n        };\n    };\n    // 实现接口\n    Canvas.prototype.getClientByPoint = function (x, y) {\n        var el = this.get('el');\n        var bbox = el.getBoundingClientRect();\n        return {\n            x: x + bbox.left,\n            y: y + bbox.top,\n        };\n    };\n    // 实现接口\n    Canvas.prototype.draw = function () { };\n    /**\n     * @protected\n     * 销毁 DOM 容器\n     */\n    Canvas.prototype.removeDom = function () {\n        var el = this.get('el');\n        el.parentNode.removeChild(el);\n    };\n    /**\n     * @protected\n     * 清理所有的事件\n     */\n    Canvas.prototype.clearEvents = function () {\n        var eventController = this.get('eventController');\n        eventController.destroy();\n    };\n    Canvas.prototype.isCanvas = function () {\n        return true;\n    };\n    Canvas.prototype.getParent = function () {\n        return null;\n    };\n    Canvas.prototype.destroy = function () {\n        var timeline = this.get('timeline');\n        if (this.get('destroyed')) {\n            return;\n        }\n        this.clear();\n        // 同初始化时相反顺序调用\n        if (timeline) {\n            // 画布销毁时自动停止动画\n            timeline.stop();\n        }\n        this.clearEvents();\n        this.removeDom();\n        _super.prototype.destroy.call(this);\n    };\n    return Canvas;\n}(Container));\nexport default Canvas;\n//# sourceMappingURL=canvas.js.map","import { isAllowCapture } from '@antv/g-base/lib/util/util';\nimport { multiplyVec2, invert } from '@antv/g-base/lib/util/matrix';\nfunction invertFromMatrix(v, matrix) {\n    if (matrix) {\n        var invertMatrix = invert(matrix);\n        return multiplyVec2(invertMatrix, v);\n    }\n    return v;\n}\nfunction getRefXY(element, x, y) {\n    // @ts-ignore\n    var totalMatrix = element.getTotalMatrix();\n    if (totalMatrix) {\n        var _a = invertFromMatrix([x, y, 1], totalMatrix), refX = _a[0], refY = _a[1];\n        return [refX, refY];\n    }\n    return [x, y];\n}\n// 拾取前的检测，只有通过检测才能继续拾取\nfunction preTest(element, x, y) {\n    // @ts-ignore\n    if (element.isCanvas && element.isCanvas()) {\n        return true;\n    }\n    // 不允许被拾取，则返回 null\n    // @ts-ignore\n    if (!isAllowCapture(element) || element.cfg.isInView === false) {\n        return false;\n    }\n    if (element.cfg.clipShape) {\n        // 如果存在 clip\n        var _a = getRefXY(element, x, y), refX = _a[0], refY = _a[1];\n        if (element.isClipped(refX, refY)) {\n            return false;\n        }\n    }\n    // @ts-ignore ，这个地方调用过于频繁\n    var bbox = element.cfg.cacheCanvasBBox || element.getCanvasBBox();\n    // 如果没有缓存 bbox，则说明不可见\n    // 注释掉的这段可能会加速拾取，上面的语句改写成 const bbox = element.cfg.cacheCanvasBBox;\n    // 这时候的拾取假设图形/分组在上一次绘制都在视窗内，但是上面已经判定了 isInView 所以意义不大\n    // 现在还调用 element.getCanvasBBox(); 一个很大的原因是便于单元测试\n    // if (!bbox) {\n    //   return false;\n    // }\n    if (!(x >= bbox.minX && x <= bbox.maxX && y >= bbox.minY && y <= bbox.maxY)) {\n        return false;\n    }\n    return true;\n}\n// 这个方法复写了 g-base 的 getShape\nexport function getShape(container, x, y) {\n    // 没有通过检测，则返回 null\n    if (!preTest(container, x, y)) {\n        return null;\n    }\n    var shape = null;\n    var children = container.getChildren();\n    var count = children.length;\n    for (var i = count - 1; i >= 0; i--) {\n        var child = children[i];\n        if (child.isGroup()) {\n            shape = getShape(child, x, y);\n        }\n        else if (preTest(child, x, y)) {\n            var curShape = child;\n            var _a = getRefXY(child, x, y), refX = _a[0], refY = _a[1];\n            // @ts-ignore\n            if (curShape.isInShape(refX, refY)) {\n                shape = child;\n            }\n        }\n        if (shape) {\n            break;\n        }\n    }\n    return shape;\n}\n//# sourceMappingURL=hit.js.map","import { __extends } from \"tslib\";\nimport { AbstractCanvas } from '@antv/g-base';\nimport { getShape } from './util/hit';\nimport * as Shape from './shape';\nimport Group from './group';\nimport { each, getPixelRatio, requestAnimationFrame, clearAnimationFrame } from './util/util';\nimport { applyAttrsToContext, drawChildren, getMergedRegion, mergeView, checkRefresh, clearChanged } from './util/draw';\nvar Canvas = /** @class */ (function (_super) {\n    __extends(Canvas, _super);\n    function Canvas() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Canvas.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        // 设置渲染引擎为 canvas，只读属性\n        cfg['renderer'] = 'canvas';\n        // 是否自动绘制，不需要用户调用 draw 方法\n        cfg['autoDraw'] = true;\n        // 是否允许局部刷新图表\n        cfg['localRefresh'] = true;\n        cfg['refreshElements'] = [];\n        // 是否在视图内自动裁剪\n        cfg['clipView'] = true;\n        // 是否使用快速拾取的方案，默认为 false，上层可以打开\n        cfg['quickHit'] = false;\n        return cfg;\n    };\n    /**\n     * 一些方法调用会引起画布变化\n     * @param {ChangeType} changeType 改变的类型\n     */\n    Canvas.prototype.onCanvasChange = function (changeType) {\n        /**\n         * 触发画布更新的三种 changeType\n         * 1. attr: 修改画布的绘图属性\n         * 2. sort: 画布排序，图形的层次会发生变化\n         * 3. changeSize: 改变画布大小\n         */\n        if (changeType === 'attr' || changeType === 'sort' || changeType === 'changeSize') {\n            this.set('refreshElements', [this]);\n            this.draw();\n        }\n    };\n    Canvas.prototype.getShapeBase = function () {\n        return Shape;\n    };\n    Canvas.prototype.getGroupBase = function () {\n        return Group;\n    };\n    /**\n     * 获取屏幕像素比\n     */\n    Canvas.prototype.getPixelRatio = function () {\n        var pixelRatio = this.get('pixelRatio') || getPixelRatio();\n        // 不足 1 的取 1，超出 1 的取整\n        return pixelRatio >= 1 ? Math.ceil(pixelRatio) : 1;\n    };\n    Canvas.prototype.getViewRange = function () {\n        return {\n            minX: 0,\n            minY: 0,\n            maxX: this.cfg.width,\n            maxY: this.cfg.height,\n        };\n    };\n    // 复写基类的方法生成标签\n    Canvas.prototype.createDom = function () {\n        var element = document.createElement('canvas');\n        var context = element.getContext('2d');\n        // 缓存 context 对象\n        this.set('context', context);\n        return element;\n    };\n    Canvas.prototype.setDOMSize = function (width, height) {\n        _super.prototype.setDOMSize.call(this, width, height);\n        var context = this.get('context');\n        var el = this.get('el');\n        var pixelRatio = this.getPixelRatio();\n        el.width = pixelRatio * width;\n        el.height = pixelRatio * height;\n        // 设置 canvas 元素的宽度和高度，会重置缩放，因此 context.scale 需要在每次设置宽、高后调用\n        if (pixelRatio > 1) {\n            context.scale(pixelRatio, pixelRatio);\n        }\n    };\n    // 复写基类方法\n    Canvas.prototype.clear = function () {\n        _super.prototype.clear.call(this);\n        this._clearFrame(); // 需要清理掉延迟绘制的帧\n        var context = this.get('context');\n        var element = this.get('el');\n        context.clearRect(0, 0, element.width, element.height);\n    };\n    Canvas.prototype.getShape = function (x, y) {\n        var shape;\n        if (this.get('quickHit')) {\n            shape = getShape(this, x, y);\n        }\n        else {\n            shape = _super.prototype.getShape.call(this, x, y, null);\n        }\n        return shape;\n    };\n    // 对绘制区域边缘取整，避免浮点数问题\n    Canvas.prototype._getRefreshRegion = function () {\n        var elements = this.get('refreshElements');\n        var viewRegion = this.getViewRange();\n        var region;\n        // 如果是当前画布整体发生了变化，则直接重绘整个画布\n        if (elements.length && elements[0] === this) {\n            region = viewRegion;\n        }\n        else {\n            region = getMergedRegion(elements);\n            if (region) {\n                region.minX = Math.floor(region.minX);\n                region.minY = Math.floor(region.minY);\n                region.maxX = Math.ceil(region.maxX);\n                region.maxY = Math.ceil(region.maxY);\n                region.maxY += 1; // 在很多环境下字体的高低会不一致，附加一像素，避免残影\n                var clipView = this.get('clipView');\n                // 自动裁剪不在 view 内的区域\n                if (clipView) {\n                    region = mergeView(region, viewRegion);\n                }\n            }\n        }\n        return region;\n    };\n    /**\n     * 刷新图形元素，这里仅仅是放入队列，下次绘制时进行绘制\n     * @param {IElement} element 图形元素\n     */\n    Canvas.prototype.refreshElement = function (element) {\n        var refreshElements = this.get('refreshElements');\n        refreshElements.push(element);\n        // if (this.get('autoDraw')) {\n        //   this._startDraw();\n        // }\n    };\n    // 清理还在进行的绘制\n    Canvas.prototype._clearFrame = function () {\n        var drawFrame = this.get('drawFrame');\n        if (drawFrame) {\n            // 如果全部渲染时，存在局部渲染，则抛弃掉局部渲染\n            clearAnimationFrame(drawFrame);\n            this.set('drawFrame', null);\n            this.set('refreshElements', []);\n        }\n    };\n    // 手工调用绘制接口\n    Canvas.prototype.draw = function () {\n        var drawFrame = this.get('drawFrame');\n        if (this.get('autoDraw') && drawFrame) {\n            return;\n        }\n        this._startDraw();\n    };\n    // 绘制所有图形\n    Canvas.prototype._drawAll = function () {\n        var context = this.get('context');\n        var element = this.get('el');\n        var children = this.getChildren();\n        context.clearRect(0, 0, element.width, element.height);\n        applyAttrsToContext(context, this);\n        drawChildren(context, children);\n        // 对于 https://github.com/antvis/g/issues/422 的场景，全局渲染的模式下也会记录更新的元素队列，因此全局渲染完后也需要置空\n        this.set('refreshElements', []);\n    };\n    // 绘制局部\n    Canvas.prototype._drawRegion = function () {\n        var context = this.get('context');\n        var refreshElements = this.get('refreshElements');\n        var children = this.getChildren();\n        var region = this._getRefreshRegion();\n        // 需要注意可能没有 region 的场景\n        // 一般发生在设置了 localRefresh ,在没有图形发生变化的情况下，用户调用了 draw\n        if (region) {\n            // 清理指定区域\n            context.clearRect(region.minX, region.minY, region.maxX - region.minX, region.maxY - region.minY);\n            // 保存上下文，设置 clip\n            context.save();\n            context.beginPath();\n            context.rect(region.minX, region.minY, region.maxX - region.minX, region.maxY - region.minY);\n            context.clip();\n            applyAttrsToContext(context, this);\n            // 确认更新的元素，这个优化可以提升 10 倍左右的性能，10W 个带有 group 的节点，局部渲染会从 90ms 下降到 5-6 ms\n            checkRefresh(this, children, region);\n            // 绘制子元素\n            drawChildren(context, children, region);\n            context.restore();\n        }\n        else if (refreshElements.length) {\n            // 防止发生改变的 elements 没有 region 的场景，这会发生在多个情况下\n            // 1. 空的 group\n            // 2. 所有 elements 没有在绘图区域\n            // 3. group 下面的 elements 隐藏掉\n            // 如果不进行清理 hasChanged 的状态会不正确\n            clearChanged(refreshElements);\n        }\n        each(refreshElements, function (element) {\n            if (element.get('hasChanged')) {\n                // 在视窗外的 Group 元素会加入到更新队列里，但实际却没有执行 draw() 逻辑，也就没有清除 hasChanged 标记\n                // 即已经重绘完、但 hasChanged 标记没有清除的元素，需要统一清除掉。主要是 Group 存在问题，具体原因待排查\n                element.set('hasChanged', false);\n            }\n        });\n        this.set('refreshElements', []);\n    };\n    // 触发绘制\n    Canvas.prototype._startDraw = function () {\n        var _this = this;\n        var drawFrame = this.get('drawFrame');\n        if (!drawFrame) {\n            drawFrame = requestAnimationFrame(function () {\n                if (_this.get('localRefresh')) {\n                    _this._drawRegion();\n                }\n                else {\n                    _this._drawAll();\n                }\n                _this.set('drawFrame', null);\n            });\n            this.set('drawFrame', drawFrame);\n        }\n    };\n    Canvas.prototype.skipDraw = function () { };\n    return Canvas;\n}(AbstractCanvas));\nexport default Canvas;\n//# sourceMappingURL=canvas.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.propagationDelegate = void 0;\nvar graph_event_1 = require(\"@antv/g-base/lib/event/graph-event\");\n/**\n *\n * @param group 分组\n * @param eventName 事件名\n * @param eventObject 事件对象\n */\nfunction propagationDelegate(group, eventName, eventObject) {\n    var event = new graph_event_1.default(eventName, eventObject);\n    event.target = group;\n    event.propagationPath.push(group); // 从当前 group 开始触发 delegation\n    group.emitDelegation(eventName, event);\n    var parent = group.getParent();\n    // 执行冒泡\n    while (parent) {\n        // 委托事件要先触发\n        parent.emitDelegation(eventName, event);\n        event.propagationPath.push(parent);\n        parent = parent.getParent();\n    }\n}\nexports.propagationDelegate = propagationDelegate;\n//# sourceMappingURL=event.js.map","import * as Shape from './shape';\nvar pkg = require('../package.json');\nexport var version = pkg.version;\nexport * from './types';\nexport * from './interfaces';\nexport { Event } from '@antv/g-base';\nexport { default as Canvas } from './canvas';\nexport { default as Group } from './group';\nexport { Shape };\n//# sourceMappingURL=index.js.map","import * as Shape from './shape';\nvar pkg = require('../package.json');\nexport var version = pkg.version;\nexport * from './types';\nexport * from './interfaces';\nexport { Event } from '@antv/g-base';\nexport { default as Canvas } from './canvas';\nexport { default as Group } from './group';\nexport { Shape };\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\n// 向量长度\nfunction vMag(v) {\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n// u.v/|u||v|，计算夹角的余弦值\nfunction vRatio(u, v) {\n    // 当存在一个向量的长度为 0 时，夹角也为 0，即夹角的余弦值为 1\n    return vMag(u) * vMag(v) ? (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v)) : 1;\n}\n// 向量角度\nfunction vAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n}\n// A 0:rx 1:ry 2:x-axis-rotation 3:large-arc-flag 4:sweep-flag 5: x 6: y\nfunction getArcParams(startPoint, params) {\n    var rx = params[1];\n    var ry = params[2];\n    var xRotation = util_1.mod(util_1.toRadian(params[3]), Math.PI * 2);\n    var arcFlag = params[4];\n    var sweepFlag = params[5];\n    // 弧形起点坐标\n    var x1 = startPoint[0];\n    var y1 = startPoint[1];\n    // 弧形终点坐标\n    var x2 = params[6];\n    var y2 = params[7];\n    var xp = (Math.cos(xRotation) * (x1 - x2)) / 2.0 + (Math.sin(xRotation) * (y1 - y2)) / 2.0;\n    var yp = (-1 * Math.sin(xRotation) * (x1 - x2)) / 2.0 + (Math.cos(xRotation) * (y1 - y2)) / 2.0;\n    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n    if (lambda > 1) {\n        rx *= Math.sqrt(lambda);\n        ry *= Math.sqrt(lambda);\n    }\n    var diff = rx * rx * (yp * yp) + ry * ry * (xp * xp);\n    var f = diff ? Math.sqrt((rx * rx * (ry * ry) - diff) / diff) : 1;\n    if (arcFlag === sweepFlag) {\n        f *= -1;\n    }\n    if (isNaN(f)) {\n        f = 0;\n    }\n    // 旋转前的起点坐标，且当长半轴和短半轴的长度为 0 时，坐标按 (0, 0) 处理\n    var cxp = ry ? (f * rx * yp) / ry : 0;\n    var cyp = rx ? (f * -ry * xp) / rx : 0;\n    // 椭圆圆心坐标\n    var cx = (x1 + x2) / 2.0 + Math.cos(xRotation) * cxp - Math.sin(xRotation) * cyp;\n    var cy = (y1 + y2) / 2.0 + Math.sin(xRotation) * cxp + Math.cos(xRotation) * cyp;\n    // 起始点的单位向量\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    // 终止点的单位向量\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    // 计算起始点和圆心的连线，与 x 轴正方向的夹角\n    var theta = vAngle([1, 0], u);\n    // 计算圆弧起始点和终止点与椭圆圆心连线的夹角\n    var dTheta = vAngle(u, v);\n    if (vRatio(u, v) <= -1) {\n        dTheta = Math.PI;\n    }\n    if (vRatio(u, v) >= 1) {\n        dTheta = 0;\n    }\n    if (sweepFlag === 0 && dTheta > 0) {\n        dTheta = dTheta - 2 * Math.PI;\n    }\n    if (sweepFlag === 1 && dTheta < 0) {\n        dTheta = dTheta + 2 * Math.PI;\n    }\n    return {\n        cx: cx,\n        cy: cy,\n        // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理\n        rx: util_1.isSamePoint(startPoint, [x2, y2]) ? 0 : rx,\n        ry: util_1.isSamePoint(startPoint, [x2, y2]) ? 0 : ry,\n        startAngle: theta,\n        endAngle: theta + dTheta,\n        xRotation: xRotation,\n        arcFlag: arcFlag,\n        sweepFlag: sweepFlag,\n    };\n}\nexports.default = getArcParams;\n//# sourceMappingURL=arc-params.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar g2_1 = require(\"@antv/g2\");\r\nvar dom = document.createElement('div');\r\ndocument.body.appendChild(dom);\r\ndom.id = \"container\";\r\ndom.style.padding = '20px';\r\nvar data = [\r\n    { year: '1991', value: 3 },\r\n    { year: '1992', value: 4 },\r\n    { year: '1993', value: 3.5 },\r\n    { year: '1994', value: 5 },\r\n    { year: '1995', value: 4.9 },\r\n    { year: '1996', value: 6 },\r\n    { year: '1997', value: 7 },\r\n    { year: '1998', value: 9 },\r\n    { year: '1999', value: 13 },\r\n];\r\nvar chart = new g2_1.Chart({\r\n    container: 'container',\r\n    autoFit: true,\r\n    height: 500,\r\n    theme: 'dark'\r\n});\r\nchart.data(data);\r\nchart.scale({\r\n    year: {\r\n        range: [0, 1],\r\n    },\r\n    value: {\r\n        min: 0,\r\n        nice: true,\r\n    },\r\n});\r\nchart.tooltip({\r\n    showCrosshairs: true,\r\n    shared: true,\r\n});\r\nchart.line().position('year*value').label('value');\r\nchart.point().position('year*value');\r\nchart.render();\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getMethod = exports.register = void 0;\nvar cache = new Map();\n/**\n * 注册计算包围盒的算法\n * @param type 方法名\n * @param method 方法\n */\nfunction register(type, method) {\n    cache.set(type, method);\n}\nexports.register = register;\n/**\n * 获取计算包围盒的算法\n * @param type 方法名\n */\nfunction getMethod(type) {\n    return cache.get(type);\n}\nexports.getMethod = getMethod;\n//# sourceMappingURL=register.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var x = attrs.x, y = attrs.y, width = attrs.width, height = attrs.height;\n    return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=rect.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction default_1(shape) {\n    var _a = shape.attr(), x = _a.x, y = _a.y, r = _a.r;\n    return {\n        x: x - r,\n        y: y - r,\n        width: r * 2,\n        height: r * 2,\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=circle.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@antv/g-math/lib/util\");\nvar util_2 = require(\"./util\");\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var points = attrs.points;\n    var xArr = [];\n    var yArr = [];\n    for (var i = 0; i < points.length; i++) {\n        var point = points[i];\n        xArr.push(point[0]);\n        yArr.push(point[1]);\n    }\n    var _a = util_1.getBBoxByArray(xArr, yArr), x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n    var bbox = {\n        minX: x,\n        minY: y,\n        maxX: x + width,\n        maxY: y + height,\n    };\n    bbox = util_2.mergeArrowBBox(shape, bbox);\n    return {\n        x: bbox.minX,\n        y: bbox.minY,\n        width: bbox.maxX - bbox.minX,\n        height: bbox.maxY - bbox.minY,\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=polyline.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"@antv/g-math/lib/util\");\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var points = attrs.points;\n    var xArr = [];\n    var yArr = [];\n    for (var i = 0; i < points.length; i++) {\n        var point = points[i];\n        xArr.push(point[0]);\n        yArr.push(point[1]);\n    }\n    return util_1.getBBoxByArray(xArr, yArr);\n}\nexports.default = default_1;\n//# sourceMappingURL=polygon.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar text_1 = require(\"../util/text\");\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var x = attrs.x, y = attrs.y, text = attrs.text, fontSize = attrs.fontSize, lineHeight = attrs.lineHeight;\n    var font = attrs.font;\n    if (!font) {\n        // 如果未组装 font\n        font = text_1.assembleFont(attrs);\n    }\n    var width = text_1.getTextWidth(text, font);\n    var bbox;\n    if (!width) {\n        // 如果width不存在，四点共其实点\n        bbox = {\n            x: x,\n            y: y,\n            width: 0,\n            height: 0,\n        };\n    }\n    else {\n        var textAlign = attrs.textAlign, textBaseline = attrs.textBaseline;\n        var height = text_1.getTextHeight(text, fontSize, lineHeight); // attrs.height\n        // 默认左右对齐：left, 默认上下对齐 bottom\n        var point = {\n            x: x,\n            y: y - height,\n        };\n        if (textAlign) {\n            if (textAlign === 'end' || textAlign === 'right') {\n                point.x -= width;\n            }\n            else if (textAlign === 'center') {\n                point.x -= width / 2;\n            }\n        }\n        if (textBaseline) {\n            if (textBaseline === 'top') {\n                point.y += height;\n            }\n            else if (textBaseline === 'middle') {\n                point.y += height / 2;\n            }\n        }\n        bbox = {\n            x: point.x,\n            y: point.y,\n            width: width,\n            height: height,\n        };\n    }\n    return bbox;\n}\nexports.default = default_1;\n//# sourceMappingURL=text.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar quadratic_1 = require(\"@antv/g-math/lib/quadratic\");\nvar cubic_1 = require(\"@antv/g-math/lib/cubic\");\nvar arc_1 = require(\"@antv/g-math/lib/arc\");\nvar path_2_segments_1 = require(\"@antv/path-util/lib/path-2-segments\");\nvar is_number_equal_1 = require(\"@antv/util/lib/is-number-equal\");\nvar util_1 = require(\"./util\");\nfunction getPathBox(segments, lineWidth) {\n    var xArr = [];\n    var yArr = [];\n    var segmentsWithAngle = [];\n    for (var i = 0; i < segments.length; i++) {\n        var segment = segments[i];\n        var currentPoint = segment.currentPoint, params = segment.params, prePoint = segment.prePoint;\n        var box = void 0;\n        switch (segment.command) {\n            case 'Q':\n                box = quadratic_1.default.box(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4]);\n                break;\n            case 'C':\n                box = cubic_1.default.box(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], params[5], params[6]);\n                break;\n            case 'A':\n                var arcParams = segment.arcParams;\n                box = arc_1.default.box(arcParams.cx, arcParams.cy, arcParams.rx, arcParams.ry, arcParams.xRotation, arcParams.startAngle, arcParams.endAngle);\n                break;\n            default:\n                xArr.push(currentPoint[0]);\n                yArr.push(currentPoint[1]);\n                break;\n        }\n        if (box) {\n            segment.box = box;\n            xArr.push(box.x, box.x + box.width);\n            yArr.push(box.y, box.y + box.height);\n        }\n        if (lineWidth && (segment.command === 'L' || segment.command === 'M') && segment.prePoint && segment.nextPoint) {\n            segmentsWithAngle.push(segment);\n        }\n    }\n    // bbox calculation should ignore NaN for path attribute\n    // ref: https://github.com/antvis/g/issues/210\n    xArr = xArr.filter(function (item) { return !Number.isNaN(item); });\n    yArr = yArr.filter(function (item) { return !Number.isNaN(item); });\n    var minX = Math.min.apply(null, xArr);\n    var minY = Math.min.apply(null, yArr);\n    var maxX = Math.max.apply(null, xArr);\n    var maxY = Math.max.apply(null, yArr);\n    if (segmentsWithAngle.length === 0) {\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    for (var i = 0; i < segmentsWithAngle.length; i++) {\n        var segment = segmentsWithAngle[i];\n        var currentPoint = segment.currentPoint;\n        var extra = void 0;\n        if (currentPoint[0] === minX) {\n            extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n            minX = minX - extra.xExtra;\n        }\n        else if (currentPoint[0] === maxX) {\n            extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n            maxX = maxX + extra.xExtra;\n        }\n        if (currentPoint[1] === minY) {\n            extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n            minY = minY - extra.yExtra;\n        }\n        else if (currentPoint[1] === maxY) {\n            extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n            maxY = maxY + extra.yExtra;\n        }\n    }\n    return {\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY,\n    };\n}\nfunction getExtraFromSegmentWithAngle(segment, lineWidth) {\n    var prePoint = segment.prePoint, currentPoint = segment.currentPoint, nextPoint = segment.nextPoint;\n    var currentAndPre = Math.pow(currentPoint[0] - prePoint[0], 2) + Math.pow(currentPoint[1] - prePoint[1], 2);\n    var currentAndNext = Math.pow(currentPoint[0] - nextPoint[0], 2) + Math.pow(currentPoint[1] - nextPoint[1], 2);\n    var preAndNext = Math.pow(prePoint[0] - nextPoint[0], 2) + Math.pow(prePoint[1] - nextPoint[1], 2);\n    // 以 currentPoint 为顶点的夹角\n    var currentAngle = Math.acos((currentAndPre + currentAndNext - preAndNext) / (2 * Math.sqrt(currentAndPre) * Math.sqrt(currentAndNext)));\n    // 夹角为空、 0 或 PI 时，不需要计算夹角处的额外宽度\n    // 注意: 由于计算精度问题，夹角为 0 的情况计算出来的角度可能是一个很小的值，还需要判断其与 0 是否近似相等\n    if (!currentAngle || Math.sin(currentAngle) === 0 || is_number_equal_1.default(currentAngle, 0)) {\n        return {\n            xExtra: 0,\n            yExtra: 0,\n        };\n    }\n    var xAngle = Math.abs(Math.atan2(nextPoint[1] - currentPoint[1], nextPoint[0] - currentPoint[0]));\n    var yAngle = Math.abs(Math.atan2(nextPoint[0] - currentPoint[0], nextPoint[1] - currentPoint[1]));\n    // 将夹角转为锐角\n    xAngle = xAngle > Math.PI / 2 ? Math.PI - xAngle : xAngle;\n    yAngle = yAngle > Math.PI / 2 ? Math.PI - yAngle : yAngle;\n    // 这里不考虑在水平和垂直方向的投影，直接使用最大差值\n    // 由于上层统一加减了二分之一线宽，这里需要进行弥补\n    var extra = {\n        // 水平方向投影\n        xExtra: Math.cos(currentAngle / 2 - xAngle) * ((lineWidth / 2) * (1 / Math.sin(currentAngle / 2))) - lineWidth / 2 || 0,\n        // 垂直方向投影\n        yExtra: Math.cos(yAngle - currentAngle / 2) * ((lineWidth / 2) * (1 / Math.sin(currentAngle / 2))) - lineWidth / 2 || 0,\n    };\n    return extra;\n}\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var path = attrs.path, stroke = attrs.stroke;\n    var lineWidth = stroke ? attrs.lineWidth : 0; // 只有有 stroke 时，lineWidth 才生效\n    var segments = shape.get('segments') || path_2_segments_1.default(path);\n    var _a = getPathBox(segments, lineWidth), x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n    var bbox = {\n        minX: x,\n        minY: y,\n        maxX: x + width,\n        maxY: y + height,\n    };\n    bbox = util_1.mergeArrowBBox(shape, bbox);\n    return {\n        x: bbox.minX,\n        y: bbox.minY,\n        width: bbox.maxX - bbox.minX,\n        height: bbox.maxY - bbox.minY,\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=path.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var x1 = attrs.x1, y1 = attrs.y1, x2 = attrs.x2, y2 = attrs.y2;\n    var minX = Math.min(x1, x2);\n    var maxX = Math.max(x1, x2);\n    var minY = Math.min(y1, y2);\n    var maxY = Math.max(y1, y2);\n    var bbox = {\n        minX: minX,\n        maxX: maxX,\n        minY: minY,\n        maxY: maxY,\n    };\n    bbox = util_1.mergeArrowBBox(shape, bbox);\n    return {\n        x: bbox.minX,\n        y: bbox.minY,\n        width: bbox.maxX - bbox.minX,\n        height: bbox.maxY - bbox.minY,\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=line.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction default_1(shape) {\n    var attrs = shape.attr();\n    var x = attrs.x, y = attrs.y, rx = attrs.rx, ry = attrs.ry;\n    return {\n        x: x - rx,\n        y: y - ry,\n        width: rx * 2,\n        height: ry * 2,\n    };\n}\nexports.default = default_1;\n//# sourceMappingURL=ellipse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isSamePoint = exports.mergeRegion = exports.intersectRect = exports.inBox = exports.distance = exports.getPixelRatio = void 0;\nfunction getPixelRatio() {\n    return window ? window.devicePixelRatio : 1;\n}\nexports.getPixelRatio = getPixelRatio;\n/**\n * 两点之间的距离\n * @param {number} x1 起始点 x\n * @param {number} y1 起始点 y\n * @param {number} x2 结束点 x\n * @param {number} y2 结束点 y\n */\nfunction distance(x1, y1, x2, y2) {\n    var dx = x1 - x2;\n    var dy = y1 - y2;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nexports.distance = distance;\n/**\n * 是否在包围盒内\n * @param {number} minX   包围盒开始的点 x\n * @param {number} minY   包围盒开始的点 y\n * @param {number} width  宽度\n * @param {number} height 高度\n * @param {[type]} x      检测点的 x\n * @param {[type]} y      监测点的 y\n */\nfunction inBox(minX, minY, width, height, x, y) {\n    return x >= minX && x <= minX + width && y >= minY && y <= minY + height;\n}\nexports.inBox = inBox;\nfunction intersectRect(box1, box2) {\n    return !(box2.minX > box1.maxX || box2.maxX < box1.minX || box2.minY > box1.maxY || box2.maxY < box1.minY);\n}\nexports.intersectRect = intersectRect;\n// 合并两个区域\nfunction mergeRegion(region1, region2) {\n    if (!region1 || !region2) {\n        return region1 || region2;\n    }\n    return {\n        minX: Math.min(region1.minX, region2.minX),\n        minY: Math.min(region1.minY, region2.minY),\n        maxX: Math.max(region1.maxX, region2.maxX),\n        maxY: Math.max(region1.maxY, region2.maxY),\n    };\n}\nexports.mergeRegion = mergeRegion;\n/**\n * 判断两个点是否重合，点坐标的格式为 [x, y]\n * @param {Array} point1 第一个点\n * @param {Array} point2 第二个点\n */\nfunction isSamePoint(point1, point2) {\n    return point1[0] === point2[0] && point1[1] === point2[1];\n}\nexports.isSamePoint = isSamePoint;\nvar is_nil_1 = require(\"@antv/util/lib/is-nil\");\nObject.defineProperty(exports, \"isNil\", { enumerable: true, get: function () { return is_nil_1.default; } });\nvar is_string_1 = require(\"@antv/util/lib/is-string\");\nObject.defineProperty(exports, \"isString\", { enumerable: true, get: function () { return is_string_1.default; } });\nvar is_function_1 = require(\"@antv/util/lib/is-function\");\nObject.defineProperty(exports, \"isFunction\", { enumerable: true, get: function () { return is_function_1.default; } });\nvar is_array_1 = require(\"@antv/util/lib/is-array\");\nObject.defineProperty(exports, \"isArray\", { enumerable: true, get: function () { return is_array_1.default; } });\nvar each_1 = require(\"@antv/util/lib/each\");\nObject.defineProperty(exports, \"each\", { enumerable: true, get: function () { return each_1.default; } });\nvar to_radian_1 = require(\"@antv/util/lib/to-radian\");\nObject.defineProperty(exports, \"toRadian\", { enumerable: true, get: function () { return to_radian_1.default; } });\nvar mod_1 = require(\"@antv/util/lib/mod\");\nObject.defineProperty(exports, \"mod\", { enumerable: true, get: function () { return mod_1.default; } });\nvar is_number_equal_1 = require(\"@antv/util/lib/is-number-equal\");\nObject.defineProperty(exports, \"isNumberEqual\", { enumerable: true, get: function () { return is_number_equal_1.default; } });\nvar request_animation_frame_1 = require(\"@antv/util/lib/request-animation-frame\");\nObject.defineProperty(exports, \"requestAnimationFrame\", { enumerable: true, get: function () { return request_animation_frame_1.default; } });\nvar clear_animation_frame_1 = require(\"@antv/util/lib/clear-animation-frame\");\nObject.defineProperty(exports, \"clearAnimationFrame\", { enumerable: true, get: function () { return clear_animation_frame_1.default; } });\n//# sourceMappingURL=util.js.map","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\n * view 中三层 group 分层 key\n */\nexport var LAYER;\n(function (LAYER) {\n    /** 前景层 */\n    LAYER[\"FORE\"] = \"fore\";\n    /** 中间层 */\n    LAYER[\"MID\"] = \"mid\";\n    /** 背景层 */\n    LAYER[\"BG\"] = \"bg\";\n})(LAYER || (LAYER = {}));\n/**\n * 组件在画布的布局方位 12 方位\n */\nexport var DIRECTION;\n(function (DIRECTION) {\n    DIRECTION[\"TOP\"] = \"top\";\n    DIRECTION[\"TOP_LEFT\"] = \"top-left\";\n    DIRECTION[\"TOP_RIGHT\"] = \"top-right\";\n    DIRECTION[\"RIGHT\"] = \"right\";\n    DIRECTION[\"RIGHT_TOP\"] = \"right-top\";\n    DIRECTION[\"RIGHT_BOTTOM\"] = \"right-bottom\";\n    DIRECTION[\"LEFT\"] = \"left\";\n    DIRECTION[\"LEFT_TOP\"] = \"left-top\";\n    DIRECTION[\"LEFT_BOTTOM\"] = \"left-bottom\";\n    DIRECTION[\"BOTTOM\"] = \"bottom\";\n    DIRECTION[\"BOTTOM_LEFT\"] = \"bottom-left\";\n    DIRECTION[\"BOTTOM_RIGHT\"] = \"bottom-right\";\n    DIRECTION[\"RADIUS\"] = \"radius\";\n    DIRECTION[\"CIRCLE\"] = \"circle\";\n    // no direction information\n    DIRECTION[\"NONE\"] = \"none\";\n})(DIRECTION || (DIRECTION = {}));\n/**\n * 组件的类型，可能会影响到布局算法\n */\nexport var COMPONENT_TYPE;\n(function (COMPONENT_TYPE) {\n    /** axis 组件 */\n    COMPONENT_TYPE[\"AXIS\"] = \"axis\";\n    /** grid 组件 */\n    COMPONENT_TYPE[\"GRID\"] = \"grid\";\n    /** legend 组件 */\n    COMPONENT_TYPE[\"LEGEND\"] = \"legend\";\n    /** tooltip 组件 */\n    COMPONENT_TYPE[\"TOOLTIP\"] = \"tooltip\";\n    /** annotation 组件 */\n    COMPONENT_TYPE[\"ANNOTATION\"] = \"annotation\";\n    /** 缩略轴组件 */\n    COMPONENT_TYPE[\"SLIDER\"] = \"slider\";\n    /** 滚动条组件 */\n    COMPONENT_TYPE[\"SCROLLBAR\"] = \"scrollbar\";\n    /** 其他组件，自定义组件 */\n    COMPONENT_TYPE[\"OTHER\"] = \"other\";\n})(COMPONENT_TYPE || (COMPONENT_TYPE = {}));\n/**\n * 三层 group 的 z index\n */\nexport var GROUP_Z_INDEX = {\n    FORE: 3,\n    MID: 2,\n    BG: 1,\n};\n/**\n * View 的生命周期阶段（和 3.x 的生命周期略有不同）\n * 我们需要先确定在那写场景需要用到生命周期，如果只是为了在生命周期插入一下什么组件之类的，那么在现有架构就是不需要的\n */\nexport var VIEW_LIFE_CIRCLE;\n(function (VIEW_LIFE_CIRCLE) {\n    VIEW_LIFE_CIRCLE[\"BEFORE_RENDER\"] = \"beforerender\";\n    VIEW_LIFE_CIRCLE[\"AFTER_RENDER\"] = \"afterrender\";\n    VIEW_LIFE_CIRCLE[\"BEFORE_PAINT\"] = \"beforepaint\";\n    VIEW_LIFE_CIRCLE[\"AFTER_PAINT\"] = \"afterpaint\";\n    VIEW_LIFE_CIRCLE[\"BEFORE_CHANGE_DATA\"] = \"beforechangedata\";\n    VIEW_LIFE_CIRCLE[\"AFTER_CHANGE_DATA\"] = \"afterchangedata\";\n    VIEW_LIFE_CIRCLE[\"BEFORE_CLEAR\"] = \"beforeclear\";\n    VIEW_LIFE_CIRCLE[\"AFTER_CLEAR\"] = \"afterclear\";\n    VIEW_LIFE_CIRCLE[\"BEFORE_DESTROY\"] = \"beforedestroy\";\n    VIEW_LIFE_CIRCLE[\"BEFORE_CHANGE_SIZE\"] = \"beforechangesize\";\n    VIEW_LIFE_CIRCLE[\"AFTER_CHANGE_SIZE\"] = \"afterchangesize\";\n})(VIEW_LIFE_CIRCLE || (VIEW_LIFE_CIRCLE = {}));\n/**\n * geometry 的生命周期\n */\nexport var GEOMETRY_LIFE_CIRCLE;\n(function (GEOMETRY_LIFE_CIRCLE) {\n    GEOMETRY_LIFE_CIRCLE[\"BEFORE_DRAW_ANIMATE\"] = \"beforeanimate\";\n    GEOMETRY_LIFE_CIRCLE[\"AFTER_DRAW_ANIMATE\"] = \"afteranimate\";\n})(GEOMETRY_LIFE_CIRCLE || (GEOMETRY_LIFE_CIRCLE = {}));\n/**\n * 绘图区的事件列表\n */\nexport var PLOT_EVENTS;\n(function (PLOT_EVENTS) {\n    // mouse 事件\n    PLOT_EVENTS[\"MOUSE_ENTER\"] = \"plot:mouseenter\";\n    PLOT_EVENTS[\"MOUSE_DOWN\"] = \"plot:mousedown\";\n    PLOT_EVENTS[\"MOUSE_MOVE\"] = \"plot:mousemove\";\n    PLOT_EVENTS[\"MOUSE_UP\"] = \"plot:mouseup\";\n    PLOT_EVENTS[\"MOUSE_LEAVE\"] = \"plot:mouseleave\";\n    // 移动端事件\n    PLOT_EVENTS[\"TOUCH_START\"] = \"plot:touchstart\";\n    PLOT_EVENTS[\"TOUCH_MOVE\"] = \"plot:touchmove\";\n    PLOT_EVENTS[\"TOUCH_END\"] = \"plot:touchend\";\n    PLOT_EVENTS[\"TOUCH_CANCEL\"] = \"plot:touchcancel\";\n    // click 事件\n    PLOT_EVENTS[\"CLICK\"] = \"plot:click\";\n    PLOT_EVENTS[\"DBLCLICK\"] = \"plot:dblclick\";\n    PLOT_EVENTS[\"CONTEXTMENU\"] = \"plot:contextmenu\";\n    PLOT_EVENTS[\"LEAVE\"] = \"plot:leave\";\n    PLOT_EVENTS[\"ENTER\"] = \"plot:enter\";\n})(PLOT_EVENTS || (PLOT_EVENTS = {}));\n/**\n * Element 图形交互状态\n */\nexport var ELEMENT_STATE;\n(function (ELEMENT_STATE) {\n    ELEMENT_STATE[\"ACTIVE\"] = \"active\";\n    ELEMENT_STATE[\"INACTIVE\"] = \"inactive\";\n    ELEMENT_STATE[\"SELECTED\"] = \"selected\";\n    ELEMENT_STATE[\"DEFAULT\"] = \"default\";\n})(ELEMENT_STATE || (ELEMENT_STATE = {}));\n/** 参与分组的图形属性名 */\nexport var GROUP_ATTRS = ['color', 'shape', 'size'];\n/** 存储原始数据的字段名 */\nexport var FIELD_ORIGIN = '_origin';\n/** 最小的图表宽度 */\nexport var MIN_CHART_WIDTH = 1;\n/** 最小的图表高度 */\nexport var MIN_CHART_HEIGHT = 1;\n/** 辅助组件占图表的尺寸的最大比例：如图表上方的图例最多占图表高度的25% */\nexport var COMPONENT_MAX_VIEW_PERCENTAGE = 0.25;\n//# sourceMappingURL=constant.js.map","var ENGINES = {};\n/**\n * 通过名字获取渲染 engine\n * @param name 渲染引擎名字\n * @returns G engine\n */\nexport function getEngine(name) {\n    var G = ENGINES[name];\n    if (!G) {\n        throw new Error(\"G engine '\" + name + \"' is not exist, please register it at first.\");\n    }\n    return G;\n}\n/**\n * 注册渲染引擎\n * @param name\n * @param engine\n */\nexport function registerEngine(name, engine) {\n    ENGINES[name] = engine;\n}\n//# sourceMappingURL=index.js.map","import { MIN_CHART_HEIGHT, MIN_CHART_WIDTH } from '../constant';\n/**\n * get the element's bounding size\n * @param ele dom element\n * @returns the element width and height\n */\nfunction getElementSize(ele) {\n    var style = getComputedStyle(ele);\n    return {\n        width: (ele.clientWidth || parseInt(style.width, 10)) -\n            parseInt(style.paddingLeft, 10) -\n            parseInt(style.paddingRight, 10),\n        height: (ele.clientHeight || parseInt(style.height, 10)) -\n            parseInt(style.paddingTop, 10) -\n            parseInt(style.paddingBottom, 10),\n    };\n}\n/**\n * is value a valid number\n * @param v the input value\n * @returns whether it is a number\n */\nfunction isNumber(v) {\n    return typeof v === 'number' && !isNaN(v);\n}\n/**\n * @ignore\n * calculate the chart size\n * @param ele DOM element\n * @param autoFit should auto fit\n * @param width chart width which is set by user\n * @param height chart height which is set by user\n * @returns the chart width and height\n */\nexport function getChartSize(ele, autoFit, width, height) {\n    var w = width;\n    var h = height;\n    if (autoFit) {\n        var size = getElementSize(ele);\n        w = size.width ? size.width : w;\n        h = size.height ? size.height : h;\n    }\n    return {\n        width: Math.max(isNumber(w) ? w : MIN_CHART_WIDTH, MIN_CHART_WIDTH),\n        height: Math.max(isNumber(h) ? h : MIN_CHART_HEIGHT, MIN_CHART_HEIGHT),\n    };\n}\n/**\n * @ignore\n * remove html element from its parent\n * @param dom\n */\nexport function removeDom(dom) {\n    var parent = dom.parentNode;\n    if (parent) {\n        parent.removeChild(dom);\n    }\n}\n/** @ignore */\nexport { createDom, modifyCSS } from '@antv/dom-util';\n//# sourceMappingURL=dom.js.map","import { __extends } from \"tslib\";\nimport EE from '@antv/event-emitter';\n/**\n * G2 Chart、View、Geometry 以及 Element 等的基类，提供事件以及一些通用的方法。\n */\nvar Base = /** @class */ (function (_super) {\n    __extends(Base, _super);\n    function Base(cfg) {\n        var _this = _super.call(this) || this;\n        /** 标识对象是否已销毁 */\n        _this.destroyed = false;\n        var _a = cfg.visible, visible = _a === void 0 ? true : _a;\n        _this.visible = visible;\n        return _this;\n    }\n    /**\n     * 显示。\n     */\n    Base.prototype.show = function () {\n        var visible = this.visible;\n        if (!visible) {\n            this.changeVisible(true);\n        }\n    };\n    /**\n     * 隐藏。\n     */\n    Base.prototype.hide = function () {\n        var visible = this.visible;\n        if (visible) {\n            this.changeVisible(false);\n        }\n    };\n    /**\n     * 销毁。\n     */\n    Base.prototype.destroy = function () {\n        this.off();\n        this.destroyed = true;\n    };\n    /**\n     * 显示或者隐藏。\n     * @param visible\n     * @returns\n     */\n    Base.prototype.changeVisible = function (visible) {\n        if (this.visible === visible) {\n            return;\n        }\n        this.visible = visible;\n    };\n    return Base;\n}(EE));\nexport default Base;\n//# sourceMappingURL=base.js.map","import { ext, vec2, vec3 } from '@antv/matrix-util';\nvar identityMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\nexport function getMatrixByAngle(point, angle, matrix) {\n    if (matrix === void 0) { matrix = identityMatrix; }\n    if (!angle) {\n        // 角度为 0 或者 null 时返回 null\n        return null;\n    }\n    var m = ext.transform(matrix, [\n        ['t', -point.x, -point.y],\n        ['r', angle],\n        ['t', point.x, point.y],\n    ]);\n    return m;\n}\nexport function getMatrixByTranslate(point, currentMatrix) {\n    if (!point.x && !point.y) {\n        // 0，0 或者 nan 的情况下返回 null\n        return null;\n    }\n    return ext.transform(currentMatrix || identityMatrix, [['t', point.x, point.y]]);\n}\n// 从矩阵获取旋转的角度\nexport function getAngleByMatrix(matrix) {\n    var xVector = [1, 0, 0];\n    var out = [0, 0, 0];\n    vec3.transformMat3(out, xVector, matrix);\n    return Math.atan2(out[1], out[0]);\n}\n// 矩阵 * 向量\nfunction multiplyVec2(matrix, v) {\n    var out = [0, 0];\n    vec2.transformMat3(out, v, matrix);\n    return out;\n}\nexport function applyMatrix2BBox(matrix, bbox) {\n    var topLeft = multiplyVec2(matrix, [bbox.minX, bbox.minY]);\n    var topRight = multiplyVec2(matrix, [bbox.maxX, bbox.minY]);\n    var bottomLeft = multiplyVec2(matrix, [bbox.minX, bbox.maxY]);\n    var bottomRight = multiplyVec2(matrix, [bbox.maxX, bbox.maxY]);\n    var minX = Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);\n    var maxX = Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);\n    var minY = Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]);\n    var maxY = Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]);\n    return {\n        x: minX,\n        y: minY,\n        minX: minX,\n        minY: minY,\n        maxX: maxX,\n        maxY: maxY,\n        width: maxX - minX,\n        height: maxY - minY,\n    };\n}\nexport function applyRotate(shape, rotate, x, y) {\n    if (rotate) {\n        var matrix = getMatrixByAngle({ x: x, y: y }, rotate, shape.getMatrix());\n        shape.setMatrix(matrix);\n    }\n}\nexport function applyTranslate(shape, x, y) {\n    var translateMatrix = getMatrixByTranslate({ x: x, y: y });\n    shape.attr('matrix', translateMatrix);\n}\n//# sourceMappingURL=matrix.js.map","import { each, isArray, isNil, isNumber } from '@antv/util';\nexport function formatPadding(padding) {\n    var top = 0;\n    var left = 0;\n    var right = 0;\n    var bottom = 0;\n    if (isNumber(padding)) {\n        top = left = right = bottom = padding;\n    }\n    else if (isArray(padding)) {\n        top = padding[0];\n        right = !isNil(padding[1]) ? padding[1] : padding[0];\n        bottom = !isNil(padding[2]) ? padding[2] : padding[0];\n        left = !isNil(padding[3]) ? padding[3] : right;\n    }\n    return [top, right, bottom, left];\n}\nexport function clearDom(container) {\n    var children = container.childNodes;\n    var length = children.length;\n    for (var i = length - 1; i >= 0; i--) {\n        container.removeChild(children[i]);\n    }\n}\nexport function hasClass(elements, cName) {\n    return !!elements.className.match(new RegExp(\"(\\\\s|^)\" + cName + \"(\\\\s|$)\"));\n}\nexport function regionToBBox(region) {\n    var start = region.start, end = region.end;\n    var minX = Math.min(start.x, end.x);\n    var minY = Math.min(start.y, end.y);\n    var maxX = Math.max(start.x, end.x);\n    var maxY = Math.max(start.y, end.y);\n    return {\n        x: minX,\n        y: minY,\n        minX: minX,\n        minY: minY,\n        maxX: maxX,\n        maxY: maxY,\n        width: maxX - minX,\n        height: maxY - minY,\n    };\n}\nexport function pointsToBBox(points) {\n    var xs = points.map(function (point) { return point.x; });\n    var ys = points.map(function (point) { return point.y; });\n    var minX = Math.min.apply(Math, xs);\n    var minY = Math.min.apply(Math, ys);\n    var maxX = Math.max.apply(Math, xs);\n    var maxY = Math.max.apply(Math, ys);\n    return {\n        x: minX,\n        y: minY,\n        minX: minX,\n        minY: minY,\n        maxX: maxX,\n        maxY: maxY,\n        width: maxX - minX,\n        height: maxY - minY,\n    };\n}\nexport function createBBox(x, y, width, height) {\n    var maxX = x + width;\n    var maxY = y + height;\n    return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        minX: x,\n        minY: y,\n        // 非常奇葩的 js 特性\n        // Infinity + Infinity = Infinity\n        // Infinity - Infinity = NaN\n        // fixed https://github.com/antvis/G2Plot/issues/1243\n        maxX: isNaN(maxX) ? 0 : maxX,\n        maxY: isNaN(maxY) ? 0 : maxY,\n    };\n}\nexport function getValueByPercent(min, max, percent) {\n    return (1 - percent) * min + max * percent;\n}\nexport function getCirclePoint(center, radius, angle) {\n    return {\n        x: center.x + Math.cos(angle) * radius,\n        y: center.y + Math.sin(angle) * radius,\n    };\n}\nexport function distance(p1, p2) {\n    var dx = p2.x - p1.x;\n    var dy = p2.y - p1.y;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nexport var wait = function (interval) {\n    return new Promise(function (resolve) {\n        setTimeout(resolve, interval);\n    });\n};\nexport var near = function (x, y) {\n    return [x, y].includes(Infinity) ? Math.abs(x) === Math.abs(y) : Math.abs(x - y) < Math.pow(Number.EPSILON, 0.5);\n};\nexport function intersectBBox(box1, box2) {\n    var minX = Math.max(box1.minX, box2.minX);\n    var minY = Math.max(box1.minY, box2.minY);\n    var maxX = Math.min(box1.maxX, box2.maxX);\n    var maxY = Math.min(box1.maxY, box2.maxY);\n    return createBBox(minX, minY, maxX - minX, maxY - minY);\n}\nexport function mergeBBox(box1, box2) {\n    var minX = Math.min(box1.minX, box2.minX);\n    var minY = Math.min(box1.minY, box2.minY);\n    var maxX = Math.max(box1.maxX, box2.maxX);\n    var maxY = Math.max(box1.maxY, box2.maxY);\n    return createBBox(minX, minY, maxX - minX, maxY - minY);\n}\nexport function getBBoxWithClip(element) {\n    var clipShape = element.getClip();\n    var clipBBox = clipShape && clipShape.getBBox();\n    var bbox;\n    if (!element.isGroup()) {\n        // 如果是普通的图形\n        bbox = element.getBBox();\n    }\n    else {\n        var minX_1 = Infinity;\n        var maxX_1 = -Infinity;\n        var minY_1 = Infinity;\n        var maxY_1 = -Infinity;\n        var children = element.getChildren();\n        if (children.length > 0) {\n            each(children, function (child) {\n                if (child.get('visible')) {\n                    // 如果分组没有子元素，则直接跳过\n                    if (child.isGroup() && child.get('children').length === 0) {\n                        return true;\n                    }\n                    var box = getBBoxWithClip(child);\n                    // 计算 4 个顶点\n                    var leftTop = child.applyToMatrix([box.minX, box.minY, 1]);\n                    var leftBottom = child.applyToMatrix([box.minX, box.maxY, 1]);\n                    var rightTop = child.applyToMatrix([box.maxX, box.minY, 1]);\n                    var rightBottom = child.applyToMatrix([box.maxX, box.maxY, 1]);\n                    // 从中取最小的范围\n                    var boxMinX = Math.min(leftTop[0], leftBottom[0], rightTop[0], rightBottom[0]);\n                    var boxMaxX = Math.max(leftTop[0], leftBottom[0], rightTop[0], rightBottom[0]);\n                    var boxMinY = Math.min(leftTop[1], leftBottom[1], rightTop[1], rightBottom[1]);\n                    var boxMaxY = Math.max(leftTop[1], leftBottom[1], rightTop[1], rightBottom[1]);\n                    if (boxMinX < minX_1) {\n                        minX_1 = boxMinX;\n                    }\n                    if (boxMaxX > maxX_1) {\n                        maxX_1 = boxMaxX;\n                    }\n                    if (boxMinY < minY_1) {\n                        minY_1 = boxMinY;\n                    }\n                    if (boxMaxY > maxY_1) {\n                        maxY_1 = boxMaxY;\n                    }\n                }\n            });\n        }\n        else {\n            minX_1 = 0;\n            maxX_1 = 0;\n            minY_1 = 0;\n            maxY_1 = 0;\n        }\n        bbox = createBBox(minX_1, minY_1, maxX_1 - minX_1, maxY_1 - minY_1);\n    }\n    if (clipBBox) {\n        return intersectBBox(bbox, clipBBox);\n    }\n    else {\n        return bbox;\n    }\n}\nexport function updateClip(element, newElement) {\n    if (!element.getClip() && !newElement.getClip()) {\n        // 两者都没有 clip\n        return;\n    }\n    var newClipShape = newElement.getClip();\n    if (!newClipShape) {\n        // 新的 element 没有 clip\n        element.setClip(null); // 移除 clip\n        return;\n    }\n    var clipCfg = {\n        type: newClipShape.get('type'),\n        attrs: newClipShape.attr(),\n    };\n    element.setClip(clipCfg);\n}\nexport function toPx(number) {\n    return number + \"px\";\n}\nexport function getTextPoint(start, end, position, offset) {\n    var lineLength = distance(start, end);\n    var offsetPercent = offset / lineLength; // 计算间距同线的比例，用于计算最终的位置\n    var percent = 0;\n    if (position === 'start') {\n        percent = 0 - offsetPercent;\n    }\n    else if (position === 'end') {\n        percent = 1 + offsetPercent;\n    }\n    return {\n        x: getValueByPercent(start.x, end.x, percent),\n        y: getValueByPercent(start.y, end.y, percent),\n    };\n}\n//# sourceMappingURL=util.js.map","import { __assign, __extends } from \"tslib\";\nimport { Base } from '@antv/g-base';\nimport { deepMix, each, hasKey, isObject } from '@antv/util';\nvar LOCATION_FIELD_MAP = {\n    none: [],\n    point: ['x', 'y'],\n    region: ['start', 'end'],\n    points: ['points'],\n    circle: ['center', 'radius', 'startAngle', 'endAngle'],\n};\nvar Component = /** @class */ (function (_super) {\n    __extends(Component, _super);\n    function Component(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.initCfg();\n        return _this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    Component.prototype.getDefaultCfg = function () {\n        return {\n            id: '',\n            name: '',\n            type: '',\n            locationType: 'none',\n            offsetX: 0,\n            offsetY: 0,\n            animate: false,\n            capture: true,\n            updateAutoRender: false,\n            animateOption: {\n                appear: null,\n                update: {\n                    duration: 400,\n                    easing: 'easeQuadInOut',\n                },\n                enter: {\n                    duration: 400,\n                    easing: 'easeQuadInOut',\n                },\n                leave: {\n                    duration: 350,\n                    easing: 'easeQuadIn',\n                },\n            },\n            events: null,\n            defaultCfg: {},\n            visible: true,\n        };\n    };\n    /**\n     * 清理组件的内容，一般配合 render 使用\n     * @example\n     * axis.clear();\n     * axis.render();\n     */\n    Component.prototype.clear = function () { };\n    /**\n     * 更新组件\n     * @param {object} cfg 更新属性\n     */\n    Component.prototype.update = function (cfg) {\n        var _this = this;\n        var defaultCfg = this.get('defaultCfg');\n        each(cfg, function (value, name) {\n            var originCfg = _this.get(name);\n            var newCfg = value;\n            if (originCfg !== value) {\n                // 判断两者是否相等，主要是进行 null 的判定\n                if (isObject(value) && defaultCfg[name]) {\n                    // 新设置的属性与默认值进行合并\n                    newCfg = deepMix({}, defaultCfg[name], value);\n                }\n                _this.set(name, newCfg);\n            }\n        });\n        this.updateInner(cfg);\n        this.afterUpdate(cfg);\n    };\n    // 更新内部\n    Component.prototype.updateInner = function (cfg) {\n    };\n    Component.prototype.afterUpdate = function (cfg) {\n        // 更新时考虑显示、隐藏\n        if (hasKey(cfg, 'visible')) {\n            if (cfg.visible) {\n                this.show();\n            }\n            else {\n                this.hide();\n            }\n        }\n        // 更新时考虑capture\n        if (hasKey(cfg, 'capture')) {\n            this.setCapture(cfg.capture);\n        }\n    };\n    Component.prototype.getLayoutBBox = function () {\n        return this.getBBox(); // 默认返回 getBBox，不同的组件内部单独实现\n    };\n    Component.prototype.getLocationType = function () {\n        return this.get('locationType');\n    };\n    Component.prototype.getOffset = function () {\n        return {\n            offsetX: this.get('offsetX'),\n            offsetY: this.get('offsetY'),\n        };\n    };\n    // 默认使用 update\n    Component.prototype.setOffset = function (offsetX, offsetY) {\n        this.update({\n            offsetX: offsetX,\n            offsetY: offsetY,\n        });\n    };\n    Component.prototype.setLocation = function (cfg) {\n        var location = __assign({}, cfg);\n        this.update(location);\n    };\n    // 实现 ILocation 接口的 getLocation\n    Component.prototype.getLocation = function () {\n        var _this = this;\n        var location = {};\n        var locationType = this.get('locationType');\n        var fields = LOCATION_FIELD_MAP[locationType];\n        each(fields, function (field) {\n            location[field] = _this.get(field);\n        });\n        return location;\n    };\n    Component.prototype.isList = function () {\n        return false;\n    };\n    Component.prototype.isSlider = function () {\n        return false;\n    };\n    /**\n     * @protected\n     * 初始化，用于具体的组件继承\n     */\n    Component.prototype.init = function () { };\n    // 将组件默认的配置项设置合并到传入的配置项\n    Component.prototype.initCfg = function () {\n        var _this = this;\n        var defaultCfg = this.get('defaultCfg');\n        each(defaultCfg, function (value, name) {\n            var cfg = _this.get(name);\n            if (isObject(cfg)) {\n                var newCfg = deepMix({}, value, cfg);\n                _this.set(name, newCfg);\n            }\n        });\n    };\n    return Component;\n}(Base));\nexport default Component;\n//# sourceMappingURL=component.js.map","import { __assign, __extends, __rest } from \"tslib\";\nimport { difference, each, isNil, keys, mix, pick } from '@antv/util';\nimport { propagationDelegate } from '../util/event';\nimport { applyMatrix2BBox, getMatrixByTranslate } from '../util/matrix';\nimport { getBBoxWithClip, updateClip } from '../util/util';\nimport Component from './component';\nvar STATUS_UPDATE = 'update_status';\nvar COPY_PROPERTIES = ['visible', 'tip', 'delegateObject']; // 更新对象时需要复制的属性\nvar COPY_PROPERTIES_EXCLUDES = ['container', 'group', 'shapesMap', 'isRegister', 'isUpdating', 'destroyed']; // 更新子组件时排除的属性\nvar GroupComponent = /** @class */ (function (_super) {\n    __extends(GroupComponent, _super);\n    function GroupComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupComponent.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { container: null, \n            /**\n             * @private\n             * 缓存图形的 Map\n             */\n            shapesMap: {}, group: null, capture: true, \n            /**\n             * @private 组件或者图形是否允许注册\n             * @type {false}\n             */\n            isRegister: false, \n            /**\n             * @private 是否正在更新\n             * @type {false}\n             */\n            isUpdating: false, \n            /**\n             * @private\n             * 是否初始状态，一旦 render，update 后，这个状态就变成 false, clear 后恢复\n             */\n            isInit: true });\n    };\n    GroupComponent.prototype.remove = function () {\n        this.clear();\n        var group = this.get('group');\n        group.remove();\n    };\n    GroupComponent.prototype.clear = function () {\n        var group = this.get('group');\n        group.clear();\n        this.set('shapesMap', {});\n        this.clearOffScreenCache();\n        this.set('isInit', true);\n    };\n    GroupComponent.prototype.getChildComponentById = function (id) {\n        var group = this.getElementById(id);\n        var inst = group && group.get('component');\n        return inst;\n    };\n    GroupComponent.prototype.getElementById = function (id) {\n        return this.get('shapesMap')[id];\n    };\n    GroupComponent.prototype.getElementByLocalId = function (localId) {\n        var id = this.getElementId(localId);\n        return this.getElementById(id);\n    };\n    GroupComponent.prototype.getElementsByName = function (name) {\n        var rst = [];\n        each(this.get('shapesMap'), function (elem) {\n            if (elem.get('name') === name) {\n                rst.push(elem);\n            }\n        });\n        return rst;\n    };\n    GroupComponent.prototype.getContainer = function () {\n        return this.get('container');\n    };\n    GroupComponent.prototype.updateInner = function (cfg) {\n        // this.updateInner();\n        // this.set('isUpdating', false);\n        this.offScreenRender();\n        if (this.get('updateAutoRender')) {\n            this.render();\n        }\n    };\n    GroupComponent.prototype.render = function () {\n        var offScreenGroup = this.get('offScreenGroup');\n        if (!offScreenGroup) {\n            offScreenGroup = this.offScreenRender();\n        }\n        var group = this.get('group');\n        this.updateElements(offScreenGroup, group);\n        this.deleteElements();\n        this.applyOffset();\n        if (!this.get('eventInitted')) {\n            this.initEvent();\n            this.set('eventInitted', true);\n        }\n        this.set('isInit', false);\n    };\n    GroupComponent.prototype.show = function () {\n        var group = this.get('group');\n        group.show();\n        this.set('visible', true);\n    };\n    GroupComponent.prototype.hide = function () {\n        var group = this.get('group');\n        group.hide();\n        this.set('visible', false);\n    };\n    GroupComponent.prototype.setCapture = function (capture) {\n        var group = this.get('group');\n        group.set('capture', capture);\n        this.set('capture', capture);\n    };\n    GroupComponent.prototype.destroy = function () {\n        this.removeEvent();\n        this.remove();\n        _super.prototype.destroy.call(this);\n    };\n    GroupComponent.prototype.getBBox = function () {\n        return this.get('group').getCanvasBBox();\n    };\n    GroupComponent.prototype.getLayoutBBox = function () {\n        var group = this.get('group');\n        // 防止被 clear 了，offScreenBBox 不存在\n        var bbox = this.getInnerLayoutBBox();\n        var matrix = group.getTotalMatrix();\n        if (matrix) {\n            bbox = applyMatrix2BBox(matrix, bbox);\n        }\n        return bbox; // 默认返回 getBBox，不同的组件内部单独实现\n    };\n    // 复写 on, off, emit 透传到 group\n    GroupComponent.prototype.on = function (evt, callback, once) {\n        var group = this.get('group');\n        group.on(evt, callback, once);\n        return this;\n    };\n    GroupComponent.prototype.off = function (evt, callback) {\n        var group = this.get('group');\n        group && group.off(evt, callback);\n        return this;\n    };\n    GroupComponent.prototype.emit = function (eventName, eventObject) {\n        var group = this.get('group');\n        group.emit(eventName, eventObject);\n    };\n    GroupComponent.prototype.init = function () {\n        _super.prototype.init.call(this);\n        if (!this.get('group')) {\n            this.initGroup();\n        }\n        this.offScreenRender(); // 绘制离屏 group\n    };\n    // 获取组件内部布局占的包围盒\n    GroupComponent.prototype.getInnerLayoutBBox = function () {\n        return this.get('offScreenBBox') || this.get('group').getBBox();\n    };\n    // 抛出委托对象\n    GroupComponent.prototype.delegateEmit = function (eventName, eventObject) {\n        var group = this.get('group');\n        eventObject.target = group;\n        group.emit(eventName, eventObject);\n        propagationDelegate(group, eventName, eventObject);\n    };\n    // 创建离屏的 group ,不添加在 canvas 中\n    GroupComponent.prototype.createOffScreenGroup = function () {\n        var group = this.get('group');\n        var GroupClass = group.getGroupBase(); // 获取分组的构造函数\n        var newGroup = new GroupClass({\n            delegateObject: this.getDelegateObject(),\n        });\n        return newGroup;\n    };\n    // 应用 offset\n    GroupComponent.prototype.applyOffset = function () {\n        var offsetX = this.get('offsetX');\n        var offsetY = this.get('offsetY');\n        this.moveElementTo(this.get('group'), {\n            x: offsetX,\n            y: offsetY,\n        });\n    };\n    GroupComponent.prototype.initGroup = function () {\n        var container = this.get('container');\n        this.set('group', container.addGroup({\n            id: this.get('id'),\n            name: this.get('name'),\n            capture: this.get('capture'),\n            visible: this.get('visible'),\n            isComponent: true,\n            component: this,\n            delegateObject: this.getDelegateObject(),\n        }));\n    };\n    // 离屏渲染\n    GroupComponent.prototype.offScreenRender = function () {\n        this.clearOffScreenCache();\n        var offScreenGroup = this.createOffScreenGroup();\n        this.renderInner(offScreenGroup);\n        this.set('offScreenGroup', offScreenGroup);\n        // 包含包围盒的 bbox\n        this.set('offScreenBBox', getBBoxWithClip(offScreenGroup));\n        return offScreenGroup;\n    };\n    /**\n     * @protected\n     * 在组件上添加分组，主要解决 isReigeter 的问题\n     * @param {IGroup} parent 父元素\n     * @param {object} cfg    分组的配置项\n     */\n    GroupComponent.prototype.addGroup = function (parent, cfg) {\n        this.appendDelegateObject(parent, cfg);\n        var group = parent.addGroup(cfg);\n        if (this.get('isRegister')) {\n            this.registerElement(group);\n        }\n        return group;\n    };\n    /**\n     * @protected\n     * 在组件上添加图形，主要解决 isReigeter 的问题\n     * @param {IGroup} parent 父元素\n     * @param {object} cfg    分组的配置项\n     */\n    GroupComponent.prototype.addShape = function (parent, cfg) {\n        this.appendDelegateObject(parent, cfg);\n        var shape = parent.addShape(cfg);\n        if (this.get('isRegister')) {\n            this.registerElement(shape);\n        }\n        return shape;\n    };\n    /**\n     * 在组件上添加子组件\n     *\n     * @param parent 父元素\n     * @param cfg 子组件配置项\n     */\n    GroupComponent.prototype.addComponent = function (parent, cfg) {\n        var id = cfg.id, Ctor = cfg.component, restCfg = __rest(cfg, [\"id\", \"component\"]);\n        // @ts-ignore\n        var inst = new Ctor(__assign(__assign({}, restCfg), { id: id, container: parent, updateAutoRender: this.get('updateAutoRender') }));\n        inst.init();\n        inst.render();\n        if (this.get('isRegister')) {\n            this.registerElement(inst.get('group'));\n        }\n        return inst;\n    };\n    GroupComponent.prototype.initEvent = function () { };\n    GroupComponent.prototype.removeEvent = function () {\n        var group = this.get('group');\n        group.off();\n    };\n    GroupComponent.prototype.getElementId = function (localId) {\n        var id = this.get('id'); // 组件的 Id\n        var name = this.get('name'); // 组件的名称\n        return id + \"-\" + name + \"-\" + localId;\n    };\n    GroupComponent.prototype.registerElement = function (element) {\n        var id = element.get('id');\n        this.get('shapesMap')[id] = element;\n    };\n    GroupComponent.prototype.unregisterElement = function (element) {\n        var id = element.get('id');\n        delete this.get('shapesMap')[id];\n    };\n    // 移动元素\n    GroupComponent.prototype.moveElementTo = function (element, point) {\n        var matrix = getMatrixByTranslate(point);\n        element.attr('matrix', matrix);\n    };\n    /**\n     * 图形元素新出现时的动画，默认图形从透明度 0 到当前透明度\n     * @protected\n     * @param {string} elmentName 图形元素名称\n     * @param {IElement} newElement  新的图形元素\n     * @param {object} animateCfg 动画的配置项\n     */\n    GroupComponent.prototype.addAnimation = function (elmentName, newElement, animateCfg) {\n        // 缓存透明度\n        var originOpacity = newElement.attr('opacity');\n        if (isNil(originOpacity)) {\n            originOpacity = 1;\n        }\n        newElement.attr('opacity', 0);\n        newElement.animate({ opacity: originOpacity }, animateCfg);\n    };\n    /**\n     * 图形元素新出现时的动画，默认图形从透明度 0 到当前透明度\n     * @protected\n     * @param {string} elmentName 图形元素名称\n     * @param {IElement} originElement 要删除的图形元素\n     * @param {object} animateCfg 动画的配置项\n     */\n    GroupComponent.prototype.removeAnimation = function (elementName, originElement, animateCfg) {\n        originElement.animate({ opacity: 0 }, animateCfg);\n    };\n    /**\n     * 图形元素的更新动画\n     * @param {string} elmentName 图形元素名称\n     * @param {IElement} originElement 现有的图形元素\n     * @param {object} newAttrs  新的图形元素\n     * @param {object} animateCfg 动画的配置项\n     */\n    GroupComponent.prototype.updateAnimation = function (elementName, originElement, newAttrs, animateCfg) {\n        originElement.animate(newAttrs, animateCfg);\n    };\n    // 更新组件的图形\n    GroupComponent.prototype.updateElements = function (newGroup, originGroup) {\n        var _this = this;\n        var animate = this.get('animate');\n        var animateOption = this.get('animateOption');\n        var children = newGroup.getChildren().slice(0); // 创建一个新数组，防止添加到 originGroup 时， children 变动\n        var preElement; // 前面已经匹配到的图形元素，用于\n        each(children, function (element) {\n            var elementId = element.get('id');\n            var originElement = _this.getElementById(elementId);\n            var elementName = element.get('name');\n            if (originElement) {\n                if (element.get('isComponent')) {\n                    // 嵌套子组件更新\n                    var childComponent = element.get('component');\n                    var origChildComponent = originElement.get('component');\n                    var newCfg = pick(childComponent.cfg, difference(keys(childComponent.cfg), COPY_PROPERTIES_EXCLUDES));\n                    origChildComponent.update(newCfg);\n                    originElement.set(STATUS_UPDATE, 'update');\n                }\n                else {\n                    var replaceAttrs = _this.getReplaceAttrs(originElement, element);\n                    // 更新\n                    if (animate && animateOption.update) {\n                        // 没有动画\n                        _this.updateAnimation(elementName, originElement, replaceAttrs, animateOption.update);\n                    }\n                    else {\n                        // originElement.attrs = replaceAttrs; // 直接替换\n                        originElement.attr(replaceAttrs);\n                    }\n                    // 如果是分组，则继续执行\n                    if (element.isGroup()) {\n                        _this.updateElements(element, originElement);\n                    }\n                    // 复制属性\n                    each(COPY_PROPERTIES, function (name) {\n                        originElement.set(name, element.get(name));\n                    });\n                    updateClip(originElement, element);\n                    preElement = originElement;\n                    // 执行完更新后设置状态位为更新\n                    originElement.set(STATUS_UPDATE, 'update');\n                }\n            }\n            else {\n                // 没有对应的图形，则插入当前图形\n                originGroup.add(element); // 应该在 group 加个 insertAt 的方法\n                var siblings = originGroup.getChildren(); // 兄弟节点\n                siblings.splice(siblings.length - 1, 1); // 先从数组中移除，然后放到合适的位置\n                if (preElement) {\n                    // 前面已经有更新的图形或者插入的图形，则在这个图形后面插入\n                    var index = siblings.indexOf(preElement);\n                    siblings.splice(index + 1, 0, element); // 在已经更新的图形元素后面插入\n                }\n                else {\n                    siblings.unshift(element);\n                }\n                _this.registerElement(element); // 注册节点\n                element.set(STATUS_UPDATE, 'add'); // 执行完更新后设置状态位为添加\n                if (element.get('isComponent')) {\n                    // 直接新增子组件container属性，实例不变\n                    var childComponent = element.get('component');\n                    childComponent.set('container', originGroup);\n                }\n                else if (element.isGroup()) {\n                    // 如果元素是新增加的元素，则遍历注册所有的子节点\n                    _this.registerNewGroup(element);\n                }\n                preElement = element;\n                if (animate) {\n                    var animateCfg = _this.get('isInit') ? animateOption.appear : animateOption.enter;\n                    if (animateCfg) {\n                        _this.addAnimation(elementName, element, animateCfg);\n                    }\n                }\n            }\n        });\n    };\n    GroupComponent.prototype.clearUpdateStatus = function (group) {\n        var children = group.getChildren();\n        each(children, function (el) {\n            el.set(STATUS_UPDATE, null); // 清理掉更新状态\n        });\n    };\n    // 清理离屏缓存\n    GroupComponent.prototype.clearOffScreenCache = function () {\n        var offScreenGroup = this.get('offScreenGroup');\n        if (offScreenGroup) {\n            // 销毁原先的离线 Group\n            offScreenGroup.destroy();\n        }\n        this.set('offScreenGroup', null);\n        this.set('offScreenBBox', null);\n    };\n    // private updateInner() {\n    //   const group = this.get('group');\n    //   const newGroup = this.createOffScreenGroup();\n    //   this.renderInner(newGroup);\n    //   this.applyOffset();\n    //   this.updateElements(newGroup, group);\n    //   this.deleteElements();\n    //   newGroup.destroy(); // 销毁虚拟分组\n    // }\n    // 获取发生委托时的对象，在事件中抛出\n    GroupComponent.prototype.getDelegateObject = function () {\n        var _a;\n        var name = this.get('name');\n        var delegateObject = (_a = {},\n            _a[name] = this,\n            _a.component = this,\n            _a);\n        return delegateObject;\n    };\n    // 附加委托信息，用于事件\n    GroupComponent.prototype.appendDelegateObject = function (parent, cfg) {\n        var parentObject = parent.get('delegateObject');\n        if (!cfg.delegateObject) {\n            cfg.delegateObject = {};\n        }\n        mix(cfg.delegateObject, parentObject); // 将父元素上的委托信息复制到自身\n    };\n    // 获取需要替换的属性，如果原先图形元素存在，而新图形不存在，则设置 undefined\n    GroupComponent.prototype.getReplaceAttrs = function (originElement, newElement) {\n        var originAttrs = originElement.attr();\n        var newAttrs = newElement.attr();\n        each(originAttrs, function (v, k) {\n            if (newAttrs[k] === undefined) {\n                newAttrs[k] = undefined;\n            }\n        });\n        return newAttrs;\n    };\n    GroupComponent.prototype.registerNewGroup = function (group) {\n        var _this = this;\n        var children = group.getChildren();\n        each(children, function (element) {\n            _this.registerElement(element); // 注册节点\n            element.set(STATUS_UPDATE, 'add'); // 执行完更新后设置状态位为添加\n            if (element.isGroup()) {\n                _this.registerNewGroup(element);\n            }\n        });\n    };\n    // 移除多余的元素\n    GroupComponent.prototype.deleteElements = function () {\n        var _this = this;\n        var shapesMap = this.get('shapesMap');\n        var deleteArray = [];\n        // 遍历获取需要删除的图形元素\n        each(shapesMap, function (element, id) {\n            if (!element.get(STATUS_UPDATE) || element.destroyed) {\n                deleteArray.push([id, element]);\n            }\n            else {\n                element.set(STATUS_UPDATE, null); // 清理掉更新状态\n            }\n        });\n        var animate = this.get('animate');\n        var animateOption = this.get('animateOption');\n        // 删除图形元素\n        each(deleteArray, function (item) {\n            var id = item[0], element = item[1];\n            if (!element.destroyed) {\n                var elementName = element.get('name');\n                if (animate && animateOption.leave) {\n                    // 需要动画结束时移除图形\n                    var callbackAnimCfg = mix({\n                        callback: function () {\n                            _this.removeElement(element);\n                        },\n                    }, animateOption.leave);\n                    _this.removeAnimation(elementName, element, callbackAnimCfg);\n                }\n                else {\n                    _this.removeElement(element);\n                }\n            }\n            delete shapesMap[id]; // 从缓存中移除\n        });\n    };\n    GroupComponent.prototype.removeElement = function (element) {\n        if (element.get('isGroup')) {\n            var component = element.get('component');\n            if (component) {\n                component.destroy();\n            }\n        }\n        element.remove();\n    };\n    return GroupComponent;\n}(Component));\nexport default GroupComponent;\n//# sourceMappingURL=group-component.js.map","import GraphEvent from '@antv/g-base/lib/event/graph-event';\n/**\n *\n * @param group 分组\n * @param eventName 事件名\n * @param eventObject 事件对象\n */\nexport function propagationDelegate(group, eventName, eventObject) {\n    var event = new GraphEvent(eventName, eventObject);\n    event.target = group;\n    event.propagationPath.push(group); // 从当前 group 开始触发 delegation\n    group.emitDelegation(eventName, event);\n    var parent = group.getParent();\n    // 执行冒泡\n    while (parent) {\n        // 委托事件要先触发\n        parent.emitDelegation(eventName, event);\n        event.propagationPath.push(parent);\n        parent = parent.getParent();\n    }\n}\n//# sourceMappingURL=event.js.map","var ELLIPSIS_CODE = '\\u2026';\n/** 获取字符串长度 */\nexport function strLen(str) {\n    var len = 0;\n    for (var i = 0; i < str.length; i++) {\n        len += charAtLength(str, i);\n    }\n    return len;\n}\n/** 是否属于ASCII编码范畴 */\nexport function charAtLength(str, i) {\n    if (str.charCodeAt(i) > 0 && str.charCodeAt(i) < 128) {\n        return 1;\n    }\n    else {\n        return 2;\n    }\n}\n/** 文本省略 */\nexport function ellipsisString(str, reseveLength, position) {\n    if (position === void 0) { position = 'tail'; }\n    var count = str.length;\n    var rst = '';\n    if (position === 'tail') {\n        for (var i = 0, index = 0; i < reseveLength;) {\n            var charLength = charAtLength(str, index);\n            if (i + charLength <= reseveLength) {\n                rst += str[index];\n                i += charAtLength(str, index);\n                index++;\n            }\n            else {\n                break;\n            }\n        }\n        rst += ELLIPSIS_CODE;\n    }\n    else if (position === 'head') {\n        for (var i = 0, index = count - 1; i < reseveLength;) {\n            var charLength = charAtLength(str, index);\n            if (i + charLength <= reseveLength) {\n                rst += str[index];\n                i += charAtLength(str, index);\n                index--;\n            }\n            else {\n                break;\n            }\n        }\n        rst = ELLIPSIS_CODE + rst;\n    }\n    else {\n        var startStr = '';\n        var endStr = '';\n        for (var i = 0, startIndex = 0, endIndex = count - 1; i < reseveLength;) {\n            var startCodeLen = charAtLength(str, startIndex);\n            var hasAdd = false; // 设置标志位，防止头尾都没有附加字符\n            if (startCodeLen + i <= reseveLength) {\n                startStr += str[startIndex];\n                startIndex++;\n                i += startCodeLen;\n                hasAdd = true;\n            }\n            var endCodeLen = charAtLength(str, endIndex);\n            if (endCodeLen + i <= reseveLength) {\n                endStr = str[endIndex] + endStr;\n                i += endCodeLen;\n                endIndex--;\n                hasAdd = true;\n            }\n            if (!hasAdd) {\n                // 如果都没有增加字符，说明都不适合则中断\n                break;\n            }\n        }\n        rst = startStr + ELLIPSIS_CODE + endStr;\n    }\n    return rst;\n}\n//# sourceMappingURL=text.js.map","import { each } from '@antv/util';\nimport { ellipsisString, strLen } from './text';\nvar ELLIPSIS_CODE = '\\u2026';\nvar ELLIPSIS_CODE_LENGTH = 2; // 省略号的长度\n/** 获取最长的 label */\nexport function getMaxLabelWidth(labels) {\n    var max = 0;\n    each(labels, function (label) {\n        var bbox = label.getBBox();\n        var width = bbox.width;\n        if (max < width) {\n            max = width;\n        }\n    });\n    return max;\n}\n/** 获取label长度 */\nexport function getLabelLength(isVertical, label) {\n    var bbox = label.getCanvasBBox();\n    return isVertical ? bbox.width : bbox.height;\n}\n/* label长度是否超过约束值 */\nexport function testLabel(label, limitLength) {\n    return label.getBBox().width < limitLength;\n}\n/** 处理 text shape 的自动省略 */\nexport function ellipsisLabel(isVertical, label, limitLength, position) {\n    if (position === void 0) { position = 'tail'; }\n    var text = label.attr('text');\n    var labelLength = getLabelLength(isVertical, label);\n    var codeLength = strLen(text);\n    var ellipsised = false;\n    if (limitLength < labelLength) {\n        var reseveLength = Math.floor((limitLength / labelLength) * codeLength) - ELLIPSIS_CODE_LENGTH; // 计算出来的应该保存的长度\n        var newText = void 0;\n        if (reseveLength >= 0) {\n            newText = ellipsisString(text, reseveLength, position);\n        }\n        else {\n            newText = ELLIPSIS_CODE;\n        }\n        if (newText) {\n            label.attr('text', newText);\n            ellipsised = true;\n        }\n    }\n    if (ellipsised) {\n        label.set('tip', text);\n    }\n    else {\n        label.set('tip', null);\n    }\n    return ellipsised;\n}\n//# sourceMappingURL=label.js.map","import { __assign } from \"tslib\";\nimport { get } from '@antv/util';\nimport { ellipsisLabel } from './label';\nimport { applyRotate, applyTranslate } from './matrix';\nimport { formatPadding } from './util';\nexport function renderTag(container, tagCfg) {\n    var x = tagCfg.x, y = tagCfg.y, content = tagCfg.content, style = tagCfg.style, id = tagCfg.id, name = tagCfg.name, rotate = tagCfg.rotate, maxLength = tagCfg.maxLength, autoEllipsis = tagCfg.autoEllipsis, isVertical = tagCfg.isVertical, ellipsisPosition = tagCfg.ellipsisPosition, background = tagCfg.background;\n    var tagGroup = container.addGroup({\n        id: id + \"-group\",\n        name: name + \"-group\",\n        attrs: {\n            x: x,\n            y: y,\n        }\n    });\n    // Text shape\n    var text = tagGroup.addShape({\n        type: 'text',\n        id: id,\n        name: name,\n        attrs: __assign({ x: 0, y: 0, text: content }, style),\n    });\n    // maxLength 应包含 background 中的 padding 值\n    var padding = formatPadding(get(background, 'padding', 0));\n    if (maxLength && autoEllipsis) {\n        var maxTextLength = maxLength - (padding[1] + padding[3]);\n        // 超出自动省略\n        ellipsisLabel(!isVertical, text, maxTextLength, ellipsisPosition);\n    }\n    if (background) {\n        // 渲染文本背景\n        var backgroundStyle = get(background, 'style', {});\n        var _a = text.getCanvasBBox(), minX = _a.minX, minY = _a.minY, width = _a.width, height = _a.height;\n        var tagBg = tagGroup.addShape('rect', {\n            id: id + \"-bg\",\n            name: id + \"-bg\",\n            attrs: __assign({ x: minX - padding[3], y: minY - padding[0], width: width + padding[1] + padding[3], height: height + padding[0] + padding[2] }, backgroundStyle),\n        });\n        tagBg.toBack();\n    }\n    applyTranslate(tagGroup, x, y);\n    applyRotate(tagGroup, rotate, x, y);\n}\n//# sourceMappingURL=graphic.js.map","export default {\n    fontFamily: \"\\n  \\\"-apple-system\\\", BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto,\\\"Helvetica Neue\\\",\\n  Helvetica, \\\"PingFang SC\\\", \\\"Hiragino Sans GB\\\", \\\"Microsoft YaHei\\\",\\n  SimSun, \\\"sans-serif\\\"\",\n    textColor: '#2C3542',\n    activeTextColor: '#333333',\n    uncheckedColor: '#D8D8D8',\n    lineColor: '#416180',\n    regionColor: '#CCD7EB',\n    verticalAxisRotate: -Math.PI / 4,\n    horizontalAxisRotate: Math.PI / 4,\n};\n//# sourceMappingURL=theme.js.map","import { __assign, __extends } from \"tslib\";\nimport { isNumber, isString } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { renderTag } from '../util/graphic';\nimport Theme from '../util/theme';\nimport { getValueByPercent } from '../util/util';\nvar LineAnnotation = /** @class */ (function (_super) {\n    __extends(LineAnnotation, _super);\n    function LineAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    LineAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'line', locationType: 'region', start: null, end: null, style: {}, text: null, defaultCfg: {\n                style: {\n                    fill: Theme.textColor,\n                    fontSize: 12,\n                    textAlign: 'center',\n                    textBaseline: 'bottom',\n                    fontFamily: Theme.fontFamily,\n                },\n                text: {\n                    position: 'center',\n                    autoRotate: true,\n                    content: null,\n                    offsetX: 0,\n                    offsetY: 0,\n                    style: {\n                        stroke: Theme.lineColor,\n                        lineWidth: 1,\n                    },\n                },\n            } });\n    };\n    LineAnnotation.prototype.renderInner = function (group) {\n        this.renderLine(group);\n        if (this.get('text')) {\n            this.renderLabel(group);\n        }\n    };\n    // 绘制线\n    LineAnnotation.prototype.renderLine = function (group) {\n        var start = this.get('start');\n        var end = this.get('end');\n        var style = this.get('style');\n        this.addShape(group, {\n            type: 'line',\n            id: this.getElementId('line'),\n            name: 'annotation-line',\n            attrs: __assign({ x1: start.x, y1: start.y, x2: end.x, y2: end.y }, style),\n        });\n    };\n    // 获取 label 的位置\n    LineAnnotation.prototype.getLabelPoint = function (start, end, position) {\n        var percent;\n        if (position === 'start') {\n            percent = 0;\n        }\n        else if (position === 'center') {\n            percent = 0.5;\n        }\n        else if (isString(position) && position.indexOf('%') !== -1) {\n            percent = parseInt(position, 10) / 100;\n        }\n        else if (isNumber(position)) {\n            percent = position;\n        }\n        else {\n            percent = 1;\n        }\n        if (percent > 1 || percent < 0) {\n            percent = 1;\n        }\n        return {\n            x: getValueByPercent(start.x, end.x, percent),\n            y: getValueByPercent(start.y, end.y, percent),\n        };\n    };\n    // 绘制 label\n    LineAnnotation.prototype.renderLabel = function (group) {\n        var text = this.get('text');\n        var start = this.get('start');\n        var end = this.get('end');\n        var position = text.position, content = text.content, style = text.style, offsetX = text.offsetX, offsetY = text.offsetY, autoRotate = text.autoRotate, maxLength = text.maxLength, autoEllipsis = text.autoEllipsis, ellipsisPosition = text.ellipsisPosition, background = text.background, _a = text.isVertical, isVertical = _a === void 0 ? false : _a;\n        var point = this.getLabelPoint(start, end, position);\n        var x = point.x + offsetX;\n        var y = point.y + offsetY;\n        var cfg = {\n            id: this.getElementId('line-text'),\n            name: 'annotation-line-text',\n            x: x,\n            y: y,\n            content: content,\n            style: style,\n            maxLength: maxLength,\n            autoEllipsis: autoEllipsis,\n            ellipsisPosition: ellipsisPosition,\n            background: background,\n            isVertical: isVertical,\n        };\n        // 如果自动旋转\n        if (autoRotate) {\n            var vector = [end.x - start.x, end.y - start.y];\n            cfg.rotate = Math.atan2(vector[1], vector[0]);\n        }\n        renderTag(group, cfg);\n    };\n    return LineAnnotation;\n}(GroupComponent));\nexport default LineAnnotation;\n//# sourceMappingURL=line.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { renderTag } from '../util/graphic';\nimport { applyRotate, applyTranslate } from '../util/matrix';\nimport Theme from '../util/theme';\nvar TextAnnotation = /** @class */ (function (_super) {\n    __extends(TextAnnotation, _super);\n    function TextAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    TextAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'text', locationType: 'point', x: 0, y: 0, content: '', rotate: null, style: {}, background: null, maxLength: null, autoEllipsis: true, isVertical: false, ellipsisPosition: 'tail', defaultCfg: {\n                style: {\n                    fill: Theme.textColor,\n                    fontSize: 12,\n                    textAlign: 'center',\n                    textBaseline: 'middle',\n                    fontFamily: Theme.fontFamily,\n                },\n            } });\n    };\n    // 复写 setLocation 方法，不需要重新创建 text\n    TextAnnotation.prototype.setLocation = function (location) {\n        this.set('x', location.x);\n        this.set('y', location.y);\n        this.resetLocation();\n    };\n    TextAnnotation.prototype.renderInner = function (group) {\n        var _a = this.getLocation(), x = _a.x, y = _a.y;\n        var content = this.get('content');\n        var style = this.get('style');\n        var id = this.getElementId('text');\n        var name = this.get('name') + \"-text\";\n        var maxLength = this.get('maxLength');\n        var autoEllipsis = this.get('autoEllipsis');\n        var isVertical = this.get('isVertical');\n        var ellipsisPosition = this.get('ellipsisPosition');\n        var background = this.get('background');\n        var rotate = this.get('rotate');\n        var cfg = {\n            id: id,\n            name: name,\n            x: x,\n            y: y,\n            content: content,\n            style: style,\n            maxLength: maxLength,\n            autoEllipsis: autoEllipsis,\n            isVertical: isVertical,\n            ellipsisPosition: ellipsisPosition,\n            background: background,\n            rotate: rotate,\n        };\n        renderTag(group, cfg);\n    };\n    TextAnnotation.prototype.resetLocation = function () {\n        var textGroup = this.getElementByLocalId('text-group');\n        if (textGroup) {\n            var _a = this.getLocation(), x = _a.x, y = _a.y;\n            var rotate = this.get('rotate');\n            applyTranslate(textGroup, x, y);\n            applyRotate(textGroup, rotate, x, y);\n        }\n    };\n    return TextAnnotation;\n}(GroupComponent));\nexport default TextAnnotation;\n//# sourceMappingURL=text.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { getCirclePoint } from '../util/util';\nvar ArcAnnotation = /** @class */ (function (_super) {\n    __extends(ArcAnnotation, _super);\n    function ArcAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    ArcAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'arc', locationType: 'circle', center: null, radius: 100, startAngle: -Math.PI / 2, endAngle: (Math.PI * 3) / 2, style: {\n                stroke: '#999',\n                lineWidth: 1,\n            } });\n    };\n    ArcAnnotation.prototype.renderInner = function (group) {\n        this.renderArc(group);\n    };\n    ArcAnnotation.prototype.getArcPath = function () {\n        var _a = this.getLocation(), center = _a.center, radius = _a.radius, startAngle = _a.startAngle, endAngle = _a.endAngle;\n        var startPoint = getCirclePoint(center, radius, startAngle);\n        var endPoint = getCirclePoint(center, radius, endAngle);\n        var largeFlag = endAngle - startAngle > Math.PI ? 1 : 0;\n        var path = [['M', startPoint.x, startPoint.y]];\n        if (endAngle - startAngle === Math.PI * 2) {\n            // 整个圆是分割成两个圆\n            var middlePoint = getCirclePoint(center, radius, startAngle + Math.PI);\n            path.push(['A', radius, radius, 0, largeFlag, 1, middlePoint.x, middlePoint.y]);\n            path.push(['A', radius, radius, 0, largeFlag, 1, endPoint.x, endPoint.y]);\n        }\n        else {\n            path.push(['A', radius, radius, 0, largeFlag, 1, endPoint.x, endPoint.y]);\n        }\n        return path;\n    };\n    // 绘制 arc\n    ArcAnnotation.prototype.renderArc = function (group) {\n        // 也可以 通过 get('center') 类似的方式逐个获取\n        var path = this.getArcPath();\n        var style = this.get('style');\n        this.addShape(group, {\n            type: 'path',\n            id: this.getElementId('arc'),\n            name: 'annotation-arc',\n            attrs: __assign({ path: path }, style),\n        });\n    };\n    return ArcAnnotation;\n}(GroupComponent));\nexport default ArcAnnotation;\n//# sourceMappingURL=arc.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport Theme from '../util/theme';\nimport { regionToBBox } from '../util/util';\nvar RegionAnnotation = /** @class */ (function (_super) {\n    __extends(RegionAnnotation, _super);\n    function RegionAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    RegionAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'region', locationType: 'region', start: null, end: null, style: {}, defaultCfg: {\n                style: {\n                    lineWidth: 0,\n                    fill: Theme.regionColor,\n                    opacity: 0.4,\n                },\n            } });\n    };\n    RegionAnnotation.prototype.renderInner = function (group) {\n        this.renderRegion(group);\n    };\n    RegionAnnotation.prototype.renderRegion = function (group) {\n        var start = this.get('start');\n        var end = this.get('end');\n        var style = this.get('style');\n        var bbox = regionToBBox({ start: start, end: end });\n        this.addShape(group, {\n            type: 'rect',\n            id: this.getElementId('region'),\n            name: 'annotation-region',\n            attrs: __assign({ x: bbox.x, y: bbox.y, width: bbox.width, height: bbox.height }, style),\n        });\n    };\n    return RegionAnnotation;\n}(GroupComponent));\nexport default RegionAnnotation;\n//# sourceMappingURL=region.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { regionToBBox } from '../util/util';\nvar ImageAnnotation = /** @class */ (function (_super) {\n    __extends(ImageAnnotation, _super);\n    function ImageAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    ImageAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'image', locationType: 'region', start: null, end: null, src: null, style: {} });\n    };\n    ImageAnnotation.prototype.renderInner = function (group) {\n        this.renderImage(group);\n    };\n    ImageAnnotation.prototype.getImageAttrs = function () {\n        var start = this.get('start');\n        var end = this.get('end');\n        var style = this.get('style');\n        var bbox = regionToBBox({ start: start, end: end });\n        var src = this.get('src');\n        return __assign({ x: bbox.x, y: bbox.y, img: src, width: bbox.width, height: bbox.height }, style);\n    };\n    // 绘制图片\n    ImageAnnotation.prototype.renderImage = function (group) {\n        this.addShape(group, {\n            type: 'image',\n            id: this.getElementId('image'),\n            name: 'annotation-image',\n            attrs: this.getImageAttrs(),\n        });\n    };\n    return ImageAnnotation;\n}(GroupComponent));\nexport default ImageAnnotation;\n//# sourceMappingURL=image.js.map","import { __assign, __extends, __rest } from \"tslib\";\nimport { get } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { renderTag } from '../util/graphic';\nimport { applyTranslate } from '../util/matrix';\nimport Theme from '../util/theme';\nvar DataMarkerAnnotation = /** @class */ (function (_super) {\n    __extends(DataMarkerAnnotation, _super);\n    function DataMarkerAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    DataMarkerAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'dataMarker', locationType: 'point', x: 0, y: 0, point: {}, line: {}, text: {}, direction: 'upward', autoAdjust: true, coordinateBBox: null, defaultCfg: {\n                point: {\n                    display: true,\n                    style: {\n                        r: 3,\n                        fill: '#FFFFFF',\n                        stroke: '#1890FF',\n                        lineWidth: 2,\n                    },\n                },\n                line: {\n                    display: true,\n                    length: 20,\n                    style: {\n                        stroke: Theme.lineColor,\n                        lineWidth: 1,\n                    },\n                },\n                text: {\n                    content: '',\n                    display: true,\n                    style: {\n                        fill: Theme.textColor,\n                        opacity: 0.65,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        fontFamily: Theme.fontFamily,\n                    },\n                },\n            } });\n    };\n    DataMarkerAnnotation.prototype.renderInner = function (group) {\n        if (get(this.get('line'), 'display')) {\n            this.renderLine(group);\n        }\n        if (get(this.get('text'), 'display')) {\n            this.renderText(group);\n        }\n        if (get(this.get('point'), 'display')) {\n            this.renderPoint(group);\n        }\n        if (this.get('autoAdjust')) {\n            this.autoAdjust(group);\n        }\n    };\n    DataMarkerAnnotation.prototype.applyOffset = function () {\n        this.moveElementTo(this.get('group'), {\n            x: this.get('x') + this.get('offsetX'),\n            y: this.get('y') + this.get('offsetY'),\n        });\n    };\n    DataMarkerAnnotation.prototype.renderPoint = function (group) {\n        var point = this.getShapeAttrs().point;\n        this.addShape(group, {\n            type: 'circle',\n            id: this.getElementId('point'),\n            name: 'annotation-point',\n            attrs: point,\n        });\n    };\n    DataMarkerAnnotation.prototype.renderLine = function (group) {\n        var line = this.getShapeAttrs().line;\n        this.addShape(group, {\n            type: 'path',\n            id: this.getElementId('line'),\n            name: 'annotation-line',\n            attrs: line,\n        });\n    };\n    DataMarkerAnnotation.prototype.renderText = function (group) {\n        var textAttrs = this.getShapeAttrs().text;\n        var x = textAttrs.x, y = textAttrs.y, text = textAttrs.text, style = __rest(textAttrs, [\"x\", \"y\", \"text\"]);\n        var _a = this.get('text'), background = _a.background, maxLength = _a.maxLength, autoEllipsis = _a.autoEllipsis, isVertival = _a.isVertival, ellipsisPosition = _a.ellipsisPosition;\n        var tagCfg = {\n            x: x,\n            y: y,\n            id: this.getElementId('text'),\n            name: 'annotation-text',\n            content: text,\n            style: style,\n            background: background,\n            maxLength: maxLength,\n            autoEllipsis: autoEllipsis,\n            isVertival: isVertival,\n            ellipsisPosition: ellipsisPosition,\n        };\n        renderTag(group, tagCfg);\n    };\n    DataMarkerAnnotation.prototype.autoAdjust = function (group) {\n        var direction = this.get('direction');\n        var x = this.get('x');\n        var y = this.get('y');\n        var lineLength = get(this.get('line'), 'length', 0);\n        var coordinateBBox = this.get('coordinateBBox');\n        var _a = group.getBBox(), minX = _a.minX, maxX = _a.maxX, minY = _a.minY, maxY = _a.maxY;\n        var textGroup = group.findById(this.getElementId('text-group'));\n        var textShape = group.findById(this.getElementId('text'));\n        var lineShape = group.findById(this.getElementId('line'));\n        if (!coordinateBBox) {\n            return;\n        }\n        if (textGroup) {\n            if (x + minX <= coordinateBBox.minX) {\n                // 左侧超出\n                var overflow = coordinateBBox.minX - (x + minX);\n                applyTranslate(textGroup, textGroup.attr('x') + overflow, textGroup.attr('y'));\n            }\n            if (x + maxX >= coordinateBBox.maxX) {\n                // 右侧超出\n                var overflow = x + maxX - coordinateBBox.maxX;\n                applyTranslate(textGroup, textGroup.attr('x') - overflow, textGroup.attr('y'));\n            }\n        }\n        if ((direction === 'upward' && y + minY <= coordinateBBox.minY) ||\n            (direction !== 'upward' && y + maxY >= coordinateBBox.maxY)) {\n            // 上方或者下方超出\n            var textBaseline = void 0;\n            var factor = void 0;\n            if (direction === 'upward' && y + minY <= coordinateBBox.minY) {\n                textBaseline = 'top';\n                factor = 1;\n            }\n            else {\n                textBaseline = 'bottom';\n                factor = -1;\n            }\n            textShape.attr('textBaseline', textBaseline);\n            if (lineShape) {\n                lineShape.attr('path', [\n                    ['M', 0, 0],\n                    ['L', 0, lineLength * factor],\n                ]);\n            }\n            applyTranslate(textGroup, textGroup.attr('x'), (lineLength + 2) * factor);\n        }\n    };\n    DataMarkerAnnotation.prototype.getShapeAttrs = function () {\n        var lineDisplay = get(this.get('line'), 'display');\n        var pointStyle = get(this.get('point'), 'style', {});\n        var lineStyle = get(this.get('line'), 'style', {});\n        var textStyle = get(this.get('text'), 'style', {});\n        var direction = this.get('direction');\n        var lineLength = lineDisplay ? get(this.get('line'), 'length', 0) : 0;\n        var factor = direction === 'upward' ? -1 : 1;\n        return {\n            point: __assign({ x: 0, y: 0 }, pointStyle),\n            line: __assign({ path: [\n                    ['M', 0, 0],\n                    ['L', 0, lineLength * factor],\n                ] }, lineStyle),\n            text: __assign({ x: 0, y: (lineLength + 2) * factor, text: get(this.get('text'), 'content', ''), textBaseline: direction === 'upward' ? 'bottom' : 'top' }, textStyle),\n        };\n    };\n    return DataMarkerAnnotation;\n}(GroupComponent));\nexport default DataMarkerAnnotation;\n//# sourceMappingURL=data-marker.js.map","import { __assign, __extends } from \"tslib\";\nimport { get } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport Theme from '../util/theme';\nimport { pointsToBBox } from '../util/util';\nimport { renderTag } from '../util/graphic';\nvar DataRegionAnnotation = /** @class */ (function (_super) {\n    __extends(DataRegionAnnotation, _super);\n    function DataRegionAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    DataRegionAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'dataRegion', locationType: 'points', points: [], lineLength: 0, region: {}, text: {}, defaultCfg: {\n                region: {\n                    style: {\n                        lineWidth: 0,\n                        fill: Theme.regionColor,\n                        opacity: 0.4,\n                    },\n                },\n                text: {\n                    content: '',\n                    style: {\n                        textAlign: 'center',\n                        textBaseline: 'bottom',\n                        fontSize: 12,\n                        fill: Theme.textColor,\n                        fontFamily: Theme.fontFamily,\n                    },\n                },\n            } });\n    };\n    DataRegionAnnotation.prototype.renderInner = function (group) {\n        var regionStyle = get(this.get('region'), 'style', {});\n        var textStyle = get(this.get('text'), 'style', {});\n        var lineLength = this.get('lineLength') || 0;\n        var points = this.get('points');\n        if (!points.length) {\n            return;\n        }\n        var bbox = pointsToBBox(points);\n        // render region\n        var path = [];\n        path.push(['M', points[0].x, bbox.minY - lineLength]);\n        points.forEach(function (point) {\n            path.push(['L', point.x, point.y]);\n        });\n        path.push(['L', points[points.length - 1].x, points[points.length - 1].y - lineLength]);\n        this.addShape(group, {\n            type: 'path',\n            id: this.getElementId('region'),\n            name: 'annotation-region',\n            attrs: __assign({ path: path }, regionStyle),\n        });\n        // render text\n        var textCfg = __assign({ id: this.getElementId('text'), name: 'annotation-text', x: (bbox.minX + bbox.maxX) / 2, y: bbox.minY - lineLength }, this.get('text'));\n        renderTag(group, textCfg);\n    };\n    return DataRegionAnnotation;\n}(GroupComponent));\nexport default DataRegionAnnotation;\n//# sourceMappingURL=data-region.js.map","import { __assign, __extends } from \"tslib\";\nimport { clone, each } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { regionToBBox } from '../util/util';\nvar RegionFilterAnnotation = /** @class */ (function (_super) {\n    __extends(RegionFilterAnnotation, _super);\n    function RegionFilterAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    RegionFilterAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'regionFilter', locationType: 'region', start: null, end: null, color: null, shape: [] });\n    };\n    RegionFilterAnnotation.prototype.renderInner = function (group) {\n        var _this = this;\n        var start = this.get('start');\n        var end = this.get('end');\n        // 1. add region layer\n        var layer = this.addGroup(group, {\n            id: this.getElementId('region-filter'),\n            capture: false,\n        });\n        // 2. clone shape & color it\n        each(this.get('shapes'), function (shape, shapeIdx) {\n            var type = shape.get('type');\n            var attrs = clone(shape.attr());\n            _this.adjustShapeAttrs(attrs);\n            _this.addShape(layer, {\n                id: _this.getElementId(\"shape-\" + type + \"-\" + shapeIdx),\n                capture: false,\n                type: type,\n                attrs: attrs,\n            });\n        });\n        // 3. clip\n        var clipBBox = regionToBBox({ start: start, end: end });\n        layer.setClip({\n            type: 'rect',\n            attrs: {\n                x: clipBBox.minX,\n                y: clipBBox.minY,\n                width: clipBBox.width,\n                height: clipBBox.height,\n            },\n        });\n    };\n    RegionFilterAnnotation.prototype.adjustShapeAttrs = function (attr) {\n        var color = this.get('color');\n        if (attr.fill) {\n            attr.fill = attr.fillStyle = color;\n        }\n        attr.stroke = attr.strokeStyle = color;\n    };\n    return RegionFilterAnnotation;\n}(GroupComponent));\nexport default RegionFilterAnnotation;\n//# sourceMappingURL=region-filter.js.map","import { __assign, __extends } from \"tslib\";\nimport { isFunction, noop } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nvar ShapeAnnotation = /** @class */ (function (_super) {\n    __extends(ShapeAnnotation, _super);\n    function ShapeAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ShapeAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'shape', draw: noop });\n    };\n    ShapeAnnotation.prototype.renderInner = function (group) {\n        var render = this.get('render');\n        if (isFunction(render)) {\n            render(group);\n        }\n    };\n    return ShapeAnnotation;\n}(GroupComponent));\nexport default ShapeAnnotation;\n//# sourceMappingURL=shape.js.map","import { __assign, __extends } from \"tslib\";\nimport { createDom, modifyCSS } from '@antv/dom-util';\nimport { isNil, isString, deepMix, each, hasKey } from '@antv/util';\nimport { clearDom, createBBox, hasClass } from '../util/util';\nimport Component from './component';\nvar HtmlComponent = /** @class */ (function (_super) {\n    __extends(HtmlComponent, _super);\n    function HtmlComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HtmlComponent.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { container: null, containerTpl: '<div></div>', updateAutoRender: true, containerClassName: '', parent: null });\n        return cfg;\n    };\n    HtmlComponent.prototype.getContainer = function () {\n        return this.get('container');\n    };\n    /**\n     * 显示组件\n     */\n    HtmlComponent.prototype.show = function () {\n        var container = this.get('container');\n        container.style.display = '';\n        this.set('visible', true);\n    };\n    /**\n     * 隐藏组件\n     */\n    HtmlComponent.prototype.hide = function () {\n        var container = this.get('container');\n        container.style.display = 'none';\n        this.set('visible', false);\n    };\n    /**\n     * 是否允许捕捉事件\n     * @param capture 事件捕捉\n     */\n    HtmlComponent.prototype.setCapture = function (capture) {\n        var container = this.getContainer();\n        var value = capture ? 'auto' : 'none';\n        container.style.pointerEvents = value;\n        this.set('capture', capture);\n    };\n    HtmlComponent.prototype.getBBox = function () {\n        var container = this.getContainer();\n        var x = parseFloat(container.style.left) || 0;\n        var y = parseFloat(container.style.top) || 0;\n        return createBBox(x, y, container.clientWidth, container.clientHeight);\n    };\n    HtmlComponent.prototype.clear = function () {\n        var container = this.get('container');\n        clearDom(container);\n    };\n    HtmlComponent.prototype.destroy = function () {\n        this.removeEvent();\n        this.removeDom();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * 复写 init，主要是初始化 DOM 和事件\n     */\n    HtmlComponent.prototype.init = function () {\n        _super.prototype.init.call(this);\n        this.initContainer();\n        this.initDom();\n        this.resetStyles(); // 初始化样式\n        this.applyStyles(); // 应用样式\n        this.initEvent();\n        this.initCapture();\n        this.initVisible();\n    };\n    HtmlComponent.prototype.initCapture = function () {\n        this.setCapture(this.get('capture'));\n    };\n    HtmlComponent.prototype.initVisible = function () {\n        if (!this.get('visible')) {\n            // 设置初始显示状态\n            this.hide();\n        }\n        else {\n            this.show();\n        }\n    };\n    HtmlComponent.prototype.initDom = function () {\n    };\n    HtmlComponent.prototype.initContainer = function () {\n        var container = this.get('container');\n        if (isNil(container)) {\n            // 未指定 container 则创建\n            container = this.createDom();\n            var parent_1 = this.get('parent');\n            if (isString(parent_1)) {\n                parent_1 = document.getElementById(parent_1);\n                this.set('parent', parent_1);\n            }\n            parent_1.appendChild(container);\n            this.set('container', container);\n        }\n        else if (isString(container)) {\n            // 用户传入的 id, 作为 container\n            container = document.getElementById(container);\n            this.set('container', container);\n        } // else container 是 DOM\n        if (!this.get('parent')) {\n            this.set('parent', container.parentNode);\n        }\n    };\n    // 样式需要进行合并，不能单纯的替换，否则使用非常不方便\n    HtmlComponent.prototype.resetStyles = function () {\n        var style = this.get('domStyles');\n        var defaultStyles = this.get('defaultStyles');\n        if (!style) {\n            style = defaultStyles;\n        }\n        else {\n            style = deepMix({}, defaultStyles, style);\n        }\n        this.set('domStyles', style);\n    };\n    // 应用所有的样式\n    HtmlComponent.prototype.applyStyles = function () {\n        var domStyles = this.get('domStyles');\n        if (!domStyles) {\n            return;\n        }\n        var container = this.getContainer();\n        this.applyChildrenStyles(container, domStyles);\n        var containerClassName = this.get('containerClassName');\n        if (containerClassName && hasClass(container, containerClassName)) {\n            var containerCss = domStyles[containerClassName];\n            modifyCSS(container, containerCss);\n        }\n    };\n    HtmlComponent.prototype.applyChildrenStyles = function (element, styles) {\n        each(styles, function (style, name) {\n            var elements = element.getElementsByClassName(name);\n            each(elements, function (el) {\n                modifyCSS(el, style);\n            });\n        });\n    };\n    // 应用到单个 DOM\n    HtmlComponent.prototype.applyStyle = function (cssName, dom) {\n        var domStyles = this.get('domStyles');\n        modifyCSS(dom, domStyles[cssName]);\n    };\n    /**\n     * @protected\n     */\n    HtmlComponent.prototype.createDom = function () {\n        var containerTpl = this.get('containerTpl');\n        return createDom(containerTpl);\n    };\n    /**\n     * @protected\n     * 初始化事件\n     */\n    HtmlComponent.prototype.initEvent = function () { };\n    /**\n     * @protected\n     * 清理 DOM\n     */\n    HtmlComponent.prototype.removeDom = function () {\n        var container = this.get('container');\n        // 节点不一定有parentNode\n        container && container.parentNode && container.parentNode.removeChild(container);\n    };\n    /**\n     * @protected\n     * 清理事件\n     */\n    HtmlComponent.prototype.removeEvent = function () { };\n    HtmlComponent.prototype.updateInner = function (cfg) {\n        // 更新样式\n        if (hasKey(cfg, 'domStyles')) {\n            this.resetStyles();\n            this.applyStyles();\n        }\n        // 只要属性发生变化，都调整一些位置\n        this.resetPosition();\n    };\n    HtmlComponent.prototype.resetPosition = function () { };\n    ;\n    return HtmlComponent;\n}(Component));\nexport default HtmlComponent;\n//# sourceMappingURL=html-component.js.map","import { __assign, __extends } from \"tslib\";\nimport { createDom, getOuterHeight, getOuterWidth, modifyCSS } from '@antv/dom-util';\nimport { isElement, isFunction, isString } from '@antv/util';\nimport HtmlComponent from '../abstract/html-component';\nimport { clearDom } from '../util/util';\nvar HtmlAnnotation = /** @class */ (function (_super) {\n    __extends(HtmlAnnotation, _super);\n    function HtmlAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HtmlAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'html', locationType: 'point', x: 0, y: 0, containerTpl: \"<div class=\\\"g2-html-annotation\\\"></div>\", alignX: 'left', alignY: 'top', html: '', zIndex: 7 });\n    };\n    HtmlAnnotation.prototype.render = function () {\n        var container = this.getContainer();\n        var html = this.get('html');\n        clearDom(container);\n        var rst = isFunction(html) ? html(container) : html;\n        if (isElement(rst)) {\n            container.appendChild(rst);\n        }\n        else if (isString(rst)) {\n            container.appendChild(createDom(rst));\n        }\n        this.resetPosition();\n    };\n    HtmlAnnotation.prototype.resetPosition = function () {\n        var container = this.getContainer();\n        var _a = this.getLocation(), x = _a.x, y = _a.y;\n        var alignX = this.get('alignX');\n        var alignY = this.get('alignY');\n        var offsetX = this.get('offsetX');\n        var offsetY = this.get('offsetY');\n        var domWidth = getOuterWidth(container);\n        var domHeight = getOuterHeight(container);\n        var position = {\n            x: x,\n            y: y,\n        };\n        if (alignX === 'middle') {\n            position.x -= Math.round(domWidth / 2);\n        }\n        else if (alignX === 'right') {\n            position.x -= Math.round(domWidth);\n        }\n        if (alignY === 'middle') {\n            position.y -= Math.round(domHeight / 2);\n        }\n        else if (alignY === 'bottom') {\n            position.y -= Math.round(domHeight);\n        }\n        if (offsetX) {\n            position.x += offsetX;\n        }\n        if (offsetY) {\n            position.y += offsetY;\n        }\n        modifyCSS(container, {\n            position: 'absolute',\n            left: position.x + \"px\",\n            top: position.y + \"px\",\n            zIndex: this.get('zIndex'),\n        });\n    };\n    return HtmlAnnotation;\n}(HtmlComponent));\nexport default HtmlAnnotation;\n//# sourceMappingURL=html.js.map","import { each, mix } from '@antv/util';\n// 获取多个状态量的合并值\nexport function getStatesStyle(item, elementName, stateStyles) {\n    var styleName = elementName + \"Style\"; // activeStyle\n    var styles = null;\n    each(stateStyles, function (v, state) {\n        if (item[state] && v[styleName]) {\n            if (!styles) {\n                styles = {};\n            }\n            mix(styles, v[styleName]); // 合并样式\n        }\n    });\n    return styles;\n}\n//# sourceMappingURL=state.js.map","import { __assign, __extends } from \"tslib\";\nimport { ext } from '@antv/matrix-util';\nimport { each, filter, get, isFunction, isNil, isNumberEqual, mix } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { getMatrixByAngle } from '../util/matrix';\nimport { getStatesStyle } from '../util/state';\nimport Theme from '../util/theme';\nvar AxisBase = /** @class */ (function (_super) {\n    __extends(AxisBase, _super);\n    function AxisBase() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AxisBase.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'axis', ticks: [], line: {}, tickLine: {}, subTickLine: null, title: null, \n            /**\n             * 文本标签的配置项\n             */\n            label: {}, \n            /**\n             * 垂直于坐标轴方向的因子，决定文本、title、tickLine 在坐标轴的哪一侧\n             */\n            verticalFactor: 1, \n            // 垂直方向限制的长度，对文本自适应有很大影响\n            verticalLimitLength: null, overlapOrder: ['autoRotate', 'autoEllipsis', 'autoHide'], tickStates: {}, defaultCfg: {\n                line: {\n                    // @type {Attrs} 坐标轴线的图形属性,如果设置成null，则不显示轴线\n                    style: {\n                        lineWidth: 1,\n                        stroke: Theme.lineColor,\n                    },\n                },\n                tickLine: {\n                    // @type {Attrs} 标注坐标线的图形属性\n                    style: {\n                        lineWidth: 1,\n                        stroke: Theme.lineColor,\n                    },\n                    alignTick: true,\n                    length: 5,\n                    displayWithLabel: true,\n                },\n                subTickLine: {\n                    // @type {Attrs} 标注坐标线的图形属性\n                    style: {\n                        lineWidth: 1,\n                        stroke: Theme.lineColor,\n                    },\n                    count: 4,\n                    length: 2,\n                },\n                label: {\n                    autoRotate: true,\n                    autoHide: false,\n                    autoEllipsis: false,\n                    style: {\n                        fontSize: 12,\n                        fill: Theme.textColor,\n                        fontFamily: Theme.fontFamily,\n                        fontWeight: 'normal',\n                    },\n                    offset: 10,\n                },\n                title: {\n                    autoRotate: true,\n                    spacing: 5,\n                    position: 'center',\n                    style: {\n                        fontSize: 12,\n                        fill: Theme.textColor,\n                        textBaseline: 'middle',\n                        fontFamily: Theme.fontFamily,\n                        textAlign: 'center',\n                    },\n                },\n                tickStates: {\n                    active: {\n                        labelStyle: {\n                            fontWeight: 500,\n                        },\n                        tickLineStyle: {\n                            lineWidth: 2,\n                        },\n                    },\n                    inactive: {\n                        labelStyle: {\n                            fill: Theme.uncheckedColor,\n                        },\n                    },\n                },\n            }, theme: {} });\n    };\n    /**\n     * 绘制组件\n     */\n    AxisBase.prototype.renderInner = function (group) {\n        if (this.get('line')) {\n            this.drawLine(group);\n        }\n        // drawTicks 包括 drawLabels 和 drawTickLines\n        this.drawTicks(group);\n        if (this.get('title')) {\n            this.drawTitle(group);\n        }\n    };\n    // 实现 IList 接口\n    AxisBase.prototype.isList = function () {\n        return true;\n    };\n    /**\n     * 获取图例项\n     * @return {ListItem[]} 列表项集合\n     */\n    AxisBase.prototype.getItems = function () {\n        return this.get('ticks');\n    };\n    /**\n     * 设置列表项\n     * @param {ListItem[]} items 列表项集合\n     */\n    AxisBase.prototype.setItems = function (items) {\n        this.update({\n            ticks: items,\n        });\n    };\n    /**\n     * 更新列表项\n     * @param {ListItem} item 列表项\n     * @param {object}   cfg  列表项\n     */\n    AxisBase.prototype.updateItem = function (item, cfg) {\n        mix(item, cfg);\n        this.clear(); // 由于单个图例项变化，会引起全局变化，所以全部更新\n        this.render();\n    };\n    /**\n     * 清空列表\n     */\n    AxisBase.prototype.clearItems = function () {\n        var itemGroup = this.getElementByLocalId('label-group');\n        itemGroup && itemGroup.clear();\n    };\n    /**\n     * 设置列表项的状态\n     * @param {ListItem} item  列表项\n     * @param {string}   state 状态名\n     * @param {boolean}  value 状态值, true, false\n     */\n    AxisBase.prototype.setItemState = function (item, state, value) {\n        item[state] = value;\n        this.updateTickStates(item); // 应用状态样式\n    };\n    /**\n     * 是否存在指定的状态\n     * @param {ListItem} item  列表项\n     * @param {boolean} state 状态名\n     */\n    AxisBase.prototype.hasState = function (item, state) {\n        return !!item[state];\n    };\n    AxisBase.prototype.getItemStates = function (item) {\n        var tickStates = this.get('tickStates');\n        var rst = [];\n        each(tickStates, function (v, k) {\n            if (item[k]) {\n                // item.selected\n                rst.push(k);\n            }\n        });\n        return rst;\n    };\n    /**\n     * 清楚所有列表项的状态\n     * @param {string} state 状态值\n     */\n    AxisBase.prototype.clearItemsState = function (state) {\n        var _this = this;\n        var items = this.getItemsByState(state);\n        each(items, function (item) {\n            _this.setItemState(item, state, false);\n        });\n    };\n    /**\n     * 根据状态获取图例项\n     * @param  {string}     state [description]\n     * @return {ListItem[]}       [description]\n     */\n    AxisBase.prototype.getItemsByState = function (state) {\n        var _this = this;\n        var items = this.getItems();\n        return filter(items, function (item) {\n            return _this.hasState(item, state);\n        });\n    };\n    AxisBase.prototype.getSidePoint = function (point, offset) {\n        var self = this;\n        var vector = self.getSideVector(offset, point);\n        return {\n            x: point.x + vector[0],\n            y: point.y + vector[1],\n        };\n    };\n    AxisBase.prototype.getTextAnchor = function (vector) {\n        var align;\n        if (isNumberEqual(vector[0], 0)) {\n            align = 'center';\n        }\n        else if (vector[0] > 0) {\n            align = 'start';\n        }\n        else if (vector[0] < 0) {\n            align = 'end';\n        }\n        return align;\n    };\n    AxisBase.prototype.getTextBaseline = function (vector) {\n        var base;\n        if (isNumberEqual(vector[1], 0)) {\n            base = 'middle';\n        }\n        else if (vector[1] > 0) {\n            base = 'top';\n        }\n        else if (vector[1] < 0) {\n            base = 'bottom';\n        }\n        return base;\n    };\n    AxisBase.prototype.processOverlap = function (labelGroup) { };\n    // 绘制坐标轴线\n    AxisBase.prototype.drawLine = function (group) {\n        var path = this.getLinePath();\n        var line = this.get('line'); // line 的判空在调用 drawLine 之前，不在这里判定\n        this.addShape(group, {\n            type: 'path',\n            id: this.getElementId('line'),\n            name: 'axis-line',\n            attrs: mix({\n                path: path,\n            }, line.style),\n        });\n    };\n    AxisBase.prototype.getTickLineItems = function (ticks) {\n        var _this = this;\n        var tickLineItems = [];\n        var tickLine = this.get('tickLine');\n        var alignTick = tickLine.alignTick;\n        var tickLineLength = tickLine.length;\n        var tickSegment = 1;\n        var tickCount = ticks.length;\n        if (tickCount >= 2) {\n            tickSegment = ticks[1].value - ticks[0].value;\n        }\n        each(ticks, function (tick) {\n            var point = tick.point;\n            if (!alignTick) {\n                // tickLine 不同 tick 对齐时需要调整 point\n                point = _this.getTickPoint(tick.value - tickSegment / 2);\n            }\n            var endPoint = _this.getSidePoint(point, tickLineLength);\n            tickLineItems.push({\n                startPoint: point,\n                tickValue: tick.value,\n                endPoint: endPoint,\n                tickId: tick.id,\n                id: \"tickline-\" + tick.id,\n            });\n        });\n        // 如果 tickLine 不居中对齐，则需要在最后面补充一个 tickLine\n        // if (!alignTick && tickCount > 0) {\n        //   const tick = ticks[tickCount - 1];\n        //   const point = this.getTickPoint(tick.value + tickSegment / 2);\n        // }\n        return tickLineItems;\n    };\n    AxisBase.prototype.getSubTickLineItems = function (tickLineItems) {\n        var subTickLineItems = [];\n        var subTickLine = this.get('subTickLine');\n        var subCount = subTickLine.count;\n        var tickLineCount = tickLineItems.length;\n        // 刻度线的数量大于 2 时，才绘制子刻度\n        if (tickLineCount >= 2) {\n            for (var i = 0; i < tickLineCount - 1; i++) {\n                var pre = tickLineItems[i];\n                var next = tickLineItems[i + 1];\n                for (var j = 0; j < subCount; j++) {\n                    var percent = (j + 1) / (subCount + 1);\n                    var tickValue = (1 - percent) * pre.tickValue + percent * next.tickValue;\n                    var point = this.getTickPoint(tickValue);\n                    var endPoint = this.getSidePoint(point, subTickLine.length);\n                    subTickLineItems.push({\n                        startPoint: point,\n                        endPoint: endPoint,\n                        tickValue: tickValue,\n                        id: \"sub-\" + pre.id + \"-\" + j,\n                    });\n                }\n            }\n        }\n        return subTickLineItems;\n    };\n    AxisBase.prototype.getTickLineAttrs = function (tickItem, type, index, tickItems) {\n        var style = this.get(type).style;\n        // 保持和 grid 相同的数据结构\n        var item = {\n            points: [tickItem.startPoint, tickItem.endPoint],\n        };\n        var defaultTickLineStyle = get(this.get('theme'), ['tickLine', 'style'], {});\n        style = isFunction(style) ? mix({}, defaultTickLineStyle, style(item, index, tickItems)) : style;\n        var startPoint = tickItem.startPoint, endPoint = tickItem.endPoint;\n        return __assign({ x1: startPoint.x, y1: startPoint.y, x2: endPoint.x, y2: endPoint.y }, style);\n    };\n    // 绘制坐标轴刻度线\n    AxisBase.prototype.drawTick = function (tickItem, tickLineGroup, type, index, tickItems) {\n        this.addShape(tickLineGroup, {\n            type: 'line',\n            id: this.getElementId(tickItem.id),\n            name: \"axis-\" + type,\n            attrs: this.getTickLineAttrs(tickItem, type, index, tickItems),\n        });\n    };\n    // 绘制坐标轴刻度线，包括子刻度线\n    AxisBase.prototype.drawTickLines = function (group) {\n        var _this = this;\n        var ticks = this.get('ticks');\n        var subTickLine = this.get('subTickLine');\n        var tickLineItems = this.getTickLineItems(ticks);\n        var tickLineGroup = this.addGroup(group, {\n            name: 'axis-tickline-group',\n            id: this.getElementId('tickline-group'),\n        });\n        var tickCfg = this.get('tickLine');\n        each(tickLineItems, function (item, index) {\n            if (tickCfg.displayWithLabel) {\n                // 如果跟随 label 显示，则检测是否存在对应的 label\n                var labelId = _this.getElementId(\"label-\" + item.tickId);\n                if (group.findById(labelId)) {\n                    _this.drawTick(item, tickLineGroup, 'tickLine', index, tickLineItems);\n                }\n            }\n            else {\n                _this.drawTick(item, tickLineGroup, 'tickLine', index, tickLineItems);\n            }\n        });\n        if (subTickLine) {\n            var subTickLineItems_1 = this.getSubTickLineItems(tickLineItems);\n            each(subTickLineItems_1, function (item, index) {\n                _this.drawTick(item, tickLineGroup, 'subTickLine', index, subTickLineItems_1);\n            });\n        }\n    };\n    // 预处理 ticks 确定位置和补充 id\n    AxisBase.prototype.processTicks = function () {\n        var _this = this;\n        var ticks = this.get('ticks');\n        each(ticks, function (tick) {\n            tick.point = _this.getTickPoint(tick.value);\n            // 补充 tick 的 id，为动画和更新做准备\n            if (isNil(tick.id)) {\n                // 默认使用 tick.name 作为id\n                tick.id = tick.name;\n            }\n        });\n    };\n    // 绘制 ticks 包括文本和 tickLine\n    AxisBase.prototype.drawTicks = function (group) {\n        var _this = this;\n        this.processTicks();\n        if (this.get('label')) {\n            this.drawLabels(group);\n        }\n        if (this.get('tickLine')) {\n            this.drawTickLines(group);\n        }\n        var ticks = this.get('ticks');\n        each(ticks, function (tick) {\n            _this.applyTickStates(tick, group);\n        });\n    };\n    // 获取 label 的配置项\n    AxisBase.prototype.getLabelAttrs = function (tick, index, ticks) {\n        var labelCfg = this.get('label');\n        var offset = labelCfg.offset, rotate = labelCfg.rotate, formatter = labelCfg.formatter;\n        var point = this.getSidePoint(tick.point, offset);\n        var vector = this.getSideVector(offset, point);\n        var text = formatter ? formatter(tick.name, tick, index) : tick.name;\n        var style = labelCfg.style;\n        style = isFunction(style) ? get(this.get('theme'), ['label', 'style'], {}) : style;\n        var attrs = mix({\n            x: point.x,\n            y: point.y,\n            text: text,\n            textAlign: this.getTextAnchor(vector),\n            textBaseline: this.getTextBaseline(vector),\n        }, style);\n        if (rotate) {\n            attrs.matrix = getMatrixByAngle(point, rotate);\n        }\n        return attrs;\n    };\n    // 绘制文本\n    AxisBase.prototype.drawLabels = function (group) {\n        var _this = this;\n        var ticks = this.get('ticks');\n        var labelGroup = this.addGroup(group, {\n            name: 'axis-label-group',\n            id: this.getElementId('label-group'),\n        });\n        each(ticks, function (tick, index) {\n            _this.addShape(labelGroup, {\n                type: 'text',\n                name: 'axis-label',\n                id: _this.getElementId(\"label-\" + tick.id),\n                attrs: _this.getLabelAttrs(tick, index, ticks),\n                delegateObject: {\n                    tick: tick,\n                    item: tick,\n                    index: index,\n                },\n            });\n        });\n        this.processOverlap(labelGroup);\n        // 处理完后再进行 style 回调处理\n        var labels = labelGroup.getChildren();\n        var defaultLabelStyle = get(this.get('theme'), ['label', 'style'], {});\n        var _a = this.get('label'), style = _a.style, formatter = _a.formatter;\n        if (isFunction(style)) {\n            var afterProcessTicks_1 = labels.map(function (label) { return get(label.get('delegateObject'), 'tick'); });\n            each(labels, function (label, index) {\n                var tick = label.get('delegateObject').tick;\n                var text = formatter ? formatter(tick.name, tick, index) : tick.name;\n                var newStyle = mix({}, defaultLabelStyle, style(text, index, afterProcessTicks_1));\n                label.attr(newStyle);\n            });\n        }\n    };\n    // 标题的属性\n    AxisBase.prototype.getTitleAttrs = function () {\n        var titleCfg = this.get('title');\n        var style = titleCfg.style, position = titleCfg.position, offset = titleCfg.offset, _a = titleCfg.spacing, spacing = _a === void 0 ? 0 : _a, autoRotate = titleCfg.autoRotate;\n        var titleHeight = style.fontSize;\n        var percent = 0.5;\n        if (position === 'start') {\n            percent = 0;\n        }\n        else if (position === 'end') {\n            percent = 1;\n        }\n        var point = this.getTickPoint(percent); // 标题对应的坐标轴上的点\n        // 如果没有指定 titleOffset 也没有渲染 label，这里需要自动计算 offset\n        var titlePoint = this.getSidePoint(point, offset || spacing + titleHeight / 2); // 标题的点\n        var attrs = mix({\n            x: titlePoint.x,\n            y: titlePoint.y,\n            text: titleCfg.text,\n        }, style);\n        var rotate = titleCfg.rotate; // rotate 是角度值\n        var angle = rotate;\n        if (isNil(rotate) && autoRotate) {\n            // 用户没有设定旋转角度，同时设置自动旋转\n            var vector = this.getAxisVector(point);\n            var v1 = [1, 0]; // 水平方向的向量\n            angle = ext.angleTo(vector, v1, true);\n        }\n        if (angle) {\n            var matrix = getMatrixByAngle(titlePoint, angle);\n            attrs.matrix = matrix;\n        }\n        return attrs;\n    };\n    // 绘制标题\n    AxisBase.prototype.drawTitle = function (group) {\n        this.addShape(group, {\n            type: 'text',\n            id: this.getElementId('title'),\n            name: 'axis-title',\n            attrs: this.getTitleAttrs(),\n        });\n    };\n    AxisBase.prototype.applyTickStates = function (tick, group) {\n        var states = this.getItemStates(tick);\n        if (states.length) {\n            var tickStates = this.get('tickStates');\n            // 分别更新 label 和 tickLine\n            var labelId = this.getElementId(\"label-\" + tick.id);\n            var labelShape = group.findById(labelId);\n            if (labelShape) {\n                var labelStateStyle = getStatesStyle(tick, 'label', tickStates);\n                labelStateStyle && labelShape.attr(labelStateStyle);\n            }\n            var tickLineId = this.getElementId(\"tickline-\" + tick.id);\n            var tickLineShape = group.findById(tickLineId);\n            if (tickLineShape) {\n                var tickLineStateStyle = getStatesStyle(tick, 'tickLine', tickStates);\n                tickLineStateStyle && tickLineShape.attr(tickLineStateStyle);\n            }\n        }\n    };\n    AxisBase.prototype.updateTickStates = function (tick) {\n        var states = this.getItemStates(tick);\n        var tickStates = this.get('tickStates');\n        var labelCfg = this.get('label');\n        var labelShape = this.getElementByLocalId(\"label-\" + tick.id);\n        var tickLineCfg = this.get('tickLine');\n        var tickLineShape = this.getElementByLocalId(\"tickline-\" + tick.id);\n        if (states.length) {\n            if (labelShape) {\n                var labelStateStyle = getStatesStyle(tick, 'label', tickStates);\n                labelStateStyle && labelShape.attr(labelStateStyle);\n            }\n            if (tickLineShape) {\n                var tickLineStateStyle = getStatesStyle(tick, 'tickLine', tickStates);\n                tickLineStateStyle && tickLineShape.attr(tickLineStateStyle);\n            }\n        }\n        else {\n            if (labelShape) {\n                labelShape.attr(labelCfg.style);\n            }\n            if (tickLineShape) {\n                tickLineShape.attr(tickLineCfg.style);\n            }\n        }\n    };\n    return AxisBase;\n}(GroupComponent));\nexport default AxisBase;\n//# sourceMappingURL=base.js.map","import { each } from '@antv/util';\nimport { ellipsisLabel } from '../../util/label';\nfunction ellipseLabels(isVertical, labelGroup, limitLength, position) {\n    var children = labelGroup.getChildren();\n    var ellipsised = false;\n    each(children, function (label) {\n        var rst = ellipsisLabel(isVertical, label, limitLength, position);\n        ellipsised = ellipsised || rst;\n    });\n    return ellipsised;\n}\nexport function getDefault() {\n    return ellipsisTail;\n}\nexport function ellipsisHead(isVertical, labelGroup, limitLength) {\n    return ellipseLabels(isVertical, labelGroup, limitLength, 'head');\n}\nexport function ellipsisTail(isVertical, labelGroup, limitLength) {\n    return ellipseLabels(isVertical, labelGroup, limitLength, 'tail');\n}\nexport function ellipsisMiddle(isVertical, labelGroup, limitLength) {\n    return ellipseLabels(isVertical, labelGroup, limitLength, 'middle');\n}\n//# sourceMappingURL=auto-ellipsis.js.map","import { getMaxLabelWidth } from '../../util/label';\n// 文本是否旋转\nfunction isRotate(label) {\n    var matrix = label.attr('matrix');\n    return matrix && matrix[0] !== 1; // 仅在这个场景下判定\n}\n// autohide 不再考虑超出限制\n// function isOutLimit(isVertical: boolean, label: IElement, limitLength: number) {\n//   if (!limitLength) {\n//     // 如果没限制 limitLength 则直接返回 false\n//     return false;\n//   }\n//   const canvasBBox = label.getCanvasBBox();\n//   let isOut = false;\n//   if (isVertical) {\n//     isOut = canvasBBox.width > limitLength;\n//   } else {\n//     isOut = canvasBBox.height > limitLength;\n//   }\n//   return isOut;\n// }\n// 是否重叠\nfunction isOverlap(isVertical, rotated, preBox, curBox, reversed) {\n    if (reversed === void 0) { reversed = false; }\n    var overlap = false;\n    if (isVertical) {\n        // 垂直时检测边高\n        overlap = Math.abs(preBox.y - curBox.y) < preBox.height;\n    }\n    else {\n        // 水平时检测\n        if (rotated) {\n            // 如果旋转了，则检测两者 x 之间的间距是否小于前一个的高度\n            var height = reversed ? curBox.height : preBox.height;\n            overlap = Math.abs(preBox.x - curBox.x) < height;\n        }\n        else {\n            // 检测两者是否 x 方向重合\n            var width = reversed ? curBox.width : preBox.width;\n            overlap = Math.abs(preBox.x - curBox.x) < width;\n        }\n    }\n    return overlap;\n}\n// 保留第一个或者最后一个\nfunction reserveOne(isVertical, labelsGroup, reversed) {\n    var labels = labelsGroup.getChildren().slice(); // 复制数组\n    if (!labels.length) {\n        return false;\n    }\n    var hasHide = false;\n    if (reversed) {\n        // 翻转\n        labels.reverse();\n    }\n    var count = labels.length;\n    var first = labels[0];\n    var rotated = isRotate(first);\n    var preBox = first.getBBox();\n    for (var i = 1; i < count; i++) {\n        var label = labels[i];\n        var curBBox = label.getBBox();\n        // 不再考虑超出限制，而仅仅根据是否重叠进行隐藏 isOutLimit(isVertical, label, limitLength) ||\n        var isHide = isOverlap(isVertical, rotated, preBox, curBBox, reversed);\n        if (isHide) {\n            label.hide();\n            hasHide = true;\n        }\n        else {\n            preBox = curBBox;\n        }\n    }\n    return hasHide;\n}\nexport function getDefault() {\n    return equidistance;\n}\n/**\n * 保证首个 label 可见，即使超过 limitLength 也不隐藏\n * @param {boolean} isVertical  是否垂直\n * @param {IGroup}  labelsGroup label 的分组\n */\nexport function reserveFirst(isVertical, labelsGroup) {\n    return reserveOne(isVertical, labelsGroup, false);\n}\n/**\n * 保证最后一个 label 可见，即使超过 limitLength 也不隐藏\n * @param {boolean} isVertical  是否垂直\n * @param {IGroup}  labelsGroup label 的分组\n */\nexport function reserveLast(isVertical, labelsGroup) {\n    return reserveOne(isVertical, labelsGroup, true);\n}\n/**\n * 保证第一个最后一个 label 可见，即使超过 limitLength 也不隐藏\n * @param {boolean} isVertical  是否垂直\n * @param {IGroup}  labelsGroup label 的分组\n */\nexport function reserveBoth(isVertical, labelsGroup) {\n    var labels = labelsGroup.getChildren().slice(); // 复制数组\n    if (labels.length <= 2) {\n        // 如果数量小于或等于 2 则直接返回\n        return false;\n    }\n    var hasHide = false;\n    var count = labels.length;\n    var first = labels[0];\n    var last = labels[count - 1];\n    var rotated = isRotate(first);\n    var preBox = first.getBBox();\n    var preLabel = first;\n    // 按照先保存第一个的逻辑循环一遍，最后一个不参与循环\n    for (var i = 1; i < count - 1; i++) {\n        var label = labels[i];\n        var curBBox = label.getBBox();\n        // 废弃 isOutLimit(isVertical, label, limitLength) ||\n        var isHide = isOverlap(isVertical, rotated, preBox, curBBox);\n        if (isHide) {\n            label.hide();\n            hasHide = true;\n        }\n        else {\n            preBox = curBBox;\n            preLabel = label;\n        }\n    }\n    var lastBBox = last.getBBox();\n    var overlap = isOverlap(isVertical, rotated, preBox, lastBBox); // 不检测超出 limit\n    if (overlap) {\n        // 发生冲突，则隐藏前一个保留后一个\n        preLabel.hide();\n        hasHide = true;\n    }\n    return hasHide;\n}\n/**\n * 保证 label 均匀显示，主要解决文本层叠的问题，对于 limitLength 不处理\n * @param {boolean} isVertical  是否垂直\n * @param {IGroup}  labelsGroup label 的分组\n */\nexport function equidistance(isVertical, labelsGroup) {\n    var labels = labelsGroup.getChildren().slice(); // 复制数组\n    if (labels.length < 2) {\n        // 如果数量小于 2 则直接返回，等于 2 时可能也会重合\n        return false;\n    }\n    var hasHide = false;\n    var first = labels[0];\n    var firstBBox = first.getBBox();\n    var second = labels[1];\n    var rotated = isRotate(first);\n    var count = labels.length;\n    var interval = 0; // 不重叠的坐标文本间距个数\n    if (isVertical) {\n        // 垂直的坐标轴计算垂直方向的间距\n        var distance = Math.abs(second.attr('y') - first.attr('y'));\n        interval = firstBBox.height / distance;\n    }\n    else {\n        // 水平坐标轴\n        if (rotated) {\n            var distance = Math.abs(second.attr('x') - first.attr('x'));\n            interval = firstBBox.width / distance;\n        }\n        else {\n            var maxWidth = getMaxLabelWidth(labels);\n            var distance = Math.abs(second.attr('x') - first.attr('x'));\n            interval = maxWidth / distance;\n        }\n    }\n    // interval > 1 时需要对 label 进行隐藏\n    if (interval > 1) {\n        interval = Math.ceil(interval);\n        for (var i = 0; i < count; i++) {\n            if (i % interval !== 0) {\n                // 仅保留被整除的 label\n                labels[i].hide();\n                hasHide = true;\n            }\n        }\n    }\n    return hasHide;\n}\n//# sourceMappingURL=auto-hide.js.map","import { each } from '@antv/util';\nimport { getMaxLabelWidth } from '../../util/label';\nimport { getMatrixByAngle } from '../../util/matrix';\nimport Theme from '../../util/theme';\n// 统一设置文本的角度\nfunction setLabelsAngle(labels, angle) {\n    each(labels, function (label) {\n        var x = label.attr('x');\n        var y = label.attr('y');\n        var matrix = getMatrixByAngle({ x: x, y: y }, angle);\n        label.attr('matrix', matrix);\n    });\n}\n// 旋转文本\nfunction labelRotate(isVertical, labelsGroup, limitLength, getAngle) {\n    var labels = labelsGroup.getChildren();\n    if (!labels.length) {\n        return false;\n    }\n    if (!isVertical && labels.length < 2) {\n        // 水平时至少有两个时才旋转\n        return false;\n    }\n    var maxWidth = getMaxLabelWidth(labels);\n    var isOverlap = false;\n    if (isVertical) {\n        // limitLength 为 0 或者 null 时不生效\n        isOverlap = !!limitLength && maxWidth > limitLength;\n    }\n    else {\n        // 同 limitLength 无关\n        var tickWidth = Math.abs(labels[1].attr('x') - labels[0].attr('x'));\n        isOverlap = maxWidth > tickWidth;\n    }\n    if (isOverlap) {\n        var angle = getAngle(limitLength, maxWidth);\n        setLabelsAngle(labels, angle);\n    }\n    return isOverlap;\n}\nexport function getDefault() {\n    return fixedAngle;\n}\n/**\n * 固定角度旋转文本\n * @param  {boolean} isVertical  是否垂直方向\n * @param  {IGroup}  labelsGroup 文本的 group\n * @param  {number}  limitLength 限定长度\n * @return {boolean}             是否发生了旋转\n */\nexport function fixedAngle(isVertical, labelsGroup, limitLength) {\n    return labelRotate(isVertical, labelsGroup, limitLength, function () {\n        return isVertical ? Theme.verticalAxisRotate : Theme.horizontalAxisRotate;\n    });\n}\n/**\n * 非固定角度旋转文本\n * @param  {boolean} isVertical  是否垂直方向\n * @param  {IGroup}  labelsGroup 文本的 group\n * @param  {number}  limitLength 限定长度\n * @return {boolean}             是否发生了旋转\n */\nexport function unfixedAngle(isVertical, labelsGroup, limitLength) {\n    return labelRotate(isVertical, labelsGroup, limitLength, function (length, maxWidth) {\n        if (!length) {\n            // 如果没有设置 limitLength，则使用固定的角度旋转\n            return isVertical ? Theme.verticalAxisRotate : Theme.horizontalAxisRotate;\n        }\n        if (isVertical) {\n            // 垂直时不需要判定 limitLength > maxWidth ，因为此时不会 overlap\n            return -Math.acos(length / maxWidth);\n        }\n        else {\n            var angle = 0;\n            if (length > maxWidth) {\n                // 需要判定，asin 的参数 -1， 1\n                angle = Math.PI / 4;\n            }\n            else {\n                angle = Math.asin(length / maxWidth);\n                if (angle > Math.PI / 4) {\n                    // 大于 Math.PI / 4 时没意义\n                    angle = Math.PI / 4;\n                }\n            }\n            return angle;\n        }\n    });\n}\n//# sourceMappingURL=auto-rotate.js.map","import { __assign, __extends } from \"tslib\";\nimport { vec2 } from '@antv/matrix-util';\nimport { each, isFunction, isNil, isNumberEqual } from '@antv/util';\nimport AxisBase from './base';\nimport * as OverlapUtil from './overlap';\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Line.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'line', locationType: 'region', \n            /**\n             * 起始点, x, y\n             * @type {object}\n             */\n            start: null, \n            /**\n             * 结束点, x, y\n             * @type {object}\n             */\n            end: null });\n    };\n    // 获取坐标轴线的 path\n    Line.prototype.getLinePath = function () {\n        var start = this.get('start');\n        var end = this.get('end');\n        var path = [];\n        path.push(['M', start.x, start.y]);\n        path.push(['L', end.x, end.y]);\n        return path;\n    };\n    // 重新计算 layout bbox，考虑到 line 不显示\n    Line.prototype.getInnerLayoutBBox = function () {\n        var start = this.get('start');\n        var end = this.get('end');\n        var bbox = _super.prototype.getInnerLayoutBBox.call(this);\n        var minX = Math.min(start.x, end.x, bbox.x);\n        var minY = Math.min(start.y, end.y, bbox.y);\n        var maxX = Math.max(start.x, end.x, bbox.maxX);\n        var maxY = Math.max(start.y, end.y, bbox.maxY);\n        return {\n            x: minX,\n            y: minY,\n            minX: minX,\n            minY: minY,\n            maxX: maxX,\n            maxY: maxY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    };\n    Line.prototype.isVertical = function () {\n        var start = this.get('start');\n        var end = this.get('end');\n        return isNumberEqual(start.x, end.x);\n    };\n    Line.prototype.isHorizontal = function () {\n        var start = this.get('start');\n        var end = this.get('end');\n        return isNumberEqual(start.y, end.y);\n    };\n    Line.prototype.getTickPoint = function (tickValue) {\n        var self = this;\n        var start = self.get('start');\n        var end = self.get('end');\n        var regionX = end.x - start.x;\n        var regionY = end.y - start.y;\n        return {\n            x: start.x + regionX * tickValue,\n            y: start.y + regionY * tickValue,\n        };\n    };\n    // 直线坐标轴下任一点的向量方向都相同\n    Line.prototype.getSideVector = function (offset) {\n        var axisVector = this.getAxisVector();\n        var normal = vec2.normalize([0, 0], axisVector);\n        var factor = this.get('verticalFactor');\n        var verticalVector = [normal[1], normal[0] * -1]; // 垂直方向，逆时针方向\n        return vec2.scale([0, 0], verticalVector, offset * factor);\n    };\n    // 获取坐标轴的向量\n    Line.prototype.getAxisVector = function () {\n        var start = this.get('start');\n        var end = this.get('end');\n        return [end.x - start.x, end.y - start.y];\n    };\n    Line.prototype.processOverlap = function (labelGroup) {\n        var _this = this;\n        var isVertical = this.isVertical();\n        var isHorizontal = this.isHorizontal();\n        // 非垂直，或者非水平时不处理遮挡问题\n        if (!isVertical && !isHorizontal) {\n            return;\n        }\n        var labelCfg = this.get('label');\n        var titleCfg = this.get('title');\n        var verticalLimitLength = this.get('verticalLimitLength');\n        var labelOffset = labelCfg.offset;\n        var limitLength = verticalLimitLength;\n        var titleHeight = 0;\n        var titleSpacing = 0;\n        if (titleCfg) {\n            titleHeight = titleCfg.style.fontSize;\n            titleSpacing = titleCfg.spacing;\n        }\n        if (limitLength) {\n            limitLength = limitLength - labelOffset - titleSpacing - titleHeight;\n        }\n        var overlapOrder = this.get('overlapOrder');\n        each(overlapOrder, function (name) {\n            if (labelCfg[name]) {\n                _this.autoProcessOverlap(name, labelCfg[name], labelGroup, limitLength);\n            }\n        });\n        if (titleCfg) {\n            // 调整 title 的 offset\n            var bbox = labelGroup.getBBox();\n            var length_1 = isVertical ? bbox.width : bbox.height;\n            if (isNil(titleCfg.offset)) {\n                // 如果用户没有设置 offset，则自动计算\n                titleCfg.offset = labelOffset + length_1 + titleSpacing + titleHeight / 2;\n            }\n        }\n    };\n    Line.prototype.autoProcessOverlap = function (name, value, labelGroup, limitLength) {\n        var _this = this;\n        var isVertical = this.isVertical();\n        var hasAdjusted = false;\n        var util = OverlapUtil[name];\n        if (value === true) {\n            // 默认使用固定角度的旋转方案\n            hasAdjusted = util.getDefault()(isVertical, labelGroup, limitLength);\n        }\n        else if (isFunction(value)) {\n            // 用户可以传入回调函数\n            hasAdjusted = value(isVertical, labelGroup, limitLength);\n        }\n        else if (util[value]) {\n            // 按照名称执行旋转函数\n            hasAdjusted = util[value](isVertical, labelGroup, limitLength);\n        }\n        if (name === 'autoRotate') {\n            // 文本旋转后，文本的对齐方式可能就不合适了\n            if (hasAdjusted) {\n                var labels = labelGroup.getChildren();\n                var verticalFactor_1 = this.get('verticalFactor');\n                each(labels, function (label) {\n                    var textAlign = label.attr('textAlign');\n                    if (textAlign === 'center') {\n                        // 居中的文本需要调整旋转度\n                        var newAlign = verticalFactor_1 > 0 ? 'end' : 'start';\n                        label.attr('textAlign', newAlign);\n                    }\n                });\n            }\n        }\n        else if (name === 'autoHide') {\n            var children = labelGroup.getChildren().slice(0); // 复制数组，删除时不会出错\n            each(children, function (label) {\n                if (!label.get('visible')) {\n                    if (_this.get('isRegister')) {\n                        // 已经注册过了，则删除\n                        _this.unregisterElement(label);\n                    }\n                    label.remove(); // 防止 label 数量太多，所以统一删除\n                }\n            });\n        }\n    };\n    return Line;\n}(AxisBase));\nexport default Line;\n//# sourceMappingURL=line.js.map","var _a;\nimport Theme from '../util/theme';\n// tooltip 相关 dom 的 css 类名\nimport * as CssConst from './css-const';\nexport default (_a = {},\n    // css style for tooltip\n    _a[\"\" + CssConst.CONTAINER_CLASS] = {\n        position: 'relative'\n    },\n    _a[\"\" + CssConst.CROSSHAIR_LINE] = {\n        position: 'absolute',\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\n    },\n    _a[\"\" + CssConst.CROSSHAIR_TEXT] = {\n        position: 'absolute',\n        color: Theme.textColor,\n        fontFamily: Theme.fontFamily,\n    },\n    _a);\n//# sourceMappingURL=html-theme.js.map","import { __assign, __extends } from \"tslib\";\nimport { vec2 } from '@antv/matrix-util';\nimport AxisBase from './base';\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Circle.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'circle', locationType: 'circle', center: null, radius: null, startAngle: -Math.PI / 2, endAngle: (Math.PI * 3) / 2 });\n    };\n    Circle.prototype.getLinePath = function () {\n        var center = this.get('center');\n        var x = center.x;\n        var y = center.y;\n        var rx = this.get('radius');\n        var ry = rx;\n        var startAngle = this.get('startAngle');\n        var endAngle = this.get('endAngle');\n        var path = [];\n        if (Math.abs(endAngle - startAngle) === Math.PI * 2) {\n            path = [['M', x, y - ry], ['A', rx, ry, 0, 1, 1, x, y + ry], ['A', rx, ry, 0, 1, 1, x, y - ry], ['Z']];\n        }\n        else {\n            var startPoint = this.getCirclePoint(startAngle);\n            var endPoint = this.getCirclePoint(endAngle);\n            var large = Math.abs(endAngle - startAngle) > Math.PI ? 1 : 0;\n            var sweep = startAngle > endAngle ? 0 : 1;\n            path = [\n                ['M', x, y],\n                ['L', startPoint.x, startPoint.y],\n                ['A', rx, ry, 0, large, sweep, endPoint.x, endPoint.y],\n                ['L', x, y],\n            ];\n        }\n        return path;\n    };\n    Circle.prototype.getTickPoint = function (tickValue) {\n        var startAngle = this.get('startAngle');\n        var endAngle = this.get('endAngle');\n        var angle = startAngle + (endAngle - startAngle) * tickValue;\n        return this.getCirclePoint(angle);\n    };\n    // 获取垂直于坐标轴的向量\n    Circle.prototype.getSideVector = function (offset, point) {\n        var center = this.get('center');\n        var vector = [point.x - center.x, point.y - center.y];\n        var factor = this.get('verticalFactor');\n        var vecLen = vec2.length(vector);\n        vec2.scale(vector, vector, (factor * offset) / vecLen);\n        return vector;\n    };\n    // 获取沿坐标轴方向的向量\n    Circle.prototype.getAxisVector = function (point) {\n        var center = this.get('center');\n        var vector = [point.x - center.x, point.y - center.y];\n        return [vector[1], -1 * vector[0]]; // 获取顺时针方向的向量\n    };\n    // 根据圆心和半径获取点\n    Circle.prototype.getCirclePoint = function (angle, radius) {\n        var center = this.get('center');\n        radius = radius || this.get('radius');\n        return {\n            x: center.x + Math.cos(angle) * radius,\n            y: center.y + Math.sin(angle) * radius,\n        };\n    };\n    return Circle;\n}(AxisBase));\nexport default Circle;\n//# sourceMappingURL=circle.js.map","import { __assign, __extends } from \"tslib\";\nimport { isNil } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { getMatrixByAngle } from '../util/matrix';\nimport Theme from '../util/theme';\nimport { formatPadding } from '../util/util';\nvar CrosshairBase = /** @class */ (function (_super) {\n    __extends(CrosshairBase, _super);\n    function CrosshairBase() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CrosshairBase.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'crosshair', type: 'base', line: {}, text: null, textBackground: {}, capture: false, defaultCfg: {\n                line: {\n                    style: {\n                        lineWidth: 1,\n                        stroke: Theme.lineColor,\n                    },\n                },\n                text: {\n                    position: 'start',\n                    offset: 10,\n                    autoRotate: false,\n                    content: null,\n                    style: {\n                        fill: Theme.textColor,\n                        textAlign: 'center',\n                        textBaseline: 'middle',\n                        fontFamily: Theme.fontFamily,\n                    },\n                },\n                textBackground: {\n                    padding: 5,\n                    style: {\n                        stroke: Theme.lineColor,\n                    },\n                },\n            } });\n    };\n    CrosshairBase.prototype.renderInner = function (group) {\n        if (this.get('line')) {\n            this.renderLine(group);\n        }\n        if (this.get('text')) {\n            this.renderText(group);\n            this.renderBackground(group);\n        }\n    };\n    CrosshairBase.prototype.renderText = function (group) {\n        var text = this.get('text');\n        var style = text.style, autoRotate = text.autoRotate, content = text.content;\n        if (!isNil(content)) {\n            var textPoint = this.getTextPoint();\n            var matrix = null;\n            if (autoRotate) {\n                var angle = this.getRotateAngle();\n                matrix = getMatrixByAngle(textPoint, angle);\n            }\n            this.addShape(group, {\n                type: 'text',\n                name: 'crosshair-text',\n                id: this.getElementId('text'),\n                attrs: __assign(__assign(__assign({}, textPoint), { text: content, matrix: matrix }), style),\n            });\n        }\n    };\n    CrosshairBase.prototype.renderLine = function (group) {\n        var path = this.getLinePath();\n        var line = this.get('line');\n        var style = line.style;\n        this.addShape(group, {\n            type: 'path',\n            name: 'crosshair-line',\n            id: this.getElementId('line'),\n            attrs: __assign({ path: path }, style),\n        });\n    };\n    // 绘制文本的背景\n    CrosshairBase.prototype.renderBackground = function (group) {\n        var textId = this.getElementId('text');\n        var textShape = group.findById(textId); // 查找文本\n        var textBackground = this.get('textBackground');\n        if (textBackground && textShape) {\n            var textBBox = textShape.getBBox();\n            var padding = formatPadding(textBackground.padding); // 用户传入的 padding 格式不定\n            var style = textBackground.style;\n            var backgroundShape = this.addShape(group, {\n                type: 'rect',\n                name: 'crosshair-text-background',\n                id: this.getElementId('text-background'),\n                attrs: __assign({ x: textBBox.x - padding[3], y: textBBox.y - padding[0], width: textBBox.width + padding[1] + padding[3], height: textBBox.height + padding[0] + padding[2], matrix: textShape.attr('matrix') }, style),\n            });\n            backgroundShape.toBack();\n        }\n    };\n    return CrosshairBase;\n}(GroupComponent));\nexport default CrosshairBase;\n//# sourceMappingURL=base.js.map","import { __assign, __extends } from \"tslib\";\nimport { getTextPoint } from '../util/util';\nimport CrosshairBase from './base';\nvar LineCrosshair = /** @class */ (function (_super) {\n    __extends(LineCrosshair, _super);\n    function LineCrosshair() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LineCrosshair.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'line', locationType: 'region', start: null, end: null });\n    };\n    // 直线的文本需要同直线垂直\n    LineCrosshair.prototype.getRotateAngle = function () {\n        var _a = this.getLocation(), start = _a.start, end = _a.end;\n        var position = this.get('text').position;\n        var angle = Math.atan2(end.y - start.y, end.x - start.x);\n        var tangentAngle = position === 'start' ? angle - Math.PI / 2 : angle + Math.PI / 2;\n        return tangentAngle;\n    };\n    LineCrosshair.prototype.getTextPoint = function () {\n        var _a = this.getLocation(), start = _a.start, end = _a.end;\n        var _b = this.get('text'), position = _b.position, offset = _b.offset;\n        return getTextPoint(start, end, position, offset);\n    };\n    LineCrosshair.prototype.getLinePath = function () {\n        var _a = this.getLocation(), start = _a.start, end = _a.end;\n        return [\n            ['M', start.x, start.y],\n            ['L', end.x, end.y],\n        ];\n    };\n    return LineCrosshair;\n}(CrosshairBase));\nexport default LineCrosshair;\n//# sourceMappingURL=line.js.map","import { __assign, __extends } from \"tslib\";\nimport { getCirclePoint } from '../util/util';\nimport CrosshairBase from './base';\nvar LineCrosshair = /** @class */ (function (_super) {\n    __extends(LineCrosshair, _super);\n    function LineCrosshair() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LineCrosshair.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'circle', locationType: 'circle', center: null, radius: 100, startAngle: -Math.PI / 2, endAngle: (Math.PI * 3) / 2 });\n    };\n    LineCrosshair.prototype.getRotateAngle = function () {\n        var _a = this.getLocation(), startAngle = _a.startAngle, endAngle = _a.endAngle;\n        var position = this.get('text').position;\n        var tangentAngle = position === 'start' ? startAngle + Math.PI / 2 : endAngle - Math.PI / 2;\n        return tangentAngle;\n    };\n    LineCrosshair.prototype.getTextPoint = function () {\n        var text = this.get('text');\n        var position = text.position, offset = text.offset;\n        var _a = this.getLocation(), center = _a.center, radius = _a.radius, startAngle = _a.startAngle, endAngle = _a.endAngle;\n        var angle = position === 'start' ? startAngle : endAngle;\n        var tangentAngle = this.getRotateAngle() - Math.PI;\n        var point = getCirclePoint(center, radius, angle);\n        // 这个地方其实应该求切线向量然后在乘以 offset，但是太啰嗦了，直接给出结果\n        // const tangent = [Math.cos(tangentAngle), Math.sin(tangentAngle)];\n        // const offsetVector = vec2.scale([], tangent, offset);\n        var offsetX = Math.cos(tangentAngle) * offset;\n        var offsetY = Math.sin(tangentAngle) * offset;\n        return {\n            x: point.x + offsetX,\n            y: point.y + offsetY,\n        };\n    };\n    LineCrosshair.prototype.getLinePath = function () {\n        var _a = this.getLocation(), center = _a.center, radius = _a.radius, startAngle = _a.startAngle, endAngle = _a.endAngle;\n        var path = null;\n        if (endAngle - startAngle === Math.PI * 2) {\n            // 整圆\n            var x = center.x, y = center.y;\n            path = [\n                ['M', x, y - radius],\n                ['A', radius, radius, 0, 1, 1, x, y + radius],\n                ['A', radius, radius, 0, 1, 1, x, y - radius],\n                ['Z'],\n            ];\n        }\n        else {\n            var startPoint = getCirclePoint(center, radius, startAngle);\n            var endPoint = getCirclePoint(center, radius, endAngle);\n            var large = Math.abs(endAngle - startAngle) > Math.PI ? 1 : 0;\n            var sweep = startAngle > endAngle ? 0 : 1;\n            path = [\n                ['M', startPoint.x, startPoint.y],\n                ['A', radius, radius, 0, large, sweep, endPoint.x, endPoint.y],\n            ];\n        }\n        return path;\n    };\n    return LineCrosshair;\n}(CrosshairBase));\nexport default LineCrosshair;\n//# sourceMappingURL=circle.js.map","export var CONTAINER_CLASS = 'g2-crosshair';\nexport var CROSSHAIR_LINE = CONTAINER_CLASS + \"-line\";\nexport var CROSSHAIR_TEXT = CONTAINER_CLASS + \"-text\";\n//# sourceMappingURL=css-const.js.map","import { __assign, __extends } from \"tslib\";\nimport { createDom, modifyCSS } from '@antv/dom-util';\nimport { substitute, hasKey } from '@antv/util';\nimport { toPx, getTextPoint } from '../util/util';\nimport HtmlComponent from '../abstract/html-component';\nimport * as CssConst from './css-const';\nimport HtmlTheme from './html-theme';\nvar HtmlCrosshair = /** @class */ (function (_super) {\n    __extends(HtmlCrosshair, _super);\n    function HtmlCrosshair() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HtmlCrosshair.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'crosshair', type: 'html', locationType: 'region', start: { x: 0, y: 0 }, end: { x: 0, y: 0 }, capture: false, text: null, containerTpl: \"<div class=\\\"\" + CssConst.CONTAINER_CLASS + \"\\\"></div>\", crosshairTpl: \"<div class=\\\"\" + CssConst.CROSSHAIR_LINE + \"\\\"></div>\", textTpl: \"<span class=\\\"\" + CssConst.CROSSHAIR_TEXT + \"\\\">{content}</span>\", domStyles: null, containerClassName: CssConst.CONTAINER_CLASS, defaultStyles: HtmlTheme, defaultCfg: {\n                text: {\n                    position: 'start',\n                    content: null,\n                    align: 'center',\n                    offset: 10\n                }\n            } });\n    };\n    HtmlCrosshair.prototype.render = function () {\n        this.resetText();\n        this.resetPosition();\n    };\n    // 绘制 crosshair\n    HtmlCrosshair.prototype.initCrossHair = function () {\n        var container = this.getContainer();\n        var crosshairTpl = this.get('crosshairTpl');\n        var crosshairEl = createDom(crosshairTpl);\n        container.appendChild(crosshairEl);\n        this.applyStyle(CssConst.CROSSHAIR_LINE, crosshairEl);\n        this.set('crosshairEl', crosshairEl);\n    };\n    // 获取文本的位置\n    HtmlCrosshair.prototype.getTextPoint = function () {\n        var _a = this.getLocation(), start = _a.start, end = _a.end;\n        var _b = this.get('text'), position = _b.position, offset = _b.offset;\n        return getTextPoint(start, end, position, offset);\n    };\n    // 设置 text\n    HtmlCrosshair.prototype.resetText = function () {\n        var text = this.get('text');\n        var textEl = this.get('textEl');\n        if (text) {\n            var content = text.content;\n            if (!textEl) {\n                var container = this.getContainer();\n                var textTpl = substitute(this.get('textTpl'), text);\n                textEl = createDom(textTpl);\n                container.appendChild(textEl);\n                this.applyStyle(CssConst.CROSSHAIR_TEXT, textEl);\n                this.set('textEl', textEl);\n            }\n            textEl.innerHTML = content;\n        }\n        else if (textEl) {\n            textEl.remove();\n        }\n    };\n    // 是否垂直\n    HtmlCrosshair.prototype.isVertical = function (start, end) {\n        return start.x === end.x;\n    };\n    // 重新调整位置\n    HtmlCrosshair.prototype.resetPosition = function () {\n        var crosshairEl = this.get('crosshairEl');\n        if (!crosshairEl) {\n            this.initCrossHair();\n            crosshairEl = this.get('crosshairEl');\n        }\n        var start = this.get('start');\n        var end = this.get('end');\n        var minX = Math.min(start.x, end.x);\n        var minY = Math.min(start.y, end.y);\n        if (this.isVertical(start, end)) {\n            modifyCSS(crosshairEl, {\n                width: '1px',\n                height: toPx(Math.abs(end.y - start.y))\n            });\n        }\n        else {\n            modifyCSS(crosshairEl, {\n                height: '1px',\n                width: toPx(Math.abs(end.x - start.x))\n            });\n        }\n        modifyCSS(crosshairEl, {\n            top: toPx(minY),\n            left: toPx(minX)\n        });\n        this.alignText();\n    };\n    HtmlCrosshair.prototype.alignText = function () {\n        // 重新设置 text 位置\n        var textEl = this.get('textEl');\n        if (textEl) {\n            var align = this.get('text').align;\n            var clientWidth = textEl.clientWidth;\n            var point = this.getTextPoint();\n            switch (align) {\n                case 'center':\n                    point.x = point.x - clientWidth / 2;\n                    break;\n                case 'right':\n                    point.x = point.x - clientWidth;\n                case 'left':\n                    break;\n            }\n            modifyCSS(textEl, {\n                top: toPx(point.y),\n                left: toPx(point.x)\n            });\n        }\n    };\n    HtmlCrosshair.prototype.updateInner = function (cfg) {\n        if (hasKey(cfg, 'text')) {\n            this.resetText();\n        }\n        _super.prototype.updateInner.call(this, cfg);\n    };\n    return HtmlCrosshair;\n}(HtmlComponent));\nexport default HtmlCrosshair;\n//# sourceMappingURL=html.js.map","import { __assign, __extends } from \"tslib\";\nimport { each, isString, mix, isFunction } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport Theme from '../util/theme';\nvar GridBase = /** @class */ (function (_super) {\n    __extends(GridBase, _super);\n    function GridBase() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GridBase.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'grid', line: {}, alternateColor: null, capture: false, items: [], closed: false, defaultCfg: {\n                line: {\n                    type: 'line',\n                    style: {\n                        lineWidth: 1,\n                        stroke: Theme.lineColor,\n                    },\n                },\n            } });\n    };\n    /**\n     * 获取栅格线的类型\n     * @return {string} 栅格线类型\n     */\n    GridBase.prototype.getLineType = function () {\n        var line = this.get('line') || this.get('defaultCfg').line;\n        return line.type;\n    };\n    GridBase.prototype.renderInner = function (group) {\n        this.drawGrid(group);\n    };\n    GridBase.prototype.getAlternatePath = function (prePoints, points) {\n        var regionPath = this.getGridPath(prePoints);\n        var reversePoints = points.slice(0).reverse();\n        var nextPath = this.getGridPath(reversePoints, true);\n        var closed = this.get('closed');\n        if (closed) {\n            regionPath = regionPath.concat(nextPath);\n        }\n        else {\n            nextPath[0][0] = 'L'; // 更新第一个节点\n            regionPath = regionPath.concat(nextPath);\n            regionPath.push(['Z']);\n        }\n        return regionPath;\n    };\n    // 获取路径的配置项\n    GridBase.prototype.getPathStyle = function () {\n        return this.get('line').style;\n    };\n    // 绘制栅格\n    GridBase.prototype.drawGrid = function (group) {\n        var _this = this;\n        var line = this.get('line');\n        var items = this.get('items');\n        var alternateColor = this.get('alternateColor');\n        var preItem = null;\n        each(items, function (item, index) {\n            var id = item.id || index;\n            // 绘制栅格线\n            if (line) {\n                var style = _this.getPathStyle();\n                style = isFunction(style) ? style(item, index, items) : style;\n                var lineId = _this.getElementId(\"line-\" + id);\n                var gridPath = _this.getGridPath(item.points);\n                _this.addShape(group, {\n                    type: 'path',\n                    name: 'grid-line',\n                    id: lineId,\n                    attrs: mix({\n                        path: gridPath,\n                    }, style),\n                });\n            }\n            // 如果存在 alternateColor 则绘制矩形\n            // 从第二个栅格线开始绘制\n            if (alternateColor && index > 0) {\n                var regionId = _this.getElementId(\"region-\" + id);\n                var isEven = index % 2 === 0;\n                if (isString(alternateColor)) {\n                    // 如果颜色是单值，则是仅绘制偶数时的区域\n                    if (isEven) {\n                        _this.drawAlternateRegion(regionId, group, preItem.points, item.points, alternateColor);\n                    }\n                }\n                else {\n                    var color = isEven ? alternateColor[1] : alternateColor[0];\n                    _this.drawAlternateRegion(regionId, group, preItem.points, item.points, color);\n                }\n            }\n            preItem = item;\n        });\n    };\n    // 绘制栅格线间的间隔\n    GridBase.prototype.drawAlternateRegion = function (id, group, prePoints, points, color) {\n        var regionPath = this.getAlternatePath(prePoints, points);\n        this.addShape(group, {\n            type: 'path',\n            id: id,\n            name: 'grid-region',\n            attrs: {\n                path: regionPath,\n                fill: color,\n            },\n        });\n    };\n    return GridBase;\n}(GroupComponent));\nexport default GridBase;\n//# sourceMappingURL=base.js.map","import { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport GridBase from './base';\nfunction distance(x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Circle.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'circle', \n            /**\n             * 中心点\n             * @type {object}\n             */\n            center: null, \n            /**\n             * 栅格线是否封闭\n             * @type {true}\n             */\n            closed: true });\n    };\n    Circle.prototype.getGridPath = function (points, reversed) {\n        var lineType = this.getLineType();\n        var closed = this.get('closed');\n        var path = [];\n        if (points.length) {\n            // 防止出错\n            if (lineType === 'circle') {\n                var center = this.get('center');\n                var firstPoint = points[0];\n                var radius_1 = distance(center.x, center.y, firstPoint.x, firstPoint.y);\n                var sweepFlag_1 = reversed ? 0 : 1; // 顺时针还是逆时针\n                if (closed) {\n                    // 封闭时，绘制整个圆\n                    path.push(['M', center.x, center.y - radius_1]);\n                    path.push(['A', radius_1, radius_1, 0, 0, sweepFlag_1, center.x, center.y + radius_1]);\n                    path.push(['A', radius_1, radius_1, 0, 0, sweepFlag_1, center.x, center.y - radius_1]);\n                    path.push(['Z']);\n                }\n                else {\n                    each(points, function (point, index) {\n                        if (index === 0) {\n                            path.push(['M', point.x, point.y]);\n                        }\n                        else {\n                            path.push(['A', radius_1, radius_1, 0, 0, sweepFlag_1, point.x, point.y]);\n                        }\n                    });\n                }\n            }\n            else {\n                each(points, function (point, index) {\n                    if (index === 0) {\n                        path.push(['M', point.x, point.y]);\n                    }\n                    else {\n                        path.push(['L', point.x, point.y]);\n                    }\n                });\n                if (closed) {\n                    path.push(['Z']);\n                }\n            }\n        }\n        return path;\n    };\n    return Circle;\n}(GridBase));\nexport default Circle;\n//# sourceMappingURL=circle.js.map","var _a;\nimport Theme from '../util/theme';\n// tooltip 相关 dom 的 css 类名\nimport * as CssConst from './css-const';\nexport default (_a = {},\n    // css style for tooltip\n    _a[\"\" + CssConst.CONTAINER_CLASS] = {\n        position: 'absolute',\n        visibility: 'visible',\n        // @2018-07-25 by blue.lb 这里去掉浮动，火狐上存在样式错位\n        // whiteSpace: 'nowrap',\n        zIndex: 8,\n        transition: 'visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), ' +\n            'left 0.4s cubic-bezier(0.23, 1, 0.32, 1), ' +\n            'top 0.4s cubic-bezier(0.23, 1, 0.32, 1)',\n        backgroundColor: 'rgba(255, 255, 255, 0.9)',\n        boxShadow: '0px 0px 10px #aeaeae',\n        borderRadius: '3px',\n        color: 'rgb(87, 87, 87)',\n        fontSize: '12px',\n        fontFamily: Theme.fontFamily,\n        lineHeight: '20px',\n        padding: '10px 10px 6px 10px',\n    },\n    _a[\"\" + CssConst.TITLE_CLASS] = {\n        marginBottom: '4px',\n    },\n    _a[\"\" + CssConst.LIST_CLASS] = {\n        margin: '0px',\n        listStyleType: 'none',\n        padding: '0px',\n    },\n    _a[\"\" + CssConst.LIST_ITEM_CLASS] = {\n        listStyleType: 'none',\n        marginBottom: '4px',\n    },\n    _a[\"\" + CssConst.MARKER_CLASS] = {\n        width: '8px',\n        height: '8px',\n        borderRadius: '50%',\n        display: 'inline-block',\n        marginRight: '8px',\n    },\n    _a[\"\" + CssConst.VALUE_CLASS] = {\n        display: 'inline-block',\n        float: 'right',\n        marginLeft: '30px',\n    },\n    _a[\"\" + CssConst.CROSSHAIR_X] = {\n        position: 'absolute',\n        width: '1px',\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\n    },\n    _a[\"\" + CssConst.CROSSHAIR_Y] = {\n        position: 'absolute',\n        height: '1px',\n        backgroundColor: 'rgba(0, 0, 0, 0.25)',\n    },\n    _a);\n//# sourceMappingURL=html-theme.js.map","import { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport GridBase from './base';\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Line.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'line' });\n    };\n    Line.prototype.getGridPath = function (points) {\n        var path = [];\n        each(points, function (point, index) {\n            if (index === 0) {\n                path.push(['M', point.x, point.y]);\n            }\n            else {\n                path.push(['L', point.x, point.y]);\n            }\n        });\n        return path;\n    };\n    return Line;\n}(GridBase));\nexport default Line;\n//# sourceMappingURL=line.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { createBBox, formatPadding } from '../util/util';\nvar LegendBase = /** @class */ (function (_super) {\n    __extends(LegendBase, _super);\n    function LegendBase() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LegendBase.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'legend', \n            /**\n             * 布局方式： horizontal，vertical\n             * @type {String}\n             */\n            layout: 'horizontal', locationType: 'point', x: 0, y: 0, offsetX: 0, offsetY: 0, title: null, background: null });\n    };\n    LegendBase.prototype.getLayoutBBox = function () {\n        var bbox = _super.prototype.getLayoutBBox.call(this);\n        var minX = this.get('x');\n        var minY = this.get('y');\n        var maxWidth = this.get('maxWidth');\n        var maxHeight = this.get('maxHeight');\n        var width = bbox.maxX - minX;\n        var height = bbox.maxY - minY;\n        if (maxWidth) {\n            width = Math.min(width, maxWidth);\n        }\n        if (maxHeight) {\n            height = Math.min(height, maxHeight);\n        }\n        return createBBox(minX, minY, width, height);\n    };\n    LegendBase.prototype.setLocation = function (cfg) {\n        this.set('x', cfg.x);\n        this.set('y', cfg.y);\n        this.resetLocation();\n    };\n    LegendBase.prototype.resetLocation = function () {\n        var x = this.get('x');\n        var y = this.get('y');\n        var offsetX = this.get('offsetX');\n        var offsetY = this.get('offsetY');\n        this.moveElementTo(this.get('group'), {\n            x: x + offsetX,\n            y: y + offsetY,\n        });\n    };\n    LegendBase.prototype.applyOffset = function () {\n        this.resetLocation();\n    };\n    // 获取当前绘制的点\n    LegendBase.prototype.getDrawPoint = function () {\n        return this.get('currentPoint');\n    };\n    LegendBase.prototype.setDrawPoint = function (point) {\n        return this.set('currentPoint', point);\n    };\n    // 复写父类定义的绘制方法\n    LegendBase.prototype.renderInner = function (group) {\n        this.resetDraw();\n        if (this.get('title')) {\n            this.drawTitle(group);\n        }\n        this.drawLegendContent(group);\n        if (this.get('background')) {\n            this.drawBackground(group);\n        }\n        // this.resetLocation(); // 在顶层已经在处理偏移时一起处理了\n    };\n    // 绘制背景\n    LegendBase.prototype.drawBackground = function (group) {\n        var background = this.get('background');\n        var bbox = group.getBBox();\n        var padding = formatPadding(background.padding);\n        var attrs = __assign({ \n            // 背景从 (0,0) 开始绘制\n            x: 0, y: 0, width: bbox.width + padding[1] + padding[3], height: bbox.height + padding[0] + padding[2] }, background.style);\n        var backgroundShape = this.addShape(group, {\n            type: 'rect',\n            id: this.getElementId('background'),\n            name: 'legend-background',\n            attrs: attrs,\n        });\n        backgroundShape.toBack();\n    };\n    // 绘制标题，标题在图例项的上面\n    LegendBase.prototype.drawTitle = function (group) {\n        var currentPoint = this.get('currentPoint');\n        var titleCfg = this.get('title');\n        var spacing = titleCfg.spacing, style = titleCfg.style, text = titleCfg.text;\n        var shape = this.addShape(group, {\n            type: 'text',\n            id: this.getElementId('title'),\n            name: 'legend-title',\n            attrs: __assign({ text: text, x: currentPoint.x, y: currentPoint.y }, style),\n        });\n        var bbox = shape.getBBox();\n        // 标题单独在一行\n        this.set('currentPoint', { x: currentPoint.x, y: bbox.maxY + spacing });\n    };\n    // 重置绘制时开始的位置，如果绘制边框，考虑边框的 padding\n    LegendBase.prototype.resetDraw = function () {\n        var background = this.get('background');\n        var currentPoint = { x: 0, y: 0 };\n        if (background) {\n            var padding = formatPadding(background.padding);\n            currentPoint.x = padding[3]; // 左边 padding\n            currentPoint.y = padding[0]; // 上面 padding\n        }\n        this.set('currentPoint', currentPoint); // 设置绘制的初始位置\n    };\n    return LegendBase;\n}(GroupComponent));\nexport default LegendBase;\n//# sourceMappingURL=base.js.map","import { __assign, __extends } from \"tslib\";\nimport { clamp, each, filter, get, mix } from '@antv/util';\nimport { ellipsisLabel } from '../util/label';\nimport { getMatrixByAngle, getMatrixByTranslate } from '../util/matrix';\nimport { getStatesStyle } from '../util/state';\nimport Theme from '../util/theme';\nimport LegendBase from './base';\nvar Category = /** @class */ (function (_super) {\n    __extends(Category, _super);\n    function Category() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.currentPageIndex = 1;\n        _this.totalPagesCnt = 1;\n        _this.pageWidth = 0;\n        _this.pageHeight = 0;\n        _this.startX = 0;\n        _this.startY = 0;\n        _this.onNavigationBack = function () {\n            var itemGroup = _this.getElementByLocalId('item-group');\n            if (_this.currentPageIndex > 1) {\n                _this.currentPageIndex -= 1;\n                _this.updateNavigation();\n                var matrix = _this.getCurrentNavigationMatrix();\n                if (_this.get('animate')) {\n                    itemGroup.animate({\n                        matrix: matrix,\n                    }, 100);\n                }\n                else {\n                    itemGroup.attr({ matrix: matrix });\n                }\n            }\n        };\n        _this.onNavigationAfter = function () {\n            var itemGroup = _this.getElementByLocalId('item-group');\n            if (_this.currentPageIndex < _this.totalPagesCnt) {\n                _this.currentPageIndex += 1;\n                _this.updateNavigation();\n                var matrix = _this.getCurrentNavigationMatrix();\n                if (_this.get('animate')) {\n                    itemGroup.animate({\n                        matrix: matrix,\n                    }, 100);\n                }\n                else {\n                    itemGroup.attr({ matrix: matrix });\n                }\n            }\n        };\n        return _this;\n    }\n    Category.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'legend', type: 'category', itemSpacing: 24, itemMarginBottom: 8, maxItemWidth: null, itemWidth: null, itemHeight: null, itemName: {}, itemValue: null, maxWidth: null, maxHeight: null, marker: {}, items: [], itemStates: {}, itemBackground: {}, defaultCfg: {\n                title: {\n                    spacing: 5,\n                    style: {\n                        fill: Theme.textColor,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        textBaseline: 'top',\n                    },\n                },\n                background: {\n                    padding: 5,\n                    style: {\n                        stroke: Theme.lineColor,\n                    },\n                },\n                itemBackground: {\n                    style: {\n                        opacity: 0,\n                        fill: '#fff',\n                    },\n                },\n                itemName: {\n                    spacing: 16,\n                    style: {\n                        fill: Theme.textColor,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        textBaseline: 'middle',\n                    },\n                },\n                marker: {\n                    spacing: 8,\n                    style: {\n                        r: 6,\n                        symbol: 'circle',\n                    },\n                },\n                itemValue: {\n                    alignRight: false,\n                    formatter: null,\n                    style: {\n                        fill: Theme.textColor,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        textBaseline: 'middle',\n                    },\n                },\n                itemStates: {\n                    active: {\n                        nameStyle: {\n                            opacity: 0.8,\n                        },\n                    },\n                    unchecked: {\n                        nameStyle: {\n                            fill: Theme.uncheckedColor,\n                        },\n                        markerStyle: {\n                            fill: Theme.uncheckedColor,\n                            stroke: Theme.uncheckedColor,\n                        },\n                    },\n                    inactive: {\n                        nameStyle: {\n                            fill: Theme.uncheckedColor,\n                        },\n                        markerStyle: {\n                            opacity: 0.2,\n                        },\n                    },\n                },\n            } });\n    };\n    // 实现 IList 接口\n    Category.prototype.isList = function () {\n        return true;\n    };\n    /**\n     * 获取图例项\n     * @return {ListItem[]} 列表项集合\n     */\n    Category.prototype.getItems = function () {\n        return this.get('items');\n    };\n    /**\n     * 设置列表项\n     * @param {ListItem[]} items 列表项集合\n     */\n    Category.prototype.setItems = function (items) {\n        this.update({\n            items: items,\n        });\n    };\n    /**\n     * 更新列表项\n     * @param {ListItem} item 列表项\n     * @param {object}   cfg  列表项\n     */\n    Category.prototype.updateItem = function (item, cfg) {\n        mix(item, cfg);\n        this.clear(); // 由于单个图例项变化，会引起全局变化，所以全部更新\n        this.render();\n    };\n    /**\n     * 清空列表\n     */\n    Category.prototype.clearItems = function () {\n        var itemGroup = this.getElementByLocalId('item-group');\n        itemGroup && itemGroup.clear();\n    };\n    /**\n     * 设置列表项的状态\n     * @param {ListItem} item  列表项\n     * @param {string}   state 状态名\n     * @param {boolean}  value 状态值, true, false\n     */\n    Category.prototype.setItemState = function (item, state, value) {\n        item[state] = value;\n        var itemElement = this.getElementByLocalId(\"item-\" + item.id);\n        if (itemElement) {\n            var items = this.getItems();\n            var index = items.indexOf(item);\n            var offsetGroup = this.createOffScreenGroup(); // 离屏的 group\n            var newElement = this.drawItem(item, index, this.getItemHeight(), offsetGroup);\n            this.updateElements(newElement, itemElement); // 更新整个分组\n            this.clearUpdateStatus(itemElement); // 清理更新状态，防止出现 bug\n        }\n    };\n    /**\n     * 是否存在指定的状态\n     * @param {ListItem} item  列表项\n     * @param {boolean} state 状态名\n     */\n    Category.prototype.hasState = function (item, state) {\n        return !!item[state];\n    };\n    Category.prototype.getItemStates = function (item) {\n        var itemStates = this.get('itemStates');\n        var rst = [];\n        each(itemStates, function (v, k) {\n            if (item[k]) {\n                // item.selected\n                rst.push(k);\n            }\n        });\n        return rst;\n    };\n    /**\n     * 清楚所有列表项的状态\n     * @param {string} state 状态值\n     */\n    Category.prototype.clearItemsState = function (state) {\n        var _this = this;\n        var items = this.getItemsByState(state);\n        each(items, function (item) {\n            _this.setItemState(item, state, false);\n        });\n    };\n    /**\n     * 根据状态获取图例项\n     * @param  {string}     state [description]\n     * @return {ListItem[]}       [description]\n     */\n    Category.prototype.getItemsByState = function (state) {\n        var _this = this;\n        var items = this.getItems();\n        return filter(items, function (item) {\n            return _this.hasState(item, state);\n        });\n    };\n    // 绘制 legend 的选项\n    Category.prototype.drawLegendContent = function (group) {\n        this.processItems();\n        this.drawItems(group);\n    };\n    // 防止未设置 id\n    Category.prototype.processItems = function () {\n        var items = this.get('items');\n        each(items, function (item) {\n            if (!item.id) {\n                // 如果没有设置 id，默认使用 name\n                item.id = item.name;\n            }\n        });\n    };\n    // 绘制所有的图例选项\n    Category.prototype.drawItems = function (group) {\n        var _this = this;\n        var itemContainerGroup = this.addGroup(group, {\n            id: this.getElementId('item-container-group'),\n            name: 'legend-item-container-group',\n        });\n        var itemGroup = this.addGroup(itemContainerGroup, {\n            id: this.getElementId('item-group'),\n            name: 'legend-item-group',\n        });\n        var itemHeight = this.getItemHeight();\n        var itemWidth = this.get('itemWidth');\n        var itemSpacing = this.get('itemSpacing');\n        var itemMarginBottom = this.get('itemMarginBottom');\n        var currentPoint = this.get('currentPoint');\n        var startX = currentPoint.x;\n        var startY = currentPoint.y;\n        var layout = this.get('layout');\n        var items = this.get('items');\n        var wrapped = false;\n        var pageWidth = 0;\n        var maxWidth = this.get('maxWidth'); // 最大宽度，会导致 layout : 'horizontal' 时自动换行\n        var maxHeight = this.get('maxHeight'); // 最大高度，会导致出现分页\n        // 暂时不考虑分页\n        each(items, function (item, index) {\n            var subGroup = _this.drawItem(item, index, itemHeight, itemGroup);\n            var bbox = subGroup.getBBox();\n            var width = itemWidth || bbox.width;\n            if (width > pageWidth) {\n                pageWidth = width;\n            }\n            if (layout === 'horizontal') {\n                // 如果水平布局\n                if (maxWidth && maxWidth < currentPoint.x + width - startX) {\n                    // 检测是否换行\n                    wrapped = true;\n                    currentPoint.x = startX;\n                    currentPoint.y += itemHeight + itemMarginBottom;\n                }\n                _this.moveElementTo(subGroup, currentPoint);\n                currentPoint.x += width + itemSpacing;\n            }\n            else {\n                // 如果垂直布局\n                if (maxHeight && maxHeight < currentPoint.y + itemHeight + itemMarginBottom - startY) {\n                    // 换行\n                    wrapped = true;\n                    currentPoint.x += pageWidth + itemSpacing;\n                    currentPoint.y = startY;\n                    pageWidth = 0;\n                }\n                _this.moveElementTo(subGroup, currentPoint);\n                currentPoint.y += itemHeight + itemMarginBottom; // itemSpacing 仅影响水平间距\n            }\n        });\n        if (wrapped && this.get('flipPage')) {\n            this.pageHeight = 0;\n            this.pageWidth = 0;\n            this.totalPagesCnt = 1;\n            this.startX = startX;\n            this.startY = startY;\n            this.adjustNavigation(group, itemGroup);\n        }\n    };\n    // 获取图例项的高度，如果未定义，则按照 name 的高度计算\n    Category.prototype.getItemHeight = function () {\n        var itemHeight = this.get('itemHeight');\n        if (!itemHeight) {\n            var nameCfg = this.get('itemName');\n            if (nameCfg) {\n                itemHeight = nameCfg.style.fontSize;\n            }\n        }\n        return itemHeight;\n    };\n    // 绘制 marker\n    Category.prototype.drawMarker = function (container, markerCfg, item, itemHeight) {\n        var markerAttrs = __assign(__assign(__assign({ x: 0, y: itemHeight / 2 }, markerCfg.style), { symbol: get(item.marker, 'symbol', 'circle') }), get(item.marker, 'style', {}));\n        var shape = this.addShape(container, {\n            type: 'marker',\n            id: this.getElementId(\"item-\" + item.id + \"-marker\"),\n            name: 'legend-item-marker',\n            attrs: markerAttrs,\n        });\n        var bbox = shape.getBBox();\n        shape.attr('x', bbox.width / 2); // marker 需要左对齐，所以不能占用左侧的空间\n        var _a = shape.attr(), stroke = _a.stroke, fill = _a.fill;\n        if (stroke) {\n            shape.set('isStroke', true);\n        }\n        if (fill) {\n            shape.set('isFill', true);\n        }\n        return shape;\n    };\n    // 绘制文本\n    Category.prototype.drawItemText = function (container, textName, cfg, item, itemHeight, xPosition, index) {\n        var formatter = cfg.formatter;\n        var attrs = __assign({ x: xPosition, y: itemHeight / 2, text: formatter ? formatter(item[textName], item, index) : item[textName] }, cfg.style);\n        return this.addShape(container, {\n            type: 'text',\n            id: this.getElementId(\"item-\" + item.id + \"-\" + textName),\n            name: \"legend-item-\" + textName,\n            attrs: attrs,\n        });\n    };\n    // 绘制图例项\n    Category.prototype.drawItem = function (item, index, itemHeight, itemGroup) {\n        var groupId = \"item-\" + item.id;\n        // 设置单独的 Group 用于 setClip\n        var subContainer = this.addGroup(itemGroup, {\n            name: 'legend-item-container',\n            id: this.getElementId(\"item-container-\" + groupId),\n            delegateObject: {\n                item: item,\n                index: index,\n            },\n        });\n        var subGroup = this.addGroup(subContainer, {\n            name: 'legend-item',\n            id: this.getElementId(groupId),\n            delegateObject: {\n                item: item,\n                index: index,\n            },\n        });\n        var marker = this.get('marker');\n        var itemName = this.get('itemName');\n        var itemValue = this.get('itemValue');\n        var itemBackground = this.get('itemBackground');\n        var itemWidth = this.getLimitItemWidth();\n        var curX = 0; // 记录当前 x 的位置\n        if (marker) {\n            var markerShape = this.drawMarker(subGroup, marker, item, itemHeight);\n            curX = markerShape.getBBox().maxX + marker.spacing;\n        }\n        if (itemName) {\n            var nameShape = this.drawItemText(subGroup, 'name', itemName, item, itemHeight, curX, index);\n            if (itemWidth) {\n                // 设置了 item 的最大宽度限制，并且超出了，进行省略处理\n                ellipsisLabel(true, nameShape, clamp(itemWidth - curX, 0, itemWidth));\n            }\n            curX = nameShape.getBBox().maxX + itemName.spacing;\n        }\n        if (itemValue) {\n            var valueShape = this.drawItemText(subGroup, 'value', itemValue, item, itemHeight, curX, index);\n            if (itemWidth) {\n                if (itemValue.alignRight) {\n                    valueShape.attr({\n                        textAlign: 'right',\n                        x: itemWidth,\n                    });\n                    ellipsisLabel(true, valueShape, clamp(itemWidth - curX, 0, itemWidth), 'head');\n                }\n                else {\n                    ellipsisLabel(true, valueShape, clamp(itemWidth - curX, 0, itemWidth));\n                }\n            }\n        }\n        // 添加透明的背景，便于拾取和包围盒计算\n        if (itemBackground) {\n            var bbox = subGroup.getBBox();\n            var backShape = this.addShape(subGroup, {\n                type: 'rect',\n                name: 'legend-item-background',\n                id: this.getElementId(groupId + \"-background\"),\n                attrs: __assign({ x: 0, y: 0, width: bbox.width, height: itemHeight }, itemBackground.style),\n            });\n            backShape.toBack();\n        }\n        this.applyItemStates(item, subGroup);\n        return subGroup;\n    };\n    // 加上分页器并重新排序 items\n    Category.prototype.adjustNavigation = function (container, itemGroup) {\n        var _this = this;\n        var startX = this.startX;\n        var startY = this.startY;\n        var layout = this.get('layout');\n        var subGroups = itemGroup.findAll(function (item) { return item.get('name') === 'legend-item'; });\n        var maxWidth = this.get('maxWidth');\n        var maxHeight = this.get('maxHeight');\n        var itemWidth = this.get('itemWidth');\n        var itemSpacing = this.get('itemSpacing');\n        var itemHeight = this.getItemHeight();\n        var navigation = this.drawNavigation(container, layout, '00/00', 12);\n        var navigationBBox = navigation.getBBox();\n        var currentPoint = { x: startX, y: startY };\n        var pages = 1;\n        var widthLimit = 0;\n        var pageWidth = 0;\n        var maxItemWidth = 0;\n        if (layout === 'horizontal') {\n            this.pageHeight = itemHeight;\n            each(subGroups, function (item) {\n                var bbox = item.getBBox();\n                var width = itemWidth || bbox.width;\n                if ((widthLimit && widthLimit < currentPoint.x + width + itemSpacing) ||\n                    maxWidth < currentPoint.x + width + itemSpacing + navigationBBox.width) {\n                    if (pages === 1) {\n                        widthLimit = currentPoint.x + itemSpacing;\n                        _this.pageWidth = widthLimit;\n                        _this.moveElementTo(navigation, {\n                            x: maxWidth - itemSpacing - navigationBBox.width - navigationBBox.minX,\n                            y: currentPoint.y + itemHeight / 2 - navigationBBox.height / 2 - navigationBBox.minY,\n                        });\n                    }\n                    pages += 1;\n                    currentPoint.x = startX;\n                    currentPoint.y += itemHeight;\n                }\n                _this.moveElementTo(item, currentPoint);\n                item.getParent().setClip({\n                    type: 'rect',\n                    attrs: {\n                        x: currentPoint.x,\n                        y: currentPoint.y,\n                        width: width + itemSpacing,\n                        height: itemHeight,\n                    },\n                });\n                currentPoint.x += width + itemSpacing;\n            });\n        }\n        else {\n            var itemMarginBottom_1 = this.get('itemMarginBottom');\n            each(subGroups, function (item) {\n                var bbox = item.getBBox();\n                if (bbox.width > pageWidth) {\n                    pageWidth = bbox.width;\n                }\n            });\n            maxItemWidth = pageWidth;\n            pageWidth += itemSpacing;\n            if (maxWidth) {\n                // maxWidth 限制加上\n                pageWidth = Math.min(maxWidth, pageWidth);\n                maxItemWidth = Math.min(maxWidth, maxItemWidth);\n            }\n            this.pageWidth = pageWidth;\n            this.pageHeight = maxHeight - Math.max(navigationBBox.height, (itemHeight + itemMarginBottom_1));\n            var cntPerPage_1 = Math.floor(this.pageHeight / (itemHeight + itemMarginBottom_1));\n            each(subGroups, function (item, index) {\n                if (index !== 0 && index % cntPerPage_1 === 0) {\n                    pages += 1;\n                    currentPoint.x += pageWidth;\n                    currentPoint.y = startY;\n                }\n                _this.moveElementTo(item, currentPoint);\n                item.getParent().setClip({\n                    type: 'rect',\n                    attrs: {\n                        x: currentPoint.x,\n                        y: currentPoint.y,\n                        width: pageWidth,\n                        height: itemHeight,\n                    },\n                });\n                currentPoint.y += itemHeight + itemMarginBottom_1;\n            });\n            this.totalPagesCnt = pages;\n            this.moveElementTo(navigation, {\n                x: startX + maxItemWidth / 2 - navigationBBox.width / 2 - navigationBBox.minX,\n                y: maxHeight - navigationBBox.height - navigationBBox.minY,\n            });\n        }\n        if (this.pageHeight && this.pageWidth) {\n            // 为了使固定的 clip 生效，clip 设置在 itemContainerGroup 上，itemGroup 需要在翻页时会设置 matrix\n            itemGroup.getParent().setClip({\n                type: 'rect',\n                attrs: {\n                    x: this.startX,\n                    y: this.startY,\n                    width: this.pageWidth,\n                    height: this.pageHeight,\n                },\n            });\n        }\n        this.totalPagesCnt = pages;\n        if (this.currentPageIndex > this.totalPagesCnt) {\n            this.currentPageIndex = 1;\n        }\n        this.updateNavigation(navigation);\n        // update initial matrix\n        itemGroup.attr('matrix', this.getCurrentNavigationMatrix());\n    };\n    Category.prototype.drawNavigation = function (group, layout, text, size) {\n        var currentPoint = { x: 0, y: 0 };\n        var subGroup = this.addGroup(group, {\n            id: this.getElementId('navigation-group'),\n            name: 'legend-navigation',\n        });\n        var leftArrow = this.drawArrow(subGroup, currentPoint, 'navigation-arrow-left', layout === 'horizontal' ? 'up' : 'left', size);\n        leftArrow.on('click', this.onNavigationBack);\n        var leftArrowBBox = leftArrow.getBBox();\n        currentPoint.x += leftArrowBBox.width + 2;\n        var textShape = this.addShape(subGroup, {\n            type: 'text',\n            id: this.getElementId('navigation-text'),\n            name: 'navigation-text',\n            attrs: {\n                x: currentPoint.x,\n                y: currentPoint.y + size / 2,\n                text: text,\n                fontSize: 12,\n                fill: '#ccc',\n                textBaseline: 'middle',\n            },\n        });\n        var textBBox = textShape.getBBox();\n        currentPoint.x += textBBox.width + 2;\n        var rightArrow = this.drawArrow(subGroup, currentPoint, 'navigation-arrow-right', layout === 'horizontal' ? 'down' : 'right', size);\n        rightArrow.on('click', this.onNavigationAfter);\n        return subGroup;\n    };\n    Category.prototype.updateNavigation = function (navigation) {\n        var text = this.currentPageIndex + \"/\" + this.totalPagesCnt;\n        var textShape = navigation ? navigation.getChildren()[1] : this.getElementByLocalId('navigation-text');\n        var leftArrow = navigation\n            ? navigation.findById(this.getElementId('navigation-arrow-left'))\n            : this.getElementByLocalId('navigation-arrow-left');\n        var rightArrow = navigation\n            ? navigation.findById(this.getElementId('navigation-arrow-right'))\n            : this.getElementByLocalId('navigation-arrow-right');\n        var origBBox = textShape.getBBox();\n        textShape.attr('text', text);\n        var newBBox = textShape.getBBox();\n        textShape.attr('x', textShape.attr('x') - (newBBox.width - origBBox.width) / 2);\n        leftArrow.attr('opacity', this.currentPageIndex === 1 ? 0.45 : 1);\n        leftArrow.attr('cursor', this.currentPageIndex === 1 ? 'not-allowed' : 'pointer');\n        rightArrow.attr('opacity', this.currentPageIndex === this.totalPagesCnt ? 0.45 : 1);\n        rightArrow.attr('cursor', this.currentPageIndex === this.totalPagesCnt ? 'not-allowed' : 'pointer');\n    };\n    Category.prototype.drawArrow = function (group, currentPoint, name, direction, size) {\n        var x = currentPoint.x, y = currentPoint.y;\n        var rotateMap = {\n            right: (90 * Math.PI) / 180,\n            left: ((360 - 90) * Math.PI) / 180,\n            up: 0,\n            down: (180 * Math.PI) / 180,\n        };\n        var shape = this.addShape(group, {\n            type: 'path',\n            id: this.getElementId(name),\n            name: name,\n            attrs: {\n                path: [['M', x + size / 2, y], ['L', x, y + size], ['L', x + size, y + size], ['Z']],\n                fill: '#000',\n                cursor: 'pointer',\n            },\n        });\n        shape.attr('matrix', getMatrixByAngle({ x: x + size / 2, y: y + size / 2 }, rotateMap[direction]));\n        return shape;\n    };\n    Category.prototype.getCurrentNavigationMatrix = function () {\n        var _a = this, currentPageIndex = _a.currentPageIndex, pageWidth = _a.pageWidth, pageHeight = _a.pageHeight;\n        var layout = this.get('layout');\n        var translate = layout === 'horizontal'\n            ? {\n                x: 0,\n                y: pageHeight * (1 - currentPageIndex),\n            }\n            : {\n                x: pageWidth * (1 - currentPageIndex),\n                y: 0,\n            };\n        return getMatrixByTranslate(translate);\n    };\n    // 附加状态对应的样式\n    Category.prototype.applyItemStates = function (item, subGroup) {\n        var states = this.getItemStates(item);\n        var hasStates = states.length > 0;\n        if (hasStates) {\n            var children = subGroup.getChildren();\n            var itemStates_1 = this.get('itemStates');\n            each(children, function (element) {\n                var name = element.get('name');\n                var elName = name.split('-')[2]; // marker, name, value\n                var statesStyle = getStatesStyle(item, elName, itemStates_1);\n                if (statesStyle) {\n                    element.attr(statesStyle);\n                    if (elName === 'marker' && !(element.get('isStroke') && element.get('isFill'))) {\n                        // 如果 marker 是单填充或者单描边的话，就不要额外添加 stroke 或这 fill 属性，否则会影响 unchecked 后的显示\n                        if (element.get('isStroke')) {\n                            element.attr('fill', null);\n                        }\n                        if (element.get('isFill')) {\n                            element.attr('stroke', null);\n                        }\n                    }\n                }\n            });\n        }\n    };\n    // 获取 itemWidth 的最终设置\n    Category.prototype.getLimitItemWidth = function () {\n        var itemWidth = this.get('itemWidth');\n        var maxItemWidth = this.get('maxItemWidth');\n        if (maxItemWidth) {\n            // 设置了最大宽度\n            if (itemWidth) {\n                maxItemWidth = itemWidth <= maxItemWidth ? itemWidth : maxItemWidth;\n            }\n        }\n        else if (itemWidth) {\n            maxItemWidth = itemWidth;\n        }\n        return maxItemWidth;\n    };\n    return Category;\n}(LegendBase));\nexport default Category;\n//# sourceMappingURL=category.js.map","import { __assign, __extends } from \"tslib\";\nimport { clone, mix, upperFirst } from '@antv/util';\nimport Theme from '../util/theme';\nimport { getValueByPercent } from '../util/util';\nimport LegendBase from './base';\nvar HANDLER_HEIGHT_RATIO = 1.4;\nvar HANDLER_TRIANGLE_RATIO = 0.4;\nvar ContinueLegend = /** @class */ (function (_super) {\n    __extends(ContinueLegend, _super);\n    function ContinueLegend() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ContinueLegend.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { type: 'continue', min: 0, max: 100, value: null, colors: [], track: {}, rail: {}, label: {}, handler: {}, slidable: true, tip: null, step: null, maxWidth: null, maxHeight: null, defaultCfg: {\n                label: {\n                    align: 'rail',\n                    spacing: 5,\n                    formatter: null,\n                    style: {\n                        fontSize: 12,\n                        fill: Theme.textColor,\n                        textBaseline: 'middle',\n                        fontFamily: Theme.fontFamily,\n                    },\n                },\n                handler: {\n                    size: 10,\n                    style: {\n                        fill: '#fff',\n                        stroke: '#333',\n                    },\n                },\n                track: {},\n                rail: {\n                    type: 'color',\n                    size: 20,\n                    defaultLength: 100,\n                    style: {\n                        fill: '#DCDEE2',\n                    },\n                },\n                title: {\n                    spacing: 5,\n                    style: {\n                        fill: Theme.textColor,\n                        fontSize: 12,\n                        textAlign: 'start',\n                        textBaseline: 'top',\n                    },\n                },\n            } });\n    };\n    ContinueLegend.prototype.isSlider = function () {\n        return true;\n    };\n    // 实现 IList 接口\n    ContinueLegend.prototype.getValue = function () {\n        return this.getCurrentValue();\n    };\n    ContinueLegend.prototype.getRange = function () {\n        return {\n            min: this.get('min'),\n            max: this.get('max'),\n        };\n    };\n    // 改变 range\n    ContinueLegend.prototype.setRange = function (min, max) {\n        this.update({\n            min: min,\n            max: max,\n        });\n    };\n    ContinueLegend.prototype.setValue = function (value) {\n        var originValue = this.getValue();\n        this.set('value', value);\n        var group = this.get('group');\n        this.resetTrackClip();\n        if (this.get('slidable')) {\n            this.resetHandlers(group);\n        }\n        this.delegateEmit('valuechanged', {\n            originValue: originValue,\n            value: value,\n        });\n    };\n    ContinueLegend.prototype.initEvent = function () {\n        var group = this.get('group');\n        this.bindSliderEvent(group);\n        this.bindRailEvent(group);\n        this.bindTrackEvent(group);\n    };\n    ContinueLegend.prototype.drawLegendContent = function (group) {\n        this.drawRail(group);\n        this.drawLabels(group);\n        this.fixedElements(group); // 调整各个图形位置，适应宽高的限制\n        this.resetTrack(group);\n        this.resetTrackClip(group);\n        if (this.get('slidable')) {\n            this.resetHandlers(group);\n        }\n    };\n    ContinueLegend.prototype.bindSliderEvent = function (group) {\n        this.bindHandlersEvent(group);\n    };\n    ContinueLegend.prototype.bindHandlersEvent = function (group) {\n        var _this = this;\n        group.on('legend-handler-min:drag', function (ev) {\n            var minValue = _this.getValueByCanvasPoint(ev.x, ev.y);\n            var currentValue = _this.getCurrentValue();\n            var maxValue = currentValue[1];\n            if (maxValue < minValue) {\n                // 如果小于最小值，则调整最小值\n                maxValue = minValue;\n            }\n            _this.setValue([minValue, maxValue]);\n        });\n        group.on('legend-handler-max:drag', function (ev) {\n            var maxValue = _this.getValueByCanvasPoint(ev.x, ev.y);\n            var currentValue = _this.getCurrentValue();\n            var minValue = currentValue[0];\n            if (minValue > maxValue) {\n                // 如果小于最小值，则调整最小值\n                minValue = maxValue;\n            }\n            _this.setValue([minValue, maxValue]);\n        });\n    };\n    ContinueLegend.prototype.bindRailEvent = function (group) { };\n    ContinueLegend.prototype.bindTrackEvent = function (group) {\n        var _this = this;\n        var prePoint = null;\n        group.on('legend-track:dragstart', function (ev) {\n            prePoint = {\n                x: ev.x,\n                y: ev.y,\n            };\n        });\n        group.on('legend-track:drag', function (ev) {\n            if (!prePoint) {\n                return;\n            }\n            var preValue = _this.getValueByCanvasPoint(prePoint.x, prePoint.y);\n            var curValue = _this.getValueByCanvasPoint(ev.x, ev.y);\n            var currentValue = _this.getCurrentValue();\n            var curDiff = currentValue[1] - currentValue[0];\n            var range = _this.getRange();\n            var dValue = curValue - preValue;\n            if (dValue < 0) {\n                // 减小, 同时未出边界\n                if (currentValue[0] + dValue > range.min) {\n                    _this.setValue([currentValue[0] + dValue, currentValue[1] + dValue]);\n                }\n                else {\n                    _this.setValue([range.min, range.min + curDiff]);\n                }\n                //  && ||\n            }\n            else if (dValue > 0) {\n                if (dValue > 0 && currentValue[1] + dValue < range.max) {\n                    _this.setValue([currentValue[0] + dValue, currentValue[1] + dValue]);\n                }\n                else {\n                    _this.setValue([range.max - curDiff, range.max]);\n                }\n            }\n            prePoint = {\n                x: ev.x,\n                y: ev.y,\n            };\n        });\n        group.on('legend-track:dragend', function (ev) {\n            prePoint = null;\n        });\n    };\n    ContinueLegend.prototype.drawLabels = function (group) {\n        this.drawLabel('min', group);\n        this.drawLabel('max', group);\n    };\n    ContinueLegend.prototype.drawLabel = function (name, group) {\n        var labelCfg = this.get('label');\n        var style = labelCfg.style;\n        var labelAlign = labelCfg.align;\n        var value = this.get(name);\n        var alignAttrs = this.getLabelAlignAttrs(name, labelAlign);\n        var localId = \"label-\" + name;\n        this.addShape(group, {\n            type: 'text',\n            id: this.getElementId(localId),\n            name: \"legend-label-\" + name,\n            attrs: __assign(__assign({ x: 0, y: 0, text: value }, style), alignAttrs),\n        });\n    };\n    // 获取文本的对齐方式，为了自适应真实操碎了心\n    ContinueLegend.prototype.getLabelAlignAttrs = function (name, align) {\n        var isVertical = this.isVertical();\n        var textAlign = 'center';\n        var textBaseline = 'middle';\n        if (isVertical) {\n            // 垂直布局的所有的文本都左对齐\n            textAlign = 'start';\n            if (align !== 'rail') {\n                if (name === 'min') {\n                    textBaseline = 'top';\n                }\n                else {\n                    textBaseline = 'bottom';\n                }\n            }\n            else {\n                textBaseline = 'top';\n            }\n        }\n        else {\n            if (align !== 'rail') {\n                textBaseline = 'top';\n                if (name === 'min') {\n                    textAlign = 'start';\n                }\n                else {\n                    textAlign = 'end';\n                }\n            }\n            else {\n                textAlign = 'start';\n                textBaseline = 'middle';\n            }\n        }\n        return {\n            textAlign: textAlign,\n            textBaseline: textBaseline,\n        };\n    };\n    ContinueLegend.prototype.getRailPath = function (x, y, w, h) {\n        var railCfg = this.get('rail');\n        var size = railCfg.size, defaultLength = railCfg.defaultLength, type = railCfg.type;\n        var isVertical = this.isVertical();\n        var length = defaultLength;\n        var width = w;\n        var height = h;\n        if (!width) {\n            width = isVertical ? size : length;\n        }\n        if (!height) {\n            height = isVertical ? length : size;\n        }\n        var path = [];\n        if (type === 'color') {\n            path.push(['M', x, y]);\n            path.push(['L', x + width, y]);\n            path.push(['L', x + width, y + height]);\n            path.push(['L', x, y + height]);\n            path.push(['Z']);\n        }\n        else {\n            path.push(['M', x + width, y]);\n            path.push(['L', x + width, y + height]);\n            path.push(['L', x, y + height]);\n            path.push(['Z']);\n        }\n        return path;\n    };\n    ContinueLegend.prototype.drawRail = function (group) {\n        var railCfg = this.get('rail');\n        var style = railCfg.style;\n        this.addShape(group, {\n            type: 'path',\n            id: this.getElementId('rail'),\n            name: 'legend-rail',\n            attrs: __assign({ path: this.getRailPath(0, 0) }, style),\n        });\n    };\n    // 将传入的颜色转换成渐变色\n    ContinueLegend.prototype.getTrackColor = function (colors) {\n        var count = colors.length;\n        if (!count) {\n            return null;\n        }\n        if (count === 1) {\n            return colors[0];\n        }\n        var color; // 最终形态 l(0) 0:colors[0] 0.5:colors[1] 1:colors[2];\n        if (this.isVertical()) {\n            // 根据方向设置渐变方向\n            color = 'l(90)';\n        }\n        else {\n            color = 'l(0)';\n        }\n        for (var i = 0; i < count; i++) {\n            var percent = i / (count - 1);\n            color += \" \" + percent + \":\" + colors[i];\n        }\n        return color;\n    };\n    ContinueLegend.prototype.getTrackPath = function (group) {\n        var railShape = this.getRailShape(group);\n        var path = railShape.attr('path');\n        return clone(path);\n    };\n    ContinueLegend.prototype.getClipTrackAttrs = function (group) {\n        var value = this.getCurrentValue();\n        var min = value[0], max = value[1];\n        var railBBox = this.getRailBBox(group);\n        var startPoint = this.getPointByValue(min, group);\n        var endPoint = this.getPointByValue(max, group);\n        var isVertical = this.isVertical();\n        var x;\n        var y;\n        var width;\n        var height;\n        if (isVertical) {\n            x = railBBox.minX;\n            y = startPoint.y;\n            width = railBBox.width;\n            height = endPoint.y - startPoint.y;\n        }\n        else {\n            x = startPoint.x;\n            y = railBBox.minY;\n            width = endPoint.x - startPoint.x;\n            height = railBBox.height;\n        }\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n        };\n    };\n    // 获取 track 的属性，由 path 和 颜色构成\n    ContinueLegend.prototype.getTrackAttrs = function (group) {\n        var trackCfg = this.get('track');\n        var colors = this.get('colors');\n        var path = this.getTrackPath(group);\n        return mix({\n            path: path,\n            fill: this.getTrackColor(colors),\n        }, trackCfg.style);\n    };\n    ContinueLegend.prototype.resetTrackClip = function (group) {\n        var container = group || this.get('group');\n        var trackId = this.getElementId('track');\n        var trackShape = container.findById(trackId);\n        var clipShape = trackShape.getClip();\n        var attrs = this.getClipTrackAttrs(group);\n        if (!clipShape) {\n            trackShape.setClip({\n                type: 'rect',\n                attrs: attrs,\n            });\n        }\n        else {\n            clipShape.attr(attrs);\n        }\n    };\n    ContinueLegend.prototype.resetTrack = function (group) {\n        var trackId = this.getElementId('track');\n        var trackShape = group.findById(trackId);\n        var trackAttrs = this.getTrackAttrs(group);\n        if (trackShape) {\n            trackShape.attr(trackAttrs);\n        }\n        else {\n            this.addShape(group, {\n                type: 'path',\n                id: trackId,\n                draggable: this.get('slidable'),\n                name: 'legend-track',\n                attrs: trackAttrs,\n            });\n        }\n    };\n    ContinueLegend.prototype.getPointByValue = function (value, group) {\n        var _a = this.getRange(), min = _a.min, max = _a.max;\n        var percent = (value - min) / (max - min);\n        var bbox = this.getRailBBox(group);\n        var isVertcal = this.isVertical();\n        var point = { x: 0, y: 0 };\n        if (isVertcal) {\n            point.x = bbox.minX + bbox.width / 2;\n            point.y = getValueByPercent(bbox.minY, bbox.maxY, percent);\n        }\n        else {\n            point.x = getValueByPercent(bbox.minX, bbox.maxX, percent);\n            point.y = bbox.minY + bbox.height / 2;\n        }\n        return point;\n    };\n    ContinueLegend.prototype.getRailShape = function (group) {\n        var container = group || this.get('group');\n        return container.findById(this.getElementId('rail'));\n    };\n    // 获取滑轨的宽高信息\n    ContinueLegend.prototype.getRailBBox = function (group) {\n        var railShape = this.getRailShape(group);\n        var bbox = railShape.getBBox();\n        return bbox;\n    };\n    ContinueLegend.prototype.getRailCanvasBBox = function () {\n        var container = this.get('group');\n        var railShape = container.findById(this.getElementId('rail'));\n        var bbox = railShape.getCanvasBBox();\n        return bbox;\n    };\n    // 是否垂直\n    ContinueLegend.prototype.isVertical = function () {\n        return this.get('layout') === 'vertical';\n    };\n    // 用于交互时\n    ContinueLegend.prototype.getValueByCanvasPoint = function (x, y) {\n        var _a = this.getRange(), min = _a.min, max = _a.max;\n        var bbox = this.getRailCanvasBBox(); // 因为 x, y 是画布坐标\n        var isVertcal = this.isVertical();\n        var step = this.get('step');\n        var percent;\n        if (isVertcal) {\n            // 垂直时计算 y\n            percent = (y - bbox.minY) / bbox.height;\n        }\n        else {\n            // 水平时计算 x\n            percent = (x - bbox.minX) / bbox.width;\n        }\n        var value = getValueByPercent(min, max, percent);\n        if (step) {\n            var count = Math.round((value - min) / step);\n            value = min + count * step; // 移动到最近的\n        }\n        if (value > max) {\n            value = max;\n        }\n        if (value < min) {\n            value = min;\n        }\n        return value;\n    };\n    // 当前选中的范围\n    ContinueLegend.prototype.getCurrentValue = function () {\n        var value = this.get('value');\n        if (!value) {\n            // 如果没有定义，取最大范围\n            value = [this.get('min'), this.get('max')];\n        }\n        return value;\n    };\n    // 重置滑块 handler\n    ContinueLegend.prototype.resetHandlers = function (group) {\n        var currentValue = this.getCurrentValue();\n        var min = currentValue[0], max = currentValue[1];\n        this.resetHandler(group, 'min', min);\n        this.resetHandler(group, 'max', max);\n    };\n    // 获取滑块的 path\n    ContinueLegend.prototype.getHandlerPath = function (handlerCfg, point) {\n        var isVertical = this.isVertical();\n        var path = [];\n        var width = handlerCfg.size;\n        var x = point.x, y = point.y;\n        var height = width * HANDLER_HEIGHT_RATIO;\n        var halfWidth = width / 2;\n        var oneSixthWidth = width / 6;\n        if (isVertical) {\n            /**\n             * 竖直情况下的滑块 handler，左侧顶点是 x,y\n             *  /----|\n             *    -- |\n             *    -- |\n             *  \\----|\n             */\n            var triangleX = x + height * HANDLER_TRIANGLE_RATIO;\n            path.push(['M', x, y]);\n            path.push(['L', triangleX, y + halfWidth]);\n            path.push(['L', x + height, y + halfWidth]);\n            path.push(['L', x + height, y - halfWidth]);\n            path.push(['L', triangleX, y - halfWidth]);\n            path.push(['Z']);\n            // 绘制两条横线\n            path.push(['M', triangleX, y + oneSixthWidth]);\n            path.push(['L', x + height - 2, y + oneSixthWidth]);\n            path.push(['M', triangleX, y - oneSixthWidth]);\n            path.push(['L', x + height - 2, y - oneSixthWidth]);\n        }\n        else {\n            /**\n             * 水平情况下的滑块，上面顶点处是 x,y\n             *  /   \\\n             * | | | |\n             * | | | |\n             *  -----\n             */\n            var triangleY = y + height * HANDLER_TRIANGLE_RATIO;\n            path.push(['M', x, y]);\n            path.push(['L', x - halfWidth, triangleY]);\n            path.push(['L', x - halfWidth, y + height]);\n            path.push(['L', x + halfWidth, y + height]);\n            path.push(['L', x + halfWidth, triangleY]);\n            path.push(['Z']);\n            // 绘制两条竖线\n            path.push(['M', x - oneSixthWidth, triangleY]);\n            path.push(['L', x - oneSixthWidth, y + height - 2]);\n            path.push(['M', x + oneSixthWidth, triangleY]);\n            path.push(['L', x + oneSixthWidth, y + height - 2]);\n        }\n        return path;\n    };\n    // 调整 handler 的位置，如果未存在则绘制\n    ContinueLegend.prototype.resetHandler = function (group, name, value) {\n        var point = this.getPointByValue(value, group);\n        var handlerCfg = this.get('handler');\n        var path = this.getHandlerPath(handlerCfg, point);\n        var id = this.getElementId(\"handler-\" + name);\n        var handlerShape = group.findById(id);\n        var isVertical = this.isVertical();\n        if (handlerShape) {\n            handlerShape.attr('path', path);\n        }\n        else {\n            this.addShape(group, {\n                type: 'path',\n                name: \"legend-handler-\" + name,\n                draggable: true,\n                id: id,\n                attrs: __assign(__assign({ path: path }, handlerCfg.style), { cursor: isVertical ? 'ns-resize' : 'ew-resize' }),\n            });\n        }\n    };\n    // 当设置了 maxWidth, maxHeight 时调整 rail 的宽度，\n    // 文本的位置\n    ContinueLegend.prototype.fixedElements = function (group) {\n        var railShape = group.findById(this.getElementId('rail'));\n        var minLabel = group.findById(this.getElementId('label-min'));\n        var maxLabel = group.findById(this.getElementId('label-max'));\n        var startPoint = this.getDrawPoint();\n        if (this.isVertical()) {\n            // 横向布局\n            this.fixedVertail(minLabel, maxLabel, railShape, startPoint);\n        }\n        else {\n            // 水平布局\n            this.fixedHorizontal(minLabel, maxLabel, railShape, startPoint);\n        }\n    };\n    ContinueLegend.prototype.fitRailLength = function (minLabelBBox, maxLabelBBox, railBBox, railShape) {\n        var isVertical = this.isVertical();\n        var lengthField = isVertical ? 'height' : 'width';\n        var labelCfg = this.get('label');\n        var labelAlign = labelCfg.align;\n        var spacing = labelCfg.spacing;\n        var maxLength = this.get(\"max\" + upperFirst(lengthField)); // get('maxWidth')\n        if (maxLength) {\n            var elementsLength = labelAlign === 'rail'\n                ? railBBox[lengthField] + minLabelBBox[lengthField] + maxLabelBBox[lengthField] + spacing * 2\n                : railBBox[lengthField];\n            var diff = elementsLength - maxLength;\n            if (diff > 0) {\n                // 大于限制的长度\n                this.changeRailLength(railShape, lengthField, railBBox[lengthField] - diff);\n            }\n        }\n    };\n    ContinueLegend.prototype.changeRailLength = function (railShape, lengthField, length) {\n        var bbox = railShape.getBBox();\n        var path;\n        if (lengthField === 'height') {\n            path = this.getRailPath(bbox.x, bbox.y, bbox.width, length);\n        }\n        else {\n            path = this.getRailPath(bbox.x, bbox.y, length, bbox.height);\n        }\n        railShape.attr('path', path);\n    };\n    ContinueLegend.prototype.changeRailPosition = function (railShape, x, y) {\n        var bbox = railShape.getBBox();\n        var path = this.getRailPath(x, y, bbox.width, bbox.height);\n        railShape.attr('path', path);\n    };\n    ContinueLegend.prototype.fixedHorizontal = function (minLabel, maxLabel, railShape, startPoint) {\n        var labelCfg = this.get('label');\n        var labelAlign = labelCfg.align;\n        var spacing = labelCfg.spacing;\n        var railBBox = railShape.getBBox();\n        var minLabelBBox = minLabel.getBBox();\n        var maxLabelBBox = maxLabel.getBBox();\n        var railHeight = railBBox.height; // 取 rail 的高度，作为高度\n        this.fitRailLength(minLabelBBox, maxLabelBBox, railBBox, railShape);\n        railBBox = railShape.getBBox();\n        if (labelAlign === 'rail') {\n            // 沿着 rail 方向\n            minLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y + railHeight / 2,\n            });\n            this.changeRailPosition(railShape, startPoint.x + minLabelBBox.width + spacing, startPoint.y);\n            maxLabel.attr({\n                x: startPoint.x + minLabelBBox.width + railBBox.width + spacing * 2,\n                y: startPoint.y + railHeight / 2,\n            });\n        }\n        else if (labelAlign === 'top') {\n            minLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y,\n            });\n            maxLabel.attr({\n                x: startPoint.x + railBBox.width,\n                y: startPoint.y,\n            });\n            this.changeRailPosition(railShape, startPoint.x, startPoint.y + minLabelBBox.height + spacing);\n        }\n        else {\n            this.changeRailPosition(railShape, startPoint.x, startPoint.y);\n            minLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y + railBBox.height + spacing,\n            });\n            maxLabel.attr({\n                x: startPoint.x + railBBox.width,\n                y: startPoint.y + railBBox.height + spacing,\n            });\n        }\n    };\n    ContinueLegend.prototype.fixedVertail = function (minLabel, maxLabel, railShape, startPoint) {\n        var labelCfg = this.get('label');\n        var labelAlign = labelCfg.align;\n        var spacing = labelCfg.spacing;\n        var railBBox = railShape.getBBox();\n        var minLabelBBox = minLabel.getBBox();\n        var maxLabelBBox = maxLabel.getBBox();\n        this.fitRailLength(minLabelBBox, maxLabelBBox, railBBox, railShape);\n        railBBox = railShape.getBBox();\n        if (labelAlign === 'rail') {\n            // 沿着 rail 方向\n            minLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y,\n            });\n            this.changeRailPosition(railShape, startPoint.x, startPoint.y + minLabelBBox.height + spacing);\n            maxLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y + minLabelBBox.height + railBBox.height + spacing * 2,\n            });\n        }\n        else if (labelAlign === 'right') {\n            minLabel.attr({\n                x: startPoint.x + railBBox.width + spacing,\n                y: startPoint.y,\n            });\n            this.changeRailPosition(railShape, startPoint.x, startPoint.y);\n            maxLabel.attr({\n                x: startPoint.x + railBBox.width + spacing,\n                y: startPoint.y + railBBox.height,\n            });\n        }\n        else {\n            // left\n            var maxLabelWidth = Math.max(minLabelBBox.width, maxLabelBBox.width);\n            minLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y,\n            });\n            this.changeRailPosition(railShape, startPoint.x + maxLabelWidth + spacing, startPoint.y);\n            maxLabel.attr({\n                x: startPoint.x,\n                y: startPoint.y + railBBox.height,\n            });\n        }\n    };\n    return ContinueLegend;\n}(LegendBase));\nexport default ContinueLegend;\n//# sourceMappingURL=continuous.js.map","export var CONTAINER_CLASS = 'g2-tooltip';\nexport var TITLE_CLASS = 'g2-tooltip-title';\nexport var LIST_CLASS = 'g2-tooltip-list';\nexport var LIST_ITEM_CLASS = 'g2-tooltip-list-item';\nexport var MARKER_CLASS = 'g2-tooltip-marker';\nexport var VALUE_CLASS = 'g2-tooltip-value';\nexport var NAME_CLASS = 'g2-tooltip-name';\nexport var CROSSHAIR_X = 'g2-tooltip-crosshair-x';\nexport var CROSSHAIR_Y = 'g2-tooltip-crosshair-y';\n//# sourceMappingURL=css-const.js.map","import { __assign, __extends } from \"tslib\";\nimport colorUtil from '@antv/color-util';\nimport { createDom, modifyCSS } from '@antv/dom-util';\nimport { each, hasKey, isElement, substitute } from '@antv/util';\nimport HtmlComponent from '../abstract/html-component';\nimport { clearDom, regionToBBox, toPx } from '../util/util';\nimport * as CssConst from './css-const';\nimport TooltipTheme from './html-theme';\nimport { getAlignPoint } from '../util/align';\nfunction hasOneKey(obj, keys) {\n    var result = false;\n    each(keys, function (key) {\n        if (hasKey(obj, key)) {\n            result = true;\n            return false;\n        }\n    });\n    return result;\n}\nvar Tooltip = /** @class */ (function (_super) {\n    __extends(Tooltip, _super);\n    function Tooltip() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Tooltip.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'tooltip', type: 'html', x: 0, y: 0, items: [], customContent: null, containerTpl: \"<div class=\\\"\" + CssConst.CONTAINER_CLASS + \"\\\"><div class=\\\"\" + CssConst.TITLE_CLASS + \"\\\"></div><ul class=\\\"\" + CssConst.LIST_CLASS + \"\\\"></ul></div>\", itemTpl: \"<li class=\\\"\" + CssConst.LIST_ITEM_CLASS + \"\\\" data-index={index}>\\n          <span class=\\\"\" + CssConst.MARKER_CLASS + \"\\\" style=\\\"background:{color}\\\"></span>\\n          <span class=\\\"\" + CssConst.NAME_CLASS + \"\\\">{name}</span>:\\n          <span class=\\\"\" + CssConst.VALUE_CLASS + \"\\\">{value}</span>\\n        </li>\", xCrosshairTpl: \"<div class=\\\"\" + CssConst.CROSSHAIR_X + \"\\\"></div>\", yCrosshairTpl: \"<div class=\\\"\" + CssConst.CROSSHAIR_Y + \"\\\"></div>\", title: null, showTitle: true, \n            /**\n             * tooltip 限制的区域\n             * @type {Region}\n             */\n            region: null, \n            // crosshair 的限制区域\n            crosshairsRegion: null, containerClassName: CssConst.CONTAINER_CLASS, \n            // x, y, xy\n            crosshairs: null, offset: 10, position: 'right', domStyles: null, defaultStyles: TooltipTheme });\n    };\n    // tooltip 渲染时，渲染 title，items 和 corosshairs\n    Tooltip.prototype.render = function () {\n        if (this.get('customContent')) {\n            this.renderCustomContent();\n        }\n        else {\n            this.resetTitle();\n            this.renderItems();\n        }\n        // 绘制完成后，再定位\n        this.resetPosition();\n    };\n    // 复写清空函数，因为有模板的存在，所以默认的写法不合适\n    Tooltip.prototype.clear = function () {\n        // 由于 crosshair 没有在 container 内，所以需要单独清理\n        this.clearCrosshairs();\n        this.setTitle(''); // 清空标题\n        this.clearItemDoms();\n    };\n    Tooltip.prototype.show = function () {\n        var container = this.getContainer();\n        if (!container || this.destroyed) {\n            // 防止容器不存在或者被销毁时报错\n            return;\n        }\n        this.set('visible', true);\n        modifyCSS(container, {\n            visibility: 'visible',\n        });\n        this.setCrossHairsVisible(true);\n    };\n    Tooltip.prototype.hide = function () {\n        var container = this.getContainer();\n        // relative: https://github.com/antvis/g2/issues/1221\n        if (!container || this.destroyed) {\n            return;\n        }\n        this.set('visible', false);\n        modifyCSS(container, {\n            visibility: 'hidden',\n        });\n        this.setCrossHairsVisible(false);\n    };\n    // 实现 IPointLocation 的接口\n    Tooltip.prototype.getLocation = function () {\n        return { x: this.get('x'), y: this.get('y') };\n    };\n    // 实现 IPointLocation 的接口\n    Tooltip.prototype.setLocation = function (point) {\n        this.set('x', point.x);\n        this.set('y', point.y);\n        this.resetPosition();\n    };\n    Tooltip.prototype.setCrossHairsVisible = function (visible) {\n        var display = visible ? '' : 'none';\n        var xCrosshairDom = this.get('xCrosshairDom');\n        var yCrosshairDom = this.get('yCrosshairDom');\n        xCrosshairDom &&\n            modifyCSS(xCrosshairDom, {\n                display: display,\n            });\n        yCrosshairDom &&\n            modifyCSS(yCrosshairDom, {\n                display: display,\n            });\n    };\n    // 如有 customContent 则根据 customContent 设置 container\n    Tooltip.prototype.initContainer = function () {\n        _super.prototype.initContainer.call(this);\n        if (this.get('customContent')) {\n            if (this.get('container')) {\n                this.get('container').remove();\n            }\n            var container = this.getHtmlContentNode();\n            this.get('parent').appendChild(container);\n            this.set('container', container);\n            this.resetStyles();\n            this.applyStyles();\n        }\n    };\n    // 更新属性的同时，可能会引起 DOM 的变化，这里对可能引起 DOM 变化的场景做了处理\n    Tooltip.prototype.updateInner = function (cfg) {\n        if (this.get('customContent')) {\n            this.renderCustomContent();\n        }\n        else {\n            // 更新标题\n            if (hasOneKey(cfg, ['title', 'showTitle'])) {\n                this.resetTitle();\n            }\n            // 更新内容\n            if (hasKey(cfg, 'items')) {\n                this.renderItems();\n            }\n        }\n        _super.prototype.updateInner.call(this, cfg);\n    };\n    Tooltip.prototype.initDom = function () {\n        this.cacheDoms();\n    };\n    // 清理 DOM\n    Tooltip.prototype.removeDom = function () {\n        _super.prototype.removeDom.call(this);\n        this.clearCrosshairs();\n    };\n    // 调整位置\n    Tooltip.prototype.resetPosition = function () {\n        var x = this.get('x');\n        var y = this.get('y');\n        var offset = this.get('offset');\n        var _a = this.getOffset(), offsetX = _a.offsetX, offsetY = _a.offsetY;\n        var position = this.get('position');\n        var region = this.get('region');\n        var container = this.getContainer();\n        var bbox = this.getBBox();\n        var width = bbox.width, height = bbox.height;\n        var limitBox;\n        if (region) {\n            // 不限制位置\n            limitBox = regionToBBox(region);\n        }\n        var point = getAlignPoint(x, y, offset, width, height, position, limitBox);\n        modifyCSS(container, {\n            left: toPx(point.x + offsetX),\n            top: toPx(point.y + offsetY),\n        });\n        this.resetCrosshairs();\n    };\n    // 根据 customContent 渲染\n    Tooltip.prototype.renderCustomContent = function () {\n        var node = this.getHtmlContentNode();\n        var parent = this.get('parent');\n        var curContainer = this.get('container');\n        if (curContainer && curContainer.parentNode === parent) {\n            parent.replaceChild(node, curContainer);\n        }\n        else {\n            parent.appendChild(node);\n        }\n        this.set('container', node);\n        this.resetStyles();\n        this.applyStyles();\n    };\n    Tooltip.prototype.getHtmlContentNode = function () {\n        var node;\n        var customContent = this.get('customContent');\n        if (customContent) {\n            var elem = customContent(this.get('title'), this.get('items'));\n            if (isElement(elem)) {\n                node = elem;\n            }\n            else {\n                node = createDom(elem);\n            }\n        }\n        return node;\n    };\n    // 缓存模板设置的各种 DOM\n    Tooltip.prototype.cacheDoms = function () {\n        var container = this.getContainer();\n        var titleDom = container.getElementsByClassName(CssConst.TITLE_CLASS)[0];\n        var listDom = container.getElementsByClassName(CssConst.LIST_CLASS)[0];\n        this.set('titleDom', titleDom);\n        this.set('listDom', listDom);\n    };\n    // 重置 title\n    Tooltip.prototype.resetTitle = function () {\n        var title = this.get('title');\n        var showTitle = this.get('showTitle');\n        if (showTitle && title) {\n            this.setTitle(title);\n        }\n        else {\n            this.setTitle('');\n        }\n    };\n    // 设置 title 文本\n    Tooltip.prototype.setTitle = function (text) {\n        var titleDom = this.get('titleDom');\n        if (titleDom) {\n            titleDom.innerText = text;\n        }\n    };\n    // 终止 crosshair\n    Tooltip.prototype.resetCrosshairs = function () {\n        var crosshairsRegion = this.get('crosshairsRegion');\n        var crosshairs = this.get('crosshairs');\n        if (!crosshairsRegion || !crosshairs) {\n            // 不显示 crosshair，都移除，没有设定 region 也都移除掉\n            this.clearCrosshairs();\n        }\n        else {\n            var crosshairBox = regionToBBox(crosshairsRegion);\n            var xCrosshairDom = this.get('xCrosshairDom');\n            var yCrosshairDom = this.get('yCrosshairDom');\n            if (crosshairs === 'x') {\n                this.resetCrosshair('x', crosshairBox);\n                // 仅显示 x 的 crosshair，y 移除\n                if (yCrosshairDom) {\n                    yCrosshairDom.remove();\n                    this.set('yCrosshairDom', null);\n                }\n            }\n            else if (crosshairs === 'y') {\n                this.resetCrosshair('y', crosshairBox);\n                // 仅显示 y 的 crosshair，x 移除\n                if (xCrosshairDom) {\n                    xCrosshairDom.remove();\n                    this.set('xCrosshairDom', null);\n                }\n            }\n            else {\n                this.resetCrosshair('x', crosshairBox);\n                this.resetCrosshair('y', crosshairBox);\n            }\n            this.setCrossHairsVisible(this.get('visible'));\n        }\n    };\n    // 设定 crosshair 的位置，需要区分 x,y\n    Tooltip.prototype.resetCrosshair = function (name, bbox) {\n        var croshairDom = this.checkCrosshair(name);\n        var value = this.get(name);\n        if (name === 'x') {\n            modifyCSS(croshairDom, {\n                left: toPx(value),\n                top: toPx(bbox.y),\n                height: toPx(bbox.height),\n            });\n        }\n        else {\n            modifyCSS(croshairDom, {\n                top: toPx(value),\n                left: toPx(bbox.x),\n                width: toPx(bbox.width),\n            });\n        }\n    };\n    // 如果 crosshair 对应的 dom 不存在，则创建\n    Tooltip.prototype.checkCrosshair = function (name) {\n        var domName = name + \"CrosshairDom\";\n        var tplName = name + \"CrosshairTpl\";\n        var constName = \"CROSSHAIR_\" + name.toUpperCase();\n        var styleName = CssConst[constName];\n        var croshairDom = this.get(domName);\n        var parent = this.get('parent');\n        if (!croshairDom) {\n            croshairDom = createDom(this.get(tplName)); // 创建\n            this.applyStyle(styleName, croshairDom); // 设置初始样式\n            parent.appendChild(croshairDom); // 添加到跟 tooltip 同级的目录下\n            this.set(domName, croshairDom);\n        }\n        return croshairDom;\n    };\n    Tooltip.prototype.renderItems = function () {\n        this.clearItemDoms();\n        var items = this.get('items');\n        var itemTpl = this.get('itemTpl');\n        var listDom = this.get('listDom');\n        if (listDom) {\n            each(items, function (item) {\n                var color = colorUtil.toCSSGradient(item.color);\n                var substituteObj = __assign(__assign({}, item), { color: color });\n                var domStr = substitute(itemTpl, substituteObj);\n                var itemDom = createDom(domStr);\n                listDom.appendChild(itemDom);\n            });\n            this.applyChildrenStyles(listDom, this.get('domStyles'));\n        }\n    };\n    Tooltip.prototype.clearItemDoms = function () {\n        if (this.get('listDom')) {\n            clearDom(this.get('listDom'));\n        }\n    };\n    Tooltip.prototype.clearCrosshairs = function () {\n        var xCrosshairDom = this.get('xCrosshairDom');\n        var yCrosshairDom = this.get('yCrosshairDom');\n        xCrosshairDom && xCrosshairDom.remove();\n        yCrosshairDom && yCrosshairDom.remove();\n        this.set('xCrosshairDom', null);\n        this.set('yCrosshairDom', null);\n    };\n    return Tooltip;\n}(HtmlComponent));\nexport default Tooltip;\n//# sourceMappingURL=html.js.map","// 检测各边是否超出\nexport function getOutSides(x, y, width, height, limitBox) {\n    var hits = {\n        left: x < limitBox.x,\n        right: x + width > limitBox.x + limitBox.width,\n        top: y < limitBox.y,\n        bottom: y + height > limitBox.y + limitBox.height,\n    };\n    return hits;\n}\nexport function getPointByPosition(x, y, offset, width, height, position) {\n    var px = x;\n    var py = y;\n    switch (position) {\n        case 'left': // left center\n            px = x - width - offset;\n            py = y - height / 2;\n            break;\n        case 'right':\n            px = x + offset;\n            py = y - height / 2;\n            break;\n        case 'top':\n            px = x - width / 2;\n            py = y - height - offset;\n            break;\n        case 'bottom':\n            // bottom\n            px = x - width / 2;\n            py = y + offset;\n            break;\n        default:\n            // auto, 在 top-right\n            px = x + offset;\n            py = y - height - offset;\n            break;\n    }\n    return {\n        x: px,\n        y: py,\n    };\n}\nexport function getAlignPoint(x, y, offset, width, height, position, limitBox) {\n    var point = getPointByPosition(x, y, offset, width, height, position);\n    if (limitBox) {\n        var outSides = getOutSides(point.x, point.y, width, height, limitBox);\n        if (position === 'auto') {\n            // 如果是 auto，默认 tooltip 在右上角，仅需要判定右侧和上测冲突即可\n            if (outSides.right) {\n                point.x = Math.max(0, x - width - offset);\n            }\n            if (outSides.top) {\n                point.y = Math.max(0, y - height - offset);\n            }\n        }\n        else if (position === 'top' || position === 'bottom') {\n            if (outSides.left) {\n                // 左侧躲避\n                point.x = limitBox.x;\n            }\n            if (outSides.right) {\n                // 右侧躲避\n                point.x = limitBox.x + limitBox.width - width;\n            }\n            if (position === 'top' && outSides.top) {\n                // 如果上面对齐检测上面，不检测下面\n                point.y = y + offset;\n            }\n            if (position === 'bottom' && outSides.bottom) {\n                point.y = y - height - offset;\n            }\n        }\n        else {\n            // 检测左右位置\n            if (outSides.top) {\n                point.y = limitBox.y;\n            }\n            if (outSides.bottom) {\n                point.y = limitBox.y + limitBox.height - height;\n            }\n            if (position === 'left' && outSides.left) {\n                point.x = x + offset;\n            }\n            if (position === 'right' && outSides.right) {\n                point.x = x - width - offset;\n            }\n        }\n    }\n    return point;\n}\n//# sourceMappingURL=align.js.map","export var BACKGROUND_STYLE = {\n    // fill: 'red',\n    opacity: 0,\n};\nexport var LINE_STYLE = {\n    stroke: '#C5C5C5',\n    strokeOpacity: 0.85,\n};\nexport var AREA_STYLE = {\n    fill: '#CACED4',\n    opacity: 0.85,\n};\n//# sourceMappingURL=constant.js.map","import { __spreadArrays } from \"tslib\";\nimport { catmullRom2Bezier } from '@antv/path-util';\nimport { Category, Linear } from '@antv/scale';\nimport { each, head, isEqual, map } from '@antv/util';\n/**\n * 点数组转 path\n * @param points\n */\nfunction pointsToPath(points) {\n    return map(points, function (p, idx) {\n        var command = idx === 0 ? 'M' : 'L';\n        var x = p[0], y = p[1];\n        return [command, x, y];\n    });\n}\n/**\n * 将点连接成路径 path\n * @param points\n */\nexport function getLinePath(points) {\n    return pointsToPath(points);\n}\n/**\n * 将点连成平滑的曲线\n * @param points\n */\nexport function getSmoothLinePath(points) {\n    if (points.length <= 2) {\n        // 两点以内直接绘制成路径\n        return getLinePath(points);\n    }\n    var data = [];\n    each(points, function (p) {\n        // 当前点和上一个点一样的时候，忽略掉\n        if (!isEqual(p, data.slice(data.length - 2))) {\n            data.push(p[0], p[1]);\n        }\n    });\n    // const constraint = [ // 范围\n    //   [ 0, 0 ],\n    //   [ 1, 1 ],\n    // ];\n    var path = catmullRom2Bezier(data, false);\n    var _a = head(points), x = _a[0], y = _a[1];\n    path.unshift(['M', x, y]);\n    return path;\n}\n/**\n * 将数据转成 path，利用 scale 的归一化能力\n * @param data\n * @param width\n * @param height\n * @param smooth\n */\nexport function dataToPath(data, width, height, smooth) {\n    if (smooth === void 0) { smooth = true; }\n    // 利用 scale 来获取 y 上的映射\n    var y = new Linear({\n        values: data,\n    });\n    var x = new Category({\n        values: map(data, function (v, idx) { return idx; }),\n    });\n    var points = map(data, function (v, idx) {\n        return [x.scale(idx) * width, height - y.scale(v) * height];\n    });\n    return smooth ? getSmoothLinePath(points) : getLinePath(points);\n}\n/**\n * 获得 area 面积的横向连接线的 px 位置\n * @param data\n * @param width\n * @param height\n */\nexport function getAreaLineY(data, height) {\n    var y = new Linear({\n        values: data,\n    });\n    var lineY = Math.max(0, y.min);\n    return height - y.scale(lineY) * height;\n}\n/**\n * 线 path 转 area path\n * @param path\n * @param width\n * @param height\n */\nexport function linePathToAreaPath(path, width, height, data) {\n    var areaPath = __spreadArrays(path);\n    var lineYPx = getAreaLineY(data, height);\n    areaPath.push(['L', width, lineYPx]);\n    areaPath.push(['L', 0, lineYPx]);\n    areaPath.push(['Z']);\n    return areaPath;\n}\n//# sourceMappingURL=path.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { AREA_STYLE, BACKGROUND_STYLE, LINE_STYLE } from './constant';\nimport { dataToPath, linePathToAreaPath } from './path';\nvar Trend = /** @class */ (function (_super) {\n    __extends(Trend, _super);\n    function Trend() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Trend.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'trend', x: 0, y: 0, width: 200, height: 16, smooth: true, isArea: false, data: [], backgroundStyle: BACKGROUND_STYLE, lineStyle: LINE_STYLE, areaStyle: AREA_STYLE });\n    };\n    Trend.prototype.renderInner = function (group) {\n        var _a = this.cfg, width = _a.width, height = _a.height, data = _a.data, smooth = _a.smooth, isArea = _a.isArea, backgroundStyle = _a.backgroundStyle, lineStyle = _a.lineStyle, areaStyle = _a.areaStyle;\n        // 背景\n        this.addShape(group, {\n            id: this.getElementId('background'),\n            type: 'rect',\n            attrs: __assign({ x: 0, y: 0, width: width,\n                height: height }, backgroundStyle),\n        });\n        var path = dataToPath(data, width, height, smooth);\n        // 线\n        this.addShape(group, {\n            id: this.getElementId('line'),\n            type: 'path',\n            attrs: __assign({ path: path }, lineStyle),\n        });\n        // area\n        // 在 path 的基础上，增加两个坐标点\n        if (isArea) {\n            var areaPath = linePathToAreaPath(path, width, height, data);\n            this.addShape(group, {\n                id: this.getElementId('area'),\n                type: 'path',\n                attrs: __assign({ path: areaPath }, areaStyle),\n            });\n        }\n    };\n    Trend.prototype.applyOffset = function () {\n        var _a = this.cfg, x = _a.x, y = _a.y;\n        // 统一移动到对应的位置\n        this.moveElementTo(this.get('group'), {\n            x: x,\n            y: y,\n        });\n    };\n    return Trend;\n}(GroupComponent));\nexport { Trend };\nexport default Trend;\n//# sourceMappingURL=trend.js.map","/**\n * 一些默认的样式配置\n */\nexport var BACKGROUND_STYLE = {\n    fill: '#416180',\n    opacity: 0.05,\n};\nexport var FOREGROUND_STYLE = {\n    fill: '#5B8FF9',\n    opacity: 0.15,\n    cursor: 'move',\n};\nexport var DEFAULT_HANDLER_WIDTH = 10;\nexport var HANDLER_STYLE = {\n    width: DEFAULT_HANDLER_WIDTH,\n    height: 24,\n};\nexport var TEXT_STYLE = {\n    textBaseline: 'middle',\n    fill: '#000',\n    opacity: 0.45,\n};\nexport var SLIDER_CHANGE = 'sliderchange';\n//# sourceMappingURL=constant.js.map","import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nvar DEFAULT_STYLE = {\n    fill: '#F7F7F7',\n    stroke: '#BFBFBF',\n    radius: 2,\n    opacity: 1,\n    cursor: 'ew-resize',\n    // 高亮的颜色\n    highLightFill: '#FFF',\n};\nvar Handler = /** @class */ (function (_super) {\n    __extends(Handler, _super);\n    function Handler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Handler.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'handler', x: 0, y: 0, width: 10, height: 24, style: DEFAULT_STYLE });\n    };\n    Handler.prototype.renderInner = function (group) {\n        var _a = this.cfg, width = _a.width, height = _a.height, style = _a.style;\n        var fill = style.fill, stroke = style.stroke, radius = style.radius, opacity = style.opacity, cursor = style.cursor;\n        // 按钮框框\n        this.addShape(group, {\n            type: 'rect',\n            id: this.getElementId('background'),\n            attrs: {\n                x: 0,\n                y: 0,\n                width: width,\n                height: height,\n                fill: fill,\n                stroke: stroke,\n                radius: radius,\n                opacity: opacity,\n                cursor: cursor,\n            },\n        });\n        // 两根竖线\n        var x1 = (1 / 3) * width;\n        var x2 = (2 / 3) * width;\n        var y1 = (1 / 4) * height;\n        var y2 = (3 / 4) * height;\n        this.addShape(group, {\n            id: this.getElementId('line-left'),\n            type: 'line',\n            attrs: {\n                x1: x1,\n                y1: y1,\n                x2: x1,\n                y2: y2,\n                stroke: stroke,\n                cursor: cursor,\n            },\n        });\n        this.addShape(group, {\n            id: this.getElementId('line-right'),\n            type: 'line',\n            attrs: {\n                x1: x2,\n                y1: y1,\n                x2: x2,\n                y2: y2,\n                stroke: stroke,\n                cursor: cursor,\n            },\n        });\n    };\n    Handler.prototype.applyOffset = function () {\n        this.moveElementTo(this.get('group'), {\n            x: this.get('x'),\n            y: this.get('y'),\n        });\n    };\n    Handler.prototype.initEvent = function () {\n        this.bindEvents();\n    };\n    Handler.prototype.bindEvents = function () {\n        var _this = this;\n        this.get('group').on('mouseenter', function () {\n            var highLightFill = _this.get('style').highLightFill;\n            _this.getElementByLocalId('background').attr('fill', highLightFill);\n            _this.draw();\n        });\n        this.get('group').on('mouseleave', function () {\n            var fill = _this.get('style').fill;\n            _this.getElementByLocalId('background').attr('fill', fill);\n            _this.draw();\n        });\n    };\n    Handler.prototype.draw = function () {\n        var canvas = this.get('container').get('canvas');\n        if (canvas) {\n            canvas.draw();\n        }\n    };\n    return Handler;\n}(GroupComponent));\nexport { Handler };\nexport default Handler;\n//# sourceMappingURL=handler.js.map","import { __assign, __extends } from \"tslib\";\nimport { clamp, each, get, isArray, isNil, size } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { Trend } from '../trend/trend';\nimport { BACKGROUND_STYLE, DEFAULT_HANDLER_WIDTH, FOREGROUND_STYLE, HANDLER_STYLE, SLIDER_CHANGE, TEXT_STYLE, } from './constant';\nimport { Handler } from './handler';\nvar Slider = /** @class */ (function (_super) {\n    __extends(Slider, _super);\n    function Slider() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onMouseDown = function (target) { return function (e) {\n            _this.currentTarget = target;\n            // 取出原生事件\n            var event = e.originalEvent;\n            // 2. 存储当前点击位置\n            event.stopPropagation();\n            event.preventDefault();\n            // 兼容移动端获取数据\n            _this.prevX = get(event, 'touches.0.pageX', event.pageX);\n            _this.prevY = get(event, 'touches.0.pageY', event.pageY);\n            // 3. 开始滑动的时候，绑定 move 和 up 事件\n            var containerDOM = _this.getContainerDOM();\n            containerDOM.addEventListener('mousemove', _this.onMouseMove);\n            containerDOM.addEventListener('mouseup', _this.onMouseUp);\n            containerDOM.addEventListener('mouseleave', _this.onMouseUp);\n            // 移动端事件\n            containerDOM.addEventListener('touchmove', _this.onMouseMove);\n            containerDOM.addEventListener('touchend', _this.onMouseUp);\n            containerDOM.addEventListener('touchcancel', _this.onMouseUp);\n        }; };\n        _this.onMouseMove = function (event) {\n            var width = _this.cfg.width;\n            var originValue = [_this.get('start'), _this.get('end')];\n            // 滑动过程中，计算偏移，更新滑块，然后 emit 数据出去\n            event.stopPropagation();\n            event.preventDefault();\n            var x = get(event, 'touches.0.pageX', event.pageX);\n            var y = get(event, 'touches.0.pageY', event.pageY);\n            // 横向的 slider 只处理 x\n            var offsetX = x - _this.prevX;\n            var offsetXRange = _this.adjustOffsetRange(offsetX / width);\n            // 更新 start end range 范围\n            _this.updateStartEnd(offsetXRange);\n            // 更新 ui\n            _this.updateUI(_this.getElementByLocalId('foreground'), _this.getElementByLocalId('minText'), _this.getElementByLocalId('maxText'));\n            _this.prevX = x;\n            _this.prevY = y;\n            _this.draw();\n            // 因为存储的 start、end 可能不一定是按大小存储的，所以排序一下，对外是 end >= start\n            _this.emit(SLIDER_CHANGE, [_this.get('start'), _this.get('end')].sort());\n            _this.delegateEmit('valuechanged', {\n                originValue: originValue,\n                value: [_this.get('start'), _this.get('end')],\n            });\n        };\n        _this.onMouseUp = function () {\n            // 结束之后，取消绑定的事件\n            if (_this.currentTarget) {\n                _this.currentTarget = undefined;\n            }\n            var containerDOM = _this.getContainerDOM();\n            if (containerDOM) {\n                containerDOM.removeEventListener('mousemove', _this.onMouseMove);\n                containerDOM.removeEventListener('mouseup', _this.onMouseUp);\n                // 防止滑动到 canvas 外部之后，状态丢失\n                containerDOM.removeEventListener('mouseleave', _this.onMouseUp);\n                // 移动端事件\n                containerDOM.removeEventListener('touchmove', _this.onMouseMove);\n                containerDOM.removeEventListener('touchend', _this.onMouseUp);\n                containerDOM.removeEventListener('touchcancel', _this.onMouseUp);\n            }\n        };\n        return _this;\n    }\n    Slider.prototype.setRange = function (min, max) {\n        this.set('minLimit', min);\n        this.set('maxLimit', max);\n        var oldStart = this.get('start');\n        var oldEnd = this.get('end');\n        var newStart = clamp(oldStart, min, max);\n        var newEnd = clamp(oldEnd, min, max);\n        if (!this.get('isInit') && (oldStart !== newStart || oldEnd !== newEnd)) {\n            this.setValue([newStart, newEnd]);\n        }\n    };\n    Slider.prototype.getRange = function () {\n        return {\n            min: this.get('minLimit') || 0,\n            max: this.get('maxLimit') || 1,\n        };\n    };\n    Slider.prototype.setValue = function (value) {\n        var range = this.getRange();\n        if (isArray(value) && value.length === 2) {\n            var originValue = [this.get('start'), this.get('end')];\n            this.update({\n                start: clamp(value[0], range.min, range.max),\n                end: clamp(value[1], range.min, range.max),\n            });\n            if (!this.get('updateAutoRender')) {\n                this.render();\n            }\n            this.delegateEmit('valuechanged', {\n                originValue: originValue,\n                value: value,\n            });\n        }\n    };\n    Slider.prototype.getValue = function () {\n        return [this.get('start'), this.get('end')];\n    };\n    Slider.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'slider', x: 0, y: 0, width: 100, height: 16, backgroundStyle: {}, foregroundStyle: {}, handlerStyle: {}, textStyle: {}, defaultCfg: {\n                backgroundStyle: BACKGROUND_STYLE,\n                foregroundStyle: FOREGROUND_STYLE,\n                handlerStyle: HANDLER_STYLE,\n                textStyle: TEXT_STYLE,\n            } });\n    };\n    Slider.prototype.update = function (cfg) {\n        var start = cfg.start, end = cfg.end;\n        var validCfg = __assign({}, cfg);\n        if (!isNil(start)) {\n            validCfg.start = clamp(start, 0, 1);\n        }\n        if (!isNil(end)) {\n            validCfg.end = clamp(end, 0, 1);\n        }\n        _super.prototype.update.call(this, validCfg);\n        this.minHandler = this.getChildComponentById(this.getElementId('minHandler'));\n        this.maxHandler = this.getChildComponentById(this.getElementId('maxHandler'));\n        this.trend = this.getChildComponentById(this.getElementId('trend'));\n    };\n    Slider.prototype.init = function () {\n        this.set('start', clamp(this.get('start'), 0, 1));\n        this.set('end', clamp(this.get('end'), 0, 1));\n        _super.prototype.init.call(this);\n    };\n    Slider.prototype.render = function () {\n        _super.prototype.render.call(this);\n        this.updateUI(this.getElementByLocalId('foreground'), this.getElementByLocalId('minText'), this.getElementByLocalId('maxText'));\n    };\n    Slider.prototype.renderInner = function (group) {\n        var _a = this.cfg, start = _a.start, end = _a.end, width = _a.width, height = _a.height, _b = _a.trendCfg, trendCfg = _b === void 0 ? {} : _b, minText = _a.minText, maxText = _a.maxText, _c = _a.backgroundStyle, backgroundStyle = _c === void 0 ? {} : _c, _d = _a.foregroundStyle, foregroundStyle = _d === void 0 ? {} : _d, _e = _a.textStyle, textStyle = _e === void 0 ? {} : _e, _f = _a.handlerStyle, handlerStyle = _f === void 0 ? {} : _f;\n        var min = start * width;\n        var max = end * width;\n        // 趋势图数据\n        if (size(get(trendCfg, 'data'))) {\n            this.trend = this.addComponent(group, __assign({ component: Trend, id: this.getElementId('trend'), x: 0, y: 0, width: width,\n                height: height }, trendCfg));\n        }\n        // 1. 背景\n        this.addShape(group, {\n            id: this.getElementId('background'),\n            type: 'rect',\n            attrs: __assign({ x: 0, y: 0, width: width,\n                height: height }, backgroundStyle),\n        });\n        // 2. 左右文字\n        var minTextShape = this.addShape(group, {\n            id: this.getElementId('minText'),\n            type: 'text',\n            attrs: __assign({ \n                // x: 0,\n                y: height / 2, textAlign: 'right', text: minText, silent: false }, textStyle),\n        });\n        var maxTextShape = this.addShape(group, {\n            id: this.getElementId('maxText'),\n            type: 'text',\n            attrs: __assign({ \n                // x: 0,\n                y: height / 2, textAlign: 'left', text: maxText, silent: false }, textStyle),\n        });\n        // 3. 前景 选中背景框\n        var foregroundShape = this.addShape(group, {\n            id: this.getElementId('foreground'),\n            name: 'foreground',\n            type: 'rect',\n            attrs: __assign({ \n                // x: 0,\n                y: 0, \n                // width: 0,\n                height: height }, foregroundStyle),\n        });\n        // 滑块相关的大小信息\n        // const handlerWidth = get(handlerStyle, 'width', 10);\n        var handlerHeight = get(handlerStyle, 'height', 24);\n        // 4. 左右滑块\n        this.minHandler = this.addComponent(group, __assign({ component: Handler, id: this.getElementId('minHandler'), name: 'handler-min', x: 0, y: (height - handlerHeight) / 2, width: width, height: handlerHeight, cursor: 'ew-resize' }, handlerStyle));\n        this.maxHandler = this.addComponent(group, __assign({ component: Handler, id: this.getElementId('maxHandler'), name: 'handler-max', x: 0, y: (height - handlerHeight) / 2, width: width, height: handlerHeight, cursor: 'ew-resize' }, handlerStyle));\n    };\n    Slider.prototype.applyOffset = function () {\n        this.moveElementTo(this.get('group'), {\n            x: this.get('x'),\n            y: this.get('y'),\n        });\n    };\n    Slider.prototype.initEvent = function () {\n        this.bindEvents();\n    };\n    Slider.prototype.updateUI = function (foregroundShape, minTextShape, maxTextShape) {\n        var _a = this.cfg, start = _a.start, end = _a.end, width = _a.width, minText = _a.minText, maxText = _a.maxText, handlerStyle = _a.handlerStyle, height = _a.height;\n        var min = start * width;\n        var max = end * width;\n        if (this.trend) {\n            this.trend.update({\n                width: width,\n                height: height,\n            });\n            if (!this.get('updateAutoRender')) {\n                this.trend.render();\n            }\n        }\n        // 1. foreground\n        foregroundShape.attr('x', min);\n        foregroundShape.attr('width', max - min);\n        // 滑块相关的大小信息\n        var handlerWidth = get(handlerStyle, 'width', DEFAULT_HANDLER_WIDTH);\n        // 设置文本\n        minTextShape.attr('text', minText);\n        maxTextShape.attr('text', maxText);\n        var _b = this._dodgeText([min, max], minTextShape, maxTextShape), minAttrs = _b[0], maxAttrs = _b[1];\n        // 2. 左侧滑块和文字位置\n        if (this.minHandler) {\n            this.minHandler.update({\n                x: min - handlerWidth / 2,\n            });\n            if (!this.get('updateAutoRender')) {\n                this.minHandler.render();\n            }\n        }\n        each(minAttrs, function (v, k) { return minTextShape.attr(k, v); });\n        // 3. 右侧滑块和文字位置\n        if (this.maxHandler) {\n            this.maxHandler.update({\n                x: max - handlerWidth / 2,\n            });\n            if (!this.get('updateAutoRender')) {\n                this.maxHandler.render();\n            }\n        }\n        each(maxAttrs, function (v, k) { return maxTextShape.attr(k, v); });\n    };\n    Slider.prototype.bindEvents = function () {\n        var group = this.get('group');\n        group.on('handler-min:mousedown', this.onMouseDown('minHandler'));\n        group.on('handler-min:touchstart', this.onMouseDown('minHandler'));\n        // 2. 右滑块的滑动\n        group.on('handler-max:mousedown', this.onMouseDown('maxHandler'));\n        group.on('handler-max:touchstart', this.onMouseDown('maxHandler'));\n        // 3. 前景选中区域\n        var foreground = group.findById(this.getElementId('foreground'));\n        foreground.on('mousedown', this.onMouseDown('foreground'));\n        foreground.on('touchstart', this.onMouseDown('foreground'));\n    };\n    /**\n     * 调整 offsetRange，因为一些范围的限制\n     * @param offsetRange\n     */\n    Slider.prototype.adjustOffsetRange = function (offsetRange) {\n        var _a = this.cfg, start = _a.start, end = _a.end;\n        // 针对不同的滑动组件，处理的方式不同\n        switch (this.currentTarget) {\n            case 'minHandler': {\n                var min = 0 - start;\n                var max = 1 - start;\n                return Math.min(max, Math.max(min, offsetRange));\n            }\n            case 'maxHandler': {\n                var min = 0 - end;\n                var max = 1 - end;\n                return Math.min(max, Math.max(min, offsetRange));\n            }\n            case 'foreground': {\n                var min = 0 - start;\n                var max = 1 - end;\n                return Math.min(max, Math.max(min, offsetRange));\n            }\n        }\n    };\n    Slider.prototype.updateStartEnd = function (offsetRange) {\n        var _a = this.cfg, start = _a.start, end = _a.end;\n        // 操作不同的组件，反馈不一样\n        switch (this.currentTarget) {\n            case 'minHandler':\n                start += offsetRange;\n                break;\n            case 'maxHandler':\n                end += offsetRange;\n                break;\n            case 'foreground':\n                start += offsetRange;\n                end += offsetRange;\n                break;\n        }\n        this.set('start', start);\n        this.set('end', end);\n    };\n    /**\n     * 调整 text 的位置，自动躲避\n     * 根据位置，调整返回新的位置\n     * @param range\n     */\n    Slider.prototype._dodgeText = function (range, minTextShape, maxTextShape) {\n        var _a, _b;\n        var _c = this.cfg, handlerStyle = _c.handlerStyle, width = _c.width;\n        var PADDING = 2;\n        var handlerWidth = get(handlerStyle, 'width', DEFAULT_HANDLER_WIDTH);\n        var min = range[0], max = range[1];\n        var sorted = false;\n        // 如果交换了位置，则对应的 min max 也交互\n        if (min > max) {\n            _a = [max, min], min = _a[0], max = _a[1];\n            _b = [maxTextShape, minTextShape], minTextShape = _b[0], maxTextShape = _b[1];\n            sorted = true;\n        }\n        // 避让规则，优先显示在两侧，只有显示不下的时候，才显示在中间\n        var minBBox = minTextShape.getBBox();\n        var maxBBox = maxTextShape.getBBox();\n        var minAttrs = minBBox.width > min - PADDING\n            ? { x: min + handlerWidth / 2 + PADDING, textAlign: 'left' }\n            : { x: min - handlerWidth / 2 - PADDING, textAlign: 'right' };\n        var maxAttrs = maxBBox.width > width - max - PADDING\n            ? { x: max - handlerWidth / 2 - PADDING, textAlign: 'right' }\n            : { x: max + handlerWidth / 2 + PADDING, textAlign: 'left' };\n        return !sorted ? [minAttrs, maxAttrs] : [maxAttrs, minAttrs];\n    };\n    Slider.prototype.draw = function () {\n        var container = this.get('container');\n        var canvas = container && container.get('canvas');\n        if (canvas) {\n            canvas.draw();\n        }\n    };\n    Slider.prototype.getContainerDOM = function () {\n        var container = this.get('container');\n        var canvas = container && container.get('canvas');\n        return canvas && canvas.get('container');\n    };\n    return Slider;\n}(GroupComponent));\nexport { Slider };\nexport default Slider;\n//# sourceMappingURL=slider.js.map","import { __assign, __extends } from \"tslib\";\nimport { addEventListener } from '@antv/dom-util';\nimport { clamp, get, noop } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nvar DEFAULT_STYLE = {\n    trackColor: 'rgba(0,0,0,0)',\n    thumbColor: 'rgba(0,0,0,0.15)',\n    size: 8,\n    lineCap: 'round',\n};\nexport var DEFAULT_THEME = {\n    // 默认样式\n    default: DEFAULT_STYLE,\n    // 鼠标 hover 的样式\n    hover: {\n        thumbColor: 'rgba(0,0,0,0.2)',\n    },\n};\nvar Scrollbar = /** @class */ (function (_super) {\n    __extends(Scrollbar, _super);\n    function Scrollbar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.clearEvents = noop;\n        _this.onStartEvent = function (isMobile) { return function (e) {\n            _this.isMobile = isMobile;\n            e.originalEvent.preventDefault();\n            var clientX = isMobile ? get(e.originalEvent, 'touches.0.clientX') : e.clientX;\n            var clientY = isMobile ? get(e.originalEvent, 'touches.0.clientY') : e.clientY;\n            // 将开始的点记录下来\n            _this.startPos = _this.cfg.isHorizontal ? clientX : clientY;\n            _this.bindLaterEvent();\n        }; };\n        _this.bindLaterEvent = function () {\n            var containerDOM = _this.getContainerDOM();\n            var events = [];\n            if (_this.isMobile) {\n                events = [\n                    addEventListener(containerDOM, 'touchmove', _this.onMouseMove),\n                    addEventListener(containerDOM, 'touchend', _this.onMouseUp),\n                    addEventListener(containerDOM, 'touchcancel', _this.onMouseUp),\n                ];\n            }\n            else {\n                events = [\n                    addEventListener(containerDOM, 'mousemove', _this.onMouseMove),\n                    addEventListener(containerDOM, 'mouseup', _this.onMouseUp),\n                    // 为了保证划出 canvas containerDom 时还没触发 mouseup\n                    addEventListener(containerDOM, 'mouseleave', _this.onMouseUp),\n                ];\n            }\n            _this.clearEvents = function () {\n                events.forEach(function (e) {\n                    e.remove();\n                });\n            };\n        };\n        // 拖拽滑块的事件回调\n        // 这里是 dom 原生事件，绑定在 dom 元素上的\n        _this.onMouseMove = function (e) {\n            var _a = _this.cfg, isHorizontal = _a.isHorizontal, thumbOffset = _a.thumbOffset;\n            e.preventDefault();\n            var clientX = _this.isMobile ? get(e, 'touches.0.clientX') : e.clientX;\n            var clientY = _this.isMobile ? get(e, 'touches.0.clientY') : e.clientY;\n            // 鼠标松开的位置\n            var endPos = isHorizontal ? clientX : clientY;\n            // 滑块需要移动的距离, 由于这里是对滑块监听，所以移动的距离就是 diffDis, 如果监听对象是 container dom，则需要算比例\n            var diff = endPos - _this.startPos;\n            // 更新 _startPos\n            _this.startPos = endPos;\n            _this.updateThumbOffset(thumbOffset + diff);\n        };\n        _this.onMouseUp = function (e) {\n            e.preventDefault();\n            _this.clearEvents();\n        };\n        // 点击滑道的事件回调,移动滑块位置\n        _this.onTrackClick = function (e) {\n            var _a = _this.cfg, isHorizontal = _a.isHorizontal, x = _a.x, y = _a.y, thumbLen = _a.thumbLen;\n            var containerDOM = _this.getContainerDOM();\n            var rect = containerDOM.getBoundingClientRect();\n            var clientX = e.clientX, clientY = e.clientY;\n            var offset = isHorizontal ? clientX - rect.left - x - thumbLen / 2 : clientY - rect.top - y - thumbLen / 2;\n            var newOffset = _this.validateRange(offset);\n            _this.updateThumbOffset(newOffset);\n        };\n        _this.onThumbMouseOver = function () {\n            var thumbColor = _this.cfg.theme.hover.thumbColor;\n            _this.getElementByLocalId('thumb').attr('stroke', thumbColor);\n            _this.draw();\n        };\n        _this.onThumbMouseOut = function () {\n            var thumbColor = _this.cfg.theme.default.thumbColor;\n            _this.getElementByLocalId('thumb').attr('stroke', thumbColor);\n            _this.draw();\n        };\n        return _this;\n    }\n    Scrollbar.prototype.setRange = function (min, max) {\n        this.set('minLimit', min);\n        this.set('maxLimit', max);\n        var curValue = this.getValue();\n        var newValue = clamp(curValue, min, max);\n        if (curValue !== newValue && !this.get('isInit')) {\n            this.setValue(newValue);\n        }\n    };\n    Scrollbar.prototype.getRange = function () {\n        var min = this.get('minLimit') || 0;\n        var max = this.get('maxLimit') || 1;\n        return { min: min, max: max };\n    };\n    Scrollbar.prototype.setValue = function (value) {\n        var range = this.getRange();\n        var originalValue = this.getValue();\n        this.update({\n            thumbOffset: (this.get('trackLen') - this.get('thumbLen')) * clamp(value, range.min, range.max),\n        });\n        this.delegateEmit('valuechange', {\n            originalValue: originalValue,\n            value: this.getValue(),\n        });\n    };\n    Scrollbar.prototype.getValue = function () {\n        return clamp(this.get('thumbOffset') / (this.get('trackLen') - this.get('thumbLen')), 0, 1);\n    };\n    Scrollbar.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'scrollbar', isHorizontal: true, minThumbLen: 20, thumbOffset: 0, theme: DEFAULT_THEME });\n    };\n    Scrollbar.prototype.renderInner = function (group) {\n        this.renderTrackShape(group);\n        this.renderThumbShape(group);\n    };\n    Scrollbar.prototype.applyOffset = function () {\n        this.moveElementTo(this.get('group'), {\n            x: this.get('x'),\n            y: this.get('y'),\n        });\n    };\n    Scrollbar.prototype.initEvent = function () {\n        this.bindEvents();\n    };\n    // 创建滑道的 shape\n    Scrollbar.prototype.renderTrackShape = function (group) {\n        var _a = this.cfg, trackLen = _a.trackLen, _b = _a.theme, theme = _b === void 0 ? { default: {} } : _b;\n        var _c = theme.default, lineCap = _c.lineCap, trackColor = _c.trackColor, size = _c.size;\n        var attrs = this.get('isHorizontal')\n            ? {\n                x1: 0 + size / 2,\n                y1: size / 2,\n                x2: trackLen - size / 2,\n                y2: size / 2,\n                lineWidth: size,\n                stroke: trackColor,\n                lineCap: lineCap,\n            }\n            : {\n                x1: size / 2,\n                y1: 0 + size / 2,\n                x2: size / 2,\n                y2: trackLen - size / 2,\n                lineWidth: size,\n                stroke: trackColor,\n                lineCap: lineCap,\n            };\n        return this.addShape(group, {\n            id: this.getElementId('track'),\n            name: 'track',\n            type: 'line',\n            attrs: attrs,\n        });\n    };\n    // 创建滑块的 shape\n    Scrollbar.prototype.renderThumbShape = function (group) {\n        var _a = this.cfg, thumbOffset = _a.thumbOffset, thumbLen = _a.thumbLen, _b = _a.theme, theme = _b === void 0 ? { default: {} } : _b;\n        var _c = theme.default, size = _c.size, lineCap = _c.lineCap, thumbColor = _c.thumbColor;\n        var attrs = this.get('isHorizontal')\n            ? {\n                x1: thumbOffset + size / 2,\n                y1: size / 2,\n                x2: thumbOffset + thumbLen - size / 2,\n                y2: size / 2,\n                lineWidth: size,\n                stroke: thumbColor,\n                lineCap: lineCap,\n                cursor: 'default',\n            }\n            : {\n                x1: size / 2,\n                y1: thumbOffset + size / 2,\n                x2: size / 2,\n                y2: thumbOffset + thumbLen - size / 2,\n                lineWidth: size,\n                stroke: thumbColor,\n                lineCap: lineCap,\n                cursor: 'default',\n            };\n        return this.addShape(group, {\n            id: this.getElementId('thumb'),\n            name: 'thumb',\n            type: 'line',\n            attrs: attrs,\n        });\n    };\n    Scrollbar.prototype.bindEvents = function () {\n        var group = this.get('group');\n        group.on('mousedown', this.onStartEvent(false));\n        group.on('mouseup', this.onMouseUp);\n        group.on('touchstart', this.onStartEvent(true));\n        group.on('touchend', this.onMouseUp);\n        var trackShape = group.findById(this.getElementId('track'));\n        trackShape.on('click', this.onTrackClick);\n        var thumbShape = group.findById(this.getElementId('thumb'));\n        thumbShape.on('mouseover', this.onThumbMouseOver);\n        thumbShape.on('mouseout', this.onThumbMouseOut);\n    };\n    Scrollbar.prototype.getContainerDOM = function () {\n        var container = this.get('container');\n        var canvas = container && container.get('canvas');\n        return canvas && canvas.get('container');\n    };\n    Scrollbar.prototype.validateRange = function (offset) {\n        var _a = this.cfg, thumbLen = _a.thumbLen, trackLen = _a.trackLen;\n        var newOffset = offset;\n        if (offset + thumbLen > trackLen) {\n            newOffset = trackLen - thumbLen;\n        }\n        else if (offset + thumbLen < thumbLen) {\n            newOffset = 0;\n        }\n        return newOffset;\n    };\n    Scrollbar.prototype.draw = function () {\n        var container = this.get('container');\n        var canvas = container && container.get('canvas');\n        if (canvas) {\n            canvas.draw();\n        }\n    };\n    Scrollbar.prototype.updateThumbOffset = function (offset) {\n        var _a = this.cfg, thumbOffset = _a.thumbOffset, isHorizontal = _a.isHorizontal, thumbLen = _a.thumbLen, size = _a.size;\n        var newOffset = this.validateRange(offset);\n        if (newOffset === thumbOffset) {\n            // 如果更新后的 offset 与原值相同，则不改变\n            return;\n        }\n        var thumbShape = this.getElementByLocalId('thumb');\n        if (isHorizontal) {\n            thumbShape.attr({\n                x1: newOffset + size / 2,\n                x2: newOffset + thumbLen - size / 2,\n            });\n        }\n        else {\n            thumbShape.attr({\n                y1: newOffset + size / 2,\n                y2: newOffset + thumbLen - size / 2,\n            });\n        }\n        this.emitOffsetChange(newOffset);\n    };\n    Scrollbar.prototype.emitOffsetChange = function (offset) {\n        var _a = this.cfg, originalValue = _a.thumbOffset, trackLen = _a.trackLen, thumbLen = _a.thumbLen;\n        this.cfg.thumbOffset = offset;\n        // 发送事件\n        this.emit('scrollchange', {\n            thumbOffset: offset,\n            ratio: clamp(offset / (trackLen - thumbLen), 0, 1),\n        });\n        this.delegateEmit('valuechange', {\n            originalValue: originalValue,\n            value: offset,\n        });\n    };\n    return Scrollbar;\n}(GroupComponent));\nexport { Scrollbar };\n//# sourceMappingURL=scrollbar.js.map","/* 依赖的模块，在这里统一引入，方便打包优化 */\nexport { Event, AbstractGroup, AbstractShape } from '@antv/g-base';\n// adjust\nexport { registerAdjust, getAdjust, Adjust } from '@antv/adjust/lib/factory';\n// attr\nexport { getAttribute, Attribute } from '@antv/attr/lib/factory';\nexport { Color } from '@antv/attr';\n// coordinate\nexport { getCoordinate, registerCoordinate, Coordinate } from '@antv/coord';\n// scale\nexport { getScale, registerScale, Scale } from '@antv/scale';\n// component\nimport { Annotation, Axis, Component, Crosshair, Grid, GroupComponent, HtmlComponent, Legend, Slider, Tooltip, Scrollbar, } from '@antv/component';\nexport { HtmlComponent, GroupComponent, Component, Crosshair };\nexport { Annotation };\n// axis\nvar LineAxis = Axis.Line, CircleAxis = Axis.Circle;\nexport { LineAxis, CircleAxis };\n// grid\nvar LineGrid = Grid.Line, CircleGrid = Grid.Circle;\nexport { LineGrid, CircleGrid };\n// legend\nvar CategoryLegend = Legend.Category, ContinuousLegend = Legend.Continuous;\nexport { CategoryLegend, ContinuousLegend };\n// Tooltip\nvar HtmlTooltip = Tooltip.Html;\nexport { HtmlTooltip };\n// Slider\nexport { Slider };\n// Scrollbar\nexport { Scrollbar };\n//# sourceMappingURL=dependents.js.map","import { __assign } from \"tslib\";\nimport { firstValue, get, isEmpty, isNil, isNumber, isString, valuesOfKey } from '@antv/util';\nimport { getScale } from '../dependents';\nvar dateRegex = /^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\\1(?:29|30)|(?:0?[13578]|1[02])\\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\\2(?:29))(\\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;\n/**\n * 获取字段对应数据的类型\n * @param field 数据字段名\n * @param data 数据源\n * @returns default type 返回对应的数据类型\n */\nfunction getDefaultType(value) {\n    var type = 'linear';\n    if (dateRegex.test(value)) {\n        type = 'time';\n    }\n    else if (isString(value)) {\n        type = 'cat';\n    }\n    return type;\n}\n/**\n * @ignore\n * 为指定的 `field` 字段数据创建 scale\n * @param field 字段名\n * @param [data] 数据集，可为空\n * @param [scaleDef] 列定义，可为空\n * @returns scale 返回创建的 Scale 实例\n */\nexport function createScaleByField(field, data, scaleDef) {\n    var validData = data || [];\n    if (isNumber(field) || (isNil(firstValue(validData, field)) && isEmpty(scaleDef))) {\n        var Identity = getScale('identity');\n        return new Identity({\n            field: field.toString(),\n            values: [field],\n        });\n    }\n    var values = valuesOfKey(validData, field);\n    // 如果已经定义过这个度量\n    var type = get(scaleDef, 'type', getDefaultType(values[0]));\n    var ScaleCtor = getScale(type);\n    return new ScaleCtor(__assign({ field: field,\n        values: values }, scaleDef));\n}\n/**\n * @ignore\n * 同步 scale\n * @todo 是否可以通过 scale.update() 方法进行更新\n * @param scale 需要同步的 scale 实例\n * @param newScale 同步源 Scale\n */\nexport function syncScale(scale, newScale) {\n    if (scale.type !== 'identity' && newScale.type !== 'identity') {\n        var obj = {};\n        for (var k in newScale) {\n            if (Object.prototype.hasOwnProperty.call(newScale, k)) {\n                obj[k] = newScale[k];\n            }\n        }\n        scale.change(obj);\n    }\n}\n/**\n * @ignore\n * get the scale name, if alias exist, return alias, or else field\n * @param scale\n * @returns the name of field\n */\nexport function getName(scale) {\n    return scale.alias || scale.field;\n}\n//# sourceMappingURL=scale.js.map","import { get, isBoolean } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getName } from './scale';\nimport { vec2 } from '@antv/matrix-util';\n/**\n * @ignore\n * get axis relative region ( 0 ~ 1) by direction when coordinate is rect\n * @param direction\n * @returns axis coordinate region\n */\nexport function getLineAxisRelativeRegion(direction) {\n    var start;\n    var end;\n    switch (direction) {\n        case DIRECTION.TOP:\n            start = { x: 0, y: 1 };\n            end = { x: 1, y: 1 };\n            break;\n        case DIRECTION.RIGHT:\n            start = { x: 1, y: 0 };\n            end = { x: 1, y: 1 };\n            break;\n        case DIRECTION.BOTTOM:\n            start = { x: 0, y: 0 };\n            end = { x: 1, y: 0 };\n            break;\n        case DIRECTION.LEFT:\n            start = { x: 0, y: 0 };\n            end = { x: 0, y: 1 };\n            break;\n        default:\n            start = end = { x: 0, y: 0 };\n    }\n    return { start: start, end: end };\n}\n/**\n * @ignore\n * get axis relative region ( 0 ~ 1) by direction when coordinate is polar\n * @param coordinate\n * @returns axis coordinate region\n */\nexport function getCircleAxisRelativeRegion(coordinate) {\n    var start;\n    var end;\n    if (coordinate.isTransposed) {\n        start = {\n            x: 0,\n            y: 0,\n        };\n        end = {\n            x: 1,\n            y: 0,\n        };\n    }\n    else {\n        start = {\n            x: 0,\n            y: 0,\n        };\n        end = {\n            x: 0,\n            y: 1,\n        };\n    }\n    return { start: start, end: end };\n}\n/**\n * @ignore\n * get the axis region from coordinate\n * @param coordinate\n * @param direction\n * @returns the axis region (start point, end point)\n */\nexport function getAxisRegion(coordinate, direction) {\n    var region = { start: { x: 0, y: 0 }, end: { x: 0, y: 0 } };\n    if (coordinate.isRect) {\n        region = getLineAxisRelativeRegion(direction);\n    }\n    else if (coordinate.isPolar) {\n        region = getCircleAxisRelativeRegion(coordinate);\n    }\n    var start = region.start, end = region.end;\n    return {\n        start: coordinate.convert(start),\n        end: coordinate.convert(end),\n    };\n}\n/**\n * @ignore\n * get axis factor\n * @param coordinate\n * @param direction\n * @returns factor\n */\nexport function getAxisFactor(coordinate, direction) {\n    // rect coordinate, by direction\n    if (coordinate.isRect) {\n        return coordinate.isTransposed\n            ? [DIRECTION.RIGHT, DIRECTION.BOTTOM].includes(direction)\n                ? 1\n                : -1\n            : [DIRECTION.BOTTOM, DIRECTION.RIGHT].includes(direction)\n                ? -1\n                : 1;\n    }\n    // polar y axis, by angle\n    if (coordinate.isPolar) {\n        var startAngle = coordinate.x.start;\n        return startAngle < 0 ? -1 : 1;\n    }\n    return 1;\n}\n/**\n * @ignore\n * whether the axis isVertical\n * @param region\n * @returns isVertical\n */\nexport function isVertical(region) {\n    var start = region.start, end = region.end;\n    return start.x === end.x;\n}\n/**\n * @ignore\n * get factor by region (real position)\n * @param region\n * @param center\n * @returns factor\n */\nexport function getAxisFactorByRegion(region, center) {\n    var start = region.start, end = region.end;\n    var isAxisVertical = isVertical(region);\n    // 垂直\n    if (isAxisVertical) {\n        // 左方,从下到上、右方,从上到下\n        if ((start.y - end.y) * (center.x - start.x) > 0) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    }\n    else {\n        // 下方,从左到右、上方,从右到做\n        if ((end.x - start.x) * (start.y - center.y) > 0) {\n            return -1;\n        }\n        else {\n            return 1;\n        }\n    }\n}\n/**\n * @ignore\n * get the axis cfg from theme\n * @param theme view theme object\n * @param direction axis direction\n * @returns axis theme cfg\n */\nexport function getAxisThemeCfg(theme, direction) {\n    return get(theme, ['components', 'axis', direction], {});\n}\n/**\n * @ignore\n * get circle axis center and radius\n * @param coordinate\n */\nexport function getCircleAxisCenterRadius(coordinate) {\n    // @ts-ignore\n    var x = coordinate.x, y = coordinate.y, center = coordinate.circleCenter;\n    var isReflectY = y.start > y.end;\n    var start = coordinate.isTransposed\n        ? coordinate.convert({\n            x: isReflectY ? 0 : 1,\n            y: 0,\n        })\n        : coordinate.convert({\n            x: 0,\n            y: isReflectY ? 0 : 1,\n        });\n    var startVector = [start.x - center.x, start.y - center.y];\n    var normalVector = [1, 0];\n    var startAngle = start.y > center.y ? vec2.angle(startVector, normalVector) : vec2.angle(startVector, normalVector) * -1;\n    var endAngle = startAngle + (x.end - x.start);\n    var radius = Math.sqrt(Math.pow((start.x - center.x), 2) + Math.pow((start.y - center.y), 2));\n    return {\n        center: center,\n        radius: radius,\n        startAngle: startAngle,\n        endAngle: endAngle,\n    };\n}\n/**\n * @ignore\n * 从配置中获取单个字段的 axis 配置\n * @param axes\n * @param field\n * @returns the axis option of field\n */\nexport function getAxisOption(axes, field) {\n    if (isBoolean(axes)) {\n        return axes === false ? false : {};\n    }\n    return get(axes, [field]);\n}\n/**\n * @ignore\n * 如果配置了 position，则使用配置\n * @param axisOption\n * @param def\n */\nexport function getAxisDirection(axisOption, def) {\n    return get(axisOption, 'position', def);\n}\n/**\n * 获取 axis 的 title 文本\n * @param scale\n * @param axisOption\n */\nexport function getAxisTitleText(scale, axisOption) {\n    return get(axisOption, ['title', 'text'], getName(scale));\n}\n//# sourceMappingURL=axis.js.map","import { deepMix, each, every, get, isNil } from '@antv/util';\nimport { LAYER } from '../constant';\nimport { getAxisOption } from '../util/axis';\n/**\n * facet 基类\n *  - 定义生命周期，方便自定义 facet\n *  - 提供基础的生命流程方法\n *\n * 生命周期：\n *\n * 初始化 init\n * 1. 初始化容器\n * 2. 数据分面，生成分面布局信息\n *\n * 渲染阶段 render\n * 1. view 创建\n * 2. title\n * 3. axis\n *\n * 清除阶段 clear\n * 1. 清除 view\n *\n * 销毁阶段 destroy\n * 1. clear\n * 2. 清除事件\n * 3. 清除 group\n */\nvar Facet = /** @class */ (function () {\n    function Facet(view, cfg) {\n        /** 是否销毁 */\n        this.destroyed = false;\n        /** 分面之后的所有分面数据结构 */\n        this.facets = [];\n        this.view = view;\n        this.cfg = deepMix({}, this.getDefaultCfg(), cfg);\n    }\n    /**\n     * 初始化过程\n     */\n    Facet.prototype.init = function () {\n        // 初始化容器\n        if (!this.container) {\n            this.container = this.createContainer();\n        }\n        // 生成分面布局信息\n        var data = this.view.getData();\n        this.facets = this.generateFacets(data);\n    };\n    /**\n     * 渲染分面，由上层 view 调用。包括：\n     *  - 分面 view\n     *  - 轴\n     *  - title\n     *\n     *  子类可以复写，添加一些其他组件，比如滚动条等\n     */\n    Facet.prototype.render = function () {\n        this.renderViews();\n    };\n    /**\n     * 更新 facet\n     */\n    Facet.prototype.update = function () {\n        // 其实不用做任何事情，因为 facet 最终生成的 View 和 Geometry 都在父 view 的更新中处理了\n    };\n    /**\n     * 清空，clear 之后如果还需要使用，需要重新调用 init 初始化过程\n     * 一般在数据有变更的时候调用，重新进行数据的分面逻辑\n     */\n    Facet.prototype.clear = function () {\n        this.clearFacetViews();\n    };\n    /**\n     * 销毁\n     */\n    Facet.prototype.destroy = function () {\n        this.clear();\n        if (this.container) {\n            this.container.remove(true);\n            this.container = undefined;\n        }\n        this.destroyed = true;\n        this.view = undefined;\n        this.facets = [];\n    };\n    /**\n     * 根据 facet 生成 view，可以给上层自定义使用\n     * @param facet\n     */\n    Facet.prototype.facetToView = function (facet) {\n        var region = facet.region, data = facet.data, _a = facet.padding, padding = _a === void 0 ? this.cfg.padding : _a;\n        var view = this.view.createView({\n            region: region,\n            padding: padding,\n        });\n        // 设置分面的数据\n        view.data(data || []);\n        facet.view = view;\n        // 前置钩子\n        this.beforeEachView(view, facet);\n        var eachView = this.cfg.eachView;\n        if (eachView) {\n            eachView(view, facet);\n        }\n        // 后置钩子\n        this.afterEachView(view, facet);\n        return view;\n    };\n    // 创建容器\n    Facet.prototype.createContainer = function () {\n        var foregroundGroup = this.view.getLayer(LAYER.FORE);\n        return foregroundGroup.addGroup();\n    };\n    /**\n     * 初始化 view\n     */\n    Facet.prototype.renderViews = function () {\n        this.createFacetViews();\n    };\n    /**\n     * 创建 分面 view\n     */\n    Facet.prototype.createFacetViews = function () {\n        var _this = this;\n        // 使用分面数据 创建分面 view\n        return this.facets.map(function (facet) {\n            return _this.facetToView(facet);\n        });\n    };\n    /**\n     * 从 view 中清除 facetView\n     */\n    Facet.prototype.clearFacetViews = function () {\n        var _this = this;\n        // 从 view 中移除分面 view\n        each(this.facets, function (facet) {\n            if (facet.view) {\n                _this.view.removeView(facet.view);\n                facet.view = undefined;\n            }\n        });\n    };\n    // 其他一些提供给子类使用的方法\n    /**\n     * 获取这个字段对应的所有值，数组\n     * @protected\n     * @param data 数据\n     * @param field 字段名\n     * @return 字段对应的值\n     */\n    Facet.prototype.getFieldValues = function (data, field) {\n        var rst = [];\n        var cache = {};\n        // 去重、去除 Nil 值\n        each(data, function (d) {\n            var value = d[field];\n            if (!isNil(value) && !cache[value]) {\n                rst.push(value);\n                cache[value] = true;\n            }\n        });\n        return rst;\n    };\n    /**\n     * 获得每个分面的 region，平分区域\n     * @param rows row 总数\n     * @param cols col 总数\n     * @param xIndex x 方向 index\n     * @param yIndex y 方向 index\n     */\n    Facet.prototype.getRegion = function (rows, cols, xIndex, yIndex) {\n        // x, y 方向均分 100% 宽高\n        var xRatio = 1 / (cols === 0 ? 1 : cols);\n        var yRatio = 1 / (rows === 0 ? 1 : rows);\n        var start = {\n            x: xRatio * xIndex,\n            y: yRatio * yIndex,\n        };\n        var end = {\n            x: xRatio * (xIndex + 1),\n            y: yRatio * (yIndex + 1),\n        };\n        return {\n            start: start,\n            end: end,\n        };\n    };\n    Facet.prototype.getDefaultCfg = function () {\n        return {\n            eachView: undefined,\n            showTitle: true,\n            padding: 10,\n            fields: [],\n        };\n    };\n    /**\n     * 默认的 title 样式，因为有的分面是 title，有的分面配置是 columnTitle、rowTitle\n     */\n    Facet.prototype.getDefaultTitleCfg = function () {\n        // @ts-ignore\n        var fontFamily = this.view.getTheme().fontFamily;\n        return {\n            style: {\n                fontSize: 14,\n                fill: '#666',\n                fontFamily: fontFamily,\n            },\n        };\n    };\n    /**\n     * 处理 axis 的默认配置\n     * @param view\n     * @param facet\n     */\n    Facet.prototype.processAxis = function (view, facet) {\n        var options = view.getOptions();\n        var coordinateOption = options.coordinate;\n        var geometries = view.geometries;\n        var coordinateType = get(coordinateOption, 'type', 'rect');\n        if (coordinateType === 'rect' && geometries.length) {\n            if (isNil(options.axes)) {\n                // @ts-ignore\n                options.axes = {};\n            }\n            var axes = options.axes;\n            var _a = geometries[0].getXYFields(), x = _a[0], y = _a[1];\n            var xOption = getAxisOption(axes, x);\n            var yOption = getAxisOption(axes, y);\n            if (xOption !== false) {\n                options.axes[x] = this.getXAxisOption(x, axes, xOption, facet);\n            }\n            if (yOption !== false) {\n                options.axes[y] = this.getYAxisOption(y, axes, yOption, facet);\n            }\n        }\n    };\n    /**\n     * 获取分面数据\n     * @param conditions\n     */\n    Facet.prototype.getFacetDataFilter = function (conditions) {\n        return function (datum) {\n            // 过滤出全部满足条件的数据\n            return every(conditions, function (condition) {\n                var field = condition.field, value = condition.value;\n                if (!isNil(value) && field) {\n                    return datum[field] === value;\n                }\n                return true;\n            });\n        };\n    };\n    return Facet;\n}());\nexport { Facet };\n//# sourceMappingURL=facet.js.map","import { lowerCase } from '@antv/util';\nexport { Facet } from './facet';\n/**\n * 所有的 Facet 类\n */\nvar Facets = {};\n/**\n * 根据 type 获取 facet 类\n * @param type 分面类型\n */\nexport var getFacet = function (type) {\n    return Facets[lowerCase(type)];\n};\n/**\n * 注册一个 Facet 类\n * @param type 分面类型\n * @param ctor 分面类\n */\nexport var registerFacet = function (type, ctor) {\n    Facets[lowerCase(type)] = ctor;\n};\n//# sourceMappingURL=index.js.map","import { assign } from '@antv/util';\n/**\n * Action 的基类\n */\nvar Action = /** @class */ (function () {\n    function Action(context, cfg) {\n        this.context = context;\n        this.cfg = cfg;\n        context.addAction(this);\n    }\n    /**\n     * 设置配置项传入的值\n     * @param cfg\n     */\n    Action.prototype.applyCfg = function (cfg) {\n        assign(this, cfg);\n    };\n    /**\n     * Inits action，提供给子类用于继承\n     */\n    Action.prototype.init = function () {\n        this.applyCfg(this.cfg);\n    };\n    /**\n     * Destroys action\n     */\n    Action.prototype.destroy = function () {\n        // 移除 action\n        this.context.removeAction(this);\n        // 清空\n        this.context = null;\n    };\n    return Action;\n}());\nexport default Action;\n//# sourceMappingURL=base.js.map","import { __extends } from \"tslib\";\nimport Action from './base';\n/** 回调函数构建的 Action */\nvar CallbackAction = /** @class */ (function (_super) {\n    __extends(CallbackAction, _super);\n    function CallbackAction() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 执行\n     */\n    CallbackAction.prototype.execute = function () {\n        if (this.callback) {\n            this.callback(this.context);\n        }\n    };\n    /**\n     * 销毁\n     */\n    CallbackAction.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.callback = null;\n    };\n    return CallbackAction;\n}(Action));\nexport default CallbackAction;\n//# sourceMappingURL=callback.js.map","import CallbackAction from './callback';\nimport { get } from '@antv/util';\n// Action 类的缓存\nvar ActionCache = {};\n/**\n * 根据名称获取 Action 实例\n * @param actionName - action 的名称\n * @param context 上下文\n * @returns Action 实例\n */\nexport function createAction(actionName, context) {\n    var actionOption = ActionCache[actionName];\n    var action = null;\n    if (actionOption) {\n        var ActionClass = actionOption.ActionClass, cfg = actionOption.cfg;\n        action = new ActionClass(context, cfg);\n        action.name = actionName;\n        action.init();\n    }\n    return action;\n}\n/**\n * 根据 action 的 name 获取定义的类\n * @param actionName action 的 name\n */\nexport function getActionClass(actionName) {\n    var actionOption = ActionCache[actionName];\n    return get(actionOption, 'ActionClass');\n}\n/**\n * 注册 Action\n * @param actionName - action 的名称\n * @param ActionClass - 继承自 action 的类\n */\nexport function registerAction(actionName, ActionClass, cfg) {\n    ActionCache[actionName] = {\n        ActionClass: ActionClass,\n        cfg: cfg,\n    };\n}\n/**\n * 取消注册 Action\n * @param actionName action 名称\n */\nexport function unregisterAction(actionName) {\n    delete ActionCache[actionName];\n}\n/**\n * 根据回调函数获取 Action 实例\n * @param callback - action 的回调函数\n * @param context 上下文\n * @returns Action 实例\n */\nexport function createCallbackAction(callback, context) {\n    var action = new CallbackAction(context);\n    action.callback = callback;\n    action.name = 'callback';\n    return action;\n}\n//# sourceMappingURL=register.js.map","import { each, isEmpty, isNumber, isNumberEqual } from '@antv/util';\n// 获取图形的包围盒\nfunction getPointsBox(points) {\n    if (isEmpty(points)) {\n        return null;\n    }\n    var minX = points[0].x;\n    var maxX = points[0].x;\n    var minY = points[0].y;\n    var maxY = points[0].y;\n    each(points, function (point) {\n        minX = minX > point.x ? point.x : minX;\n        maxX = maxX < point.x ? point.x : maxX;\n        minY = minY > point.y ? point.y : minY;\n        maxY = maxY < point.y ? point.y : maxY;\n    });\n    return {\n        minX: minX,\n        maxX: maxX,\n        minY: minY,\n        maxY: maxY,\n        centerX: (minX + maxX) / 2,\n        centerY: (minY + maxY) / 2,\n    };\n}\n/**\n * @ignore\n * 根据弧度计算极坐标系下的坐标点\n * @param centerX\n * @param centerY\n * @param radius\n * @param angleInRadian\n * @returns\n */\nexport function polarToCartesian(centerX, centerY, radius, angleInRadian) {\n    return {\n        x: centerX + radius * Math.cos(angleInRadian),\n        y: centerY + radius * Math.sin(angleInRadian),\n    };\n}\n/**\n * @ignore\n * 根据起始角度计算绘制扇形的 path\n * @param centerX\n * @param centerY\n * @param radius\n * @param startAngleInRadian\n * @param endAngleInRadian\n * @returns\n */\nexport function getSectorPath(centerX, centerY, radius, startAngleInRadian, endAngleInRadian, innerRadius) {\n    if (innerRadius === void 0) { innerRadius = 0; }\n    var start = polarToCartesian(centerX, centerY, radius, startAngleInRadian);\n    var end = polarToCartesian(centerX, centerY, radius, endAngleInRadian);\n    var innerStart = polarToCartesian(centerX, centerY, innerRadius, startAngleInRadian);\n    var innerEnd = polarToCartesian(centerX, centerY, innerRadius, endAngleInRadian);\n    if (endAngleInRadian - startAngleInRadian === Math.PI * 2) {\n        // 整个圆是分割成两个圆\n        var middlePoint = polarToCartesian(centerX, centerY, radius, startAngleInRadian + Math.PI);\n        var innerMiddlePoint = polarToCartesian(centerX, centerY, innerRadius, startAngleInRadian + Math.PI);\n        var circlePathCommands = [\n            ['M', start.x, start.y],\n            ['A', radius, radius, 0, 1, 1, middlePoint.x, middlePoint.y],\n            ['A', radius, radius, 0, 1, 1, end.x, end.y],\n            ['M', innerStart.x, innerStart.y],\n        ];\n        if (innerRadius) {\n            circlePathCommands.push(['A', innerRadius, innerRadius, 0, 1, 0, innerMiddlePoint.x, innerMiddlePoint.y]);\n            circlePathCommands.push(['A', innerRadius, innerRadius, 0, 1, 0, innerEnd.x, innerEnd.y]);\n        }\n        circlePathCommands.push(['M', start.x, start.y]);\n        circlePathCommands.push(['Z']);\n        return circlePathCommands;\n    }\n    var arcSweep = endAngleInRadian - startAngleInRadian <= Math.PI ? 0 : 1;\n    var sectorPathCommands = [\n        ['M', start.x, start.y],\n        ['A', radius, radius, 0, arcSweep, 1, end.x, end.y],\n        ['L', innerEnd.x, innerEnd.y],\n    ];\n    if (innerRadius) {\n        sectorPathCommands.push(['A', innerRadius, innerRadius, 0, arcSweep, 0, innerStart.x, innerStart.y]);\n    }\n    sectorPathCommands.push(['L', start.x, start.y]);\n    sectorPathCommands.push(['Z']);\n    return sectorPathCommands;\n}\n/**\n * @ignore\n * Gets arc path\n * @param centerX\n * @param centerY\n * @param radius\n * @param startAngleInRadian\n * @param endAngleInRadian\n * @returns\n */\nexport function getArcPath(centerX, centerY, radius, startAngleInRadian, endAngleInRadian) {\n    var start = polarToCartesian(centerX, centerY, radius, startAngleInRadian);\n    var end = polarToCartesian(centerX, centerY, radius, endAngleInRadian);\n    if (isNumberEqual(endAngleInRadian - startAngleInRadian, Math.PI * 2)) {\n        var middlePoint = polarToCartesian(centerX, centerY, radius, startAngleInRadian + Math.PI);\n        return [\n            ['M', start.x, start.y],\n            ['A', radius, radius, 0, 1, 1, middlePoint.x, middlePoint.y],\n            ['A', radius, radius, 0, 1, 1, start.x, start.y],\n            ['A', radius, radius, 0, 1, 0, middlePoint.x, middlePoint.y],\n            ['A', radius, radius, 0, 1, 0, start.x, start.y],\n            ['Z'],\n        ];\n    }\n    var arcSweep = endAngleInRadian - startAngleInRadian <= Math.PI ? 0 : 1;\n    return [\n        ['M', start.x, start.y],\n        ['A', radius, radius, 0, arcSweep, 1, end.x, end.y],\n    ];\n}\n/**\n * @ignore\n * 从数据模型中的 points 换算角度\n * @param shapeModel\n * @param coordinate\n * @returns\n */\nexport function getAngle(shapeModel, coordinate) {\n    var points = shapeModel.points;\n    var box = getPointsBox(points);\n    var endAngle;\n    var startAngle;\n    var coordStartAngle = coordinate.startAngle, coordEndAngle = coordinate.endAngle;\n    var diffAngle = coordEndAngle - coordStartAngle;\n    if (coordinate.isTransposed) {\n        endAngle = box.maxY * diffAngle;\n        startAngle = box.minY * diffAngle;\n    }\n    else {\n        endAngle = box.maxX * diffAngle;\n        startAngle = box.minX * diffAngle;\n    }\n    endAngle += coordStartAngle;\n    startAngle += coordStartAngle;\n    return {\n        startAngle: startAngle,\n        endAngle: endAngle,\n    };\n}\n/**\n * @ignore\n * 计算多边形重心: https://en.wikipedia.org/wiki/Centroid#Of_a_polygon\n */\nexport function getPolygonCentroid(xs, ys) {\n    if (isNumber(xs) && isNumber(ys)) {\n        // 普通色块图，xs 和 ys 是数值\n        return [xs, ys];\n    }\n    var i = -1;\n    var x = 0;\n    var y = 0;\n    var former;\n    var current = xs.length - 1;\n    var diff;\n    var k = 0;\n    while (++i < xs.length) {\n        former = current;\n        current = i;\n        k += diff = xs[former] * ys[current] - xs[current] * ys[former];\n        x += (xs[former] + xs[current]) * diff;\n        y += (ys[former] + ys[current]) * diff;\n    }\n    k *= 3;\n    return [x / k, y / k];\n}\n/**\n * @ignore\n * 获取需要替换的属性，如果原先图形元素存在，而新图形不存在，则设置 undefined\n */\nexport function getReplaceAttrs(sourceShape, targetShape) {\n    var originAttrs = sourceShape.attr();\n    var newAttrs = targetShape.attr();\n    each(originAttrs, function (v, k) {\n        if (newAttrs[k] === undefined) {\n            newAttrs[k] = undefined;\n        }\n    });\n    return newAttrs;\n}\n//# sourceMappingURL=graphics.js.map","import { isArray, isString } from '@antv/util';\n/**\n * @ignore\n * Determines whether between is\n * @param value\n * @param start\n * @param end\n * @returns true if between\n */\nexport function isBetween(value, start, end) {\n    var min = Math.min(start, end);\n    var max = Math.max(start, end);\n    return value >= min && value <= max;\n}\n/**\n * @ignore\n * pads the current string/array with a given value (repeated, if needed) so that the resulting reaches a given length.\n * The padding is applied from the end of the current value.\n *\n * @param source\n * @param targetLength\n * @param padValue\n * @returns\n */\nexport function padEnd(source, targetLength, padValue) {\n    if (isString(source)) {\n        return source.padEnd(targetLength, padValue);\n    }\n    else if (isArray(source)) {\n        var sourceLength = source.length;\n        if (sourceLength < targetLength) {\n            var diff = targetLength - sourceLength;\n            for (var i = 0; i < diff; i++) {\n                source.push(padValue);\n            }\n        }\n    }\n    return source;\n}\n/**\n * @ignore\n * omit keys of an object.\n * @param obj\n * @param keys\n */\nexport function omit(obj, keys) {\n    keys.forEach(function (key) {\n        delete obj[key];\n    });\n    return obj;\n}\n/**\n * @ignore\n * @param sourceArray\n * @param targetArray\n * @param map\n */\nexport function uniq(sourceArray, targetArray, map) {\n    if (targetArray === void 0) { targetArray = []; }\n    if (map === void 0) { map = {}; }\n    for (var _i = 0, sourceArray_1 = sourceArray; _i < sourceArray_1.length; _i++) {\n        var source = sourceArray_1[_i];\n        if (!map[source]) {\n            targetArray.push(source);\n            map[source] = true;\n        }\n    }\n    return targetArray;\n}\n//# sourceMappingURL=helper.js.map","import { getSectorPath } from './graphics';\nimport { isBetween } from './helper';\n/**\n * @ignore\n * Gets x dimension length\n * @param coordinate\n * @returns x dimension length\n */\nexport function getXDimensionLength(coordinate) {\n    if (coordinate.isPolar && !coordinate.isTransposed) {\n        // 极坐标系下 width 为弧长\n        return (coordinate.endAngle - coordinate.startAngle) * coordinate.getRadius();\n    }\n    // 直角坐标系\n    var start = coordinate.convert({ x: 0, y: 0 });\n    var end = coordinate.convert({ x: 1, y: 0 });\n    // 坐标系有可能发生 transpose 等变换，所有通过两点之间的距离进行计算\n    return Math.sqrt(Math.pow(end.x - start.x, 2) + Math.pow(end.y - start.y, 2));\n}\n/**\n * @ignore\n * Determines whether full circle is\n * @param coordinate\n * @returns true if full circle\n */\nexport function isFullCircle(coordinate) {\n    if (coordinate.isPolar) {\n        var startAngle = coordinate.startAngle, endAngle = coordinate.endAngle;\n        return endAngle - startAngle === Math.PI * 2;\n    }\n    return false;\n}\n/**\n * @ignore\n * 获取当前点到坐标系圆心的距离\n * @param coordinate 坐标系\n * @param point 当前点\n * @returns distance to center\n */\nexport function getDistanceToCenter(coordinate, point) {\n    var center = coordinate.getCenter();\n    return Math.sqrt(Math.pow((point.x - center.x), 2) + Math.pow((point.y - center.y), 2));\n}\n/**\n * @ignore\n * 坐标点是否在坐标系中\n * @param coordinate\n * @param point\n */\nexport function isPointInCoordinate(coordinate, point) {\n    var result = false;\n    if (coordinate) {\n        if (coordinate.type === 'theta') {\n            var start = coordinate.start, end = coordinate.end;\n            result = isBetween(point.x, start.x, end.x) && isBetween(point.y, start.y, end.y);\n        }\n        else {\n            var invertPoint = coordinate.invert(point);\n            result = isBetween(invertPoint.x, 0, 1) && isBetween(invertPoint.y, 0, 1);\n        }\n    }\n    return result;\n}\n/**\n * @ignore\n * 获取点到圆心的连线与水平方向的夹角\n */\nexport function getAngleByPoint(coordinate, point) {\n    var center = coordinate.getCenter();\n    return Math.atan2(point.y - center.y, point.x - center.x);\n}\n/**\n * @ignore\n * 获取同坐标系范围相同的剪切区域\n * @param coordinate\n * @returns\n */\nexport function getCoordinateClipCfg(coordinate, margin) {\n    if (margin === void 0) { margin = 0; }\n    var start = coordinate.start, end = coordinate.end;\n    var width = coordinate.getWidth();\n    var height = coordinate.getHeight();\n    if (coordinate.isPolar) {\n        var startAngle_1 = coordinate.startAngle, endAngle_1 = coordinate.endAngle;\n        var center_1 = coordinate.getCenter();\n        var radius_1 = coordinate.getRadius();\n        return {\n            type: 'path',\n            startState: {\n                path: getSectorPath(center_1.x, center_1.y, radius_1 + margin, startAngle_1, startAngle_1),\n            },\n            endState: function (ratio) {\n                var diff = (endAngle_1 - startAngle_1) * ratio + startAngle_1;\n                var path = getSectorPath(center_1.x, center_1.y, radius_1 + margin, startAngle_1, diff);\n                return {\n                    path: path,\n                };\n            },\n            attrs: {\n                path: getSectorPath(center_1.x, center_1.y, radius_1 + margin, startAngle_1, endAngle_1),\n            },\n        };\n    }\n    var endState;\n    if (coordinate.isTransposed) {\n        endState = {\n            height: height + margin * 2,\n        };\n    }\n    else {\n        endState = {\n            width: width + margin * 2,\n        };\n    }\n    return {\n        type: 'rect',\n        startState: {\n            x: start.x - margin,\n            y: end.y - margin,\n            width: coordinate.isTransposed ? width + margin * 2 : 0,\n            height: coordinate.isTransposed ? 0 : height + margin * 2,\n        },\n        endState: endState,\n        attrs: {\n            x: start.x - margin,\n            y: end.y - margin,\n            width: width + margin * 2,\n            height: height + margin * 2,\n        },\n    };\n}\n//# sourceMappingURL=coordinate.js.map","import { vec2 } from '@antv/matrix-util';\nimport { each } from '@antv/util';\nimport { getDistanceToCenter } from '../../../util/coordinate';\nfunction _points2path(points, isInCircle) {\n    var path = [];\n    if (points.length) {\n        path.push(['M', points[0].x, points[0].y]);\n        for (var i = 1, length_1 = points.length; i < length_1; i += 1) {\n            var item = points[i];\n            path.push(['L', item.x, item.y]);\n        }\n        if (isInCircle) {\n            path.push(['Z']);\n        }\n    }\n    return path;\n}\nfunction _convertArr(arr, coord) {\n    var tmp = [arr[0]];\n    for (var i = 1, len = arr.length; i < len; i = i + 2) {\n        var point = coord.convert({\n            x: arr[i],\n            y: arr[i + 1],\n        });\n        tmp.push(point.x, point.y);\n    }\n    return tmp;\n}\nfunction _convertPolarPath(pre, cur, coord) {\n    var isTransposed = coord.isTransposed, startAngle = coord.startAngle, endAngle = coord.endAngle;\n    var prePoint = {\n        x: pre[1],\n        y: pre[2],\n    };\n    var curPoint = {\n        x: cur[1],\n        y: cur[2],\n    };\n    var rst = [];\n    var xDim = isTransposed ? 'y' : 'x';\n    var angleRange = Math.abs(curPoint[xDim] - prePoint[xDim]) * (endAngle - startAngle);\n    var direction = curPoint[xDim] >= prePoint[xDim] ? 1 : 0; // 圆弧的方向\n    var flag = angleRange > Math.PI ? 1 : 0; // 大弧还是小弧标志位\n    var convertPoint = coord.convert(curPoint);\n    var r = getDistanceToCenter(coord, convertPoint);\n    if (r >= 0.5) {\n        // 小于1像素的圆在图像上无法识别\n        if (angleRange === Math.PI * 2) {\n            var middlePoint = {\n                x: (curPoint.x + prePoint.x) / 2,\n                y: (curPoint.y + prePoint.y) / 2,\n            };\n            var middleConvertPoint = coord.convert(middlePoint);\n            rst.push(['A', r, r, 0, flag, direction, middleConvertPoint.x, middleConvertPoint.y]);\n            rst.push(['A', r, r, 0, flag, direction, convertPoint.x, convertPoint.y]);\n        }\n        else {\n            rst.push(['A', r, r, 0, flag, direction, convertPoint.x, convertPoint.y]);\n        }\n    }\n    return rst;\n}\n// 当存在整体的圆时，去除圆前面和后面的线，防止出现直线穿过整个圆的情形\nfunction _filterFullCirleLine(path) {\n    each(path, function (subPath, index) {\n        var cur = subPath;\n        if (cur[0].toLowerCase() === 'a') {\n            var pre = path[index - 1];\n            var next = path[index + 1];\n            if (next && next[0].toLowerCase() === 'a') {\n                if (pre && pre[0].toLowerCase() === 'l') {\n                    pre[0] = 'M';\n                }\n            }\n            else if (pre && pre[0].toLowerCase() === 'a') {\n                if (next && next[0].toLowerCase() === 'l') {\n                    next[0] = 'M';\n                }\n            }\n        }\n    });\n}\n/**\n * @ignore\n * 计算光滑的贝塞尔曲线\n */\nexport var smoothBezier = function (points, smooth, isLoop, constraint) {\n    var cps = [];\n    var prevPoint;\n    var nextPoint;\n    var hasConstraint = !!constraint;\n    var min;\n    var max;\n    if (hasConstraint) {\n        min = [Infinity, Infinity];\n        max = [-Infinity, -Infinity];\n        for (var i = 0, l = points.length; i < l; i++) {\n            var point = points[i];\n            min = vec2.min([0, 0], min, point);\n            max = vec2.max([0, 0], max, point);\n        }\n        min = vec2.min([0, 0], min, constraint[0]);\n        max = vec2.max([0, 0], max, constraint[1]);\n    }\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (isLoop) {\n            prevPoint = points[i ? i - 1 : len - 1];\n            nextPoint = points[(i + 1) % len];\n        }\n        else {\n            if (i === 0 || i === len - 1) {\n                cps.push(point);\n                continue;\n            }\n            else {\n                prevPoint = points[i - 1];\n                nextPoint = points[i + 1];\n            }\n        }\n        var v = [0, 0];\n        v = vec2.sub(v, nextPoint, prevPoint);\n        v = vec2.scale(v, v, smooth);\n        var d0 = vec2.distance(point, prevPoint);\n        var d1 = vec2.distance(point, nextPoint);\n        var sum = d0 + d1;\n        if (sum !== 0) {\n            d0 /= sum;\n            d1 /= sum;\n        }\n        var v1 = vec2.scale([0, 0], v, -d0);\n        var v2 = vec2.scale([0, 0], v, d1);\n        var cp0 = vec2.add([0, 0], point, v1);\n        var cp1 = vec2.add([0, 0], point, v2);\n        if (hasConstraint) {\n            cp0 = vec2.max([0, 0], cp0, min);\n            cp0 = vec2.min([0, 0], cp0, max);\n            cp1 = vec2.max([0, 0], cp1, min);\n            cp1 = vec2.min([0, 0], cp1, max);\n        }\n        cps.push(cp0);\n        cps.push(cp1);\n    }\n    if (isLoop) {\n        cps.push(cps.shift());\n    }\n    return cps;\n};\n/**\n * @ignore\n * 贝塞尔曲线\n */\nexport function catmullRom2bezier(crp, z, constraint) {\n    var isLoop = !!z;\n    var pointList = [];\n    for (var i = 0, l = crp.length; i < l; i += 2) {\n        pointList.push([crp[i], crp[i + 1]]);\n    }\n    var controlPointList = smoothBezier(pointList, 0.4, isLoop, constraint);\n    var len = pointList.length;\n    var d1 = [];\n    var cp1;\n    var cp2;\n    var p;\n    for (var i = 0; i < len - 1; i++) {\n        cp1 = controlPointList[i * 2];\n        cp2 = controlPointList[i * 2 + 1];\n        p = pointList[i + 1];\n        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);\n    }\n    if (isLoop) {\n        cp1 = controlPointList[len];\n        cp2 = controlPointList[len + 1];\n        p = pointList[0];\n        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);\n    }\n    return d1;\n}\n/**\n * @ignore\n * 将点连接成路径 path\n */\nexport function getLinePath(points, isInCircle) {\n    return _points2path(points, isInCircle);\n}\n/**\n * @ignore\n * 根据关键点获取限定了范围的平滑线\n */\nexport function getSplinePath(points, isInCircle, constaint) {\n    var data = [];\n    var first = points[0];\n    var prePoint = null;\n    if (points.length <= 2) {\n        // 两点以内直接绘制成路径\n        return getLinePath(points, isInCircle);\n    }\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (!prePoint || !(prePoint.x === point.x && prePoint.y === point.y)) {\n            data.push(point.x);\n            data.push(point.y);\n            prePoint = point;\n        }\n    }\n    var constraint = constaint || [\n        // 范围\n        [0, 0],\n        [1, 1],\n    ];\n    var splinePath = catmullRom2bezier(data, isInCircle, constraint);\n    splinePath.unshift(['M', first.x, first.y]);\n    return splinePath;\n}\n/**\n * @ignore\n * 将归一化后的路径数据转换成坐标\n */\nexport function convertNormalPath(coord, path) {\n    var tmp = [];\n    each(path, function (subPath) {\n        var action = subPath[0];\n        switch (action.toLowerCase()) {\n            case 'm':\n            case 'l':\n            case 'c':\n                tmp.push(_convertArr(subPath, coord));\n                break;\n            case 'z':\n            default:\n                tmp.push(subPath);\n                break;\n        }\n    });\n    return tmp;\n}\n/**\n * @ignore\n * 将路径转换为极坐标下的真实路径\n */\nexport function convertPolarPath(coord, path) {\n    var tmp = [];\n    var pre;\n    var cur;\n    var transposed;\n    var equals;\n    each(path, function (subPath, index) {\n        var action = subPath[0];\n        switch (action.toLowerCase()) {\n            case 'm':\n            case 'c':\n            case 'q':\n                tmp.push(_convertArr(subPath, coord));\n                break;\n            case 'l':\n                pre = path[index - 1];\n                cur = subPath;\n                transposed = coord.isTransposed;\n                // 是否半径相同，转换成圆弧\n                equals = transposed ? pre[pre.length - 2] === cur[1] : pre[pre.length - 1] === cur[2];\n                if (equals) {\n                    tmp = tmp.concat(_convertPolarPath(pre, cur, coord));\n                }\n                else {\n                    // y 不相等，所以直接转换\n                    tmp.push(_convertArr(subPath, coord));\n                }\n                break;\n            case 'z':\n            default:\n                tmp.push(subPath);\n                break;\n        }\n    });\n    _filterFullCirleLine(tmp); // 过滤多余的直线\n    return tmp;\n}\n//# sourceMappingURL=path.js.map","import { each } from '@antv/util';\nimport { DIRECTION } from '../constant';\n/**\n * 用于包围盒计算。\n */\nvar BBox = /** @class */ (function () {\n    function BBox(x, y, width, height) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        if (width === void 0) { width = 0; }\n        if (height === void 0) { height = 0; }\n        this.x = x;\n        this.y = y;\n        this.height = height;\n        this.width = width;\n    }\n    BBox.fromRange = function (minX, minY, maxX, maxY) {\n        return new BBox(minX, minY, maxX - minX, maxY - minY);\n    };\n    BBox.fromObject = function (bbox) {\n        return new BBox(bbox.minX, bbox.minY, bbox.width, bbox.height);\n    };\n    Object.defineProperty(BBox.prototype, \"minX\", {\n        get: function () {\n            return this.x;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"maxX\", {\n        get: function () {\n            return this.x + this.width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"minY\", {\n        get: function () {\n            return this.y;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"maxY\", {\n        get: function () {\n            return this.y + this.height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"tl\", {\n        get: function () {\n            return { x: this.x, y: this.y };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"tr\", {\n        get: function () {\n            return { x: this.maxX, y: this.y };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"bl\", {\n        get: function () {\n            return { x: this.x, y: this.maxY };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"br\", {\n        get: function () {\n            return { x: this.maxX, y: this.maxY };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"top\", {\n        get: function () {\n            return {\n                x: this.x + this.width / 2,\n                y: this.minY,\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"right\", {\n        get: function () {\n            return {\n                x: this.maxX,\n                y: this.y + this.height / 2,\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"bottom\", {\n        get: function () {\n            return {\n                x: this.x + this.width / 2,\n                y: this.maxY,\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"left\", {\n        get: function () {\n            return {\n                x: this.minX,\n                y: this.y + this.height / 2,\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // end 计算属性\n    /**\n     * 包围盒是否相等\n     * @param {BBox} bbox 包围盒\n     * @returns      包围盒是否相等\n     */\n    BBox.prototype.isEqual = function (bbox) {\n        return this.x === bbox.x && this.y === bbox.y && this.width === bbox.width && this.height === bbox.height;\n    };\n    /**\n     * 是否包含了另一个包围盒\n     * @param child\n     */\n    BBox.prototype.contains = function (child) {\n        return child.minX >= this.minX && child.maxX <= this.maxX && child.minY >= this.minY && child.maxY <= this.maxY;\n    };\n    /**\n     * 克隆包围盒\n     * @returns 包围盒\n     */\n    BBox.prototype.clone = function () {\n        return new BBox(this.x, this.y, this.width, this.height);\n    };\n    /**\n     * 取并集\n     * @param subBBox\n     */\n    BBox.prototype.add = function () {\n        var subBBox = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            subBBox[_i] = arguments[_i];\n        }\n        var bbox = this.clone();\n        each(subBBox, function (b) {\n            bbox.x = Math.min(b.x, bbox.x);\n            bbox.y = Math.min(b.y, bbox.y);\n            bbox.width = Math.max(b.maxX, bbox.maxX) - bbox.x;\n            bbox.height = Math.max(b.maxY, bbox.maxY) - bbox.y;\n        });\n        return bbox;\n    };\n    /**\n     * 取交集\n     * @param subBBox\n     */\n    BBox.prototype.merge = function () {\n        var subBBox = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            subBBox[_i] = arguments[_i];\n        }\n        var bbox = this.clone();\n        each(subBBox, function (b) {\n            bbox.x = Math.max(b.x, bbox.x);\n            bbox.y = Math.max(b.y, bbox.y);\n            bbox.width = Math.min(b.maxX, bbox.maxX) - bbox.x;\n            bbox.height = Math.min(b.maxY, bbox.maxY) - bbox.y;\n        });\n        return bbox;\n    };\n    /**\n     * bbox 剪裁\n     * @param subBBox\n     * @param direction\n     */\n    BBox.prototype.cut = function (subBBox, direction) {\n        var width = subBBox.width;\n        var height = subBBox.height;\n        switch (direction) {\n            case DIRECTION.TOP:\n            case DIRECTION.TOP_LEFT:\n            case DIRECTION.TOP_RIGHT:\n                return BBox.fromRange(this.minX, this.minY + height, this.maxX, this.maxY);\n            case DIRECTION.RIGHT:\n            case DIRECTION.RIGHT_TOP:\n            case DIRECTION.RIGHT_BOTTOM:\n                return BBox.fromRange(this.minX, this.minY, this.maxX - width, this.maxY);\n            case DIRECTION.BOTTOM:\n            case DIRECTION.BOTTOM_LEFT:\n            case DIRECTION.BOTTOM_RIGHT:\n                return BBox.fromRange(this.minX, this.minY, this.maxX, this.maxY - height);\n            case DIRECTION.LEFT:\n            case DIRECTION.LEFT_TOP:\n            case DIRECTION.LEFT_BOTTOM:\n                return BBox.fromRange(this.minX + width, this.minY, this.maxX, this.maxY);\n            default:\n                // 其他情况不裁剪，原样返回\n                return this;\n        }\n    };\n    /**\n     * 收缩形成新的\n     * @param gap\n     */\n    BBox.prototype.shrink = function (gap) {\n        var top = gap[0], right = gap[1], bottom = gap[2], left = gap[3];\n        return new BBox(this.x + left, this.y + top, this.width - left - right, this.height - top - bottom);\n    };\n    /**\n     * 扩张形成新的\n     * @param gap\n     */\n    BBox.prototype.expand = function (gap) {\n        var top = gap[0], right = gap[1], bottom = gap[2], left = gap[3];\n        return new BBox(this.x - left, this.y - top, this.width + left + right, this.height + top + bottom);\n    };\n    /**\n     * get the gap of two bbox, if not exceed, then 0\n     * @param bbox\n     * @returns [top, right, bottom, left]\n     */\n    BBox.prototype.exceed = function (bbox) {\n        return [\n            Math.max(-this.minY + bbox.minY, 0),\n            Math.max(this.maxX - bbox.maxX, 0),\n            Math.max(this.maxY - bbox.maxY, 0),\n            Math.max(-this.minX + bbox.minX, 0),\n        ];\n    };\n    /**\n     * 是否碰撞\n     * @param bbox\n     */\n    BBox.prototype.collide = function (bbox) {\n        return this.minX < bbox.maxX && this.maxX > bbox.minX &&\n            this.minY < bbox.maxY && this.maxY > bbox.minY;\n    };\n    /**\n     * 获取包围盒大小\n     * @returns 包围盒大小\n     */\n    BBox.prototype.size = function () {\n        return this.width * this.height;\n    };\n    /**\n     * 点是否在 bbox 中\n     * @param p\n     */\n    BBox.prototype.isPointIn = function (p) {\n        return p.x >= this.minX && p.x <= this.maxX && p.y >= this.minY && p.y <= this.maxY;\n    };\n    return BBox;\n}());\nexport { BBox };\n/**\n * 从一个 bbox 的 region 获取 bbox\n * @param bbox\n * @param region\n */\nexport var getRegionBBox = function (bbox, region) {\n    var start = region.start, end = region.end;\n    return new BBox(bbox.x + bbox.width * start.x, bbox.y + bbox.height * start.y, bbox.width * Math.abs(end.x - start.x), bbox.height * Math.abs(end.y - start.y));\n};\n/**\n * 将 bbox 转换成 points\n * @param bbox\n */\nexport function toPoints(bbox) {\n    return [\n        [bbox.minX, bbox.minY],\n        [bbox.maxX, bbox.minY],\n        [bbox.maxX, bbox.maxY],\n        [bbox.minX, bbox.maxY],\n    ];\n}\n//# sourceMappingURL=bbox.js.map","import { each, isArray } from '@antv/util';\nimport { catmullRom2bezier, getLinePath } from '../../geometry/shape/util/path';\nimport { toPoints } from '../../util/bbox';\nimport isPolygonsIntersect from '@antv/path-util/lib/is-polygons-intersect';\nfunction getMaskBBox(context, tolerance) {\n    var event = context.event;\n    var maskShape = event.target;\n    var maskBBox = maskShape.getCanvasBBox();\n    // 如果 bbox 过小则不返回\n    if (!(maskBBox.width >= tolerance || maskBBox.height >= tolerance)) {\n        return null;\n    }\n    return maskBBox;\n}\nfunction getMaskPath(context, tolerance) {\n    var event = context.event;\n    var maskShape = event.target;\n    var maskBBox = maskShape.getCanvasBBox();\n    // 如果 bbox 过小则不返回\n    if (!(maskBBox.width >= tolerance || maskBBox.height >= tolerance)) {\n        return null;\n    }\n    return maskShape.attr('path');\n}\n/**\n * 获取当前事件相关的图表元素\n * @param context 交互的上下文\n * @ignore\n */\nexport function getCurrentElement(context) {\n    var event = context.event;\n    var element;\n    var target = event.target;\n    if (target) {\n        element = target.get('element');\n    }\n    return element;\n}\n/**\n * 获取委托对象\n * @param context 上下文\n * @ignore\n */\nexport function getDelegationObject(context) {\n    var event = context.event;\n    var target = event.target;\n    var delegateObject;\n    if (target) {\n        delegateObject = target.get('delegateObject');\n    }\n    return delegateObject;\n}\nexport function isElementChange(context) {\n    var event = context.event.gEvent;\n    // 在同一个 element 内部移动，label 和 shape 之间\n    if (event && event.fromShape && event.toShape && event.fromShape.get('element') === event.toShape.get('element')) {\n        return false;\n    }\n    return true;\n}\n/**\n * 是否是列表组件\n * @param delegateObject 委托对象\n * @ignore\n */\nexport function isList(delegateObject) {\n    return delegateObject && delegateObject.component && delegateObject.component.isList();\n}\n/**\n * 是否是滑块组件\n * @param delegateObject 委托对象\n * @ignore\n */\nexport function isSlider(delegateObject) {\n    return delegateObject && delegateObject.component && delegateObject.component.isSlider();\n}\n/**\n * 是否由 mask 触发\n * @param context 上下文\n * @ignore\n */\nexport function isMask(context) {\n    var event = context.event;\n    var target = event.target;\n    return target && target.get('name') === 'mask';\n}\n/**\n * 获取被遮挡的 elements\n * @param context 上下文\n * @ignore\n */\nexport function getMaskedElements(context, tolerance) {\n    var target = context.event.target;\n    if (target.get('type') === 'path') {\n        var maskPath = getMaskPath(context, tolerance);\n        if (!maskPath) {\n            return;\n        }\n        return getElementsByPath(context.view, maskPath);\n    }\n    var maskBBox = getMaskBBox(context, tolerance);\n    // 如果 bbox 过小则不返回\n    if (!maskBBox) {\n        return null;\n    }\n    return getIntersectElements(context.view, maskBBox);\n}\n/**\n * @ignore\n */\nexport function getSiblingMaskElements(context, sibling, tolerance) {\n    var maskBBox = getMaskBBox(context, tolerance);\n    // 如果 bbox 过小则不返回\n    if (!maskBBox) {\n        return null;\n    }\n    var view = context.view;\n    var start = getSiblingPoint(view, sibling, { x: maskBBox.x, y: maskBBox.y });\n    var end = getSiblingPoint(view, sibling, { x: maskBBox.maxX, y: maskBBox.maxY });\n    var box = {\n        minX: start.x,\n        minY: start.y,\n        maxX: end.x,\n        maxY: end.y,\n    };\n    return getIntersectElements(sibling, box);\n}\n/**\n * 获取所有的图表元素\n * @param view View/Chart\n * @ignore\n */\nexport function getElements(view) {\n    var geometries = view.geometries;\n    var rst = [];\n    each(geometries, function (geom) {\n        var elements = geom.elements;\n        rst = rst.concat(elements);\n    });\n    if (view.views && view.views.length) {\n        each(view.views, function (subView) {\n            rst = rst.concat(getElements(subView));\n        });\n    }\n    return rst;\n}\n/**\n * 获取所有的图表元素\n * @param view View/Chart\n * @param field 字段名\n * @param value 字段值\n * @ignore\n */\nexport function getElementsByField(view, field, value) {\n    var elements = getElements(view);\n    return elements.filter(function (el) {\n        return getElementValue(el, field) === value;\n    });\n}\n/**\n * 根据状态名获取图表元素\n * @param view View/Chart\n * @param stateName 状态名\n * @ignore\n */\nexport function getElementsByState(view, stateName) {\n    var geometries = view.geometries;\n    var rst = [];\n    each(geometries, function (geom) {\n        var elements = geom.getElementsBy(function (el) { return el.hasState(stateName); });\n        rst = rst.concat(elements);\n    });\n    return rst;\n}\n/**\n * 获取图表元素对应字段的值\n * @param element 图表元素\n * @param field 字段名\n * @ignore\n */\nexport function getElementValue(element, field) {\n    var model = element.getModel();\n    var record = model.data;\n    var value;\n    if (isArray(record)) {\n        value = record[0][field];\n    }\n    else {\n        value = record[field];\n    }\n    return value;\n}\n/**\n * 两个包围盒是否相交\n * @param box1 包围盒1\n * @param box2 包围盒2\n * @ignore\n */\nexport function intersectRect(box1, box2) {\n    return !(box2.minX > box1.maxX || box2.maxX < box1.minX || box2.minY > box1.maxY || box2.maxY < box1.minY);\n}\n/**\n * 获取包围盒内的图表元素\n * @param view View/Chart\n * @param box 包围盒\n * @ignore\n */\nexport function getIntersectElements(view, box) {\n    var elements = getElements(view);\n    var rst = [];\n    each(elements, function (el) {\n        var shape = el.shape;\n        var shapeBBox = shape.getCanvasBBox();\n        if (intersectRect(box, shapeBBox)) {\n            rst.push(el);\n        }\n    });\n    return rst;\n}\nfunction pathToPoints(path) {\n    var points = [];\n    each(path, function (seg) {\n        var command = seg[0];\n        if (command !== 'A') {\n            for (var i = 1; i < seg.length; i = i + 2) {\n                points.push([seg[i], seg[i + 1]]);\n            }\n        }\n        else {\n            var length_1 = seg.length;\n            points.push([seg[length_1 - 2], seg[length_1 - 1]]);\n        }\n    });\n    return points;\n}\n/**\n * 获取包围盒内的图表元素\n * @param view View/Chart\n * @param path 路径\n * @ignore\n */\nexport function getElementsByPath(view, path) {\n    var elements = getElements(view);\n    var points = pathToPoints(path);\n    var rst = elements.filter(function (el) {\n        var shape = el.shape;\n        var shapePoints;\n        if (shape.get('type') === 'path') {\n            shapePoints = pathToPoints(shape.attr('path'));\n        }\n        else {\n            var shapeBBox = shape.getCanvasBBox();\n            shapePoints = toPoints(shapeBBox);\n        }\n        return isPolygonsIntersect(points, shapePoints);\n    });\n    return rst;\n}\n/**\n * 获取当前 View 的所有组件\n * @param view View/Chart\n * @ignore\n */\nexport function getComponents(view) {\n    return view.getComponents().map(function (co) { return co.component; });\n}\n/** @ignore */\nexport function distance(p1, p2) {\n    var dx = p2.x - p1.x;\n    var dy = p2.y - p1.y;\n    return Math.sqrt(dx * dx + dy * dy);\n}\n/** @ignore */\nexport function getSpline(points, z) {\n    if (points.length <= 2) {\n        return getLinePath(points, false);\n    }\n    var first = points[0];\n    var arr = [];\n    each(points, function (point) {\n        arr.push(point.x);\n        arr.push(point.y);\n    });\n    var path = catmullRom2bezier(arr, z, null);\n    path.unshift(['M', first.x, first.y]);\n    return path;\n}\n/**\n * 检测点是否在包围盒内\n * @param box 包围盒\n * @param point 点\n * @ignore\n */\nexport function isInBox(box, point) {\n    return box.x <= point.x && box.maxX >= point.x && box.y <= point.y && box.maxY > point.y;\n}\n/**\n * 获取同 view 同一级的 views\n * @param view 当前 view\n * @returns 同一级的 views\n * @ignore\n */\nexport function getSilbings(view) {\n    var parent = view.parent;\n    var siblings = null;\n    if (parent) {\n        siblings = parent.views.filter(function (sub) { return sub !== view; });\n    }\n    return siblings;\n}\nfunction point2Normalize(view, point) {\n    var coord = view.getCoordinate();\n    return coord.invert(point);\n}\n/**\n * 将 view 上的一点转换成另一个 view 的点\n * @param view 当前的 view\n * @param sibling 同一层级的 view\n * @param point 指定点\n * @ignore\n */\nexport function getSiblingPoint(view, sibling, point) {\n    var normalPoint = point2Normalize(view, point);\n    return sibling.getCoordinate().convert(normalPoint);\n}\n/**\n * 是否在记录中，临时因为所有的 view 中的数据不是引用，而使用的方法\n * 不同 view 上对数据的引用不相等，导致无法直接用 includes\n * 假设 x, y 值相等时是同一条数据，这个假设不完全正确，而改成 isEqual 则成本太高\n * 后面改成同一个引用时可以修改回来\n * @param records\n * @param record\n * @param xFiled\n * @param yField\n * @returns\n * @ignore\n */\nexport function isInRecords(records, record, xFiled, yField) {\n    var isIn = false;\n    each(records, function (r) {\n        if (r[xFiled] === record[xFiled] && r[yField] === record[yField]) {\n            isIn = true;\n            return false;\n        }\n    });\n    return isIn;\n}\n// 级联获取 field 对应的 scale，如果 view 上没有，遍历子 view\nexport function getScaleByField(view, field) {\n    var scale = view.getScaleByField(field);\n    if (!scale && view.views) {\n        each(view.views, function (subView) {\n            scale = getScaleByField(subView, field);\n            if (scale) {\n                return false; // 终止循环\n            }\n        });\n    }\n    return scale;\n}\n//# sourceMappingURL=util.js.map","import { each, get } from '@antv/util';\nimport { getComponents, isInBox } from './action/util';\n/**\n * 交互的上下文\n */\nvar Context = /** @class */ (function () {\n    function Context(view) {\n        /** 当前所有的 Action */\n        this.actions = [];\n        /** 当前事件对象 */\n        this.event = null;\n        this.cacheMap = {};\n        this.view = view;\n    }\n    /**\n     * 缓存信息\n     * @param params 缓存的字段\n     *  - 如果一个字段则获取缓存\n     *  - 两个字段则设置缓存\n     */\n    Context.prototype.cache = function () {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        if (params.length === 1) {\n            return this.cacheMap[params[0]];\n        }\n        else if (params.length === 2) {\n            this.cacheMap[params[0]] = params[1];\n        }\n    };\n    /**\n     * 获取 Action\n     * @param name Action 的名称\n     */\n    Context.prototype.getAction = function (name) {\n        return this.actions.find(function (action) { return action.name === name; });\n    };\n    /**\n     * 获取 Action\n     * @param action Action 对象\n     */\n    Context.prototype.addAction = function (action) {\n        this.actions.push(action);\n    };\n    /**\n     * 移除 Action\n     * @param action Action 对象\n     */\n    Context.prototype.removeAction = function (action) {\n        var actions = this.actions;\n        var index = this.actions.indexOf(action);\n        if (index >= 0) {\n            actions.splice(index, 1);\n        }\n    };\n    /**\n     * 获取当前的点\n     */\n    Context.prototype.getCurrentPoint = function () {\n        var event = this.event;\n        if (event) {\n            if (event.target instanceof HTMLElement) {\n                var canvas = this.view.getCanvas();\n                var point = canvas.getPointByClient(event.clientX, event.clientY);\n                return point;\n            }\n            else {\n                return {\n                    x: event.x,\n                    y: event.y,\n                };\n            }\n        }\n        return null;\n    };\n    /**\n     * 获取当前 shape\n     * @returns current shape\n     */\n    Context.prototype.getCurrentShape = function () {\n        return get(this.event, ['gEvent', 'shape']);\n    };\n    /**\n     * 当前的触发是否在 View 内\n     */\n    Context.prototype.isInPlot = function () {\n        var point = this.getCurrentPoint();\n        if (point) {\n            return this.view.isPointInPlot(point);\n        }\n        return false;\n    };\n    /**\n     * 是否在指定的图形内\n     * @param name shape 的 name\n     */\n    Context.prototype.isInShape = function (name) {\n        var shape = this.getCurrentShape(); // 不再考虑在 shape 的 parent 内的情况\n        if (shape) {\n            return shape.get('name') === name;\n        }\n        return false;\n    };\n    /**\n     * 当前的触发是组件内部\n     * @param name 组件名，可以为空\n     */\n    Context.prototype.isInComponent = function (name) {\n        var components = getComponents(this.view);\n        var point = this.getCurrentPoint();\n        if (point) {\n            return !!components.find(function (component) {\n                var bbox = component.getBBox();\n                if (name) {\n                    return component.get('name') === name && isInBox(bbox, point);\n                }\n                else {\n                    return isInBox(bbox, point);\n                }\n            });\n        }\n        return false;\n    };\n    /**\n     * 销毁\n     */\n    Context.prototype.destroy = function () {\n        this.view = null;\n        this.event = null;\n        // 先销毁 action 再清空，一边遍历，一边删除，所以数组需要更新引用\n        each(this.actions.slice(), function (action) {\n            action.destroy();\n        });\n        this.actions = null;\n        this.cacheMap = null;\n    };\n    return Context;\n}());\nexport default Context;\n//# sourceMappingURL=context.js.map","/**\n * 交互的基类。\n */\nvar Interaction = /** @class */ (function () {\n    function Interaction(view, cfg) {\n        this.view = view;\n        this.cfg = cfg;\n    }\n    /**\n     * 初始化。\n     */\n    Interaction.prototype.init = function () {\n        this.initEvents();\n    };\n    /**\n     * 绑定事件\n     */\n    Interaction.prototype.initEvents = function () { };\n    /**\n     * 销毁事件\n     */\n    Interaction.prototype.clearEvents = function () { };\n    /**\n     * 销毁。\n     */\n    Interaction.prototype.destroy = function () {\n        this.clearEvents();\n    };\n    return Interaction;\n}());\nexport default Interaction;\n//# sourceMappingURL=interaction.js.map","import { __extends } from \"tslib\";\nimport { each, isArray, isFunction, isString, debounce, throttle } from '@antv/util';\nimport { createAction, createCallbackAction } from './action/register';\nimport InteractionContext from './context';\nimport Interaction from './interaction';\n// 将字符串转换成 action\nfunction parseAction(actionStr, context) {\n    var arr = actionStr.split(':');\n    var actionName = arr[0];\n    // 如果已经初始化过 action ，则直接引用之前的 action\n    var action = context.getAction(actionName) || createAction(actionName, context);\n    if (!action) {\n        throw new Error(\"There is no action named \" + actionName);\n    }\n    var methodName = arr[1];\n    return {\n        action: action,\n        methodName: methodName,\n    };\n}\n// 执行 Action\nfunction executeAction(actionObject) {\n    var action = actionObject.action, methodName = actionObject.methodName;\n    if (action[methodName]) {\n        action[methodName]();\n    }\n    else {\n        throw new Error(\"Action(\" + action.name + \") doesn't have a method called \" + methodName);\n    }\n}\nvar STEP_NAMES = {\n    START: 'start',\n    SHOW_ENABLE: 'showEnable',\n    END: 'end',\n    ROLLBACK: 'rollback',\n    PROCESSING: 'processing',\n};\n/**\n * 支持语法的交互类\n */\nvar GrammarInteraction = /** @class */ (function (_super) {\n    __extends(GrammarInteraction, _super);\n    function GrammarInteraction(view, steps) {\n        var _this = _super.call(this, view, steps) || this;\n        _this.callbackCaches = {};\n        // 某个触发和反馈在本环节是否执行或\n        _this.emitCaches = {};\n        _this.steps = steps;\n        return _this;\n    }\n    /**\n     * 初始化\n     */\n    GrammarInteraction.prototype.init = function () {\n        this.initContext();\n        _super.prototype.init.call(this);\n    };\n    /**\n     * 清理资源\n     */\n    GrammarInteraction.prototype.destroy = function () {\n        _super.prototype.destroy.call(this); // 先清理事件\n        this.steps = null;\n        if (this.context) {\n            this.context.destroy();\n            this.context = null;\n        }\n        this.callbackCaches = null;\n        this.view = null;\n    };\n    /**\n     * 绑定事件\n     */\n    GrammarInteraction.prototype.initEvents = function () {\n        var _this = this;\n        each(this.steps, function (stepArr, stepName) {\n            each(stepArr, function (step) {\n                var callback = _this.getActionCallback(stepName, step);\n                if (callback) {\n                    // 如果存在 callback，才绑定，有时候会出现无 callback 的情况\n                    _this.bindEvent(step.trigger, callback);\n                }\n            });\n        });\n    };\n    /**\n     * 清理绑定的事件\n     */\n    GrammarInteraction.prototype.clearEvents = function () {\n        var _this = this;\n        each(this.steps, function (stepArr, stepName) {\n            each(stepArr, function (step) {\n                var callback = _this.getActionCallback(stepName, step);\n                if (callback) {\n                    _this.offEvent(step.trigger, callback);\n                }\n            });\n        });\n    };\n    // 初始化上下文，并初始化 action\n    GrammarInteraction.prototype.initContext = function () {\n        var view = this.view;\n        var context = new InteractionContext(view);\n        this.context = context;\n        var steps = this.steps;\n        // 生成具体的 Action\n        each(steps, function (subSteps) {\n            each(subSteps, function (step) {\n                if (isFunction(step.action)) {\n                    // 如果传入回调函数，则直接生成 CallbackAction\n                    step.actionObject = {\n                        action: createCallbackAction(step.action, context),\n                        methodName: 'execute',\n                    };\n                }\n                else if (isString(step.action)) {\n                    // 如果是字符串\n                    step.actionObject = parseAction(step.action, context);\n                }\n                else if (isArray(step.action)) {\n                    // 如果是数组\n                    var actionArr = step.action;\n                    step.actionObject = [];\n                    each(actionArr, function (actionStr) {\n                        step.actionObject.push(parseAction(actionStr, context));\n                    });\n                }\n                // 如果 action 既不是字符串，也不是函数，则不会生成 actionObject\n            });\n        });\n    };\n    // 是否允许指定阶段名称执行\n    GrammarInteraction.prototype.isAllowStep = function (stepName) {\n        var currentStepName = this.currentStepName;\n        var steps = this.steps;\n        // 相同的阶段允许同时执行\n        if (currentStepName === stepName) {\n            return true;\n        }\n        if (stepName === STEP_NAMES.SHOW_ENABLE) {\n            // 示能在整个过程中都可用\n            return true;\n        }\n        if (stepName === STEP_NAMES.PROCESSING) {\n            // 只有当前是 start 时，才允许 processing\n            return currentStepName === STEP_NAMES.START;\n        }\n        if (stepName === STEP_NAMES.START) {\n            // 如果当前是 processing，则无法 start，必须等待 end 后才能执行\n            return currentStepName !== STEP_NAMES.PROCESSING;\n        }\n        if (stepName === STEP_NAMES.END) {\n            return currentStepName === STEP_NAMES.PROCESSING || currentStepName === STEP_NAMES.START;\n        }\n        if (stepName === STEP_NAMES.ROLLBACK) {\n            if (steps[STEP_NAMES.END]) {\n                // 如果定义了 end, 只有 end 时才允许回滚\n                return currentStepName === STEP_NAMES.END;\n            }\n            else if (currentStepName === STEP_NAMES.START) {\n                // 如果未定义 end, 则判断是否是开始\n                return true;\n            }\n        }\n        return false;\n    };\n    // 具体的指定阶段是否允许执行\n    GrammarInteraction.prototype.isAllowExecute = function (stepName, step) {\n        if (this.isAllowStep(stepName)) {\n            var key = this.getKey(stepName, step);\n            // 如果是在本环节内仅允许触发一次，同时已经触发过，则不允许再触发\n            if (step.once && this.emitCaches[key]) {\n                return false;\n            }\n            // 如果是允许的阶段，则验证 isEnable 方法\n            if (step.isEnable) {\n                return step.isEnable(this.context);\n            }\n            return true; // 如果没有 isEnable 则允许执行\n        }\n        return false;\n    };\n    GrammarInteraction.prototype.enterStep = function (stepName) {\n        this.currentStepName = stepName;\n        this.emitCaches = {}; // 清除所有本环节触发的缓存\n    };\n    // 执行完某个触发和反馈（子环节）\n    GrammarInteraction.prototype.afterExecute = function (stepName, step) {\n        // show enable 不计入正常的流程，其他情况则设置当前的 step\n        if (stepName !== STEP_NAMES.SHOW_ENABLE && this.currentStepName !== stepName) {\n            this.enterStep(stepName);\n        }\n        var key = this.getKey(stepName, step);\n        // 一旦执行，则缓存标记为，一直保持到跳出改环节\n        this.emitCaches[key] = true;\n    };\n    // 获取某个环节的唯一的键值\n    GrammarInteraction.prototype.getKey = function (stepName, step) {\n        return stepName + step.trigger + step.action;\n    };\n    // 获取 step 的回调函数，如果已经生成，则直接返回，如果未生成，则创建\n    GrammarInteraction.prototype.getActionCallback = function (stepName, step) {\n        var _this = this;\n        var context = this.context;\n        var callbackCaches = this.callbackCaches;\n        var actionObject = step.actionObject;\n        if (step.action && actionObject) {\n            var key = this.getKey(stepName, step);\n            if (!callbackCaches[key]) {\n                // 动态生成执行的方法，执行对应 action 的名称\n                var actionCallback = function (event) {\n                    context.event = event; // 保证检测时的 event\n                    if (_this.isAllowExecute(stepName, step)) {\n                        // 如果是数组时，则依次执行\n                        if (isArray(actionObject)) {\n                            each(actionObject, function (obj) {\n                                context.event = event; // 可能触发新的事件，保证执行前的 context.event 是正确的\n                                executeAction(obj);\n                            });\n                        }\n                        else {\n                            context.event = event; // 保证执行前的 context.event 是正确的\n                            executeAction(actionObject);\n                        }\n                        _this.afterExecute(stepName, step);\n                        if (step.callback) {\n                            context.event = event; // 保证执行前的 context.event 是正确的\n                            step.callback(context);\n                        }\n                    }\n                    else {\n                        // 如果未通过验证，则事件不要绑定在上面\n                        context.event = null;\n                    }\n                };\n                // 如果设置了 debounce\n                if (step.debounce) {\n                    callbackCaches[key] = debounce(actionCallback, step.debounce.wait, step.debounce.immediate);\n                }\n                else if (step.throttle) {\n                    // 设置 throttle\n                    callbackCaches[key] = throttle(actionCallback, step.throttle.wait, {\n                        leading: step.throttle.leading,\n                        trailing: step.throttle.trailing,\n                    });\n                }\n                else {\n                    // 直接设置\n                    callbackCaches[key] = actionCallback;\n                }\n            }\n            return callbackCaches[key];\n        }\n        return null;\n    };\n    GrammarInteraction.prototype.bindEvent = function (eventName, callback) {\n        var nameArr = eventName.split(':');\n        if (nameArr[0] === 'window') {\n            window.addEventListener(nameArr[1], callback);\n        }\n        else if (nameArr[0] === 'document') {\n            document.addEventListener(nameArr[1], callback);\n        }\n        else {\n            this.view.on(eventName, callback);\n        }\n    };\n    GrammarInteraction.prototype.offEvent = function (eventName, callback) {\n        var nameArr = eventName.split(':');\n        if (nameArr[0] === 'window') {\n            window.removeEventListener(nameArr[1], callback);\n        }\n        else if (nameArr[0] === 'document') {\n            document.removeEventListener(nameArr[1], callback);\n        }\n        else {\n            this.view.off(eventName, callback);\n        }\n    };\n    return GrammarInteraction;\n}(Interaction));\nexport default GrammarInteraction;\n//# sourceMappingURL=grammar-interaction.js.map","import { clone, isPlainObject, lowerCase, mix } from '@antv/util';\nimport GrammarInteraction from './grammar-interaction';\nvar Interactions = {};\n/**\n * 根据交互行为名字获取对应的交互类\n * @param name 交互名字\n * @returns 交互类\n */\nexport function getInteraction(name) {\n    return Interactions[lowerCase(name)];\n}\n/**\n * 注册交互行为\n * @param name 交互行为名字\n * @param interaction 交互类\n */\nexport function registerInteraction(name, interaction) {\n    Interactions[lowerCase(name)] = interaction;\n}\n/**\n * 创建交互实例\n * @param name 交互名\n * @param view 交互应用的 View 实例\n * @param cfg 交互行为配置\n */\nexport function createInteraction(name, view, cfg) {\n    var interaciton = getInteraction(name);\n    if (!interaciton) {\n        return null;\n    }\n    if (isPlainObject(interaciton)) {\n        // 如果不 clone 则会多个 interaction 实例共享 step 的定义\n        var steps = mix(clone(interaciton), cfg);\n        return new GrammarInteraction(view, steps);\n    }\n    else {\n        var cls = interaciton;\n        return new cls(view, cfg);\n    }\n}\nexport { default as Interaction } from './interaction';\nexport { Action, registerAction, getActionClass } from './action';\n//# sourceMappingURL=index.js.map","import { __assign } from \"tslib\";\nimport * as TOOLTIP_CSS_CONST from '@antv/component/lib/tooltip/css-const';\nimport { ext } from '@antv/matrix-util';\nimport { deepMix } from '@antv/util';\nimport { getAngle } from '../util/graphics';\n/**\n * 根据主题样式表生成主题结构\n * @param styleSheet 主题样式表\n */\nexport function createThemeByStylesheet(styleSheet) {\n    var _a;\n    var shapeStyles = {\n        point: {\n            default: {\n                fill: styleSheet.pointFillColor,\n                r: styleSheet.pointSize,\n                stroke: styleSheet.pointBorderColor,\n                lineWidth: styleSheet.pointBorder,\n                fillOpacity: styleSheet.pointFillOpacity,\n            },\n            active: {\n                stroke: styleSheet.pointActiveBorderColor,\n                lineWidth: styleSheet.pointActiveBorder,\n            },\n            selected: {\n                stroke: styleSheet.pointSelectedBorderColor,\n                lineWidth: styleSheet.pointSelectedBorder,\n            },\n            inactive: {\n                fillOpacity: styleSheet.pointInactiveFillOpacity,\n                strokeOpacity: styleSheet.pointInactiveBorderOpacity,\n            },\n        },\n        hollowPoint: {\n            default: {\n                fill: styleSheet.hollowPointFillColor,\n                lineWidth: styleSheet.hollowPointBorder,\n                stroke: styleSheet.hollowPointBorderColor,\n                strokeOpacity: styleSheet.hollowPointBorderOpacity,\n                r: styleSheet.hollowPointSize,\n            },\n            active: {\n                stroke: styleSheet.hollowPointActiveBorderColor,\n                strokeOpacity: styleSheet.hollowPointActiveBorderOpacity,\n            },\n            selected: {\n                lineWidth: styleSheet.hollowPointSelectedBorder,\n                stroke: styleSheet.hollowPointSelectedBorderColor,\n                strokeOpacity: styleSheet.hollowPointSelectedBorderOpacity,\n            },\n            inactive: {\n                strokeOpacity: styleSheet.hollowPointInactiveBorderOpacity,\n            },\n        },\n        area: {\n            default: {\n                fill: styleSheet.areaFillColor,\n                fillOpacity: styleSheet.areaFillOpacity,\n                stroke: null,\n            },\n            active: {\n                fillOpacity: styleSheet.areaActiveFillOpacity,\n            },\n            selected: {\n                fillOpacity: styleSheet.areaSelectedFillOpacity,\n            },\n            inactive: {\n                fillOpacity: styleSheet.areaInactiveFillOpacity,\n            },\n        },\n        hollowArea: {\n            default: {\n                fill: null,\n                stroke: styleSheet.hollowAreaBorderColor,\n                lineWidth: styleSheet.hollowAreaBorder,\n                strokeOpacity: styleSheet.hollowAreaBorderOpacity,\n            },\n            active: {\n                fill: null,\n                lineWidth: styleSheet.hollowAreaActiveBorder,\n            },\n            selected: {\n                fill: null,\n                lineWidth: styleSheet.hollowAreaSelectedBorder,\n            },\n            inactive: {\n                strokeOpacity: styleSheet.hollowAreaInactiveBorderOpacity,\n            },\n        },\n        interval: {\n            default: {\n                fill: styleSheet.intervalFillColor,\n                fillOpacity: styleSheet.intervalFillOpacity,\n            },\n            active: {\n                stroke: styleSheet.intervalActiveBorderColor,\n                lineWidth: styleSheet.intervalActiveBorder,\n            },\n            selected: {\n                stroke: styleSheet.intervalSelectedBorderColor,\n                lineWidth: styleSheet.intervalSelectedBorder,\n            },\n            inactive: {\n                fillOpacity: styleSheet.intervalInactiveFillOpacity,\n                strokeOpacity: styleSheet.intervalInactiveBorderOpacity,\n            },\n        },\n        hollowInterval: {\n            default: {\n                fill: styleSheet.hollowIntervalFillColor,\n                stroke: styleSheet.hollowIntervalBorderColor,\n                lineWidth: styleSheet.hollowIntervalBorder,\n                strokeOpacity: styleSheet.hollowIntervalBorderOpacity,\n            },\n            active: {\n                stroke: styleSheet.hollowIntervalActiveBorderColor,\n                lineWidth: styleSheet.hollowIntervalActiveBorder,\n                strokeOpacity: styleSheet.hollowIntervalActiveBorderOpacity,\n            },\n            selected: {\n                stroke: styleSheet.hollowIntervalSelectedBorderColor,\n                lineWidth: styleSheet.hollowIntervalSelectedBorder,\n                strokeOpacity: styleSheet.hollowIntervalSelectedBorderOpacity,\n            },\n            inactive: {\n                stroke: styleSheet.hollowIntervalInactiveBorderColor,\n                lineWidth: styleSheet.hollowIntervalInactiveBorder,\n                strokeOpacity: styleSheet.hollowIntervalInactiveBorderOpacity,\n            },\n        },\n        line: {\n            default: {\n                stroke: styleSheet.lineBorderColor,\n                lineWidth: styleSheet.lineBorder,\n                strokeOpacity: styleSheet.lineBorderOpacity,\n                fill: null,\n                lineAppendWidth: 10,\n            },\n            active: {\n                lineWidth: styleSheet.lineActiveBorder,\n            },\n            selected: {\n                lineWidth: styleSheet.lineSelectedBorder,\n            },\n            inactive: {\n                strokeOpacity: styleSheet.lineInactiveBorderOpacity,\n            },\n        },\n    };\n    var axisStyles = {\n        title: {\n            autoRotate: true,\n            position: 'center',\n            spacing: styleSheet.axisTitleSpacing,\n            style: {\n                fill: styleSheet.axisTitleTextFillColor,\n                fontSize: styleSheet.axisTitleTextFontSize,\n                lineHeight: styleSheet.axisTitleTextLineHeight,\n                textBaseline: 'middle',\n                fontFamily: styleSheet.fontFamily,\n            },\n        },\n        label: {\n            autoRotate: true,\n            autoEllipsis: true,\n            autoHide: true,\n            offset: styleSheet.axisLabelOffset,\n            style: {\n                fill: styleSheet.axisLabelFillColor,\n                fontSize: styleSheet.axisLabelFontSize,\n                lineHeight: styleSheet.axisLabelLineHeight,\n                fontFamily: styleSheet.fontFamily,\n            },\n        },\n        line: {\n            style: {\n                lineWidth: styleSheet.axisLineBorder,\n                stroke: styleSheet.axisLineBorderColor,\n            },\n        },\n        tickLine: {\n            style: {\n                lineWidth: styleSheet.axisTickLineBorder,\n                stroke: styleSheet.axisTickLineBorderColor,\n            },\n            alignTick: true,\n            length: styleSheet.axisTickLineLength,\n        },\n        subTickLine: null,\n        animate: true,\n    };\n    var axisGridStyles = {\n        line: {\n            type: 'line',\n            style: {\n                stroke: styleSheet.axisGridBorderColor,\n                lineWidth: styleSheet.axisGridBorder,\n                lineDash: styleSheet.axisGridLineDash,\n            },\n        },\n        alignTick: true,\n        animate: true,\n    };\n    var legendStyles = {\n        title: null,\n        marker: {\n            symbol: 'circle',\n            spacing: styleSheet.legendMarkerSpacing,\n            style: {\n                r: styleSheet.legendCircleMarkerSize,\n                fill: styleSheet.legendMarkerColor,\n            },\n        },\n        itemName: {\n            spacing: 5,\n            style: {\n                fill: styleSheet.legendItemNameFillColor,\n                fontFamily: styleSheet.fontFamily,\n                fontSize: styleSheet.legendItemNameFontSize,\n                lineHeight: styleSheet.legendItemNameLineHeight,\n                fontWeight: styleSheet.legendItemNameFontWeight,\n                textAlign: 'start',\n                textBaseline: 'middle',\n            },\n        },\n        flipPage: true,\n        animate: false,\n        maxItemWidth: 200,\n        itemSpacing: styleSheet.legendItemSpacing,\n        itemMarginBottom: styleSheet.legendItemMarginBottom,\n        padding: styleSheet.legendPadding,\n    };\n    return {\n        background: styleSheet.backgroundColor,\n        defaultColor: styleSheet.brandColor,\n        padding: 'auto',\n        fontFamily: styleSheet.fontFamily,\n        /** 一般柱状图宽度占比 */\n        columnWidthRatio: 1 / 2,\n        /** 柱状图最大宽度 */\n        maxColumnWidth: null,\n        /** 柱状图最小宽度 */\n        minColumnWidth: null,\n        /** 玫瑰图占比 */\n        roseWidthRatio: 0.9999999,\n        /** 多层饼图/环图占比 */\n        multiplePieWidthRatio: 1 / 1.3,\n        colors10: styleSheet.paletteQualitative10,\n        colors20: styleSheet.paletteQualitative20,\n        shapes: {\n            point: [\n                'hollow-circle',\n                'hollow-square',\n                'hollow-bowtie',\n                'hollow-diamond',\n                'hollow-hexagon',\n                'hollow-triangle',\n                'hollow-triangle-down',\n                'circle',\n                'square',\n                'bowtie',\n                'diamond',\n                'hexagon',\n                'triangle',\n                'triangle-down',\n                'cross',\n                'tick',\n                'plus',\n                'hyphen',\n                'line',\n            ],\n            line: ['line', 'dash', 'dot', 'smooth'],\n            area: ['area', 'smooth', 'line', 'smooth-line'],\n            interval: ['rect', 'hollow-rect', 'line', 'tick'],\n        },\n        sizes: [1, 10],\n        geometries: {\n            interval: {\n                rect: {\n                    default: {\n                        style: shapeStyles.interval.default,\n                    },\n                    active: {\n                        style: shapeStyles.interval.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.interval.inactive,\n                    },\n                    selected: {\n                        style: function (element) {\n                            var coordinate = element.geometry.coordinate;\n                            if (coordinate.isPolar && coordinate.isTransposed) {\n                                var _a = getAngle(element.getModel(), coordinate), startAngle = _a.startAngle, endAngle = _a.endAngle;\n                                var middleAngle = (startAngle + endAngle) / 2;\n                                var r = 7.5;\n                                var x = r * Math.cos(middleAngle);\n                                var y = r * Math.sin(middleAngle);\n                                return {\n                                    matrix: ext.transform(null, [['t', x, y]]),\n                                };\n                            }\n                            return shapeStyles.interval.selected;\n                        },\n                    },\n                },\n                'hollow-rect': {\n                    default: {\n                        style: shapeStyles.hollowInterval.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowInterval.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowInterval.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowInterval.selected,\n                    },\n                },\n                line: {\n                    default: {\n                        style: shapeStyles.hollowInterval.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowInterval.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowInterval.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowInterval.selected,\n                    },\n                },\n                tick: {\n                    default: {\n                        style: shapeStyles.hollowInterval.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowInterval.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowInterval.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowInterval.selected,\n                    },\n                },\n                funnel: {\n                    default: {\n                        style: shapeStyles.interval.default,\n                    },\n                    active: {\n                        style: shapeStyles.interval.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.interval.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.interval.selected,\n                    },\n                },\n                pyramid: {\n                    default: {\n                        style: shapeStyles.interval.default,\n                    },\n                    active: {\n                        style: shapeStyles.interval.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.interval.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.interval.selected,\n                    },\n                },\n            },\n            line: {\n                line: {\n                    default: {\n                        style: shapeStyles.line.default,\n                    },\n                    active: {\n                        style: shapeStyles.line.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.line.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.line.selected,\n                    },\n                },\n                dot: {\n                    default: {\n                        style: __assign(__assign({}, shapeStyles.line.default), { lineDash: [1, 1] }),\n                    },\n                    active: {\n                        style: __assign(__assign({}, shapeStyles.line.active), { lineDash: [1, 1] }),\n                    },\n                    inactive: {\n                        style: __assign(__assign({}, shapeStyles.line.inactive), { lineDash: [1, 1] }),\n                    },\n                    selected: {\n                        style: __assign(__assign({}, shapeStyles.line.selected), { lineDash: [1, 1] }),\n                    },\n                },\n                dash: {\n                    default: {\n                        style: __assign(__assign({}, shapeStyles.line.default), { lineDash: [5.5, 1] }),\n                    },\n                    active: {\n                        style: __assign(__assign({}, shapeStyles.line.active), { lineDash: [5.5, 1] }),\n                    },\n                    inactive: {\n                        style: __assign(__assign({}, shapeStyles.line.inactive), { lineDash: [5.5, 1] }),\n                    },\n                    selected: {\n                        style: __assign(__assign({}, shapeStyles.line.selected), { lineDash: [5.5, 1] }),\n                    },\n                },\n                smooth: {\n                    default: {\n                        style: shapeStyles.line.default,\n                    },\n                    active: {\n                        style: shapeStyles.line.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.line.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.line.selected,\n                    },\n                },\n                hv: {\n                    default: {\n                        style: shapeStyles.line.default,\n                    },\n                    active: {\n                        style: shapeStyles.line.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.line.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.line.selected,\n                    },\n                },\n                vh: {\n                    default: {\n                        style: shapeStyles.line.default,\n                    },\n                    active: {\n                        style: shapeStyles.line.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.line.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.line.selected,\n                    },\n                },\n                hvh: {\n                    default: {\n                        style: shapeStyles.line.default,\n                    },\n                    active: {\n                        style: shapeStyles.line.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.line.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.line.selected,\n                    },\n                },\n                vhv: {\n                    default: {\n                        style: shapeStyles.line.default,\n                    },\n                    active: {\n                        style: shapeStyles.line.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.line.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.line.selected,\n                    },\n                },\n            },\n            polygon: {\n                polygon: {\n                    default: {\n                        style: shapeStyles.interval.default,\n                    },\n                    active: {\n                        style: shapeStyles.interval.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.interval.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.interval.selected,\n                    },\n                },\n            },\n            point: {\n                circle: {\n                    default: {\n                        style: shapeStyles.point.default,\n                    },\n                    active: {\n                        style: shapeStyles.point.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.point.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.point.selected,\n                    },\n                },\n                square: {\n                    default: {\n                        style: shapeStyles.point.default,\n                    },\n                    active: {\n                        style: shapeStyles.point.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.point.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.point.selected,\n                    },\n                },\n                bowtie: {\n                    default: {\n                        style: shapeStyles.point.default,\n                    },\n                    active: {\n                        style: shapeStyles.point.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.point.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.point.selected,\n                    },\n                },\n                diamond: {\n                    default: {\n                        style: shapeStyles.point.default,\n                    },\n                    active: {\n                        style: shapeStyles.point.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.point.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.point.selected,\n                    },\n                },\n                hexagon: {\n                    default: {\n                        style: shapeStyles.point.default,\n                    },\n                    active: {\n                        style: shapeStyles.point.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.point.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.point.selected,\n                    },\n                },\n                triangle: {\n                    default: {\n                        style: shapeStyles.point.default,\n                    },\n                    active: {\n                        style: shapeStyles.point.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.point.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.point.selected,\n                    },\n                },\n                'triangle-down': {\n                    default: {\n                        style: shapeStyles.point.default,\n                    },\n                    active: {\n                        style: shapeStyles.point.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.point.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.point.selected,\n                    },\n                },\n                'hollow-circle': {\n                    default: {\n                        style: shapeStyles.hollowPoint.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowPoint.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowPoint.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowPoint.selected,\n                    },\n                },\n                'hollow-square': {\n                    default: {\n                        style: shapeStyles.hollowPoint.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowPoint.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowPoint.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowPoint.selected,\n                    },\n                },\n                'hollow-bowtie': {\n                    default: {\n                        style: shapeStyles.hollowPoint.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowPoint.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowPoint.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowPoint.selected,\n                    },\n                },\n                'hollow-diamond': {\n                    default: {\n                        style: shapeStyles.hollowPoint.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowPoint.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowPoint.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowPoint.selected,\n                    },\n                },\n                'hollow-hexagon': {\n                    default: {\n                        style: shapeStyles.hollowPoint.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowPoint.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowPoint.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowPoint.selected,\n                    },\n                },\n                'hollow-triangle': {\n                    default: {\n                        style: shapeStyles.hollowPoint.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowPoint.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowPoint.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowPoint.selected,\n                    },\n                },\n                'hollow-triangle-down': {\n                    default: {\n                        style: shapeStyles.hollowPoint.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowPoint.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowPoint.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowPoint.selected,\n                    },\n                },\n                cross: {\n                    default: {\n                        style: shapeStyles.hollowPoint.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowPoint.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowPoint.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowPoint.selected,\n                    },\n                },\n                tick: {\n                    default: {\n                        style: shapeStyles.hollowPoint.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowPoint.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowPoint.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowPoint.selected,\n                    },\n                },\n                plus: {\n                    default: {\n                        style: shapeStyles.hollowPoint.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowPoint.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowPoint.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowPoint.selected,\n                    },\n                },\n                hyphen: {\n                    default: {\n                        style: shapeStyles.hollowPoint.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowPoint.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowPoint.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowPoint.selected,\n                    },\n                },\n                line: {\n                    default: {\n                        style: shapeStyles.hollowPoint.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowPoint.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowPoint.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowPoint.selected,\n                    },\n                },\n            },\n            area: {\n                area: {\n                    default: {\n                        style: shapeStyles.area.default,\n                    },\n                    active: {\n                        style: shapeStyles.area.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.area.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.area.selected,\n                    },\n                },\n                smooth: {\n                    default: {\n                        style: shapeStyles.area.default,\n                    },\n                    active: {\n                        style: shapeStyles.area.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.area.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.area.selected,\n                    },\n                },\n                line: {\n                    default: {\n                        style: shapeStyles.hollowArea.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowArea.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowArea.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowArea.selected,\n                    },\n                },\n                'smooth-line': {\n                    default: {\n                        style: shapeStyles.hollowArea.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowArea.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowArea.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowArea.selected,\n                    },\n                },\n            },\n            schema: {\n                candle: {\n                    default: {\n                        style: shapeStyles.hollowInterval.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowInterval.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowInterval.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowInterval.selected,\n                    },\n                },\n                box: {\n                    default: {\n                        style: shapeStyles.hollowInterval.default,\n                    },\n                    active: {\n                        style: shapeStyles.hollowInterval.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.hollowInterval.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.hollowInterval.selected,\n                    },\n                },\n            },\n            edge: {\n                line: {\n                    default: {\n                        style: shapeStyles.line.default,\n                    },\n                    active: {\n                        style: shapeStyles.line.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.line.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.line.selected,\n                    },\n                },\n                vhv: {\n                    default: {\n                        style: shapeStyles.line.default,\n                    },\n                    active: {\n                        style: shapeStyles.line.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.line.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.line.selected,\n                    },\n                },\n                smooth: {\n                    default: {\n                        style: shapeStyles.line.default,\n                    },\n                    active: {\n                        style: shapeStyles.line.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.line.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.line.selected,\n                    },\n                },\n                arc: {\n                    default: {\n                        style: shapeStyles.line.default,\n                    },\n                    active: {\n                        style: shapeStyles.line.active,\n                    },\n                    inactive: {\n                        style: shapeStyles.line.inactive,\n                    },\n                    selected: {\n                        style: shapeStyles.line.selected,\n                    },\n                },\n            },\n        },\n        components: {\n            axis: {\n                common: axisStyles,\n                top: deepMix({}, axisStyles, {\n                    position: 'top',\n                    grid: null,\n                    title: null,\n                    verticalLimitLength: 1 / 2,\n                }),\n                bottom: deepMix({}, axisStyles, {\n                    position: 'bottom',\n                    grid: null,\n                    title: null,\n                    verticalLimitLength: 1 / 2,\n                }),\n                left: deepMix({}, axisStyles, {\n                    position: 'left',\n                    title: null,\n                    line: null,\n                    tickLine: null,\n                    grid: axisGridStyles,\n                    verticalLimitLength: 1 / 3,\n                }),\n                right: deepMix({}, axisStyles, {\n                    position: 'right',\n                    title: null,\n                    line: null,\n                    tickLine: null,\n                    grid: axisGridStyles,\n                    verticalLimitLength: 1 / 3,\n                }),\n                circle: deepMix({}, axisStyles, {\n                    title: null,\n                    grid: deepMix({}, axisGridStyles, { line: { type: 'line' } }),\n                }),\n                radius: deepMix({}, axisStyles, {\n                    title: null,\n                    grid: deepMix({}, axisGridStyles, { line: { type: 'circle' } }),\n                }),\n            },\n            legend: {\n                common: legendStyles,\n                right: deepMix({}, legendStyles, {\n                    layout: 'vertical',\n                }),\n                left: deepMix({}, legendStyles, {\n                    layout: 'vertical',\n                }),\n                top: deepMix({}, legendStyles, {\n                    layout: 'horizontal',\n                }),\n                bottom: deepMix({}, legendStyles, {\n                    layout: 'horizontal',\n                }),\n                continuous: {\n                    title: null,\n                    background: null,\n                    track: {},\n                    rail: {\n                        type: 'color',\n                        size: styleSheet.sliderRailHeight,\n                        defaultLength: styleSheet.sliderRailWidth,\n                        style: {\n                            fill: styleSheet.sliderRailFillColor,\n                            stroke: styleSheet.sliderRailBorderColor,\n                            lineWidth: styleSheet.sliderRailBorder,\n                        },\n                    },\n                    label: {\n                        align: 'rail',\n                        spacing: 4,\n                        formatter: null,\n                        style: {\n                            fill: styleSheet.sliderLabelTextFillColor,\n                            fontSize: styleSheet.sliderLabelTextFontSize,\n                            lineHeight: styleSheet.sliderLabelTextLineHeight,\n                            textBaseline: 'middle',\n                            fontFamily: styleSheet.fontFamily,\n                        },\n                    },\n                    handler: {\n                        size: styleSheet.sliderHandlerWidth,\n                        style: {\n                            fill: styleSheet.sliderHandlerFillColor,\n                            stroke: styleSheet.sliderHandlerBorderColor,\n                        },\n                    },\n                    slidable: true,\n                    padding: legendStyles.padding,\n                },\n            },\n            tooltip: {\n                showContent: true,\n                follow: true,\n                showCrosshairs: false,\n                showMarkers: true,\n                shared: false,\n                enterable: false,\n                position: 'auto',\n                marker: {\n                    symbol: 'circle',\n                    stroke: '#fff',\n                    shadowBlur: 10,\n                    shadowOffsetX: 0,\n                    shadowOffSetY: 0,\n                    shadowColor: 'rgba(0,0,0,0.09)',\n                    lineWidth: 2,\n                    r: 4,\n                },\n                crosshairs: {\n                    line: {\n                        style: {\n                            stroke: styleSheet.tooltipCrosshairsBorderColor,\n                            lineWidth: styleSheet.tooltipCrosshairsBorder,\n                        },\n                    },\n                    text: null,\n                    textBackground: {\n                        padding: 2,\n                        style: {\n                            fill: 'rgba(0, 0, 0, 0.25)',\n                            lineWidth: 0,\n                            stroke: null,\n                        },\n                    },\n                    follow: false,\n                },\n                // tooltip dom 样式\n                domStyles: (_a = {},\n                    _a[\"\" + TOOLTIP_CSS_CONST.CONTAINER_CLASS] = {\n                        position: 'absolute',\n                        visibility: 'hidden',\n                        zIndex: 8,\n                        transition: 'left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s',\n                        backgroundColor: styleSheet.tooltipContainerFillColor,\n                        opacity: styleSheet.tooltipContainerFillOpacity,\n                        boxShadow: styleSheet.tooltipContainerShadow,\n                        borderRadius: styleSheet.tooltipContainerBorderRadius + \"px\",\n                        color: styleSheet.tooltipTextFillColor,\n                        fontSize: styleSheet.tooltipTextFontSize + \"px\",\n                        fontFamily: styleSheet.fontFamily,\n                        lineHeight: styleSheet.tooltipTextLineHeight + \"px\",\n                        padding: '0 12px 0 12px',\n                    },\n                    _a[\"\" + TOOLTIP_CSS_CONST.TITLE_CLASS] = {\n                        marginBottom: '12px',\n                        marginTop: '12px',\n                    },\n                    _a[\"\" + TOOLTIP_CSS_CONST.LIST_CLASS] = {\n                        margin: 0,\n                        listStyleType: 'none',\n                        padding: 0,\n                    },\n                    _a[\"\" + TOOLTIP_CSS_CONST.LIST_ITEM_CLASS] = {\n                        listStyleType: 'none',\n                        padding: 0,\n                        marginBottom: '12px',\n                        marginTop: '12px',\n                        marginLeft: 0,\n                        marginRight: 0,\n                    },\n                    _a[\"\" + TOOLTIP_CSS_CONST.MARKER_CLASS] = {\n                        width: '8px',\n                        height: '8px',\n                        borderRadius: '50%',\n                        display: 'inline-block',\n                        marginRight: '8px',\n                    },\n                    _a[\"\" + TOOLTIP_CSS_CONST.VALUE_CLASS] = {\n                        display: 'inline-block',\n                        float: 'right',\n                        marginLeft: '30px',\n                    },\n                    _a),\n            },\n            annotation: {\n                arc: {\n                    style: {\n                        stroke: styleSheet.annotationArcBorderColor,\n                        lineWidth: styleSheet.annotationArcBorder,\n                    },\n                    animate: true,\n                },\n                line: {\n                    style: {\n                        stroke: styleSheet.annotationLineBorderColor,\n                        lineDash: styleSheet.annotationLineDash,\n                        lineWidth: styleSheet.annotationLineBorder,\n                    },\n                    text: {\n                        position: 'start',\n                        autoRotate: true,\n                        style: {\n                            fill: styleSheet.annotationTextFillColor,\n                            stroke: styleSheet.annotationTextBorderColor,\n                            lineWidth: styleSheet.annotationTextBorder,\n                            fontSize: styleSheet.annotationTextFontSize,\n                            textAlign: 'start',\n                            fontFamily: styleSheet.fontFamily,\n                            textBaseline: 'bottom',\n                        },\n                    },\n                    animate: true,\n                },\n                text: {\n                    style: {\n                        fill: styleSheet.annotationTextFillColor,\n                        stroke: styleSheet.annotationTextBorderColor,\n                        lineWidth: styleSheet.annotationTextBorder,\n                        fontSize: styleSheet.annotationTextFontSize,\n                        textBaseline: 'middle',\n                        textAlign: 'start',\n                        fontFamily: styleSheet.fontFamily,\n                    },\n                    animate: true,\n                },\n                region: {\n                    top: false,\n                    style: {\n                        lineWidth: styleSheet.annotationRegionBorder,\n                        stroke: styleSheet.annotationRegionBorderColor,\n                        fill: styleSheet.annotationRegionFillColor,\n                        fillOpacity: styleSheet.annotationRegionFillOpacity,\n                    },\n                    animate: true,\n                },\n                image: {\n                    top: false,\n                    animate: true,\n                },\n                dataMarker: {\n                    top: true,\n                    point: {\n                        style: {\n                            r: 3,\n                            stroke: styleSheet.brandColor,\n                            lineWidth: 2,\n                        },\n                    },\n                    line: {\n                        style: {\n                            stroke: styleSheet.annotationLineBorderColor,\n                            lineWidth: styleSheet.annotationLineBorder,\n                        },\n                        length: styleSheet.annotationDataMarkerLineLength,\n                    },\n                    text: {\n                        style: {\n                            textAlign: 'start',\n                            fill: styleSheet.annotationTextFillColor,\n                            stroke: styleSheet.annotationTextBorderColor,\n                            lineWidth: styleSheet.annotationTextBorder,\n                            fontSize: styleSheet.annotationTextFontSize,\n                            fontFamily: styleSheet.fontFamily,\n                        },\n                    },\n                    direction: 'upward',\n                    autoAdjust: true,\n                    animate: true,\n                },\n                dataRegion: {\n                    style: {\n                        region: {\n                            fill: styleSheet.annotationRegionFillColor,\n                            fillOpacity: styleSheet.annotationRegionFillOpacity,\n                        },\n                        text: {\n                            textAlign: 'center',\n                            textBaseline: 'bottom',\n                            fill: styleSheet.annotationTextFillColor,\n                            stroke: styleSheet.annotationTextBorderColor,\n                            lineWidth: styleSheet.annotationTextBorder,\n                            fontSize: styleSheet.annotationTextFontSize,\n                            fontFamily: styleSheet.fontFamily,\n                        },\n                    },\n                    animate: true,\n                },\n            },\n            slider: {\n                common: {\n                    padding: [8, 8, 8, 8],\n                },\n            },\n            scrollbar: {\n                common: {\n                    padding: [8, 8, 8, 8],\n                },\n            },\n        },\n        labels: {\n            offset: 12,\n            style: {\n                fill: styleSheet.labelFillColor,\n                fontSize: styleSheet.labelFontSize,\n                fontFamily: styleSheet.fontFamily,\n                stroke: styleSheet.labelBorderColor,\n                lineWidth: styleSheet.labelBorder,\n            },\n            fillColorDark: styleSheet.labelFillColorDark,\n            fillColorLight: styleSheet.labelFillColorLight,\n            autoRotate: true,\n        },\n        innerLabels: {\n            style: {\n                fill: styleSheet.innerLabelFillColor,\n                fontSize: styleSheet.innerLabelFontSize,\n                fontFamily: styleSheet.fontFamily,\n                stroke: styleSheet.innerLabelBorderColor,\n                lineWidth: styleSheet.innerLabelBorder,\n            },\n            autoRotate: true,\n        },\n        pieLabels: {\n            labelHeight: 14,\n            offset: 30,\n            labelLine: {\n                style: {\n                    lineWidth: styleSheet.labelLineBorder,\n                },\n            },\n            autoRotate: true,\n        },\n    };\n}\n//# sourceMappingURL=theme.js.map","var BLACK_COLORS = {\n    100: '#000',\n    95: '#0D0D0D',\n    85: '#262626',\n    65: '#595959',\n    45: '#8C8C8C',\n    25: '#BFBFBF',\n    15: '#D9D9D9',\n    6: '#F0F0F0',\n};\nvar WHITE_COLORS = {\n    100: '#FFFFFF',\n    95: '#F2F2F2',\n    85: '#D9D9D9',\n    65: '#A6A6A6',\n    45: '#737373',\n    25: '#404040',\n    15: '#262626',\n    6: '#0F0F0F',\n};\nvar QUALITATIVE_10 = [\n    '#5B8FF9',\n    '#5AD8A6',\n    '#5D7092',\n    '#F6BD16',\n    '#E86452',\n    '#6DC8EC',\n    '#945FB9',\n    '#FF9845',\n    '#1E9493',\n    '#FF99C3',\n];\nvar QUALITATIVE_20 = [\n    '#5B8FF9',\n    '#CDDDFD',\n    '#5AD8A6',\n    '#CDF3E4',\n    '#5D7092',\n    '#CED4DE',\n    '#F6BD16',\n    '#FCEBB9',\n    '#E86452',\n    '#F8D0CB',\n    '#6DC8EC',\n    '#D3EEF9',\n    '#945FB9',\n    '#DECFEA',\n    '#FF9845',\n    '#FFE0C7',\n    '#1E9493',\n    '#BBDEDE',\n    '#FF99C3',\n    '#FFE0ED',\n];\nexport var antvLight = {\n    /** 图表背景色 */\n    backgroundColor: 'transparent',\n    /** 主题色 */\n    brandColor: QUALITATIVE_10[0],\n    /** 分类色板 1，在数据量小于等于 10 时使用 */\n    paletteQualitative10: QUALITATIVE_10,\n    /** 分类色板 2，在数据量大于 10 时使用 */\n    paletteQualitative20: QUALITATIVE_20,\n    /** 语义色 */\n    paletteSemanticRed: '#F4664A',\n    /** 语义色 */\n    paletteSemanticGreen: '#30BF78',\n    /** 语义色 */\n    paletteSemanticYellow: '#FAAD14',\n    /** 字体 */\n    fontFamily: \"\\\"-apple-system\\\", \\\"Segoe UI\\\", Roboto, \\\"Helvetica Neue\\\", Arial,\\n  \\\"Noto Sans\\\", sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\",\\n  \\\"Noto Color Emoji\\\"\",\n    // -------------------- 坐标轴 --------------------\n    /** 坐标轴线颜色 */\n    axisLineBorderColor: BLACK_COLORS[25],\n    /** 坐标轴线粗细 */\n    axisLineBorder: 1,\n    /** 坐标轴线 lineDash 设置 */\n    axisLineDash: null,\n    /** 坐标轴标题颜色 */\n    axisTitleTextFillColor: BLACK_COLORS[65],\n    /** 坐标轴标题文本字体大小 */\n    axisTitleTextFontSize: 12,\n    /** 坐标轴标题文本行高 */\n    axisTitleTextLineHeight: 12,\n    /** 坐标轴标题文本字体粗细 */\n    axisTitleTextFontWeight: 'normal',\n    /** 坐标轴标题距离坐标轴文本的间距 */\n    axisTitleSpacing: 12,\n    /** 坐标轴刻度线颜色 */\n    axisTickLineBorderColor: BLACK_COLORS[25],\n    /** 坐标轴刻度线长度 */\n    axisTickLineLength: 4,\n    /** 坐标轴刻度线粗细 */\n    axisTickLineBorder: 1,\n    /** 坐标轴次刻度线颜色 */\n    axisSubTickLineBorderColor: BLACK_COLORS[15],\n    /** 坐标轴次刻度线长度 */\n    axisSubTickLineLength: 2,\n    /** 坐标轴次刻度线粗细 */\n    axisSubTickLineBorder: 1,\n    /** 坐标轴刻度文本颜色 */\n    axisLabelFillColor: BLACK_COLORS[45],\n    /** 坐标轴刻度文本字体大小 */\n    axisLabelFontSize: 12,\n    /** 坐标轴刻度文本行高 */\n    axisLabelLineHeight: 12,\n    /** 坐标轴刻度文本字体粗细 */\n    axisLabelFontWeight: 'normal',\n    /** 坐标轴刻度文本距离坐标轴线的间距 */\n    axisLabelOffset: 8,\n    /** 坐标轴网格线颜色 */\n    axisGridBorderColor: BLACK_COLORS[15],\n    /** 坐标轴网格线粗细 */\n    axisGridBorder: 1,\n    /** 坐标轴网格线虚线设置 */\n    axisGridLineDash: null,\n    // -------------------- 图例 --------------------\n    /** 图例标题颜色 */\n    legendTitleTextFillColor: BLACK_COLORS[45],\n    /** 图例标题文本字体大小 */\n    legendTitleTextFontSize: 12,\n    /** 图例标题文本行高 */\n    legendTitleTextLineHeight: 21,\n    /** 图例标题文本字体粗细 */\n    legendTitleTextFontWeight: 'normal',\n    /** 图例 marker 颜色 */\n    legendMarkerColor: QUALITATIVE_10[0],\n    /** 图例 marker 距离图例文本的间距 */\n    legendMarkerSpacing: 8,\n    /** 图例 marker 默认半径大小 */\n    legendMarkerSize: 4,\n    /** 图例 'circle' marker 半径 */\n    legendCircleMarkerSize: 4,\n    /** 图例 'square' marker 半径 */\n    legendSquareMarkerSize: 4,\n    /** 图例 'line' marker 半径 */\n    legendLineMarkerSize: 5,\n    /** 图例项文本颜色 */\n    legendItemNameFillColor: BLACK_COLORS[65],\n    /** 图例项文本字体大小 */\n    legendItemNameFontSize: 12,\n    /** 图例项文本行高 */\n    legendItemNameLineHeight: 12,\n    /** 图例项粗细 */\n    legendItemNameFontWeight: 'normal',\n    /** 图例项之间的水平间距 */\n    legendItemSpacing: 24,\n    /** 图例项垂直方向的间隔 */\n    legendItemMarginBottom: 12,\n    /** 图例与图表绘图区域的偏移距离  */\n    legendPadding: [8, 8, 8, 8],\n    /** 连续图例滑块填充色 */\n    sliderRailFillColor: BLACK_COLORS[15],\n    /** 连续图例滑块边框粗细 */\n    sliderRailBorder: 0,\n    /** 连续图例滑块边框颜色 */\n    sliderRailBorderColor: null,\n    /** 连续图例滑块宽度 */\n    sliderRailWidth: 100,\n    /** 连续图例滑块高度 */\n    sliderRailHeight: 12,\n    /** 连续图例文本颜色 */\n    sliderLabelTextFillColor: BLACK_COLORS[45],\n    /** 连续图例文本字体大小 */\n    sliderLabelTextFontSize: 12,\n    /** 连续图例文本行高 */\n    sliderLabelTextLineHeight: 12,\n    /** 连续图例文本字体粗细 */\n    sliderLabelTextFontWeight: 'normal',\n    /** 连续图例滑块颜色 */\n    sliderHandlerFillColor: BLACK_COLORS[6],\n    /** 连续图例滑块宽度 */\n    sliderHandlerWidth: 10,\n    /** 连续图例滑块高度 */\n    sliderHandlerHeight: 14,\n    /** 连续图例滑块边框粗细 */\n    sliderHandlerBorder: 1,\n    /** 连续图例滑块边框颜色 */\n    sliderHandlerBorderColor: BLACK_COLORS[25],\n    // -------------------- Annotation，图形标注 --------------------\n    /** arc 图形标注描边颜色 */\n    annotationArcBorderColor: BLACK_COLORS[15],\n    /** arc 图形标注粗细 */\n    annotationArcBorder: 1,\n    /** line 图形标注颜色 */\n    annotationLineBorderColor: BLACK_COLORS[25],\n    /** line 图形标注粗细 */\n    annotationLineBorder: 1,\n    /** lube 图形标注的虚线间隔 */\n    annotationLineDash: null,\n    /** text 图形标注文本颜色 */\n    annotationTextFillColor: BLACK_COLORS[65],\n    /** text 图形标注文本字体大小 */\n    annotationTextFontSize: 12,\n    /** text 图形标注文本行高 */\n    annotationTextLineHeight: 12,\n    /** text 图形标注文本字体粗细 */\n    annotationTextFontWeight: 'normal',\n    /** text 图形标注文本边框颜色 */\n    annotationTextBorderColor: null,\n    /** text 图形标注文本边框粗细 */\n    annotationTextBorder: 0,\n    /** region 图形标注填充颜色 */\n    annotationRegionFillColor: BLACK_COLORS[100],\n    /** region 图形标注填充颜色透明色 */\n    annotationRegionFillOpacity: 0.06,\n    /** region 图形标注描边粗细 */\n    annotationRegionBorder: 0,\n    /** region 图形标注描边颜色 */\n    annotationRegionBorderColor: null,\n    /** dataMarker 图形标注线的长度 */\n    annotationDataMarkerLineLength: 16,\n    // -------------------- Tooltip --------------------\n    /** tooltip crosshairs 辅助线颜色 */\n    tooltipCrosshairsBorderColor: BLACK_COLORS[25],\n    /** tooltip crosshairs 辅助线粗细 */\n    tooltipCrosshairsBorder: 1,\n    /** tooltip crosshairs 辅助线虚线间隔 */\n    tooltipCrosshairsLineDash: null,\n    /** tooltip 内容框背景色 */\n    tooltipContainerFillColor: 'rgb(255, 255, 255)',\n    tooltipContainerFillOpacity: 0.95,\n    /** tooltip 内容框阴影 */\n    tooltipContainerShadow: '0px 0px 10px #aeaeae',\n    /** tooltip 内容框圆角 */\n    tooltipContainerBorderRadius: 3,\n    /** tooltip 文本颜色 */\n    tooltipTextFillColor: BLACK_COLORS[65],\n    /** tooltip 文本字体大小 */\n    tooltipTextFontSize: 12,\n    /** tooltip 文本行高 */\n    tooltipTextLineHeight: 12,\n    /** tooltip 文本字体粗细 */\n    tooltipTextFontWeight: 'bold',\n    // -------------------- Geometry labels --------------------\n    /** Geometry label 文本颜色 */\n    labelFillColor: BLACK_COLORS[65],\n    labelFillColorDark: '#2c3542',\n    labelFillColorLight: '#ffffff',\n    /** Geometry label 文本字体大小 */\n    labelFontSize: 12,\n    /** Geometry label 文本行高 */\n    labelLineHeight: 12,\n    /** Geometry label 文本字体粗细 */\n    labelFontWeight: 'normal',\n    /** Geometry label 文本描边颜色 */\n    labelBorderColor: null,\n    /** Geometry label 文本描边粗细 */\n    labelBorder: 0,\n    /** Geometry innerLabel 文本颜色 */\n    innerLabelFillColor: WHITE_COLORS[100],\n    /** Geometry innerLabel 文本字体大小 */\n    innerLabelFontSize: 12,\n    /** Geometry innerLabel 文本行高 */\n    innerLabelLineHeight: 12,\n    /** Geometry innerLabel 文本字体粗细 */\n    innerLabelFontWeight: 'normal',\n    /** Geometry innerLabel 文本描边颜色 */\n    innerLabelBorderColor: null,\n    /** Geometry innerLabel 文本描边粗细 */\n    innerLabelBorder: 0,\n    /** Geometry label　文本连接线粗细 */\n    labelLineBorder: 1,\n    /** Geometry label 文本连接线颜色 */\n    labelLineBorderColor: BLACK_COLORS[25],\n    // -------------------- Geometry 图形样式--------------------\n    /** 点图填充颜色 */\n    pointFillColor: QUALITATIVE_10[0],\n    /** 点图填充颜色透明度 */\n    pointFillOpacity: 0.95,\n    /** 点图大小 */\n    pointSize: 4,\n    /** 点图描边粗细 */\n    pointBorder: 1,\n    /** 点图描边颜色 */\n    pointBorderColor: WHITE_COLORS[100],\n    /** 点图描边透明度 */\n    pointBorderOpacity: 1,\n    /** 点图 active 状态下描边颜色 */\n    pointActiveBorderColor: BLACK_COLORS[100],\n    /** 点图 selected 状态下描边粗细 */\n    pointSelectedBorder: 2,\n    /** 点图 selected 状态下描边颜色 */\n    pointSelectedBorderColor: BLACK_COLORS[100],\n    /** 点图 inactive 状态下填充颜色透明度 */\n    pointInactiveFillOpacity: 0.3,\n    /** 点图 inactive 状态下描边透明度 */\n    pointInactiveBorderOpacity: 0.3,\n    /** 空心点图大小 */\n    hollowPointSize: 4,\n    /** 空心点图描边粗细 */\n    hollowPointBorder: 1,\n    /** 空心点图描边颜色 */\n    hollowPointBorderColor: QUALITATIVE_10[0],\n    /** 空心点图描边透明度 */\n    hollowPointBorderOpacity: 0.95,\n    hollowPointFillColor: WHITE_COLORS[100],\n    /** 空心点图 active 状态下描边粗细 */\n    hollowPointActiveBorder: 1,\n    /** 空心点图 active 状态下描边颜色 */\n    hollowPointActiveBorderColor: BLACK_COLORS[100],\n    /** 空心点图 active 状态下描边透明度 */\n    hollowPointActiveBorderOpacity: 1,\n    /** 空心点图 selected 状态下描边粗细 */\n    hollowPointSelectedBorder: 2,\n    /** 空心点图 selected 状态下描边颜色 */\n    hollowPointSelectedBorderColor: BLACK_COLORS[100],\n    /** 空心点图 selected 状态下描边透明度 */\n    hollowPointSelectedBorderOpacity: 1,\n    /** 空心点图 inactive 状态下描边透明度 */\n    hollowPointInactiveBorderOpacity: 0.3,\n    /** 线图粗细 */\n    lineBorder: 2,\n    /** 线图颜色 */\n    lineBorderColor: QUALITATIVE_10[0],\n    /** 线图透明度 */\n    lineBorderOpacity: 1,\n    /** 线图 Active 状态下粗细 */\n    lineActiveBorder: 3,\n    /** 线图 selected 状态下粗细 */\n    lineSelectedBorder: 3,\n    /** 线图 inactive 状态下透明度 */\n    lineInactiveBorderOpacity: 0.3,\n    /** area 填充颜色 */\n    areaFillColor: QUALITATIVE_10[0],\n    /** area 填充透明度 */\n    areaFillOpacity: 0.25,\n    /** area 在 active 状态下的填充透明度 */\n    areaActiveFillColor: QUALITATIVE_10[0],\n    areaActiveFillOpacity: 0.5,\n    /** area 在 selected 状态下的填充透明度 */\n    areaSelectedFillColor: QUALITATIVE_10[0],\n    areaSelectedFillOpacity: 0.5,\n    /** area inactive 状态下填充透明度 */\n    areaInactiveFillOpacity: 0.3,\n    /** hollowArea 颜色 */\n    hollowAreaBorderColor: QUALITATIVE_10[0],\n    /** hollowArea 边框粗细 */\n    hollowAreaBorder: 2,\n    /** hollowArea 边框透明度 */\n    hollowAreaBorderOpacity: 1,\n    /** hollowArea active 状态下的边框粗细 */\n    hollowAreaActiveBorder: 3,\n    hollowAreaActiveBorderColor: BLACK_COLORS[100],\n    /** hollowArea selected 状态下的边框粗细 */\n    hollowAreaSelectedBorder: 3,\n    hollowAreaSelectedBorderColor: BLACK_COLORS[100],\n    /** hollowArea inactive 状态下的边框透明度 */\n    hollowAreaInactiveBorderOpacity: 0.3,\n    /** interval 填充颜色 */\n    intervalFillColor: QUALITATIVE_10[0],\n    /** interval 填充透明度 */\n    intervalFillOpacity: 0.95,\n    /** interval active 状态下边框粗细 */\n    intervalActiveBorder: 1,\n    /** interval active 状态下边框颜色 */\n    intervalActiveBorderColor: BLACK_COLORS[100],\n    intervalActiveBorderOpacity: 1,\n    /** interval selected 状态下边框粗细 */\n    intervalSelectedBorder: 2,\n    /** interval selected 状态下边框颜色 */\n    intervalSelectedBorderColor: BLACK_COLORS[100],\n    /** interval selected 状态下边框透明度 */\n    intervalSelectedBorderOpacity: 1,\n    /** interval inactive 状态下边框透明度 */\n    intervalInactiveBorderOpacity: 0.3,\n    /** interval inactive 状态下填充透明度 */\n    intervalInactiveFillOpacity: 0.3,\n    /** interval 边框粗细 */\n    hollowIntervalBorder: 2,\n    /** hollowInterval 边框颜色 */\n    hollowIntervalBorderColor: QUALITATIVE_10[0],\n    /** hollowInterval 边框透明度 */\n    hollowIntervalBorderOpacity: 1,\n    hollowIntervalFillColor: WHITE_COLORS[100],\n    /** hollowInterval active 状态下边框粗细 */\n    hollowIntervalActiveBorder: 2,\n    /** hollowInterval active 状态下边框颜色 */\n    hollowIntervalActiveBorderColor: BLACK_COLORS[100],\n    /** hollowInterval selected 状态下边框粗细 */\n    hollowIntervalSelectedBorder: 3,\n    /** hollowInterval selected 状态下边框颜色 */\n    hollowIntervalSelectedBorderColor: BLACK_COLORS[100],\n    /** hollowInterval selected 状态下边框透明度 */\n    hollowIntervalSelectedBorderOpacity: 1,\n    /** hollowInterval inactive 状态下边框透明度 */\n    hollowIntervalInactiveBorderOpacity: 0.3,\n};\n//# sourceMappingURL=light.js.map","import { deepMix, get, lowerCase } from '@antv/util';\nimport { createThemeByStylesheet } from '../util/theme';\nimport { antvLight as DefaultStyleSheet } from './style-sheet/light';\nvar defaultTheme = createThemeByStylesheet(DefaultStyleSheet);\n// 所有已经存在的主题\nvar Themes = {\n    default: defaultTheme,\n};\n/**\n * 获取主题配置信息。\n * @param theme 主题名\n */\nexport function getTheme(theme) {\n    return get(Themes, lowerCase(theme), Themes.default);\n}\n/**\n * 注册新的主题配置信息。\n * @param theme 主题名。\n * @param value 具体的主题配置。\n */\nexport function registerTheme(theme, value) {\n    Themes[lowerCase(theme)] = deepMix({}, Themes.default, value);\n}\n//# sourceMappingURL=index.js.map","import { __assign } from \"tslib\";\nimport { contains, filter, find, hasKey, isArray, isNil, isNumberEqual, isObject, memoize, values } from '@antv/util';\nimport { FIELD_ORIGIN, GROUP_ATTRS } from '../constant';\nimport { getName } from './scale';\nfunction snapEqual(v1, v2, scale) {\n    var value1 = scale.translate(v1);\n    var value2 = scale.translate(v2);\n    return isNumberEqual(value1, value2);\n}\nfunction getXValueByPoint(point, geometry) {\n    var coordinate = geometry.coordinate;\n    var xScale = geometry.getXScale();\n    var range = xScale.range;\n    var rangeMax = range[range.length - 1];\n    var rangeMin = range[0];\n    var invertPoint = coordinate.invert(point);\n    var xValue = invertPoint.x;\n    if (coordinate.isPolar && xValue > (1 + rangeMax) / 2) {\n        xValue = rangeMin; // 极坐标下，scale 的 range 被做过特殊处理\n    }\n    return xScale.translate(xScale.invert(xValue));\n}\nfunction filterYValue(data, point, geometry) {\n    var coordinate = geometry.coordinate;\n    var yScale = geometry.getYScale();\n    var yField = yScale.field;\n    var invertPoint = coordinate.invert(point);\n    var yValue = yScale.invert(invertPoint.y);\n    var result = find(data, function (obj) {\n        var originData = obj[FIELD_ORIGIN];\n        return originData[yField][0] <= yValue && originData[yField][1] >= yValue;\n    });\n    return result || data[data.length - 1];\n}\nvar getXDistance = memoize(function (scale) {\n    if (scale.isCategory) {\n        return 1;\n    }\n    var scaleValues = scale.values; // values 是无序的\n    var length = scaleValues.length;\n    var min = scale.translate(scaleValues[0]);\n    var max = min;\n    for (var index = 0; index < length; index++) {\n        var value = scaleValues[index];\n        // 时间类型需要 translate\n        var numericValue = scale.translate(value);\n        if (numericValue < min) {\n            min = numericValue;\n        }\n        if (numericValue > max) {\n            max = numericValue;\n        }\n    }\n    return (max - min) / (length - 1);\n});\nfunction getTooltipTitle(originData, geometry, title) {\n    var titleField = title;\n    if (!title) {\n        var positionAttr = geometry.getAttribute('position');\n        var fields = positionAttr.getFields();\n        titleField = fields[0];\n    }\n    var scales = geometry.scales;\n    if (scales[titleField]) {\n        // 如果创建了该字段对应的 scale，则通过 scale.getText() 方式取值，因为用户可能对数据进行了格式化\n        return scales[titleField].getText(originData[titleField]);\n    }\n    // 如果没有对应的 scale，则从原始数据中取值，如果原始数据中仍不存在，则直接放回 title 值\n    return hasKey(originData, titleField) ? originData[titleField] : titleField;\n}\nfunction getAttributesForLegend(geometry) {\n    var attributes = values(geometry.attributes);\n    return filter(attributes, function (attribute) { return contains(GROUP_ATTRS, attribute.type); });\n}\nfunction getTooltipValueScale(geometry) {\n    var attributes = getAttributesForLegend(geometry);\n    var scale;\n    for (var _i = 0, attributes_1 = attributes; _i < attributes_1.length; _i++) {\n        var attribute = attributes_1[_i];\n        var tmpScale = attribute.getScale(attribute.type);\n        if (tmpScale && tmpScale.isLinear) {\n            // 如果指定字段是非 position 的，同时是连续的\n            scale = tmpScale;\n            break;\n        }\n    }\n    var xScale = geometry.getXScale();\n    var yScale = geometry.getYScale();\n    return scale || yScale || xScale;\n}\nfunction getTooltipValue(originData, valueScale) {\n    var field = valueScale.field;\n    var value = originData[field];\n    if (isArray(value)) {\n        var texts = value.map(function (eachValue) {\n            return valueScale.getText(eachValue);\n        });\n        return texts.join('-');\n    }\n    return valueScale.getText(value);\n}\n// 根据原始数据获取 tooltip item 中 name 值\nfunction getTooltipName(originData, geometry) {\n    var nameScale;\n    var groupScales = geometry.getGroupScales();\n    if (groupScales.length) {\n        // 如果存在分组类型，取第一个分组类型\n        nameScale = groupScales[0];\n    }\n    if (nameScale) {\n        var field = nameScale.field;\n        return nameScale.getText(originData[field]);\n    }\n    var valueScale = getTooltipValueScale(geometry);\n    return getName(valueScale);\n}\n/**\n * @ignore\n * Finds data from geometry by point\n * @param point canvas point\n * @param data an item of geometry.dataArray\n * @param geometry\n * @returns\n */\nexport function findDataByPoint(point, data, geometry) {\n    if (data.length === 0) {\n        return null;\n    }\n    var geometryType = geometry.type;\n    var xScale = geometry.getXScale();\n    var yScale = geometry.getYScale();\n    var xField = xScale.field;\n    var yField = yScale.field;\n    var rst = null;\n    // 热力图采用最小逼近策略查找 point 击中的数据\n    if (geometryType === 'heatmap' || geometryType === 'point') {\n        // 将 point 画布坐标转换为原始数据值\n        var coordinate = geometry.coordinate;\n        var invertPoint = coordinate.invert(point); // 转换成归一化的数据\n        var x = xScale.invert(invertPoint.x); // 转换为原始值\n        var y = yScale.invert(invertPoint.y); // 转换为原始值\n        var min = Infinity;\n        for (var index = 0; index < data.length; index++) {\n            var obj = data[index];\n            var originData = obj[FIELD_ORIGIN];\n            var range = Math.pow((originData[xField] - x), 2) + Math.pow((originData[yField] - y), 2);\n            if (range < min) {\n                min = range;\n                rst = obj;\n            }\n        }\n        return rst;\n    }\n    // 其他 Geometry 类型按照 x 字段数据进行查找\n    var first = data[0];\n    var last = data[data.length - 1];\n    var xValue = getXValueByPoint(point, geometry);\n    var firstXValue = first[FIELD_ORIGIN][xField];\n    var firstYValue = first[FIELD_ORIGIN][yField];\n    var lastXValue = last[FIELD_ORIGIN][xField];\n    var isYArray = yScale.isLinear && isArray(firstYValue); // 考虑 x 维度相同，y 是数组区间的情况\n    // 如果 x 的值是数组\n    if (isArray(firstXValue)) {\n        for (var index = 0; index < data.length; index++) {\n            var record = data[index];\n            var originData = record[FIELD_ORIGIN];\n            // xValue 在 originData[xField] 的数值区间内\n            if (xScale.translate(originData[xField][0]) <= xValue && xScale.translate(originData[xField][1]) >= xValue) {\n                if (isYArray) {\n                    // 层叠直方图场景，x 和 y 都是数组区间\n                    if (!isArray(rst)) {\n                        rst = [];\n                    }\n                    rst.push(record);\n                }\n                else {\n                    rst = record;\n                    break;\n                }\n            }\n        }\n        if (isArray(rst)) {\n            rst = filterYValue(rst, point, geometry);\n        }\n    }\n    else {\n        var next = void 0;\n        if (!xScale.isLinear && xScale.type !== 'timeCat') {\n            // x 轴对应的数据为非线性以及非时间类型的数据采用遍历查找\n            for (var index = 0; index < data.length; index++) {\n                var record = data[index];\n                var originData = record[FIELD_ORIGIN];\n                if (snapEqual(originData[xField], xValue, xScale)) {\n                    if (isYArray) {\n                        if (!isArray(rst)) {\n                            rst = [];\n                        }\n                        rst.push(record);\n                    }\n                    else {\n                        rst = record;\n                        break;\n                    }\n                }\n                else if (xScale.translate(originData[xField]) <= xValue) {\n                    last = record;\n                    next = data[index + 1];\n                }\n            }\n            if (isArray(rst)) {\n                rst = filterYValue(rst, point, geometry);\n            }\n        }\n        else {\n            // x 轴对应的数据为线性以及时间类型，进行二分查找，性能更好\n            if ((xValue > xScale.translate(lastXValue) || xValue < xScale.translate(firstXValue)) &&\n                (xValue > xScale.max || xValue < xScale.min)) {\n                // 不在数据范围内\n                return null;\n            }\n            var firstIdx = 0;\n            var lastIdx = data.length - 1;\n            var middleIdx = void 0;\n            while (firstIdx <= lastIdx) {\n                middleIdx = Math.floor((firstIdx + lastIdx) / 2);\n                var item = data[middleIdx][FIELD_ORIGIN][xField];\n                if (snapEqual(item, xValue, xScale)) {\n                    return data[middleIdx];\n                }\n                if (xScale.translate(item) <= xScale.translate(xValue)) {\n                    firstIdx = middleIdx + 1;\n                    last = data[middleIdx];\n                    next = data[middleIdx + 1];\n                }\n                else {\n                    if (lastIdx === 0) {\n                        last = data[0];\n                    }\n                    lastIdx = middleIdx - 1;\n                }\n            }\n        }\n        if (last && next) {\n            // 计算最逼近的\n            if (Math.abs(xScale.translate(last[FIELD_ORIGIN][xField]) - xValue) >\n                Math.abs(xScale.translate(next[FIELD_ORIGIN][xField]) - xValue)) {\n                last = next;\n            }\n        }\n    }\n    var distance = getXDistance(geometry.getXScale()); // 每个分类间的平均间距\n    if (!rst && Math.abs(xScale.translate(last[FIELD_ORIGIN][xField]) - xValue) <= distance / 2) {\n        rst = last;\n    }\n    return rst;\n}\n/**\n * @ignore\n * Gets tooltip items\n * @param data\n * @param geometry\n * @param [title]\n * @returns\n */\nexport function getTooltipItems(data, geometry, title) {\n    if (title === void 0) { title = ''; }\n    var originData = data[FIELD_ORIGIN];\n    var tooltipTitle = getTooltipTitle(originData, geometry, title);\n    var tooltipOption = geometry.tooltipOption;\n    var defaultColor = geometry.theme.defaultColor;\n    var items = [];\n    var name;\n    var value;\n    function addItem(itemName, itemValue) {\n        if (!isNil(itemValue) && itemValue !== '') {\n            // 值为 null的时候，忽视\n            var item = {\n                title: tooltipTitle,\n                data: originData,\n                mappingData: data,\n                name: itemName,\n                value: itemValue,\n                color: data.color || defaultColor,\n                marker: true,\n            };\n            items.push(item);\n        }\n    }\n    if (isObject(tooltipOption)) {\n        var fields = tooltipOption.fields, callback = tooltipOption.callback;\n        if (callback) {\n            // 用户定义了回调函数\n            var callbackParams = fields.map(function (field) {\n                return data[FIELD_ORIGIN][field];\n            });\n            var cfg = callback.apply(void 0, callbackParams);\n            var itemCfg = __assign({ data: data[FIELD_ORIGIN], mappingData: data, title: tooltipTitle, color: data.color || defaultColor, marker: true }, cfg);\n            items.push(itemCfg);\n        }\n        else {\n            var scales = geometry.scales;\n            for (var _i = 0, fields_1 = fields; _i < fields_1.length; _i++) {\n                var field = fields_1[_i];\n                if (!isNil(originData[field])) {\n                    // 字段数据为null, undefined 时不显示\n                    var scale = scales[field];\n                    name = getName(scale);\n                    value = scale.getText(originData[field]);\n                    addItem(name, value);\n                }\n            }\n        }\n    }\n    else {\n        var valueScale = getTooltipValueScale(geometry);\n        if (!isNil(originData[valueScale.field])) {\n            // 字段数据为null ,undefined时不显示\n            value = getTooltipValue(originData, valueScale);\n            name = getTooltipName(originData, geometry);\n            addItem(name, value);\n        }\n    }\n    return items;\n}\n//# sourceMappingURL=tooltip.js.map","import { __spreadArrays } from \"tslib\";\nimport { isArray, isNumber } from '@antv/util';\n/**\n * @ignore\n * 是否是自动 padding\n * @param padding\n */\nexport function isAutoPadding(padding) {\n    return !isNumber(padding) && !isArray(padding);\n}\n/**\n * @ignore\n * padding 的解析逻辑\n * @param padding\n * @return [ top, right, bottom, left ]\n */\nexport function parsePadding(padding) {\n    if (padding === void 0) { padding = 0; }\n    var paddingArray = isArray(padding) ? padding : [padding];\n    switch (paddingArray.length) {\n        case 0:\n            paddingArray = [0, 0, 0, 0];\n            break;\n        case 1:\n            paddingArray = new Array(4).fill(paddingArray[0]);\n            break;\n        case 2:\n            paddingArray = __spreadArrays(paddingArray, paddingArray);\n            break;\n        case 3:\n            paddingArray = __spreadArrays(paddingArray, [paddingArray[1]]);\n            break;\n        default:\n            // 其他情况，只去四个\n            paddingArray = paddingArray.slice(0, 4);\n            break;\n    }\n    return paddingArray;\n}\n//# sourceMappingURL=padding.js.map","var LOAD_COMPONENT_CONTROLLERS = {};\n/**\n * 全局注册组件。\n * @param name 组件名称\n * @param plugin 注册的组件类\n * @returns void\n */\nexport function registerComponentController(name, plugin) {\n    LOAD_COMPONENT_CONTROLLERS[name] = plugin;\n}\n/**\n * 删除全局组件。\n * @param name 组件名\n * @returns void\n */\nexport function unregisterComponentController(name) {\n    delete LOAD_COMPONENT_CONTROLLERS[name];\n}\n/**\n * 获取以注册的组件名。\n * @returns string[] 返回已注册的组件名称\n */\nexport function getComponentControllerNames() {\n    return Object.keys(LOAD_COMPONENT_CONTROLLERS);\n}\n/**\n * 根据组件名获取组件类。\n * @param name 组件名\n * @returns 返回组件类\n */\nexport function getComponentController(name) {\n    return LOAD_COMPONENT_CONTROLLERS[name];\n}\n//# sourceMappingURL=index.js.map","import { __assign } from \"tslib\";\nimport { each, isNil, some } from '@antv/util';\nimport { getCoordinate } from '../../dependents';\n/**\n * coordinate controller，职责：\n * 1. 创建实例\n * 2. 暂存配置\n */\nvar CoordinateController = /** @class */ (function () {\n    function CoordinateController(option) {\n        // 设置默认值，并存储配置\n        this.option = this.wrapperOption(option);\n    }\n    /**\n     * 更新配置\n     * @param option\n     */\n    CoordinateController.prototype.update = function (option) {\n        this.option = this.wrapperOption(option);\n        return this;\n    };\n    /**\n     * 是否存在某一个 action\n     * @param actionName\n     */\n    CoordinateController.prototype.hasAction = function (actionName) {\n        var actions = this.option.actions;\n        return some(actions, function (action) { return action[0] === actionName; });\n    };\n    /**\n     * 创建坐标系对象\n     * @param start 起始位置\n     * @param end   结束位置\n     * @return 坐标系实例\n     */\n    CoordinateController.prototype.create = function (start, end) {\n        var _a = this.option, type = _a.type, cfg = _a.cfg;\n        var isTheta = type === 'theta';\n        // 1. 起始位置\n        var props = __assign({ start: start,\n            end: end }, cfg);\n        // 2. 创建实例\n        var C = getCoordinate(isTheta ? 'polar' : type);\n        this.coordinate = new C(props);\n        // @ts-ignore FIXME coordinate 包问题导致 type 不正确\n        this.coordinate.type = type;\n        // 3. 添加默认 action\n        if (isTheta) {\n            // 不存在 transpose，为其自动设置一个 action\n            if (!this.hasAction('transpose')) {\n                this.transpose();\n            }\n        }\n        // 4. 执行 action\n        this.execActions();\n        return this.coordinate;\n    };\n    /**\n     * 更新坐标系对象\n     * @param start 起始位置\n     * @param end   结束位置\n     * @return 坐标系实例\n     */\n    CoordinateController.prototype.adjust = function (start, end) {\n        this.coordinate.update({\n            start: start,\n            end: end,\n        });\n        // 更新坐标系大小的时候，需要：\n        // 1. 重置 matrix\n        // 2. 重新执行作用于 matrix 的 action\n        this.coordinate.resetMatrix();\n        this.execActions(['scale', 'rotate', 'translate']);\n        return this.coordinate;\n    };\n    /**\n     * 旋转弧度\n     * @param angle\n     */\n    CoordinateController.prototype.rotate = function (angle) {\n        this.option.actions.push(['rotate', angle]);\n        return this;\n    };\n    /**\n     * 镜像\n     * @param dim\n     */\n    CoordinateController.prototype.reflect = function (dim) {\n        this.option.actions.push(['reflect', dim]);\n        return this;\n    };\n    /**\n     * scale\n     * @param sx\n     * @param sy\n     */\n    CoordinateController.prototype.scale = function (sx, sy) {\n        this.option.actions.push(['scale', sx, sy]);\n        return this;\n    };\n    /**\n     * 对角变换\n     */\n    CoordinateController.prototype.transpose = function () {\n        this.option.actions.push(['transpose']);\n        return this;\n    };\n    /**\n     * 获取配置\n     */\n    CoordinateController.prototype.getOption = function () {\n        return this.option;\n    };\n    /**\n     * 获得 coordinate 实例\n     */\n    CoordinateController.prototype.getCoordinate = function () {\n        return this.coordinate;\n    };\n    /**\n     * 包装配置的默认值\n     * @param option\n     */\n    CoordinateController.prototype.wrapperOption = function (option) {\n        return __assign({ type: 'rect', actions: [], cfg: {} }, option);\n    };\n    /**\n     * coordinate 实例执行 actions\n     * @params includeActions 如果没有指定，则执行全部，否则，执行指定的 action\n     */\n    CoordinateController.prototype.execActions = function (includeActions) {\n        var _this = this;\n        var actions = this.option.actions;\n        each(actions, function (action) {\n            var _a;\n            var actionName = action[0], args = action.slice(1);\n            var shouldExec = isNil(includeActions) ? true : includeActions.includes(actionName);\n            if (shouldExec) {\n                (_a = _this.coordinate)[actionName].apply(_a, args);\n            }\n        });\n    };\n    return CoordinateController;\n}());\nexport default CoordinateController;\n//# sourceMappingURL=coordinate.js.map","import { Event as GEvent } from '../dependents';\n/**\n * @todo Whether it can(or necessary to) keep consistent with the structure of G.Event or directly use the structure of G.Event\n * G2 事件的事件包装类，基于 G.Event\n */\nvar Event = /** @class */ (function () {\n    function Event(view, gEvent, data) {\n        this.view = view;\n        this.gEvent = gEvent;\n        this.data = data;\n        this.type = gEvent.type;\n    }\n    /**\n     * 非交互产生的事件\n     * @param view\n     * @param type\n     * @param data\n     */\n    Event.fromData = function (view, type, data) {\n        return new Event(view, new GEvent(type, {}), data);\n    };\n    Object.defineProperty(Event.prototype, \"target\", {\n        // below props are proxy props of G.event convenient\n        /** the real trigger shape of the event */\n        get: function () {\n            // @todo G 中事件定义为 object 不正确，这里先 ignore\n            // @ts-ignore\n            return this.gEvent.target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Event.prototype, \"event\", {\n        /** 获取对应的 dom 原生时间 */\n        get: function () {\n            return this.gEvent.originalEvent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Event.prototype, \"x\", {\n        /** x 画布坐标 */\n        get: function () {\n            return this.gEvent.x;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Event.prototype, \"y\", {\n        /** y 画布坐标 */\n        get: function () {\n            return this.gEvent.y;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Event.prototype, \"clientX\", {\n        /** x 窗口坐标 */\n        get: function () {\n            return this.gEvent.clientX;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Event.prototype, \"clientY\", {\n        /** y 窗口坐标 */\n        get: function () {\n            return this.gEvent.clientY;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // end for proxy events\n    /**\n     * event string\n     * @returns string\n     */\n    Event.prototype.toString = function () {\n        return \"[Event (type=\" + this.type + \")]\";\n    };\n    /**\n     * clone a new event with same attributes\n     * @returns [[Event]]\n     */\n    Event.prototype.clone = function () {\n        return new Event(this.view, this.gEvent, this.data);\n    };\n    return Event;\n}());\nexport default Event;\n//# sourceMappingURL=event.js.map","/**\n * @ignore\n * G2 默认提供的 layout 函数\n * 内置布局函数处理的逻辑：\n *\n * 1. 如果 padding = 'auto'，那么自动根据组件的 direction 来计算 padding 数组\n * 2. 根据 padding 和 direction 去分配对应方向的 padding 数值\n * 3. 移动组件位置\n *\n * 前面 1，2 步骤在 view 中已经做掉了。对于组件响应式布局，可以尝试使用约束布局的方式去求解位置信息。\n * @param view\n */\nexport default function defaultLayout(view) {\n    var axis = view.getController('axis');\n    var legend = view.getController('legend');\n    var annotation = view.getController('annotation');\n    var slider = view.getController('slider');\n    var scrollbar = view.getController('scrollbar');\n    // 根据最新的 coordinate 重新布局组件\n    [axis, slider, scrollbar, legend, annotation].forEach(function (controller) {\n        if (controller) {\n            controller.layout();\n        }\n    });\n}\n//# sourceMappingURL=index.js.map","/**\n * view 中缓存 scale 的类\n */\nimport { deepMix, each, get, isNumber, last } from '@antv/util';\nimport { createScaleByField, syncScale } from '../../util/scale';\n/** @ignore */\nvar ScalePool = /** @class */ (function () {\n    function ScalePool() {\n        /** 所有的 scales */\n        this.scales = new Map();\n        /** 需要同步的 scale 分组， key: scaleKeyArray */\n        this.syncScales = new Map();\n    }\n    /**\n     * 创建 scale\n     * @param field\n     * @param data\n     * @param scaleDef\n     * @param key\n     */\n    ScalePool.prototype.createScale = function (field, data, scaleDef, key) {\n        var finalScaleDef = scaleDef;\n        var cacheScaleMeta = this.getScaleMeta(key);\n        if (data.length === 0 && cacheScaleMeta) {\n            // 在更新过程中数据变为空，同时 key 对应的 scale 已存在则保持 scale 同类型\n            var cacheScale = cacheScaleMeta.scale;\n            var cacheScaleDef = {\n                type: cacheScale.type,\n            };\n            if (cacheScale.isCategory) {\n                // 如果是分类类型，保持 values\n                cacheScaleDef.values = cacheScale.values;\n            }\n            finalScaleDef = deepMix(cacheScaleDef, cacheScaleMeta.scaleDef, scaleDef);\n        }\n        var scale = createScaleByField(field, data, finalScaleDef);\n        // 缓存起来\n        this.cacheScale(scale, scaleDef, key);\n        return scale;\n    };\n    /**\n     * 同步 scale\n     */\n    ScalePool.prototype.sync = function () {\n        var _this = this;\n        // 对于 syncScales 中每一个 syncKey 下面的 scale 数组进行同步处理\n        this.syncScales.forEach(function (scaleKeys, syncKey) {\n            // min, max, values\n            var min = Number.MAX_SAFE_INTEGER;\n            var max = Number.MIN_SAFE_INTEGER;\n            var values = [];\n            // 1. 遍历求得最大最小值，values 等\n            each(scaleKeys, function (key) {\n                var scale = _this.getScale(key);\n                max = isNumber(scale.max) ? Math.max(max, scale.max) : max;\n                min = isNumber(scale.min) ? Math.min(min, scale.min) : min;\n                // 去重\n                each(scale.values, function (v) {\n                    if (!values.includes(v)) {\n                        values.push(v);\n                    }\n                });\n            });\n            // 2. 同步\n            each(scaleKeys, function (key) {\n                var scale = _this.getScale(key);\n                if (scale.isContinuous) {\n                    scale.change({\n                        min: min,\n                        max: max,\n                        values: values,\n                    });\n                }\n                else if (scale.isCategory) {\n                    scale.change({\n                        values: values,\n                    });\n                }\n            });\n        });\n    };\n    /**\n     * 缓存一个 scale\n     * @param scale\n     * @param scaleDef\n     * @param key\n     */\n    ScalePool.prototype.cacheScale = function (scale, scaleDef, key) {\n        // 1. 缓存到 scales\n        var sm = this.getScaleMeta(key);\n        // 存在则更新，同时检测类型是否一致\n        if (sm && sm.scale.type === scale.type) {\n            syncScale(sm.scale, scale);\n            sm.scaleDef = scaleDef;\n            // 更新 scaleDef\n        }\n        else {\n            sm = {\n                key: key,\n                scale: scale,\n                scaleDef: scaleDef,\n            };\n            this.scales.set(key, sm);\n        }\n        // 2. 缓存到 syncScales，构造 Record<sync, string[]> 数据结构\n        var syncKey = this.getSyncKey(sm);\n        sm.syncKey = syncKey; // 设置 sync 同步的 key\n        // 因为存在更新 scale 机制，所以在缓存之前，先从原 syncScales 中去除 sync 的缓存引用\n        this.removeFromSyncScales(key);\n        // 存在 sync 标记才进行 sync\n        if (syncKey) {\n            // 不存在这个 syncKey，则创建一个空数组\n            var scaleKeys = this.syncScales.get(syncKey);\n            if (!scaleKeys) {\n                scaleKeys = [];\n                this.syncScales.set(syncKey, scaleKeys);\n            }\n            scaleKeys.push(key);\n        }\n    };\n    /**\n     * 通过 key 获取 scale\n     * @param key\n     */\n    ScalePool.prototype.getScale = function (key) {\n        var scaleMeta = this.getScaleMeta(key);\n        if (!scaleMeta) {\n            var field = last(key.split('-'));\n            var scaleKeys = this.syncScales.get(field);\n            if (scaleKeys && scaleKeys.length) {\n                scaleMeta = this.getScaleMeta(scaleKeys[0]);\n            }\n        }\n        return scaleMeta && scaleMeta.scale;\n    };\n    /**\n     * 在 view 销毁的时候，删除 scale 实例，防止内存泄露\n     * @param key\n     */\n    ScalePool.prototype.deleteScale = function (key) {\n        var scaleMeta = this.getScaleMeta(key);\n        if (scaleMeta) {\n            var syncKey = scaleMeta.syncKey;\n            var scaleKeys = this.syncScales.get(syncKey);\n            // 移除同步的关系\n            if (scaleKeys && scaleKeys.length) {\n                var idx = scaleKeys.indexOf(key);\n                if (idx !== -1) {\n                    scaleKeys.splice(idx, 1);\n                }\n            }\n        }\n        // 删除 scale 实例\n        this.scales.delete(key);\n    };\n    /**\n     * 清空\n     */\n    ScalePool.prototype.clear = function () {\n        this.scales.clear();\n        this.syncScales.clear();\n    };\n    /**\n     * 删除 sync scale 引用\n     * @param key\n     */\n    ScalePool.prototype.removeFromSyncScales = function (key) {\n        var _this = this;\n        this.syncScales.forEach(function (scaleKeys, syncKey) {\n            var idx = scaleKeys.indexOf(key);\n            if (idx !== -1) {\n                scaleKeys.splice(idx, 1);\n                // 删除空数组值\n                if (scaleKeys.length === 0) {\n                    _this.syncScales.delete(syncKey);\n                }\n                return false; // 跳出循环\n            }\n        });\n    };\n    /**\n     * get sync key\n     * @param sm\n     */\n    ScalePool.prototype.getSyncKey = function (sm) {\n        var scale = sm.scale, scaleDef = sm.scaleDef;\n        var field = scale.field;\n        var sync = get(scaleDef, ['sync']);\n        // 如果 sync = true，则直接使用字段名作为 syncKey\n        return sync === true ? field : sync === false ? undefined : sync;\n    };\n    /**\n     * 通过 key 获取 scale\n     * @param key\n     */\n    ScalePool.prototype.getScaleMeta = function (key) {\n        return this.scales.get(key);\n    };\n    return ScalePool;\n}());\nexport { ScalePool };\n//# sourceMappingURL=scale-pool.js.map","import { DIRECTION } from '../../constant';\n/** @ignore */\nvar PaddingCal = /** @class */ (function () {\n    /**\n     * 初始的 padding 数据\n     * @param top\n     * @param right\n     * @param bottom\n     * @param left\n     */\n    function PaddingCal(top, right, bottom, left) {\n        if (top === void 0) { top = 0; }\n        if (right === void 0) { right = 0; }\n        if (bottom === void 0) { bottom = 0; }\n        if (left === void 0) { left = 0; }\n        this.top = top;\n        this.right = right;\n        this.bottom = bottom;\n        this.left = left;\n    }\n    /**\n     * 取最大区间\n     * @param padding\n     */\n    PaddingCal.prototype.max = function (padding) {\n        var top = padding[0], right = padding[1], bottom = padding[2], left = padding[3];\n        this.top = Math.max(this.top, top);\n        this.right = Math.max(this.right, right);\n        this.bottom = Math.max(this.bottom, bottom);\n        this.left = Math.max(this.left, left);\n        return this;\n    };\n    /**\n     * 四周增加 padding\n     * @param padding\n     */\n    PaddingCal.prototype.shrink = function (padding) {\n        var top = padding[0], right = padding[1], bottom = padding[2], left = padding[3];\n        this.top += top;\n        this.right += right;\n        this.bottom += bottom;\n        this.left += left;\n        return this;\n    };\n    /**\n     * 在某一个方向增加 padding\n     * @param bbox\n     * @param direction\n     */\n    PaddingCal.prototype.inc = function (bbox, direction) {\n        var width = bbox.width, height = bbox.height;\n        switch (direction) {\n            case DIRECTION.TOP:\n            case DIRECTION.TOP_LEFT:\n            case DIRECTION.TOP_RIGHT:\n                this.top += height;\n                break;\n            case DIRECTION.RIGHT:\n            case DIRECTION.RIGHT_TOP:\n            case DIRECTION.RIGHT_BOTTOM:\n                this.right += width;\n                break;\n            case DIRECTION.BOTTOM:\n            case DIRECTION.BOTTOM_LEFT:\n            case DIRECTION.BOTTOM_RIGHT:\n                this.bottom += height;\n                break;\n            case DIRECTION.LEFT:\n            case DIRECTION.LEFT_TOP:\n            case DIRECTION.LEFT_BOTTOM:\n                this.left += width;\n                break;\n            default:\n                break;\n        }\n        return this;\n    };\n    /**\n     * 获得最终的 padding\n     */\n    PaddingCal.prototype.getPadding = function () {\n        return [this.top, this.right, this.bottom, this.left];\n    };\n    return PaddingCal;\n}());\nexport { PaddingCal };\n//# sourceMappingURL=padding-cal.js.map","import { __spreadArrays } from \"tslib\";\nimport { each } from '@antv/util';\nimport { COMPONENT_TYPE } from '../../constant';\nimport { BBox } from '../../util/bbox';\nimport { isAutoPadding, parsePadding } from '../../util/padding';\nimport { PaddingCal } from './padding-cal';\n/**\n * @ignore\n * 根据 view 中的组件，计算实际的 padding 数值\n * @param view\n */\nexport function calculatePadding(view) {\n    var padding = view.padding;\n    // 如果不是 auto padding，那么直接解析之后返回\n    if (!isAutoPadding(padding)) {\n        return new (PaddingCal.bind.apply(PaddingCal, __spreadArrays([void 0], parsePadding(padding))))();\n    }\n    // 是 auto padding，根据组件的情况，来计算 padding\n    var viewBBox = view.viewBBox;\n    var paddingCal = new PaddingCal();\n    var axisComponents = [];\n    var paddingComponents = [];\n    var otherComponents = [];\n    each(view.getComponents(), function (co) {\n        var type = co.type;\n        if (type === COMPONENT_TYPE.AXIS) {\n            axisComponents.push(co);\n        }\n        else if ([COMPONENT_TYPE.LEGEND, COMPONENT_TYPE.SLIDER, COMPONENT_TYPE.SCROLLBAR].includes(type)) {\n            paddingComponents.push(co);\n        }\n        else if (type !== COMPONENT_TYPE.GRID && type !== COMPONENT_TYPE.TOOLTIP) {\n            otherComponents.push(co);\n        }\n    });\n    // 进行坐标轴布局，应该是取 padding 的并集，而不是进行相加\n    each(axisComponents, function (co) {\n        var component = co.component;\n        var bboxObject = component.getLayoutBBox();\n        var componentBBox = new BBox(bboxObject.x, bboxObject.y, bboxObject.width, bboxObject.height);\n        var exceed = componentBBox.exceed(viewBBox);\n        // 在对组件分组之后，先对 axis 进行处理，然后取最大的超出即可。\n        paddingCal.max(exceed);\n    });\n    // 有 padding 的组件布局\n    each(paddingComponents, function (co) {\n        var component = co.component, direction = co.direction;\n        var bboxObject = component.getLayoutBBox();\n        var componentPadding = component.get('padding');\n        var componentBBox = new BBox(bboxObject.x, bboxObject.y, bboxObject.width, bboxObject.height).expand(componentPadding);\n        // 按照方向计算 padding\n        paddingCal.inc(componentBBox, direction);\n    });\n    // 其他组件布局\n    each(otherComponents, function (co) {\n        var component = co.component, direction = co.direction;\n        var bboxObject = component.getLayoutBBox();\n        var componentBBox = new BBox(bboxObject.x, bboxObject.y, bboxObject.width, bboxObject.height);\n        // 按照方向计算 padding\n        paddingCal.inc(componentBBox, direction);\n    });\n    return paddingCal;\n}\n//# sourceMappingURL=auto.js.map","import { __assign, __extends, __rest, __spreadArrays } from \"tslib\";\nimport { clone, deepMix, each, filter, find, flatten, get, isBoolean, isFunction, isNil, isObject, isString, isUndefined, mix, remove, set, size, uniqueId, isEqual, } from '@antv/util';\nimport { GROUP_Z_INDEX, LAYER, PLOT_EVENTS, VIEW_LIFE_CIRCLE } from '../constant';\nimport Base from '../base';\nimport { getFacet } from '../facet';\nimport { createInteraction } from '../interaction';\nimport { getTheme } from '../theme';\nimport { BBox } from '../util/bbox';\nimport { getCoordinateClipCfg, isFullCircle, isPointInCoordinate } from '../util/coordinate';\nimport { uniq } from '../util/helper';\nimport { findDataByPoint } from '../util/tooltip';\nimport { parsePadding } from '../util/padding';\nimport { getComponentController, getComponentControllerNames } from './controller';\nimport CoordinateController from './controller/coordinate';\nimport Event from './event';\nimport defaultLayout from './layout';\nimport { ScalePool } from './util/scale-pool';\nimport { PaddingCal } from './layout/padding-cal';\nimport { calculatePadding } from './layout/auto';\n/**\n * G2 视图 View 类\n */\nvar View = /** @class */ (function (_super) {\n    __extends(View, _super);\n    function View(props) {\n        var _this = _super.call(this, { visible: props.visible }) || this;\n        /** 所有的子 view。 */\n        _this.views = [];\n        /** 所有的 geometry 实例。 */\n        _this.geometries = [];\n        /** 所有的组件 controllers。 */\n        _this.controllers = [];\n        /** 所有的 Interaction 实例。 */\n        _this.interactions = {};\n        /** 是否对超出坐标系范围的 Geometry 进行剪切 */\n        _this.limitInPlot = false;\n        // 配置信息存储\n        _this.options = {\n            data: [],\n            animate: true,\n        }; // 初始化为空\n        /** 配置开启的组件插件，默认为全局配置的组件。 */\n        _this.usedControllers = getComponentControllerNames();\n        /** 所有的 scales */\n        _this.scalePool = new ScalePool();\n        /** 布局函数 */\n        _this.layoutFunc = defaultLayout;\n        /** 当前鼠标是否在 plot 内（CoordinateBBox） */\n        _this.isPreMouseInPlot = false;\n        /** 默认标识位，用于判定数据是否更新 */\n        _this.isDataChanged = false;\n        /** 用于判断坐标系范围是否发生变化的标志位 */\n        _this.isCoordinateChanged = false;\n        /** 从当前这个 view 创建的 scale key */\n        _this.createdScaleKeys = new Map();\n        _this.onCanvasEvent = function (evt) {\n            var name = evt.name;\n            if (!name.includes(':')) {\n                // 非委托事件\n                var e = _this.createViewEvent(evt);\n                // 处理 plot 事件\n                _this.doPlotEvent(e);\n                _this.emit(name, e);\n            }\n        };\n        /**\n         * 触发事件之后\n         * @param evt\n         */\n        _this.onDelegateEvents = function (evt) {\n            // 阻止继续冒泡，防止重复事件触发\n            // evt.preventDefault();\n            var name = evt.name;\n            if (!name.includes(':')) {\n                return;\n            }\n            // 事件在 view 嵌套中冒泡（暂不提供阻止冒泡的机制）\n            var e = _this.createViewEvent(evt);\n            // 包含有基本事件、组合事件\n            _this.emit(name, e);\n            // const currentTarget = evt.currentTarget as IShape;\n            // const inheritNames = currentTarget.get('inheritNames');\n            // if (evt.delegateObject || inheritNames) {\n            //   const events = this.getEvents();\n            //   each(inheritNames, (subName) => {\n            //     const eventName = `${subName}:${type}`;\n            //     if (events[eventName]) {\n            //       this.emit(eventName, e);\n            //     }\n            //   });\n            // }\n        };\n        var _a = props.id, id = _a === void 0 ? uniqueId('view') : _a, parent = props.parent, canvas = props.canvas, backgroundGroup = props.backgroundGroup, middleGroup = props.middleGroup, foregroundGroup = props.foregroundGroup, _b = props.region, region = _b === void 0 ? { start: { x: 0, y: 0 }, end: { x: 1, y: 1 } } : _b, padding = props.padding, appendPadding = props.appendPadding, theme = props.theme, options = props.options, limitInPlot = props.limitInPlot, syncViewPadding = props.syncViewPadding;\n        _this.parent = parent;\n        _this.canvas = canvas;\n        _this.backgroundGroup = backgroundGroup;\n        _this.middleGroup = middleGroup;\n        _this.foregroundGroup = foregroundGroup;\n        _this.region = region;\n        _this.padding = padding;\n        _this.appendPadding = appendPadding;\n        // 接受父 view 传入的参数\n        _this.options = __assign(__assign({}, _this.options), options);\n        _this.limitInPlot = limitInPlot;\n        _this.id = id;\n        _this.syncViewPadding = syncViewPadding;\n        // 初始化 theme\n        _this.themeObject = isObject(theme) ? deepMix({}, getTheme('default'), theme) : getTheme(theme);\n        _this.init();\n        return _this;\n    }\n    /**\n     * 设置 layout 布局函数\n     * @param layout 布局函数\n     * @returns void\n     */\n    View.prototype.setLayout = function (layout) {\n        this.layoutFunc = layout;\n    };\n    /**\n     * 生命周期：初始化\n     * @returns voids\n     */\n    View.prototype.init = function () {\n        // 计算画布的 viewBBox\n        this.calculateViewBBox();\n        // 事件委托机制\n        this.initEvents();\n        // 初始化组件 controller\n        this.initComponentController();\n        this.initOptions();\n    };\n    /**\n     * 生命周期：渲染流程，渲染过程需要处理数据更新的情况。\n     * render 函数仅仅会处理 view 和子 view。\n     * @param isUpdate 是否触发更新流程。\n     */\n    View.prototype.render = function (isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        this.emit(VIEW_LIFE_CIRCLE.BEFORE_RENDER);\n        // 递归渲染\n        this.paint(isUpdate);\n        this.emit(VIEW_LIFE_CIRCLE.AFTER_RENDER);\n        if (this.visible === false) {\n            // 用户在初始化的时候声明 visible: false\n            this.changeVisible(false);\n        }\n    };\n    /**\n     * 生命周期：清空图表上所有的绘制内容，但是不销毁图表，chart 仍可使用。\n     * @returns void\n     */\n    View.prototype.clear = function () {\n        var _this = this;\n        this.emit(VIEW_LIFE_CIRCLE.BEFORE_CLEAR);\n        // 1. 清空缓存和计算数据\n        this.filteredData = [];\n        this.coordinateInstance = undefined;\n        this.isDataChanged = false; // 复位\n        this.isCoordinateChanged = false; // 复位\n        // 2. 清空 geometries\n        var geometries = this.geometries;\n        for (var i = 0; i < geometries.length; i++) {\n            geometries[i].clear();\n            // view 中使用 geometry 的时候，还需要清空它的容器，不然下一次 chart.geometry() 的时候，又创建了一个，导致泄露， #2799。\n            geometries[i].container.remove(true);\n        }\n        this.geometries = [];\n        // 3. 清空 controllers\n        var controllers = this.controllers;\n        for (var i = 0; i < controllers.length; i++) {\n            if (controllers[i].name === 'annotation') {\n                // 需要清空配置项\n                controllers[i].clear(true);\n            }\n            else {\n                controllers[i].clear();\n            }\n        }\n        // 4. 删除 scale 缓存\n        this.createdScaleKeys.forEach(function (v, k) {\n            _this.getRootView().scalePool.deleteScale(k);\n        });\n        this.createdScaleKeys.clear();\n        // 递归处理子 view\n        var views = this.views;\n        for (var i = 0; i < views.length; i++) {\n            views[i].clear();\n        }\n        this.emit(VIEW_LIFE_CIRCLE.AFTER_CLEAR);\n    };\n    /**\n     * 生命周期：销毁，完全无法使用。\n     * @returns void\n     */\n    View.prototype.destroy = function () {\n        // 销毁前事件，销毁之后已经没有意义了，所以不抛出事件\n        this.emit(VIEW_LIFE_CIRCLE.BEFORE_DESTROY);\n        var interactions = this.interactions;\n        // 销毁 interactions\n        each(interactions, function (interaction) {\n            if (interaction) {\n                // 有可能已经销毁，设置了 undefined\n                interaction.destroy();\n            }\n        });\n        this.clear();\n        // 销毁 controller 中的组件\n        var controllers = this.controllers;\n        for (var i = 0, len = controllers.length; i < len; i++) {\n            var controller = controllers[i];\n            controller.destroy();\n        }\n        this.backgroundGroup.remove(true);\n        this.middleGroup.remove(true);\n        this.foregroundGroup.remove(true);\n        _super.prototype.destroy.call(this);\n    };\n    /* end 生命周期函数 */\n    /**\n     * 显示或者隐藏整个 view。\n     * @param visible 是否可见\n     * @returns View\n     */\n    View.prototype.changeVisible = function (visible) {\n        _super.prototype.changeVisible.call(this, visible);\n        var geometries = this.geometries;\n        for (var i = 0, len = geometries.length; i < len; i++) {\n            var geometry = geometries[i];\n            geometry.changeVisible(visible);\n        }\n        var controllers = this.controllers;\n        for (var i = 0, len = controllers.length; i < len; i++) {\n            var controller = controllers[i];\n            controller.changeVisible(visible);\n        }\n        this.foregroundGroup.set('visible', visible);\n        this.middleGroup.set('visible', visible);\n        this.backgroundGroup.set('visible', visible);\n        // group.set('visible', visible) 不会触发自动刷新\n        this.getCanvas().draw();\n        return this;\n    };\n    /**\n     * 装载数据源。\n     *\n     * ```ts\n     * view.data([{ city: '杭州', sale: 100 }, { city: '上海', sale: 110 } ]);\n     * ```\n     *\n     * @param data 数据源，json 数组。\n     * @returns View\n     */\n    View.prototype.data = function (data) {\n        set(this.options, 'data', data);\n        this.isDataChanged = true;\n        return this;\n    };\n    /**\n     * @deprecated\n     * This method will be removed at G2 V4.1. Replaced by {@link #data(data)}\n     */\n    View.prototype.source = function (data) {\n        console.warn('This method will be removed at G2 V4.1. Please use chart.data() instead.');\n        return this.data(data);\n    };\n    /**\n     * 设置数据筛选规则。\n     *\n     * ```ts\n     * view.filter('city', (value: any, datum: Datum) => value !== '杭州');\n     *\n     * // 删除 'city' 字段对应的筛选规则。\n     * view.filter('city', null);\n     * ```\n     *\n     * @param field 数据字段\n     * @param condition 筛选规则\n     * @returns View\n     */\n    View.prototype.filter = function (field, condition) {\n        if (isFunction(condition)) {\n            set(this.options, ['filters', field], condition);\n            return this;\n        }\n        // condition 为空，则表示删除过滤条件\n        if (!condition && get(this.options, ['filters', field])) {\n            delete this.options.filters[field];\n        }\n        return this;\n    };\n    View.prototype.axis = function (field, axisOption) {\n        if (isBoolean(field)) {\n            set(this.options, ['axes'], field);\n        }\n        else {\n            set(this.options, ['axes', field], axisOption);\n        }\n        return this;\n    };\n    View.prototype.legend = function (field, legendOption) {\n        if (isBoolean(field)) {\n            set(this.options, ['legends'], field);\n        }\n        else if (isString(field)) {\n            set(this.options, ['legends', field], legendOption);\n        }\n        else {\n            // 设置全局的 legend 配置\n            set(this.options, ['legends'], field);\n        }\n        return this;\n    };\n    View.prototype.scale = function (field, scaleOption) {\n        var _this = this;\n        if (isString(field)) {\n            set(this.options, ['scales', field], scaleOption);\n        }\n        else if (isObject(field)) {\n            each(field, function (v, k) {\n                set(_this.options, ['scales', k], v);\n            });\n        }\n        return this;\n    };\n    /**\n     * tooltip 提示信息配置。\n     *\n     * ```ts\n     * view.tooltip(false); // 关闭 tooltip\n     *\n     * view.tooltip({\n     *   shared: true\n     * });\n     * ```\n     *\n     * @param cfg Tooltip 配置，更详细的配置项参考：https://github.com/antvis/component#tooltip\n     * @returns View\n     */\n    View.prototype.tooltip = function (cfg) {\n        set(this.options, 'tooltip', cfg);\n        return this;\n    };\n    /**\n     * 辅助标记配置。\n     *\n     * ```ts\n     * view.annotation().line({\n     *   start: ['min', 85],\n     *   end: ['max', 85],\n     *   style: {\n     *     stroke: '#595959',\n     *     lineWidth: 1,\n     *     lineDash: [3, 3],\n     *   },\n     * });\n     * ```\n     * 更详细的配置项：https://github.com/antvis/component#annotation\n     * @returns [[Annotation]]\n     */\n    View.prototype.annotation = function () {\n        return this.getController('annotation');\n    };\n    /**\n     * @deprecated\n     * This method will be removed at G2 V4.1. Replaced by {@link #guide()}\n     */\n    View.prototype.guide = function () {\n        console.warn('This method will be removed at G2 V4.1. Please use chart.annotation() instead.');\n        return this.annotation();\n    };\n    View.prototype.coordinate = function (type, coordinateCfg) {\n        // 提供语法糖，使用更简单\n        if (isString(type)) {\n            set(this.options, 'coordinate', { type: type, cfg: coordinateCfg });\n        }\n        else {\n            set(this.options, 'coordinate', type);\n        }\n        // 更新 coordinate 配置\n        this.coordinateController.update(this.options.coordinate);\n        return this.coordinateController;\n    };\n    /**\n     * @deprecated\n     * This method will be removed at G2 V4.1. Replaced by {@link #coordinate()}\n     */\n    View.prototype.coord = function (type, coordinateCfg) {\n        console.warn('This method will be removed at G2 V4.1. Please use chart.coordinate() instead.');\n        // @ts-ignore\n        return this.coordinate(type, coordinateCfg);\n    };\n    /**\n     * view 分面绘制。\n     *\n     * ```ts\n     * view.facet('rect', {\n     *   rowField: 'province',\n     *   columnField: 'category',\n     *   eachView: (innerView: View, facet?: FacetData) => {\n     *     innerView.line().position('city*sale');\n     *   },\n     * });\n     * ```\n     *\n     * @param type 分面类型\n     * @param cfg 分面配置， [[FacetCfgMap]]\n     * @returns View\n     */\n    View.prototype.facet = function (type, cfg) {\n        // 先销毁掉之前的分面\n        if (this.facetInstance) {\n            this.facetInstance.destroy();\n        }\n        // 创建新的分面\n        var Ctor = getFacet(type);\n        if (!Ctor) {\n            throw new Error(\"facet '\" + type + \"' is not exist!\");\n        }\n        this.facetInstance = new Ctor(this, __assign(__assign({}, cfg), { type: type }));\n        return this;\n    };\n    /*\n     * 开启或者关闭动画。\n     *\n     * ```ts\n     * view.animate(false);\n     * ```\n     *\n     * @param status 动画状态，true 表示开始，false 表示关闭\n     * @returns View\n     */\n    View.prototype.animate = function (status) {\n        set(this.options, 'animate', status);\n        return this;\n    };\n    /**\n     * 更新配置项，用于配置项式声明。\n     * @param options 配置项\n     */\n    View.prototype.updateOptions = function (options) {\n        this.clear(); // 清空\n        mix(this.options, options);\n        // 需要把已存在的 view 销毁，否则会重复创建\n        // 目前针对配置项还没有特别好的 view 更新机制，为了不影响主流流程，所以在这里直接销毁\n        this.views.forEach(function (view) { return view.destroy(); });\n        this.views = [];\n        this.initOptions();\n        // 初始化坐标系大小，保证 padding 计算正确\n        this.coordinateBBox = this.viewBBox;\n        return this;\n    };\n    /**\n     * 往 `view.options` 属性中存储配置项。\n     * @param name 属性名称\n     * @param opt 属性值\n     * @returns view\n     */\n    View.prototype.option = function (name, opt) {\n        // 对于内置的 option，避免覆盖。\n        // name 在原型上，说明可能是内置 API，存在 option 被覆盖的风险，不处理\n        if (View.prototype[name]) {\n            throw new Error(\"Can't use built in variable name \\\"\" + name + \"\\\", please change another one.\");\n        }\n        // 存入到 option 中\n        set(this.options, name, opt);\n        return this;\n    };\n    /**\n     * 设置主题。\n     *\n     * ```ts\n     * view.theme('dark'); // 'dark' 需要事先通过 `registerTheme()` 接口注册完成\n     *\n     * view.theme({ defaultColor: 'red' });\n     * ```\n     *\n     * @param theme 主题名或者主题配置\n     * @returns View\n     */\n    View.prototype.theme = function (theme) {\n        this.themeObject = isObject(theme) ? deepMix({}, this.themeObject, theme) : getTheme(theme);\n        return this;\n    };\n    /* end 一系列传入配置的 API */\n    /**\n     * Call the interaction based on the interaction name\n     *\n     * ```ts\n     * view.interaction('my-interaction', { extra: 'hello world' });\n     * ```\n     * 详细文档可以参考：https://g2.antv.vision/zh/docs/manual/tutorial/interaction\n     * @param name interaction name\n     * @param cfg interaction config\n     * @returns\n     */\n    View.prototype.interaction = function (name, cfg) {\n        var existInteraction = this.interactions[name];\n        // 存在则先销毁已有的\n        if (existInteraction) {\n            existInteraction.destroy();\n        }\n        // 新建交互实例\n        var interaction = createInteraction(name, this, cfg);\n        if (interaction) {\n            interaction.init();\n            this.interactions[name] = interaction;\n        }\n        return this;\n    };\n    /**\n     * 移除当前 View 的 interaction\n     * ```ts\n     * view.removeInteraction('my-interaction');\n     * ```\n     * @param name interaction name\n     */\n    View.prototype.removeInteraction = function (name) {\n        var existInteraction = this.interactions[name];\n        // 存在则先销毁已有的\n        if (existInteraction) {\n            existInteraction.destroy();\n            this.interactions[name] = undefined;\n        }\n    };\n    /**\n     * 修改数据，数据更新逻辑，数据更新仅仅影响当前这一层的 view\n     *\n     * ```ts\n     * view.changeData([{ city: '北京', sale: '200' }]);\n     * ```\n     *\n     * @param data\n     * @returns void\n     */\n    View.prototype.changeData = function (data) {\n        this.isDataChanged = true;\n        this.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA);\n        // 1. 保存数据\n        this.data(data);\n        // 2. 渲染\n        this.paint(true);\n        // 3. 遍历子 view 进行 change data\n        var views = this.views;\n        for (var i = 0, len = views.length; i < len; i++) {\n            var view = views[i];\n            // FIXME 子 view 有自己的数据的情况，该如何处理？\n            view.changeData(data);\n        }\n        this.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA);\n    };\n    /* View 管理相关的 API */\n    /**\n     * 创建子 view\n     *\n     * ```ts\n     * const innerView = view.createView({\n     *   start: { x: 0, y: 0 },\n     *   end: { x: 0.5, y: 0.5 },\n     *   padding: 8,\n     * });\n     * ```\n     *\n     * @param cfg\n     * @returns View\n     */\n    View.prototype.createView = function (cfg) {\n        // 将会在 4.1 版本中移除递归嵌套 view，仅仅只允许 chart - view 两层。\n        // 这个 API 理论上用户量不多，所以暂时不发大版本，所以先暂时打一个 warning。\n        if (this.parent && this.parent.parent) {\n            // 存在 3 层 结构了\n            console.warn('The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.');\n        }\n        // 子 view 共享 options 配置数据\n        var sharedOptions = {\n            data: this.options.data,\n            scales: clone(this.options.scales),\n            axes: clone(this.options.axes),\n            coordinate: clone(this.coordinateController.getOption()),\n            tooltip: clone(this.options.tooltip),\n            legends: clone(this.options.legends),\n            animate: this.options.animate,\n            visible: this.visible,\n        };\n        var v = new View(__assign(__assign({ parent: this, canvas: this.canvas, \n            // 子 view 共用三层 group\n            backgroundGroup: this.backgroundGroup.addGroup({ zIndex: GROUP_Z_INDEX.BG }), middleGroup: this.middleGroup.addGroup({ zIndex: GROUP_Z_INDEX.MID }), foregroundGroup: this.foregroundGroup.addGroup({ zIndex: GROUP_Z_INDEX.FORE }), theme: this.themeObject, padding: this.padding }, cfg), { options: __assign(__assign({}, sharedOptions), get(cfg, 'options', {})) }));\n        this.views.push(v);\n        return v;\n    };\n    /**\n     * @deprecated\n     * This method will be removed at G2 V4.1. Replaced by {@link #createView()}\n     */\n    View.prototype.view = function (cfg) {\n        console.warn('This method will be removed at G2 V4.1. Please use chart.createView() instead.');\n        return this.createView(cfg);\n    };\n    /**\n     * 删除一个子 view\n     * @param view\n     * @return removedView\n     */\n    View.prototype.removeView = function (view) {\n        var removedView = remove(this.views, function (v) { return v === view; })[0];\n        if (removedView) {\n            removedView.destroy();\n        }\n        return removedView;\n    };\n    /* end View 管理相关的 API */\n    // 一些 get 方法\n    /**\n     * 获取当前坐标系实例。\n     * @returns [[Coordinate]]\n     */\n    View.prototype.getCoordinate = function () {\n        return this.coordinateInstance;\n    };\n    /**\n     * 获取当前 view 的主题配置。\n     * @returns themeObject\n     */\n    View.prototype.getTheme = function () {\n        return this.themeObject;\n    };\n    /**\n     * 获得 x 轴字段的 scale 实例。\n     * @returns view 中 Geometry 对于的 x scale\n     */\n    View.prototype.getXScale = function () {\n        // 拿第一个 Geometry 的 X scale\n        // 隐藏逻辑：一个 view 中的 Geometry 必须 x 字段一致\n        var g = this.geometries[0];\n        return g ? g.getXScale() : null;\n    };\n    /**\n     * 获取 y 轴字段的 scales 实例。\n     * @returns view 中 Geometry 对于的 y scale 数组\n     */\n    View.prototype.getYScales = function () {\n        // 拿到所有的 Geometry 的 Y scale，然后去重\n        var tmpMap = {};\n        return this.geometries.map(function (g) {\n            var yScale = g.getYScale();\n            var field = yScale.field;\n            if (!tmpMap[field]) {\n                tmpMap[field] = true;\n                return yScale;\n            }\n        });\n    };\n    /**\n     * 获取 x 轴或者 y 轴对应的所有 scale 实例。\n     * @param dimType x | y\n     * @returns x 轴或者 y 轴对应的所有 scale 实例。\n     */\n    View.prototype.getScalesByDim = function (dimType) {\n        var geometries = this.geometries;\n        var scales = {};\n        for (var i = 0, len = geometries.length; i < len; i++) {\n            var geometry = geometries[i];\n            var scale = dimType === 'x' ? geometry.getXScale() : geometry.getYScale();\n            if (scale && !scales[scale.field]) {\n                scales[scale.field] = scale;\n            }\n        }\n        return scales;\n    };\n    /**\n     * 根据字段名去获取 scale 实例。\n     * @param field 数据字段名称\n     * @param key id\n     */\n    View.prototype.getScaleByField = function (field, key) {\n        var defaultKey = key ? key : this.getScaleKey(field);\n        // 调用根节点 view 的方法获取\n        return this.getRootView().scalePool.getScale(defaultKey);\n    };\n    /**\n     * 返回所有配置信息。\n     * @returns 所有的 view API 配置。\n     */\n    View.prototype.getOptions = function () {\n        return this.options;\n    };\n    /**\n     * 获取 view 的数据（过滤后的数据）。\n     * @returns 处理过滤器之后的数据。\n     */\n    View.prototype.getData = function () {\n        return this.filteredData;\n    };\n    /**\n     * 获得绘制的层级 group。\n     * @param layer 层级名称。\n     * @returns 对应层级的 Group。\n     */\n    View.prototype.getLayer = function (layer) {\n        return layer === LAYER.BG\n            ? this.backgroundGroup\n            : layer === LAYER.MID\n                ? this.middleGroup\n                : layer === LAYER.FORE\n                    ? this.foregroundGroup\n                    : this.foregroundGroup;\n    };\n    /**\n     * 对外暴露方法，判断一个点是否在绘图区域（即坐标系范围）内部。\n     * @param point 坐标点\n     */\n    View.prototype.isPointInPlot = function (point) {\n        return isPointInCoordinate(this.getCoordinate(), point);\n    };\n    /**\n     * 获得所有的 legend 对应的 attribute 实例。\n     * @returns 维度字段的 Attribute 数组\n     */\n    View.prototype.getLegendAttributes = function () {\n        return flatten(this.geometries.map(function (g) { return g.getGroupAttributes(); }));\n    };\n    /**\n     * 获取所有的分组字段的 scale 实例。\n     * @returns 获得分组字段的 scale 实例数组。\n     */\n    View.prototype.getGroupScales = function () {\n        // 拿到所有的 Geometry 的 分组字段 scale，然后打平去重\n        var scales = this.geometries.map(function (g) { return g.getGroupScales(); });\n        return uniq(flatten(scales));\n    };\n    /**\n     * 获取 G.Canvas 实例。\n     * @returns G.Canvas 画布实例。\n     */\n    View.prototype.getCanvas = function () {\n        return this.getRootView().canvas;\n    };\n    /**\n     * 获得根节点 view。\n     */\n    View.prototype.getRootView = function () {\n        var v = this;\n        while (true) {\n            if (v.parent) {\n                v = v.parent;\n                continue;\n            }\n            break;\n        }\n        return v;\n    };\n    /**\n     * 获取该数据在可视化后，对应的画布坐标点。\n     * @param data 原始数据记录\n     * @returns 对应的画布坐标点\n     */\n    View.prototype.getXY = function (data) {\n        var coordinate = this.getCoordinate();\n        var xScales = this.getScalesByDim('x');\n        var yScales = this.getScalesByDim('y');\n        var x;\n        var y;\n        each(data, function (value, key) {\n            if (xScales[key]) {\n                x = xScales[key].scale(value);\n            }\n            if (yScales[key]) {\n                y = yScales[key].scale(value);\n            }\n        });\n        if (!isNil(x) && !isNil(y)) {\n            return coordinate.convert({ x: x, y: y });\n        }\n    };\n    /**\n     * 获取 name 对应的 controller 实例\n     * @param name\n     */\n    View.prototype.getController = function (name) {\n        return find(this.controllers, function (c) { return c.name === name; });\n    };\n    /**\n     * 显示 point 坐标点对应的 tooltip。\n     * @param point 画布坐标点\n     * @returns View\n     */\n    View.prototype.showTooltip = function (point) {\n        var tooltip = this.getController('tooltip');\n        if (tooltip) {\n            tooltip.showTooltip(point);\n        }\n        return this;\n    };\n    /**\n     * 隐藏 tooltip。\n     * @returns View\n     */\n    View.prototype.hideTooltip = function () {\n        var tooltip = this.getController('tooltip');\n        if (tooltip) {\n            tooltip.hideTooltip();\n        }\n        return this;\n    };\n    /**\n     * 将 tooltip 锁定到当前位置不能移动。\n     * @returns View\n     */\n    View.prototype.lockTooltip = function () {\n        var tooltip = this.getController('tooltip');\n        if (tooltip) {\n            tooltip.lockTooltip();\n        }\n        return this;\n    };\n    /**\n     * 将 tooltip 锁定解除。\n     * @returns View\n     */\n    View.prototype.unlockTooltip = function () {\n        var tooltip = this.getController('tooltip');\n        if (tooltip) {\n            tooltip.unlockTooltip();\n        }\n        return this;\n    };\n    /**\n     * 是否锁定 tooltip。\n     * @returns 是否锁定\n     */\n    View.prototype.isTooltipLocked = function () {\n        var tooltip = this.getController('tooltip');\n        return tooltip && tooltip.isTooltipLocked();\n    };\n    /**\n     * 获取当前 point 对应的 tooltip 数据项。\n     * @param point 坐标点\n     * @returns tooltip 数据项\n     */\n    View.prototype.getTooltipItems = function (point) {\n        var tooltip = this.getController('tooltip');\n        return tooltip ? tooltip.getTooltipItems(point) : [];\n    };\n    /**\n     * 获取逼近的点的数据集合\n     * @param point 当前坐标点\n     * @returns  数据\n     */\n    View.prototype.getSnapRecords = function (point) {\n        var geometries = this.geometries;\n        var rst = [];\n        for (var i = 0, len = geometries.length; i < len; i++) {\n            var geom = geometries[i];\n            var dataArray = geom.dataArray;\n            geom.sort(dataArray); // 先进行排序，便于 tooltip 查找\n            var record = void 0;\n            for (var j = 0, dataLen = dataArray.length; j < dataLen; j++) {\n                var data = dataArray[j];\n                record = findDataByPoint(point, data, geom);\n                if (record) {\n                    rst.push(record);\n                }\n            }\n        }\n        // 同样递归处理子 views\n        var views = this.views;\n        for (var i = 0, len = views.length; i < len; i++) {\n            var view = views[i];\n            var snapRecords = view.getSnapRecords(point);\n            rst = rst.concat(snapRecords);\n        }\n        return rst;\n    };\n    /**\n     * 获取所有的 pure component 组件，用于布局。\n     */\n    View.prototype.getComponents = function () {\n        var components = [];\n        var controllers = this.controllers;\n        for (var i = 0, len = controllers.length; i < len; i++) {\n            var controller = controllers[i];\n            components = components.concat(controller.getComponents());\n        }\n        return components;\n    };\n    /**\n     * 将 data 数据进行过滤。\n     * @param data\n     * @returns 过滤之后的数据\n     */\n    View.prototype.filterData = function (data) {\n        var filters = this.options.filters;\n        // 不存在 filters，则不需要进行数据过滤\n        if (size(filters) === 0) {\n            return data;\n        }\n        // 存在过滤器，则逐个执行过滤，过滤器之间是 与 的关系\n        return filter(data, function (datum, idx) {\n            // 所有的 filter 字段\n            var fields = Object.keys(filters);\n            // 所有的条件都通过，才算通过\n            return fields.every(function (field) {\n                var condition = filters[field];\n                // condition 返回 true，则保留\n                return condition(datum[field], datum, idx);\n            });\n        });\n    };\n    /**\n     * 对某一个字段进行过滤\n     * @param field\n     * @param data\n     */\n    View.prototype.filterFieldData = function (field, data) {\n        var filters = this.options.filters;\n        var condition = get(filters, field);\n        if (isUndefined(condition)) {\n            return data;\n        }\n        return data.filter(function (datum, idx) { return condition(datum[field], datum, idx); });\n    };\n    /**\n     * 调整 coordinate 的坐标范围。\n     */\n    View.prototype.adjustCoordinate = function () {\n        var _a = this.getCoordinate(), curStart = _a.start, curEnd = _a.end;\n        var start = this.coordinateBBox.bl;\n        var end = this.coordinateBBox.tr;\n        // 在 defaultLayoutFn 中只会在 coordinateBBox 发生变化的时候会调用 adjustCoordinate()，所以不用担心被置位\n        if (isEqual(curStart, start) && isEqual(curEnd, end)) {\n            this.isCoordinateChanged = false;\n            // 如果大小没有变化则不更新\n            return;\n        }\n        this.isCoordinateChanged = true;\n        this.coordinateInstance = this.coordinateController.adjust(start, end);\n    };\n    View.prototype.paint = function (isUpdate) {\n        this.renderDataRecursive(isUpdate);\n        // 处理 sync scale 的逻辑\n        this.syncScale();\n        this.emit(VIEW_LIFE_CIRCLE.BEFORE_PAINT);\n        // 初始化图形、组件位置，计算 padding\n        this.renderPaddingRecursive(isUpdate);\n        // 布局图形、组件\n        this.renderLayoutRecursive(isUpdate);\n        // 背景色 shape\n        this.renderBackgroundStyleShape();\n        // 最终的绘制 render\n        this.renderPaintRecursive(isUpdate);\n        this.emit(VIEW_LIFE_CIRCLE.AFTER_PAINT);\n        this.isDataChanged = false; // 渲染完毕复位\n    };\n    /**\n     * 渲染背景样式的 shape。\n     * 放到 view 中创建的原因是让使用 view 绘制图形的时候，也能够处理背景色\n     */\n    View.prototype.renderBackgroundStyleShape = function () {\n        // 只有根节点才处理\n        if (this.parent) {\n            return;\n        }\n        var background = get(this.themeObject, 'background');\n        // 配置了背景色\n        if (background) {\n            // 1. 不存在则创建\n            if (!this.backgroundStyleRectShape) {\n                this.backgroundStyleRectShape = this.backgroundGroup.addShape('rect', {\n                    attrs: {},\n                    zIndex: -1,\n                    // 背景色 shape 不设置事件捕获\n                    capture: false,\n                });\n                this.backgroundStyleRectShape.toBack();\n            }\n            // 2. 有了 shape 之后设置背景，位置（更新的时候）\n            var _a = this.viewBBox, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n            this.backgroundStyleRectShape.attr({\n                fill: background,\n                x: x,\n                y: y,\n                width: width,\n                height: height,\n            });\n        }\n        else {\n            // 没有配置背景色\n            if (this.backgroundStyleRectShape) {\n                this.backgroundStyleRectShape.remove(true);\n                this.backgroundStyleRectShape = undefined;\n            }\n        }\n    };\n    /**\n     * 递归计算每个 view 的 padding 值，coordinateBBox 和 coordinateInstance\n     * @param isUpdate\n     */\n    View.prototype.renderPaddingRecursive = function (isUpdate) {\n        // 1. 子 view 大小相对 coordinateBBox，changeSize 的时候需要重新计算\n        this.calculateViewBBox();\n        // 2. 更新 coordinate\n        this.adjustCoordinate();\n        // 3. 初始化组件 component\n        this.initComponents(isUpdate);\n        // 4. 布局计算每隔 view 的 padding 值\n        // 4.1. 自动加 auto padding -> absolute padding，并且增加 appendPadding\n        this.autoPadding = calculatePadding(this).shrink(parsePadding(this.appendPadding));\n        // 4.2. 计算出新的 coordinateBBox，更新 Coordinate\n        // 这里必须保留，原因是后面子 view 的 viewBBox 或根据 parent 的 coordinateBBox\n        this.coordinateBBox = this.viewBBox.shrink(this.autoPadding.getPadding());\n        this.adjustCoordinate();\n        // 同样递归处理子 views\n        var views = this.views;\n        for (var i = 0, len = views.length; i < len; i++) {\n            var view = views[i];\n            view.renderPaddingRecursive(isUpdate);\n        }\n    };\n    /**\n     * 递归处理 view 的布局，最终是计算各个 view 的 coordinateBBox 和 coordinateInstance\n     * @param isUpdate\n     */\n    View.prototype.renderLayoutRecursive = function (isUpdate) {\n        // 1. 同步子 view padding\n        if (this.syncViewPadding) {\n            var syncPadding_1 = new PaddingCal();\n            // 所有的 view 的 autoPadding 指向同一个引用\n            this.views.forEach(function (v) {\n                v.autoPadding = syncPadding_1.max(v.autoPadding.getPadding());\n            });\n            // 更新 coordinate\n            this.views.forEach(function (v) {\n                v.coordinateBBox = v.viewBBox.shrink(v.autoPadding.getPadding());\n                v.adjustCoordinate();\n            });\n        }\n        // 3. 将 view 中的组件按照 view padding 移动到对应的位置\n        this.doLayout();\n        // 同样递归处理子 views\n        var views = this.views;\n        for (var i = 0, len = views.length; i < len; i++) {\n            var view = views[i];\n            view.renderLayoutRecursive(isUpdate);\n        }\n    };\n    /**\n     * 最终递归绘制组件和图形\n     * @param isUpdate\n     */\n    View.prototype.renderPaintRecursive = function (isUpdate) {\n        if (this.limitInPlot) {\n            var middleGroup = this.middleGroup;\n            var _a = getCoordinateClipCfg(this.coordinateInstance), type = _a.type, attrs = _a.attrs;\n            middleGroup.setClip({\n                type: type,\n                attrs: attrs,\n            });\n        }\n        // 1. 渲染几何标记\n        this.paintGeometries(isUpdate);\n        // 2. 绘制组件\n        this.renderComponents(isUpdate);\n        // 同样递归处理子 views\n        var views = this.views;\n        for (var i = 0, len = views.length; i < len; i++) {\n            var view = views[i];\n            view.renderPaintRecursive(isUpdate);\n        }\n    };\n    // end Get 方法\n    /**\n     * 创建 scale，递归到顶层 view 去创建和缓存 scale\n     * @param field\n     * @param data\n     * @param scaleDef\n     * @param key\n     */\n    View.prototype.createScale = function (field, data, scaleDef, key) {\n        // 1. 合并 field 对应的 scaleDef，合并原则是底层覆盖顶层（就近原则）\n        var currentScaleDef = get(this.options.scales, [field]);\n        var mergedScaleDef = __assign(__assign({}, currentScaleDef), scaleDef);\n        // 2. 是否存在父 view，在则递归，否则创建\n        if (this.parent) {\n            return this.parent.createScale(field, data, mergedScaleDef, key);\n        }\n        // 3. 在根节点 view 通过 scalePool 创建\n        return this.scalePool.createScale(field, data, mergedScaleDef, key);\n    };\n    /**\n     * 递归渲染中的数据处理\n     * @param isUpdate\n     */\n    View.prototype.renderDataRecursive = function (isUpdate) {\n        // 1. 处理数据\n        this.doFilterData();\n        // 2. 创建实例\n        this.createCoordinate();\n        // 3. 初始化 Geometry\n        this.initGeometries(isUpdate);\n        // 4. 处理分面逻辑，最终都是生成子 view 和 geometry\n        this.renderFacet(isUpdate);\n        // 同样递归处理子 views\n        var views = this.views;\n        for (var i = 0, len = views.length; i < len; i++) {\n            var view = views[i];\n            view.renderDataRecursive(isUpdate);\n        }\n    };\n    /**\n     * 计算 region，计算实际的像素范围坐标\n     * @private\n     */\n    View.prototype.calculateViewBBox = function () {\n        var x;\n        var y;\n        var width;\n        var height;\n        if (this.parent) {\n            var bbox = this.parent.coordinateBBox;\n            // 存在 parent， 那么就是通过父容器大小计算\n            x = bbox.x;\n            y = bbox.y;\n            width = bbox.width;\n            height = bbox.height;\n        }\n        else {\n            // 顶层容器，从 canvas 中取值 宽高\n            x = 0;\n            y = 0;\n            width = this.canvas.get('width');\n            height = this.canvas.get('height');\n        }\n        var _a = this.region, start = _a.start, end = _a.end;\n        // 根据 region 计算当前 view 的 bbox 大小。\n        var viewBBox = new BBox(x + width * start.x, y + height * start.y, width * (end.x - start.x), height * (end.y - start.y));\n        if (!this.viewBBox || !this.viewBBox.isEqual(viewBBox)) {\n            // viewBBox 发生变化的时候进行更新\n            this.viewBBox = new BBox(x + width * start.x, y + height * start.y, width * (end.x - start.x), height * (end.y - start.y));\n        }\n        // 初始的 coordinate bbox 大小\n        this.coordinateBBox = this.viewBBox;\n    };\n    /**\n     * 初始化事件机制：G 4.0 底层内置支持 name:event 的机制，那么只要所有组件都有自己的 name 即可。\n     *\n     * G2 的事件只是获取事件委托，然后在 view 嵌套结构中，形成事件冒泡机制。\n     * 当前 view 只委托自己 view 中的 Component 和 Geometry 事件，并向上冒泡\n     * @private\n     */\n    View.prototype.initEvents = function () {\n        // 三层 group 中的 shape 事件都会通过 G 冒泡上来的\n        this.foregroundGroup.on('*', this.onDelegateEvents);\n        this.middleGroup.on('*', this.onDelegateEvents);\n        this.backgroundGroup.on('*', this.onDelegateEvents);\n        this.canvas.on('*', this.onCanvasEvent);\n    };\n    /**\n     * 初始化插件\n     */\n    View.prototype.initComponentController = function () {\n        var usedControllers = this.usedControllers;\n        for (var i = 0, len = usedControllers.length; i < len; i++) {\n            var controllerName = usedControllers[i];\n            var Ctor = getComponentController(controllerName);\n            if (Ctor) {\n                this.controllers.push(new Ctor(this));\n            }\n        }\n    };\n    View.prototype.createViewEvent = function (evt) {\n        var shape = evt.shape, name = evt.name;\n        var data = shape ? shape.get('origin') : null;\n        // 事件在 view 嵌套中冒泡（暂不提供阻止冒泡的机制）\n        var e = new Event(this, evt, data);\n        e.type = name;\n        return e;\n    };\n    /**\n     * 处理 PLOT_EVENTS\n     * plot event 需要处理所有的基础事件，并判断是否在画布中，然后再决定是否要 emit。\n     * 对于 mouseenter、mouseleave 比较特殊，需要做一下数学比较。\n     * @param e\n     */\n    View.prototype.doPlotEvent = function (e) {\n        var type = e.type, x = e.x, y = e.y;\n        var point = { x: x, y: y };\n        var ALL_EVENTS = [\n            'mousedown',\n            'mouseup',\n            'mousemove',\n            'mouseleave',\n            'mousewheel',\n            'touchstart',\n            'touchmove',\n            'touchend',\n            'touchcancel',\n            'click',\n            'dblclick',\n            'contextmenu',\n        ];\n        if (ALL_EVENTS.includes(type)) {\n            var currentInPlot = this.isPointInPlot(point);\n            if (currentInPlot) {\n                var TYPE = \"plot:\" + type; // 组合 plot 事件\n                e.type = TYPE;\n                this.emit(TYPE, e);\n                if (type === 'mouseleave' || type === 'touchend') {\n                    // 在plot 内部却离开画布\n                    this.isPreMouseInPlot = false;\n                }\n            }\n            // 对于 mouseenter, mouseleave 的计算处理\n            if (type === 'mousemove' || type === 'touchmove') {\n                if (this.isPreMouseInPlot && !currentInPlot) {\n                    if (type === 'mousemove') {\n                        e.type = PLOT_EVENTS.MOUSE_LEAVE;\n                        this.emit(PLOT_EVENTS.MOUSE_LEAVE, e);\n                    }\n                    e.type = PLOT_EVENTS.LEAVE;\n                    this.emit(PLOT_EVENTS.LEAVE, e);\n                }\n                else if (!this.isPreMouseInPlot && currentInPlot) {\n                    if (type === 'mousemove') {\n                        e.type = PLOT_EVENTS.MOUSE_ENTER;\n                        this.emit(PLOT_EVENTS.MOUSE_ENTER, e);\n                    }\n                    e.type = PLOT_EVENTS.ENTER;\n                    this.emit(PLOT_EVENTS.ENTER, e);\n                }\n                // 赋新的状态值\n                this.isPreMouseInPlot = currentInPlot;\n            }\n            else if (type === 'mouseleave' || type === 'touchend') {\n                // 可能不在 currentInPlot 中\n                if (this.isPreMouseInPlot) {\n                    if (type === 'mouseleave') {\n                        e.type = PLOT_EVENTS.MOUSE_LEAVE;\n                        this.emit(PLOT_EVENTS.MOUSE_LEAVE, e);\n                    }\n                    e.type = PLOT_EVENTS.LEAVE;\n                    this.emit(PLOT_EVENTS.LEAVE, e);\n                    this.isPreMouseInPlot = false;\n                }\n            }\n        }\n    };\n    // view 生命周期 —— 渲染流程\n    /**\n     * 处理筛选器，筛选数据\n     * @private\n     */\n    View.prototype.doFilterData = function () {\n        var data = this.options.data;\n        this.filteredData = this.filterData(data);\n    };\n    /**\n     * 初始化 Geometries\n     * @private\n     */\n    View.prototype.initGeometries = function (isUpdate) {\n        // 初始化图形的之前，先创建 / 更新 scales\n        this.createOrUpdateScales();\n        // 实例化 Geometry，然后 view 将所有的 scale 管理起来\n        var coordinate = this.getCoordinate();\n        var scaleDefs = get(this.options, 'scales', {});\n        var geometries = this.geometries;\n        for (var i = 0, len = geometries.length; i < len; i++) {\n            var geometry = geometries[i];\n            // 保持 scales 引用不要变化\n            geometry.scales = this.getGeometryScales();\n            var cfg = {\n                coordinate: coordinate,\n                scaleDefs: scaleDefs,\n                data: this.filteredData,\n                theme: this.themeObject,\n                isDataChanged: this.isDataChanged,\n                isCoordinateChanged: this.isCoordinateChanged,\n            };\n            if (isUpdate) {\n                // 数据发生更新\n                geometry.update(cfg);\n            }\n            else {\n                geometry.init(cfg);\n            }\n        }\n        // Geometry 初始化之后，生成了 scale，然后进行调整 scale 配置\n        this.adjustScales();\n    };\n    /**\n     * 根据 Geometry 的所有字段创建 scales\n     * 如果存在，则更新，不存在则创建\n     */\n    View.prototype.createOrUpdateScales = function () {\n        var fields = this.getScaleFields();\n        var groupedFields = this.getGroupedFields();\n        var _a = this.getOptions(), data = _a.data, _b = _a.scales, scales = _b === void 0 ? {} : _b;\n        var filteredData = this.filteredData;\n        for (var i = 0, len = fields.length; i < len; i++) {\n            var field = fields[i];\n            var scaleDef = scales[field];\n            // 调用方法，递归去创建\n            var key = this.getScaleKey(field);\n            this.createScale(field, \n            // 分组字段的 scale 使用未过滤的数据创建\n            groupedFields.includes(field) ? data : filteredData, scaleDef, key);\n            // 缓存从当前 view 创建的 scale key\n            this.createdScaleKeys.set(key, true);\n        }\n    };\n    /**\n     * 处理 scale 同步逻辑\n     */\n    View.prototype.syncScale = function () {\n        // 最终调用 root view 的\n        this.getRootView().scalePool.sync();\n    };\n    /**\n     * 获得 Geometry 中的 scale 对象\n     */\n    View.prototype.getGeometryScales = function () {\n        var fields = this.getScaleFields();\n        var scales = {};\n        for (var i = 0; i < fields.length; i++) {\n            var field = fields[i];\n            scales[field] = this.getScaleByField(field);\n        }\n        return scales;\n    };\n    View.prototype.getScaleFields = function () {\n        var fields = [];\n        var tmpMap = {};\n        var geometries = this.geometries;\n        for (var i = 0; i < geometries.length; i++) {\n            var geometry = geometries[i];\n            var geometryScales = geometry.getScaleFields();\n            uniq(geometryScales, fields, tmpMap);\n        }\n        return fields;\n    };\n    View.prototype.getGroupedFields = function () {\n        var fields = [];\n        var tmpMap = {};\n        var geometries = this.geometries;\n        for (var i = 0; i < geometries.length; i++) {\n            var geometry = geometries[i];\n            var groupFields = geometry.getGroupFields();\n            uniq(groupFields, fields, tmpMap);\n        }\n        return fields;\n    };\n    /**\n     * 调整 scale 配置\n     * @private\n     */\n    View.prototype.adjustScales = function () {\n        // 调整目前包括：\n        // 分类 scale，调整 range 范围\n        this.adjustCategoryScaleRange();\n    };\n    /**\n     * 调整分类 scale 的 range，防止超出坐标系外面\n     * @private\n     */\n    View.prototype.adjustCategoryScaleRange = function () {\n        var _this = this;\n        var xyScales = __spreadArrays([this.getXScale()], this.getYScales()).filter(function (e) { return !!e; });\n        var coordinate = this.getCoordinate();\n        var scaleOptions = this.options.scales;\n        each(xyScales, function (scale) {\n            var field = scale.field, values = scale.values, isCategory = scale.isCategory, isIdentity = scale.isIdentity;\n            // 分类或者 identity 的 scale 才进行处理\n            if (isCategory || isIdentity) {\n                // 存在 value 值，且用户没有配置 range 配置\n                if (values && !get(scaleOptions, [field, 'range'])) {\n                    var count = values.length;\n                    var range = void 0;\n                    if (count === 1) {\n                        range = [0.5, 1]; // 只有一个分类时,防止计算出现 [0.5,0.5] 的状态\n                    }\n                    else {\n                        var widthRatio = 1;\n                        var offset = 0;\n                        if (isFullCircle(coordinate)) {\n                            if (!coordinate.isTransposed) {\n                                range = [0, 1 - 1 / count];\n                            }\n                            else {\n                                widthRatio = get(_this.theme, 'widthRatio.multiplePie', 1 / 1.3);\n                                offset = (1 / count) * widthRatio;\n                                range = [offset / 2, 1 - offset / 2];\n                            }\n                        }\n                        else {\n                            offset = 1 / count / 2; // 两边留下分类空间的一半\n                            range = [offset, 1 - offset]; // 坐标轴最前面和最后面留下空白防止绘制柱状图时\n                        }\n                    }\n                    // 更新 range\n                    scale.range = range;\n                }\n            }\n        });\n    };\n    /**\n     * 根据 options 配置、Geometry 字段配置，自动生成 components\n     * @param isUpdate 是否是更新\n     * @private\n     */\n    View.prototype.initComponents = function (isUpdate) {\n        // 先全部清空，然后 render\n        var controllers = this.controllers;\n        for (var i = 0; i < controllers.length; i++) {\n            var controller = controllers[i];\n            // 更新则走更新逻辑；否则清空载重绘\n            if (isUpdate) {\n                controller.update();\n            }\n            else {\n                controller.clear();\n                controller.render();\n            }\n        }\n    };\n    View.prototype.doLayout = function () {\n        this.layoutFunc(this);\n    };\n    /**\n     * 创建坐标系\n     * @private\n     */\n    View.prototype.createCoordinate = function () {\n        var start = this.coordinateBBox.bl;\n        var end = this.coordinateBBox.tr;\n        this.coordinateInstance = this.coordinateController.create(start, end);\n    };\n    /**\n     * 根据 options 配置自动渲染 geometry\n     * @private\n     */\n    View.prototype.paintGeometries = function (isUpdate) {\n        var doAnimation = this.options.animate;\n        // geometry 的 paint 阶段\n        var coordinate = this.getCoordinate();\n        var canvasRegion = {\n            x: this.viewBBox.x,\n            y: this.viewBBox.y,\n            minX: this.viewBBox.minX,\n            minY: this.viewBBox.minY,\n            maxX: this.viewBBox.maxX,\n            maxY: this.viewBBox.maxY,\n            width: this.viewBBox.width,\n            height: this.viewBBox.height,\n        };\n        var geometries = this.geometries;\n        for (var i = 0; i < geometries.length; i++) {\n            var geometry = geometries[i];\n            geometry.coordinate = coordinate;\n            geometry.canvasRegion = canvasRegion;\n            if (!doAnimation) {\n                // 如果 view 不执行动画，那么 view 下所有的 geometry 都不执行动画\n                geometry.animate(false);\n            }\n            geometry.paint(isUpdate);\n        }\n    };\n    /**\n     * 最后的绘制组件\n     * @param isUpdate\n     */\n    View.prototype.renderComponents = function (isUpdate) {\n        // 先全部清空，然后 render\n        for (var i = 0; i < this.getComponents().length; i++) {\n            var co = this.getComponents()[i];\n            co.component.render();\n        }\n    };\n    /**\n     * 渲染分面，会在其中进行数据分面，然后进行子 view 创建\n     * @param isUpdate\n     */\n    View.prototype.renderFacet = function (isUpdate) {\n        if (this.facetInstance) {\n            if (isUpdate) {\n                this.facetInstance.update();\n            }\n            else {\n                this.facetInstance.clear();\n                // 计算分面数据\n                this.facetInstance.init();\n                // 渲染组件和 views\n                this.facetInstance.render();\n            }\n        }\n    };\n    View.prototype.initOptions = function () {\n        var _this = this;\n        var _a = this.options, _b = _a.geometries, geometries = _b === void 0 ? [] : _b, _c = _a.interactions, interactions = _c === void 0 ? [] : _c, _d = _a.views, views = _d === void 0 ? [] : _d, _e = _a.annotations, annotations = _e === void 0 ? [] : _e, coordinate = _a.coordinate, events = _a.events, facets = _a.facets;\n        // 设置坐标系\n        if (this.coordinateController) {\n            // 更新 coordinate controller\n            coordinate && this.coordinateController.update(coordinate);\n        }\n        else {\n            // 创建 coordinate controller\n            this.coordinateController = new CoordinateController(coordinate);\n        }\n        // 创建 geometry 实例\n        for (var i = 0; i < geometries.length; i++) {\n            var geometryOption = geometries[i];\n            this.createGeometry(geometryOption);\n        }\n        // 创建 interactions 实例\n        for (var j = 0; j < interactions.length; j++) {\n            var interactionOption = interactions[j];\n            var type = interactionOption.type, cfg = interactionOption.cfg;\n            this.interaction(type, cfg);\n        }\n        // 创建 view 实例\n        for (var k = 0; k < views.length; k++) {\n            var viewOption = views[k];\n            this.createView(viewOption);\n        }\n        // 设置 annotation\n        var annotationComponent = this.getController('annotation');\n        for (var l = 0; l < annotations.length; l++) {\n            var annotationOption = annotations[l];\n            annotationComponent.annotation(annotationOption);\n        }\n        // 设置 events\n        if (events) {\n            each(events, function (eventCallback, eventName) {\n                _this.on(eventName, eventCallback);\n            });\n        }\n        if (facets) {\n            each(facets, function (facet) {\n                var type = facet.type, rest = __rest(facet, [\"type\"]);\n                _this.facet(type, rest);\n            });\n        }\n    };\n    View.prototype.createGeometry = function (geometryOption) {\n        var type = geometryOption.type, _a = geometryOption.cfg, cfg = _a === void 0 ? {} : _a;\n        if (this[type]) {\n            var geometry_1 = this[type](cfg);\n            each(geometryOption, function (v, k) {\n                if (isFunction(geometry_1[k])) {\n                    geometry_1[k](v);\n                }\n            });\n        }\n    };\n    /**\n     * scale key 的创建方式\n     * @param field\n     */\n    View.prototype.getScaleKey = function (field) {\n        return this.id + \"-\" + field;\n    };\n    return View;\n}(Base));\nexport { View };\n/**\n * 注册 geometry 组件\n * @param name\n * @param Ctor\n * @returns Geometry\n */\nexport function registerGeometry(name, Ctor) {\n    // 语法糖，在 view API 上增加原型方法\n    View.prototype[name.toLowerCase()] = function (cfg) {\n        if (cfg === void 0) { cfg = {}; }\n        var props = __assign({ \n            /** 图形容器 */\n            container: this.middleGroup.addGroup(), labelsContainer: this.foregroundGroup.addGroup() }, cfg);\n        var geometry = new Ctor(props);\n        this.geometries.push(geometry);\n        return geometry;\n    };\n}\nexport default View;\n//# sourceMappingURL=view.js.map","import { __assign, __extends } from \"tslib\";\nimport { debounce, each, isString } from '@antv/util';\nimport { GROUP_Z_INDEX, VIEW_LIFE_CIRCLE } from '../constant';\nimport { getEngine } from '../engine';\nimport { createDom, getChartSize, removeDom, modifyCSS } from '../util/dom';\nimport View from './view';\n/**\n * Chart 类，是使用 G2 进行绘图的入口。\n */\nvar Chart = /** @class */ (function (_super) {\n    __extends(Chart, _super);\n    // @ts-ignore\n    function Chart(props) {\n        var _this = this;\n        var container = props.container, width = props.width, height = props.height, _a = props.autoFit, autoFit = _a === void 0 ? false : _a, padding = props.padding, appendPadding = props.appendPadding, _b = props.renderer, renderer = _b === void 0 ? 'canvas' : _b, pixelRatio = props.pixelRatio, _c = props.localRefresh, localRefresh = _c === void 0 ? true : _c, _d = props.visible, visible = _d === void 0 ? true : _d, _e = props.supportCSSTransform, supportCSSTransform = _e === void 0 ? false : _e, _f = props.defaultInteractions, defaultInteractions = _f === void 0 ? ['tooltip', 'legend-filter', 'legend-active', 'continuous-filter', 'ellipsis-text'] : _f, options = props.options, limitInPlot = props.limitInPlot, theme = props.theme, syncViewPadding = props.syncViewPadding;\n        var ele = isString(container) ? document.getElementById(container) : container;\n        // 生成内部正式绘制的 div 元素\n        var wrapperElement = createDom('<div style=\"position:relative;\"></div>');\n        ele.appendChild(wrapperElement);\n        // if autoFit, use the container size, to avoid the graph render twice.\n        var size = getChartSize(ele, autoFit, width, height);\n        var G = getEngine(renderer);\n        var canvas = new G.Canvas(__assign({ container: wrapperElement, pixelRatio: pixelRatio,\n            localRefresh: localRefresh,\n            supportCSSTransform: supportCSSTransform }, size));\n        // 调用 view 的创建\n        _this = _super.call(this, {\n            parent: null,\n            canvas: canvas,\n            // create 3 group layers for views.\n            backgroundGroup: canvas.addGroup({ zIndex: GROUP_Z_INDEX.BG }),\n            middleGroup: canvas.addGroup({ zIndex: GROUP_Z_INDEX.MID }),\n            foregroundGroup: canvas.addGroup({ zIndex: GROUP_Z_INDEX.FORE }),\n            padding: padding,\n            appendPadding: appendPadding,\n            visible: visible,\n            options: options,\n            limitInPlot: limitInPlot,\n            theme: theme,\n            syncViewPadding: syncViewPadding,\n        }) || this;\n        /**\n         * when container size changed, change chart size props, and re-render.\n         */\n        _this.onResize = debounce(function () {\n            _this.forceFit();\n        }, 300);\n        _this.ele = ele;\n        _this.canvas = canvas;\n        _this.width = size.width;\n        _this.height = size.height;\n        _this.autoFit = autoFit;\n        _this.localRefresh = localRefresh;\n        _this.renderer = renderer;\n        _this.wrapperElement = wrapperElement;\n        // 自适应大小\n        _this.updateCanvasStyle();\n        _this.bindAutoFit();\n        _this.initDefaultInteractions(defaultInteractions);\n        return _this;\n    }\n    Chart.prototype.initDefaultInteractions = function (interactions) {\n        var _this = this;\n        each(interactions, function (interaction) {\n            _this.interaction(interaction);\n        });\n    };\n    /**\n     * 改变图表大小，同时重新渲染。\n     * @param width 图表宽度\n     * @param height 图表高度\n     * @returns\n     */\n    Chart.prototype.changeSize = function (width, height) {\n        // 如果宽高一致，那么 changeSize 不执行任何操作\n        if (this.width === width && this.height === height) {\n            return this;\n        }\n        this.emit(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE);\n        this.width = width;\n        this.height = height;\n        this.canvas.changeSize(width, height);\n        // 重新渲染\n        this.render(true);\n        this.emit(VIEW_LIFE_CIRCLE.AFTER_CHANGE_SIZE);\n        return this;\n    };\n    /**\n     * 销毁图表，同时解绑事件，销毁创建的 G.Canvas 实例。\n     * @returns void\n     */\n    Chart.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.unbindAutoFit();\n        this.canvas.destroy();\n        removeDom(this.wrapperElement);\n        this.wrapperElement = null;\n    };\n    /**\n     * 显示或隐藏图表\n     * @param visible 是否可见，true 表示显示，false 表示隐藏\n     * @returns\n     */\n    Chart.prototype.changeVisible = function (visible) {\n        _super.prototype.changeVisible.call(this, visible); // 需要更新 visible 变量\n        this.wrapperElement.style.display = visible ? '' : 'none';\n        return this;\n    };\n    /**\n     * 自动根据容器大小 resize 画布\n     */\n    Chart.prototype.forceFit = function () {\n        // skip if already destroyed\n        if (!this.destroyed) {\n            // 注意第二参数用 true，意思是即时 autoFit = false，forceFit() 调用之后一样是适配容器\n            var _a = getChartSize(this.ele, true, this.width, this.height), width = _a.width, height = _a.height;\n            this.changeSize(width, height);\n        }\n    };\n    Chart.prototype.updateCanvasStyle = function () {\n        modifyCSS(this.canvas.get('el'), {\n            display: 'inline-block',\n            verticalAlign: 'middle',\n        });\n    };\n    Chart.prototype.bindAutoFit = function () {\n        if (this.autoFit) {\n            window.addEventListener('resize', this.onResize);\n        }\n    };\n    Chart.prototype.unbindAutoFit = function () {\n        if (this.autoFit) {\n            window.removeEventListener('resize', this.onResize);\n        }\n    };\n    return Chart;\n}(View));\nexport default Chart;\n//# sourceMappingURL=chart.js.map","import { each } from '@antv/util';\n/**\n * Component Controller 规范需要定义的基类\n * 1. 规范的 option 输入\n * 2. 统一的信息获取 API\n * 3. 明确定义的组件事件（名称、数据）\n */\nvar Controller = /** @class */ (function () {\n    function Controller(view) {\n        /** 是否可见 */\n        this.visible = true;\n        /** 所有的 component */\n        this.components = [];\n        this.view = view;\n    }\n    /**\n     * clear\n     * @param includeOption 是否清空 option 配置项（used in annotation）\n     */\n    Controller.prototype.clear = function (includeOption) {\n        // destroy all components\n        each(this.components, function (co) {\n            co.component.destroy();\n        });\n        // clear all component instance\n        this.components = [];\n    };\n    /**\n     * destroy the component\n     */\n    Controller.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * get all components\n     * @returns components array\n     */\n    Controller.prototype.getComponents = function () {\n        return this.components;\n    };\n    /**\n     * change visibility of component\n     * @param visible\n     */\n    Controller.prototype.changeVisible = function (visible) {\n        if (this.visible === visible) {\n            return;\n        }\n        this.components.forEach(function (co) {\n            if (visible) {\n                co.component.show();\n            }\n            else {\n                co.component.hide();\n            }\n        });\n        this.visible = visible;\n    };\n    return Controller;\n}());\nexport { Controller };\n//# sourceMappingURL=base.js.map","var ANIMATIONS_MAP = {};\n/**\n * 根据名称获取对应的动画执行函数\n * @param type 动画函数名称\n */\nexport function getAnimation(type) {\n    return ANIMATIONS_MAP[type.toLowerCase()];\n}\n/**\n * 注册动画执行函数\n * @param type 动画执行函数名称\n * @param animation 动画执行函数\n */\nexport function registerAnimation(type, animation) {\n    ANIMATIONS_MAP[type.toLowerCase()] = animation;\n}\n//# sourceMappingURL=index.js.map","import { __assign } from \"tslib\";\nimport { deepMix, get, isFunction } from '@antv/util';\nimport { FIELD_ORIGIN } from '../constant';\nimport { getAnimation } from './animation';\n// 默认的动画参数配置\nexport var DEFAULT_ANIMATE_CFG = {\n    appear: {\n        duration: 450,\n        easing: 'easeQuadOut',\n    },\n    update: {\n        duration: 400,\n        easing: 'easeQuadInOut',\n    },\n    enter: {\n        duration: 400,\n        easing: 'easeQuadInOut',\n    },\n    leave: {\n        duration: 350,\n        easing: 'easeQuadIn',\n    },\n};\n// 各个 Geometry 默认的动画执行函数\nvar GEOMETRY_ANIMATE_CFG = {\n    interval: function (coordinate) {\n        return {\n            enter: {\n                animation: coordinate.isRect ? (coordinate.isTransposed ? 'scale-in-x' : 'scale-in-y') : 'fade-in',\n            },\n            update: {\n                animation: coordinate.isPolar && coordinate.isTransposed ? 'sector-path-update' : null,\n            },\n            leave: {\n                animation: 'fade-out',\n            },\n        };\n    },\n    line: {\n        enter: {\n            animation: 'fade-in',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n    path: {\n        enter: {\n            animation: 'fade-in',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n    point: {\n        appear: {\n            animation: 'zoom-in',\n        },\n        enter: {\n            animation: 'zoom-in',\n        },\n        leave: {\n            animation: 'zoom-out',\n        },\n    },\n    area: {\n        enter: {\n            animation: 'fade-in',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n    polygon: {\n        enter: {\n            animation: 'fade-in',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n    schema: {\n        enter: {\n            animation: 'fade-in',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n    edge: {\n        enter: {\n            animation: 'fade-in',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n    label: {\n        appear: {\n            animation: 'fade-in',\n            delay: 450,\n        },\n        enter: {\n            animation: 'fade-in',\n        },\n        update: {\n            animation: 'position-update',\n        },\n        leave: {\n            animation: 'fade-out',\n        },\n    },\n};\n// 各个 Geometry 默认的群组出场动画\nvar GEOMETRY_GROUP_APPEAR_ANIMATION = {\n    line: function () {\n        return {\n            animation: 'wave-in',\n        };\n    },\n    area: function () {\n        return {\n            animation: 'wave-in',\n        };\n    },\n    path: function () {\n        return {\n            animation: 'fade-in',\n        };\n    },\n    interval: function (coordinate) {\n        var animation;\n        if (coordinate.isRect) {\n            animation = coordinate.isTransposed ? 'grow-in-x' : 'grow-in-y';\n        }\n        else {\n            animation = 'grow-in-xy';\n            if (coordinate.isPolar && coordinate.isTransposed) {\n                // pie chart\n                animation = 'wave-in';\n            }\n        }\n        return {\n            animation: animation,\n        };\n    },\n    schema: function (coordinate) {\n        var animation;\n        if (coordinate.isRect) {\n            animation = coordinate.isTransposed ? 'grow-in-x' : 'grow-in-y';\n        }\n        else {\n            animation = 'grow-in-xy';\n        }\n        return {\n            animation: animation,\n        };\n    },\n    polygon: function () {\n        return {\n            animation: 'fade-in',\n            duration: 500,\n        };\n    },\n    edge: function () {\n        return {\n            animation: 'fade-in',\n        };\n    },\n};\n// 解析用户的动画配置\nfunction parseAnimateConfig(animateCfg, data) {\n    return {\n        delay: isFunction(animateCfg.delay) ? animateCfg.delay(data) : animateCfg.delay,\n        easing: isFunction(animateCfg.easing) ? animateCfg.easing(data) : animateCfg.easing,\n        duration: isFunction(animateCfg.duration) ? animateCfg.duration(data) : animateCfg.duration,\n        callback: animateCfg.callback,\n    };\n}\n/**\n * @ignore\n * 获取 elementName 对应的动画配置，当声明了 `animateType`，则返回 `animateType` 对应的动画配置\n * @param elementName 元素名称\n * @param coordinate 做表弟类型\n * @param animateType 可选，动画类型\n */\nexport function getDefaultAnimateCfg(elementName, coordinate, animateType) {\n    var animateCfg = GEOMETRY_ANIMATE_CFG[elementName];\n    if (animateCfg) {\n        if (isFunction(animateCfg)) {\n            animateCfg = animateCfg(coordinate);\n        }\n        animateCfg = deepMix({}, DEFAULT_ANIMATE_CFG, animateCfg);\n        if (animateType) {\n            return animateCfg[animateType];\n        }\n    }\n    return animateCfg;\n}\n/**\n * @ignore\n * 工具函数\n * 根据用户传入的配置为 shape 执行动画\n * @param shape 执行动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外的信息\n */\nexport function doAnimate(shape, animateCfg, cfg) {\n    var data = get(shape.get('origin'), 'data', FIELD_ORIGIN);\n    var animation = animateCfg.animation; // 获取动画执行函数\n    var parsedAnimateCfg = parseAnimateConfig(animateCfg, data);\n    if (animation) {\n        // 用户声明了动画执行函数\n        var animateFunction = getAnimation(animation);\n        if (animateFunction) {\n            animateFunction(shape, parsedAnimateCfg, cfg);\n        }\n    }\n    else {\n        // 没有声明，则根据 toAttrs 做差值动画\n        shape.animate(cfg.toAttrs, parsedAnimateCfg);\n    }\n}\n/**\n * @ignore\n * 执行 Geometry 群组入场动画\n * @param container 执行群组动画的图形元素\n * @param animateCfg 动画配置\n * @param geometryType geometry 类型\n * @param coordinate 坐标系对象\n * @param minYPoint y 轴最小值对应的画布坐标点\n */\nexport function doGroupAppearAnimate(container, animateCfg, geometryType, coordinate, minYPoint) {\n    if (GEOMETRY_GROUP_APPEAR_ANIMATION[geometryType]) {\n        var defaultCfg = GEOMETRY_GROUP_APPEAR_ANIMATION[geometryType](coordinate);\n        var animation = getAnimation(get(defaultCfg, 'animation', ''));\n        if (animation) {\n            var cfg = __assign(__assign(__assign({}, DEFAULT_ANIMATE_CFG.appear), defaultCfg), animateCfg);\n            container.stopAnimate(); // 先结束当前 container 动画\n            animation(container, cfg, {\n                coordinate: coordinate,\n                minYPoint: minYPoint,\n                toAttrs: null,\n            });\n        }\n    }\n}\n//# sourceMappingURL=index.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, each, get, isArray, isEmpty, isEqual, isFunction, isString } from '@antv/util';\nimport { propagationDelegate } from '@antv/component/lib/util/event';\nimport { doAnimate } from '../../animate';\nimport Base from '../../base';\nimport { getReplaceAttrs } from '../../util/graphics';\nimport { GEOMETRY_LIFE_CIRCLE } from '../../constant';\n/**\n * Element 图形元素。\n * 定义：在 G2 中，我们会将数据通过图形语法映射成不同的图形，比如点图，数据集中的每条数据会对应一个点，柱状图每条数据对应一个柱子，线图则是一组数据对应一条折线，Element 即一条/一组数据对应的图形元素，它代表一条数据或者一个数据集，在图形层面，它可以是单个 Shape 也可以是多个 Shape，我们称之为图形元素。\n */\nvar Element = /** @class */ (function (_super) {\n    __extends(Element, _super);\n    function Element(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        // 存储当前开启的状态\n        _this.states = [];\n        var shapeFactory = cfg.shapeFactory, container = cfg.container, offscreenGroup = cfg.offscreenGroup, _a = cfg.visible, visible = _a === void 0 ? true : _a;\n        _this.shapeFactory = shapeFactory;\n        _this.container = container;\n        _this.offscreenGroup = offscreenGroup;\n        _this.visible = visible;\n        return _this;\n    }\n    /**\n     * 绘制图形。\n     * @param model 绘制数据。\n     * @param isUpdate 可选，是否是更新发生后的绘制。\n     */\n    Element.prototype.draw = function (model, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        this.model = model;\n        this.data = model.data; // 存储原始数据\n        this.shapeType = this.getShapeType(model);\n        // 绘制图形\n        this.drawShape(model, isUpdate);\n        if (this.visible === false) {\n            // 用户在初始化的时候声明 visible: false\n            this.changeVisible(false);\n        }\n    };\n    /**\n     * 更新图形。\n     * @param model 更新的绘制数据。\n     */\n    Element.prototype.update = function (model) {\n        var _a = this, shapeFactory = _a.shapeFactory, shape = _a.shape;\n        if (!shape) {\n            return;\n        }\n        // 更新数据\n        this.model = model;\n        this.data = model.data;\n        this.shapeType = this.getShapeType(model);\n        // step 1: 更新 shape 携带的信息\n        this.setShapeInfo(shape, model);\n        // step 2: 使用虚拟 Group 重新绘制 shape，然后更新当前 shape\n        var offscreenGroup = this.getOffscreenGroup();\n        var newShape = shapeFactory.drawShape(this.shapeType, model, offscreenGroup);\n        // @ts-ignore\n        newShape.cfg.data = this.data;\n        // @ts-ignore\n        newShape.cfg.origin = model;\n        // label 需要使用\n        newShape.cfg.element = this;\n        // step 3: 同步 shape 样式\n        this.syncShapeStyle(shape, newShape, this.getStates(), this.getAnimateCfg('update'));\n    };\n    /**\n     * 销毁 element 实例。\n     */\n    Element.prototype.destroy = function () {\n        var _a = this, shapeFactory = _a.shapeFactory, shape = _a.shape;\n        if (shape) {\n            var animateCfg = this.getAnimateCfg('leave');\n            if (animateCfg) {\n                // 指定了动画配置则执行销毁动画\n                doAnimate(shape, animateCfg, {\n                    coordinate: shapeFactory.coordinate,\n                    toAttrs: __assign({}, shape.attr()),\n                });\n            }\n            else {\n                // 否则直接销毁\n                shape.remove(true);\n            }\n        }\n        // reset\n        this.states = [];\n        this.shapeFactory = undefined;\n        this.container = undefined;\n        this.shape = undefined;\n        this.animate = undefined;\n        this.geometry = undefined;\n        this.labelShape = undefined;\n        this.model = undefined;\n        this.data = undefined;\n        this.offscreenGroup = undefined;\n        this.statesStyle = undefined;\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * 显示或者隐藏 element。\n     * @param visible 是否可见。\n     */\n    Element.prototype.changeVisible = function (visible) {\n        _super.prototype.changeVisible.call(this, visible);\n        if (visible) {\n            if (this.shape) {\n                this.shape.show();\n            }\n            if (this.labelShape) {\n                this.labelShape.forEach(function (label) {\n                    label.show();\n                });\n            }\n        }\n        else {\n            if (this.shape) {\n                this.shape.hide();\n            }\n            if (this.labelShape) {\n                this.labelShape.forEach(function (label) {\n                    label.hide();\n                });\n            }\n        }\n    };\n    /**\n     * 设置 Element 的状态。\n     *\n     * 目前 Element 开放三种状态：\n     * 1. active\n     * 2. selected\n     * 3. inactive\n     *\n     * 这三种状态相互独立，可以进行叠加。\n     *\n     * 这三种状态的样式可在 [[Theme]] 主题中或者通过 `geometry.state()` 接口进行配置。\n     *\n     * ```ts\n     * // 激活 active 状态\n     * setState('active', true);\n     * ```\n     *\n     * @param stateName 状态名\n     * @param stateStatus 是否开启状态\n     */\n    Element.prototype.setState = function (stateName, stateStatus) {\n        var _a = this, states = _a.states, shapeFactory = _a.shapeFactory, model = _a.model, shape = _a.shape, shapeType = _a.shapeType;\n        var index = states.indexOf(stateName);\n        if (stateStatus) {\n            // 开启状态\n            if (index > -1) {\n                // 该状态已经开启，则返回\n                return;\n            }\n            states.push(stateName);\n            if (stateName === 'active' || stateName === 'selected') {\n                shape.toFront();\n            }\n        }\n        else {\n            if (index === -1) {\n                // 关闭状态，但是状态未设置过\n                return;\n            }\n            states.splice(index, 1);\n            if (stateName === 'active' || stateName === 'selected') {\n                shape.toBack();\n            }\n        }\n        // 使用虚拟 group 重新绘制 shape，然后对这个 shape 应用状态样式后，更新当前 shape。\n        var offscreenShape = shapeFactory.drawShape(shapeType, model, this.getOffscreenGroup());\n        if (states.length) {\n            // 应用当前状态\n            this.syncShapeStyle(shape, offscreenShape, states, null);\n        }\n        else {\n            // 如果没有状态，则需要恢复至原始状态\n            this.syncShapeStyle(shape, offscreenShape, ['reset'], null);\n        }\n        offscreenShape.remove(true); // 销毁，减少内存占用\n        var eventObject = {\n            state: stateName,\n            stateStatus: stateStatus,\n            element: this,\n            target: this.container,\n        };\n        this.container.emit('statechange', eventObject);\n        // @ts-ignore\n        propagationDelegate(this.shape, 'statechange', eventObject);\n    };\n    /**\n     * 清空状量态，恢复至初始状态。\n     */\n    Element.prototype.clearStates = function () {\n        var _this = this;\n        var states = this.states;\n        each(states, function (state) {\n            _this.setState(state, false);\n        });\n        this.states = [];\n    };\n    /**\n     * 查询当前 Element 上是否已设置 `stateName` 对应的状态。\n     * @param stateName 状态名称。\n     * @returns true 表示存在，false 表示不存在。\n     */\n    Element.prototype.hasState = function (stateName) {\n        return this.states.includes(stateName);\n    };\n    /**\n     * 获取当前 Element 上所有的状态。\n     * @returns 当前 Element 上所有的状态数组。\n     */\n    Element.prototype.getStates = function () {\n        return this.states;\n    };\n    /**\n     * 获取 Element 对应的原始数据。\n     * @returns 原始数据。\n     */\n    Element.prototype.getData = function () {\n        return this.data;\n    };\n    /**\n     * 获取 Element 对应的图形绘制数据。\n     * @returns 图形绘制数据。\n     */\n    Element.prototype.getModel = function () {\n        return this.model;\n    };\n    /**\n     * 返回 Element 元素整体的 bbox，包含文本及文本连线（有的话）。\n     * @returns 整体包围盒。\n     */\n    Element.prototype.getBBox = function () {\n        var _a = this, shape = _a.shape, labelShape = _a.labelShape;\n        var bbox = {\n            x: 0,\n            y: 0,\n            minX: 0,\n            minY: 0,\n            maxX: 0,\n            maxY: 0,\n            width: 0,\n            height: 0,\n        };\n        if (shape) {\n            bbox = shape.getCanvasBBox();\n        }\n        if (labelShape) {\n            labelShape.forEach(function (label) {\n                var labelBBox = label.getCanvasBBox();\n                bbox.x = Math.min(labelBBox.x, bbox.x);\n                bbox.y = Math.min(labelBBox.y, bbox.y);\n                bbox.minX = Math.min(labelBBox.minX, bbox.minX);\n                bbox.minY = Math.min(labelBBox.minY, bbox.minY);\n                bbox.maxX = Math.max(labelBBox.maxX, bbox.maxX);\n                bbox.maxY = Math.max(labelBBox.maxY, bbox.maxY);\n            });\n        }\n        bbox.width = bbox.maxX - bbox.minX;\n        bbox.height = bbox.maxY - bbox.minY;\n        return bbox;\n    };\n    Element.prototype.getStatesStyle = function () {\n        if (!this.statesStyle) {\n            var _a = this, shapeType = _a.shapeType, geometry = _a.geometry, shapeFactory = _a.shapeFactory;\n            var stateOption = geometry.stateOption;\n            var defaultShapeType = shapeFactory.defaultShapeType;\n            var stateTheme = shapeFactory.theme[shapeType] || shapeFactory.theme[defaultShapeType];\n            this.statesStyle = deepMix({}, stateTheme, stateOption);\n        }\n        return this.statesStyle;\n    };\n    // 从主题中获取对应状态量的样式\n    Element.prototype.getStateStyle = function (stateName, shapeKey) {\n        var statesStyle = this.getStatesStyle();\n        var stateCfg = get(statesStyle, [stateName, 'style'], {});\n        var shapeStyle = stateCfg[shapeKey] || stateCfg;\n        if (isFunction(shapeStyle)) {\n            return shapeStyle(this);\n        }\n        return shapeStyle;\n    };\n    // 获取动画配置\n    Element.prototype.getAnimateCfg = function (animateType) {\n        var _this = this;\n        var animate = this.animate;\n        if (animate) {\n            var cfg_1 = animate[animateType];\n            if (cfg_1) {\n                // 增加动画的回调函数，如果外部传入了，则先执行外部，然后发射 geometry 的 animate 事件\n                return __assign(__assign({}, cfg_1), { callback: function () {\n                        var _a;\n                        isFunction(cfg_1.callback) && cfg_1.callback();\n                        (_a = _this.geometry) === null || _a === void 0 ? void 0 : _a.emit(GEOMETRY_LIFE_CIRCLE.AFTER_DRAW_ANIMATE);\n                    } });\n            }\n            return cfg_1;\n        }\n        return null;\n    };\n    // 绘制图形\n    Element.prototype.drawShape = function (model, isUpdate) {\n        var _a;\n        if (isUpdate === void 0) { isUpdate = false; }\n        var _b = this, shapeFactory = _b.shapeFactory, container = _b.container, shapeType = _b.shapeType;\n        // 自定义 shape 有可能返回空 shape\n        this.shape = shapeFactory.drawShape(shapeType, model, container);\n        if (this.shape) {\n            this.setShapeInfo(this.shape, model); // 存储绘图数据\n            // @ts-ignore\n            var name_1 = this.shape.cfg.name;\n            // 附加 element 的 name, name 现在支持数组了，很好用了\n            if (!name_1) {\n                // 这个地方如果用户添加了 name, 则附加 name ，否则就添加自己的 name\n                // @ts-ignore\n                this.shape.cfg.name = ['element', this.shapeFactory.geometryType];\n            }\n            else if (isString(name_1)) {\n                // @ts-ignore\n                this.shape.cfg.name = ['element', name_1];\n            }\n            // 执行入场动画\n            var animateType = isUpdate ? 'enter' : 'appear';\n            var animateCfg = this.getAnimateCfg(animateType);\n            if (animateCfg) {\n                // 开始执行动画的生命周期\n                (_a = this.geometry) === null || _a === void 0 ? void 0 : _a.emit(GEOMETRY_LIFE_CIRCLE.BEFORE_DRAW_ANIMATE);\n                doAnimate(this.shape, animateCfg, {\n                    coordinate: shapeFactory.coordinate,\n                    toAttrs: __assign({}, this.shape.attr()),\n                });\n            }\n        }\n    };\n    // 获取虚拟 Group\n    Element.prototype.getOffscreenGroup = function () {\n        if (!this.offscreenGroup) {\n            var GroupCtor = this.container.getGroupBase(); // 获取分组的构造函数\n            this.offscreenGroup = new GroupCtor({});\n        }\n        return this.offscreenGroup;\n    };\n    // 设置 shape 上需要携带的信息\n    Element.prototype.setShapeInfo = function (shape, data) {\n        var _this = this;\n        // @ts-ignore\n        shape.cfg.origin = data;\n        // @ts-ignore\n        shape.cfg.element = this;\n        if (shape.isGroup()) {\n            var children = shape.get('children');\n            children.forEach(function (child) {\n                _this.setShapeInfo(child, data);\n            });\n        }\n    };\n    // 更新当前 shape 的样式\n    Element.prototype.syncShapeStyle = function (sourceShape, targetShape, states, animateCfg, index) {\n        var _this = this;\n        var _a;\n        if (states === void 0) { states = []; }\n        if (index === void 0) { index = 0; }\n        // 所有的 shape 都需要同步 clip\n        var clip = sourceShape.get('clipShape');\n        var newClip = targetShape.get('clipShape');\n        if (clip && newClip) {\n            this.syncShapeStyle(clip, newClip, states, animateCfg);\n        }\n        if (sourceShape.isGroup()) {\n            var children = sourceShape.get('children');\n            var newChildren = targetShape.get('children');\n            for (var i = 0; i < children.length; i++) {\n                this.syncShapeStyle(children[i], newChildren[i], states, animateCfg, index + i);\n            }\n        }\n        else {\n            if (!isEmpty(states) && !isEqual(states, ['reset'])) {\n                var name_2 = sourceShape.get('name');\n                if (isArray(name_2)) {\n                    // 会附加 element 的 name\n                    name_2 = name_2[1];\n                }\n                each(states, function (state) {\n                    var style = _this.getStateStyle(state, name_2 || index); // 如果用户没有设置 name，则默认根据索引值\n                    targetShape.attr(style);\n                });\n            }\n            var newAttrs = getReplaceAttrs(sourceShape, targetShape);\n            if (this.animate) {\n                if (animateCfg) {\n                    (_a = this.geometry) === null || _a === void 0 ? void 0 : _a.emit(GEOMETRY_LIFE_CIRCLE.BEFORE_DRAW_ANIMATE);\n                    // 需要进行动画\n                    doAnimate(sourceShape, animateCfg, {\n                        coordinate: this.shapeFactory.coordinate,\n                        toAttrs: newAttrs,\n                        shapeModel: this.model,\n                    });\n                }\n                else if (isEmpty(states)) {\n                    sourceShape.stopAnimate();\n                    sourceShape.animate(newAttrs, {\n                        duration: 300,\n                    });\n                }\n                else {\n                    sourceShape.attr(newAttrs);\n                }\n            }\n            else {\n                sourceShape.attr(newAttrs);\n            }\n        }\n    };\n    Element.prototype.getShapeType = function (model) {\n        var shape = get(model, 'shape');\n        return isArray(shape) ? shape[0] : shape;\n    };\n    return Element;\n}(Base));\nexport default Element;\n//# sourceMappingURL=index.js.map","var GEOMETRY_LABELS_MAP = {};\nvar GEOMETRY_LABELS_LAYOUT_MAP = {};\n/**\n * 获取 `type` 对应的 [[GeometryLabel]] 类\n * @param type\n * @returns\n */\nexport function getGeometryLabel(type) {\n    return GEOMETRY_LABELS_MAP[type.toLowerCase()];\n}\n/**\n * 注册定义的 GeometryLabel 类\n * @param type GeometryLabel 类型名称\n * @param ctor GeometryLabel 类\n */\nexport function registerGeometryLabel(type, ctor) {\n    GEOMETRY_LABELS_MAP[type.toLowerCase()] = ctor;\n}\n/**\n * 获取 `type` 对应的 [[GeometryLabelsLayoutFn]] label 布局函数\n * @param type 布局函数名称\n * @returns\n */\nexport function getGeometryLabelLayout(type) {\n    return GEOMETRY_LABELS_LAYOUT_MAP[type.toLowerCase()];\n}\n/**\n * 注册定义的 label 布局函数\n * @param type label 布局函数名称\n * @param layoutFn label 布局函数\n */\nexport function registerGeometryLabelLayout(type, layoutFn) {\n    GEOMETRY_LABELS_LAYOUT_MAP[type.toLowerCase()] = layoutFn;\n}\n//# sourceMappingURL=index.js.map","import { __assign } from \"tslib\";\nimport { parsePathString } from '@antv/path-util';\nimport { deepMix, get, upperFirst } from '@antv/util';\nimport { convertNormalPath, convertPolarPath } from './util/path';\n/** ShapeFactory 基类 */\nvar ShapeFactoryBase = {\n    /** 坐标系对象 */\n    coordinate: null,\n    /** 默认绘制的 Shape 类型 */\n    defaultShapeType: null,\n    /** 主题样式 */\n    theme: null,\n    /**\n     * 获取 shape 绘制需要的关键点\n     * @param shapeType shape 类型\n     * @param shapePoint 每条数据映射后的坐标点以及 size 数值\n     * @returns 图形关键点信息\n     */\n    getShapePoints: function (shapeType, shapePoint) {\n        var shape = this.getShape(shapeType);\n        if (shape.getPoints) {\n            return shape.getPoints(shapePoint);\n        }\n        return this.getDefaultPoints(shapePoint);\n    },\n    /**\n     * 根据 shape 类型获取具体的 shape 实例\n     * @param shapeType string shape 的类型\n     * @returns\n     */\n    getShape: function (shapeType) {\n        var shape = this[shapeType] || this[this.defaultShapeType];\n        shape.coordinate = this.coordinate;\n        return shape;\n    },\n    /**\n     * 获取 shape 的默认关键点\n     * @override\n     */\n    getDefaultPoints: function () {\n        return [];\n    },\n    /**\n     * 获取 shape 的默认绘制样式 (内置的 shapeFactory 均有注册默认样式)\n     */\n    getDefaultStyle: function (geometryTheme) {\n        return get(geometryTheme, [this.defaultShapeType, 'default', 'style'], {});\n    },\n    /**\n     * 获取 shape 对应的缩略图配置信息。\n     * @param shapeType shape 类型\n     * @param color 颜色\n     * @param isInPolar 是否在极坐标系下\n     * @returns 返回缩略图 marker 配置。\n     */\n    getMarker: function (shapeType, markerCfg) {\n        var shape = this.getShape(shapeType);\n        if (!shape.getMarker) {\n            var defaultShapeType = this.defaultShapeType;\n            shape = this.getShape(defaultShapeType);\n        }\n        var theme = this.theme;\n        var shapeStyle = get(theme, [shapeType, 'default'], {});\n        var markerStyle = shape.getMarker(markerCfg);\n        return deepMix({}, shapeStyle, markerStyle);\n    },\n    /**\n     * 绘制 shape\n     * @override\n     * @param shapeType 绘制的 shape 类型\n     * @param cfg 绘制 shape 需要的信息\n     * @param element Element 实例\n     * @returns\n     */\n    drawShape: function (shapeType, cfg, container) {\n        var shape = this.getShape(shapeType);\n        return shape.draw(cfg, container);\n    },\n};\n/** Shape 基类 */\nvar ShapeBase = {\n    /** 坐标系对象 */\n    coordinate: null,\n    /**\n     * 将归一化的 path 转换成坐标系下的 path\n     * @param path 归一化的路径\n     * @returns\n     */\n    parsePath: function (path) {\n        var coordinate = this.coordinate;\n        var parsedPath = parsePathString(path);\n        if (coordinate.isPolar) {\n            parsedPath = convertPolarPath(coordinate, parsedPath);\n        }\n        else {\n            parsedPath = convertNormalPath(coordinate, parsedPath);\n        }\n        return parsedPath;\n    },\n    /**\n     * 将归一化的坐标转换成画布坐标\n     * @param point 归一化的坐标点数据\n     * @returns\n     */\n    parsePoint: function (point) {\n        var coordinate = this.coordinate;\n        return coordinate.convert(point);\n    },\n    /**\n     * 0～1 points 转 画布 points\n     * @param points 节点集合\n     * @returns\n     */\n    parsePoints: function (points) {\n        var coordinate = this.coordinate;\n        return points.map(function (point) {\n            return coordinate.convert(point);\n        });\n    },\n    /**\n     * 绘制 shape\n     * @override\n     */\n    draw: function (cfg, container) { },\n};\nvar ShapeFactoryMap = {};\n/**\n * 注册 ShapeFactory。\n * @param factoryName  ShapeFactory 名称，对应 Geometry 几何标记名称。\n * @param cfg 注册 ShapeFactory 需要覆写定义的属性。\n * @returns 返回 ShapeFactory 对象。\n */\nexport function registerShapeFactory(factoryName, cfg) {\n    var className = upperFirst(factoryName);\n    var geomObj = __assign(__assign(__assign({}, ShapeFactoryBase), cfg), { geometryType: factoryName });\n    ShapeFactoryMap[className] = geomObj;\n    return geomObj;\n}\n/**\n * 注册 Shape。\n * @param factoryName 对应的 ShapeFactory 名称。\n * @param shapeType 注册的 shape 名称。\n * @param cfg 注册 Shape 需要覆写定义的属性。\n * @returns shape 返回注册的 shape 对象。\n */\nexport function registerShape(factoryName, shapeType, cfg) {\n    var className = upperFirst(factoryName);\n    var factory = ShapeFactoryMap[className];\n    var shapeObj = __assign(__assign({}, ShapeBase), cfg);\n    factory[shapeType] = shapeObj;\n    return shapeObj;\n}\n/**\n * 获取 factoryName 对应的 shapeFactory\n * @param factoryName\n * @returns shape factory\n */\nexport function getShapeFactory(factoryName) {\n    var className = upperFirst(factoryName);\n    return ShapeFactoryMap[className];\n}\n//# sourceMappingURL=base.js.map","import { isEqual, some } from '@antv/util';\n/**\n * @ignore\n * Determines whether model is change\n * @param currentModel\n * @param preModel\n * @returns\n */\nexport function isModelChange(currentModel, preModel) {\n    return some(['color', 'shape', 'size', 'x', 'y', 'isInCircle', 'data', 'style', 'defaultStyle', 'points', 'mappingData'], function (key) {\n        return !isEqual(currentModel[key], preModel[key]);\n    });\n}\n//# sourceMappingURL=is-model-change.js.map","import { isArray } from '@antv/util';\n/** @ignore */\nexport function parseFields(field) {\n    if (isArray(field)) {\n        return field;\n    }\n    return field.split('*');\n}\n//# sourceMappingURL=parse-fields.js.map","import { __assign, __extends } from \"tslib\";\nimport { getAdjust as getAdjustClass } from '@antv/adjust';\nimport { getAttribute as getAttributeClass } from '@antv/attr';\nimport { clone, deepMix, each, flatten, get, isArray, isEmpty, isEqual, isFunction, isNil, isNumber, isObject, isPlainObject, isString, set, } from '@antv/util';\nimport { doGroupAppearAnimate, getDefaultAnimateCfg } from '../animate';\nimport Base from '../base';\nimport { FIELD_ORIGIN, GROUP_ATTRS } from '../constant';\nimport { uniq } from '../util/helper';\nimport Element from './element';\nimport { getGeometryLabel } from './label';\nimport { getShapeFactory } from './shape/base';\nimport { group } from './util/group-data';\nimport { isModelChange } from './util/is-model-change';\nimport { parseFields } from './util/parse-fields';\n// 根据 elementId 查找对应的 label，因为有可能一个 element 对应多个 labels，所以在给 labels 打标识时做了处理\n// 打标规则详见 ./label/base.ts#L263\nfunction filterLabelsById(id, labelsMap) {\n    var labels = [];\n    each(labelsMap, function (label, labelId) {\n        var elementId = labelId.split(' ')[0];\n        if (elementId === id) {\n            labels.push(label);\n        }\n    });\n    return labels;\n}\n/**\n * Geometry 几何标记基类，主要负责数据到图形属性的映射以及绘制逻辑。\n */\nvar Geometry = /** @class */ (function (_super) {\n    __extends(Geometry, _super);\n    /**\n     * 创建 Geometry 实例。\n     * @param cfg\n     */\n    function Geometry(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        /** Geometry 几何标记类型。 */\n        _this.type = 'base';\n        // 内部产生的属性\n        /** Attribute map  */\n        _this.attributes = {};\n        /** Element map */\n        _this.elements = [];\n        /** 使用 key-value 结构存储 Element，key 为每个 Element 实例对应的唯一 ID */\n        _this.elementsMap = {};\n        /** animate 配置项 */\n        _this.animateOption = true;\n        /** 图形属性映射配置 */\n        _this.attributeOption = {};\n        /** 存储上一次渲染时的 element 映射表，用于更新逻辑 */\n        _this.lastElementsMap = {};\n        /** 是否生成多个点来绘制图形。 */\n        _this.generatePoints = false;\n        /** 存储发生图形属性映射前的数据 */\n        _this.beforeMappingData = null;\n        _this.adjusts = {};\n        _this.idFields = [];\n        _this.hasSorted = false;\n        _this.isCoordinateChanged = false;\n        var container = cfg.container, labelsContainer = cfg.labelsContainer, coordinate = cfg.coordinate, data = cfg.data, _a = cfg.sortable, sortable = _a === void 0 ? false : _a, _b = cfg.visible, visible = _b === void 0 ? true : _b, theme = cfg.theme, _c = cfg.scales, scales = _c === void 0 ? {} : _c, _d = cfg.scaleDefs, scaleDefs = _d === void 0 ? {} : _d;\n        _this.container = container;\n        _this.labelsContainer = labelsContainer;\n        _this.coordinate = coordinate;\n        _this.data = data;\n        _this.sortable = sortable;\n        _this.visible = visible;\n        _this.userTheme = theme;\n        _this.scales = scales;\n        _this.scaleDefs = scaleDefs;\n        return _this;\n    }\n    /**\n     * 配置 position 通道映射规则。\n     *\n     * @example\n     * ```typescript\n     * // 数据结构: [{ x: 'A', y: 10, color: 'red' }]\n     * geometry.position('x*y');\n     * geometry.position([ 'x', 'y' ]);\n     * geometry.position({\n     *   fields: [ 'x', 'y' ],\n     * });\n     * ```\n     *\n     * @param cfg 映射规则\n     * @returns\n     */\n    Geometry.prototype.position = function (cfg) {\n        var positionCfg = cfg;\n        if (!isPlainObject(cfg)) {\n            // 字符串字段或者数组字段\n            positionCfg = {\n                fields: parseFields(cfg),\n            };\n        }\n        var fields = get(positionCfg, 'fields');\n        if (fields.length === 1) {\n            // 默认填充一维 1*xx\n            fields.unshift('1');\n            set(positionCfg, 'fields', fields);\n        }\n        set(this.attributeOption, 'position', positionCfg);\n        return this;\n    };\n    Geometry.prototype.color = function (field, cfg) {\n        this.createAttrOption('color', field, cfg);\n        return this;\n    };\n    Geometry.prototype.shape = function (field, cfg) {\n        this.createAttrOption('shape', field, cfg);\n        return this;\n    };\n    Geometry.prototype.size = function (field, cfg) {\n        this.createAttrOption('size', field, cfg);\n        return this;\n    };\n    /**\n     * 设置数据调整方式。G2 目前内置了四种类型：\n     * 1. dodge\n     * 2. stack\n     * 3. symmetric\n     * 4. jitter\n     *\n     *\n     * **Tip**\n     * + 对于 'dodge' 类型，可以额外进行如下属性的配置:\n     * ```typescript\n     * geometry.adjust('dodge', {\n     *   marginRatio: 0, // 取 0 到 1 范围的值（相对于每个柱子宽度），用于控制一个分组中柱子之间的间距\n     *   dodgeBy: 'x', // 该属性只对 'dodge' 类型生效，声明以哪个数据字段为分组依据\n     * });\n     * ```\n     *\n     * + 对于 'stack' 类型，可以额外进行如下属性的配置:\n     * ```typescript\n     * geometry.adjust('stack', {\n     *   reverseOrder: false, // 用于控制是否对数据进行反序操作\n     * });\n     * ```\n     *\n     * @example\n     * ```typescript\n     * geometry.adjust('stack');\n     *\n     * geometry.adjust({\n     *   type: 'stack',\n     *   reverseOrder: false,\n     * });\n     *\n     * // 组合使用 adjust\n     * geometry.adjust([ 'stack', 'dodge' ]);\n     *\n     * geometry.adjust([\n     *   { type: 'stack' },\n     *   { type: 'dodge', dodgeBy: 'x' },\n     * ]);\n     * ```\n     *\n     * @param adjustCfg 数据调整配置\n     * @returns\n     */\n    Geometry.prototype.adjust = function (adjustCfg) {\n        var adjusts = adjustCfg;\n        if (isString(adjustCfg) || isPlainObject(adjustCfg)) {\n            adjusts = [adjustCfg];\n        }\n        each(adjusts, function (adjust, index) {\n            if (!isObject(adjust)) {\n                adjusts[index] = { type: adjust };\n            }\n        });\n        this.adjustOption = adjusts;\n        return this;\n    };\n    Geometry.prototype.style = function (field, styleFunc) {\n        if (isString(field)) {\n            var fields = parseFields(field);\n            this.styleOption = {\n                fields: fields,\n                callback: styleFunc,\n            };\n        }\n        else {\n            var _a = field, fields = _a.fields, callback = _a.callback, cfg = _a.cfg;\n            if (fields || callback || cfg) {\n                this.styleOption = field;\n            }\n            else {\n                this.styleOption = {\n                    cfg: field,\n                };\n            }\n        }\n        return this;\n    };\n    Geometry.prototype.tooltip = function (field, cfg) {\n        if (isString(field)) {\n            var fields = parseFields(field);\n            this.tooltipOption = {\n                fields: fields,\n                callback: cfg,\n            };\n        }\n        else {\n            this.tooltipOption = field;\n        }\n        return this;\n    };\n    /**\n     * Geometry 动画配置。\n     *\n     * + `animate(false)` 关闭动画\n     * + `animate(true)` 开启动画，默认开启。\n     *\n     * 我们将动画分为四个场景：\n     * 1. appear: 图表第一次加载时的入场动画；\n     * 2. enter: 图表绘制完成，发生更新后，产生的新图形的进场动画；\n     * 3. update: 图表绘制完成，数据发生变更后，有状态变更的图形的更新动画；\n     * 4. leave: 图表绘制完成，数据发生变更后，被销毁图形的销毁动画。\n     *\n     * @example\n     * ```typescript\n     * animate({\n     *   enter: {\n     *     duration: 1000, // enter 动画执行时间\n     *   },\n     *   leave: false, // 关闭 leave 销毁动画\n     * });\n     * ```\n     *\n     * @param cfg 动画配置\n     * @returns\n     */\n    Geometry.prototype.animate = function (cfg) {\n        this.animateOption = cfg;\n        return this;\n    };\n    Geometry.prototype.label = function (field, secondParam, thirdParam) {\n        if (isString(field)) {\n            var labelOption = {};\n            var fields = parseFields(field);\n            labelOption.fields = fields;\n            if (isFunction(secondParam)) {\n                labelOption.callback = secondParam;\n            }\n            else if (isPlainObject(secondParam)) {\n                labelOption.cfg = secondParam;\n            }\n            if (thirdParam) {\n                labelOption.cfg = thirdParam;\n            }\n            this.labelOption = labelOption;\n        }\n        else {\n            this.labelOption = field;\n        }\n        return this;\n    };\n    /**\n     * 设置状态对应的样式。\n     *\n     * @example\n     * ```ts\n     * chart.interval().state({\n     *   selected: {\n     *     animate: { duration: 100, easing: 'easeLinear' },\n     *     style: {\n     *       lineWidth: 2,\n     *       stroke: '#000',\n     *     },\n     *   },\n     * });\n     * ```\n     *\n     * 如果图形 shape 是由多个 shape 组成，即为一个 G.Group 对象，那么针对 group 中的每个 shape，我们需要使用下列方式进行状态样式设置：\n     * 如果我们为 group 中的每个 shape 设置了 'name' 属性(shape.set('name', 'xx'))，则以 'name' 作为 key，否则默认以索引值（即 shape 的 添加顺序）为 key。\n     *\n     * ```ts\n     * chart.interval().shape('groupShape').state({\n     *   selected: {\n     *     style: {\n     *       0: { lineWidth: 2 },\n     *       1: { fillOpacity: 1 },\n     *     }\n     *   }\n     * });\n     * ```\n     *\n     * @param cfg 状态样式\n     */\n    Geometry.prototype.state = function (cfg) {\n        this.stateOption = cfg;\n        return this;\n    };\n    /**\n     * 用于向 shape 中传入自定义的数据。目前可能仅仅可能用于在自定义 shape 的时候，像自定义 shape 中传入自定义的数据，方便实现自定义 shape 的配置能力。\n     *\n     * @example\n     * ```ts\n     * chart.interval().customInfo({ yourData: 'hello, g2!' });\n     * ```\n     *\n     * 然后在自定义 shape 的时候，可以拿到这个信息。\n     *\n     * ```ts\n     * registerShape('interval', 'your-shape', {\n     *   draw(shapeInfo, container) {\n     *     const { customInfo } = shapeInfo;\n     *     console.log(customInfo); // will log { yourData: 'hello, g2!' }.\n     *   }\n     * });\n     * ```\n     *\n     * @param cfg\n     */\n    Geometry.prototype.customInfo = function (cfg) {\n        this.customOption = cfg;\n        return this;\n    };\n    /**\n     * 初始化 Geomtry 实例：\n     * 创建 [[Attribute]] and [[Scale]] 实例，进行数据处理，包括分组、数值化以及数据调整。\n     */\n    Geometry.prototype.init = function (cfg) {\n        if (cfg === void 0) { cfg = {}; }\n        this.setCfg(cfg);\n        this.initAttributes(); // 创建图形属性\n        // 数据加工：分组 -> 数字化 -> adjust\n        this.processData(this.data);\n        // 调整 scale\n        this.adjustScale();\n    };\n    /**\n     * Geometry 更新。\n     * @param [cfg] 更新的配置\n     */\n    Geometry.prototype.update = function (cfg) {\n        if (cfg === void 0) { cfg = {}; }\n        var data = cfg.data, isDataChanged = cfg.isDataChanged, isCoordinateChanged = cfg.isCoordinateChanged;\n        var _a = this, attributeOption = _a.attributeOption, lastAttributeOption = _a.lastAttributeOption;\n        if (!isEqual(attributeOption, lastAttributeOption)) {\n            // 映射发生改变，则重新创建图形属性\n            this.init(cfg);\n        }\n        else if (data && (isDataChanged || !isEqual(data, this.data))) {\n            // 数据发生变化\n            this.setCfg(cfg);\n            this.processData(data); // 数据加工：分组 -> 数字化 -> adjust\n        }\n        else {\n            // 有可能 coordinate 变化\n            this.setCfg(cfg);\n        }\n        // 调整 scale\n        this.adjustScale();\n        this.isCoordinateChanged = isCoordinateChanged;\n    };\n    /**\n     * 将原始数据映射至图形空间，同时创建图形对象。\n     */\n    Geometry.prototype.paint = function (isUpdate) {\n        var _this = this;\n        if (isUpdate === void 0) { isUpdate = false; }\n        if (this.animateOption) {\n            this.animateOption = deepMix({}, getDefaultAnimateCfg(this.type, this.coordinate), this.animateOption);\n        }\n        this.defaultSize = undefined;\n        this.elements = [];\n        this.elementsMap = {};\n        var offscreenGroup = this.getOffscreenGroup();\n        offscreenGroup.clear();\n        var beforeMappingData = this.beforeMappingData;\n        var dataArray = this.beforeMapping(beforeMappingData);\n        var mappingArray = [];\n        for (var index = 0, length_1 = dataArray.length; index < length_1; index++) {\n            var eachGroup = dataArray[index];\n            var mappingData = this.mapping(eachGroup);\n            mappingArray.push(mappingData);\n            this.createElements(mappingData, index, isUpdate);\n        }\n        if (this.canDoGroupAnimation(isUpdate)) {\n            // 如果用户没有配置 appear.animation，就默认走整体动画\n            var container = this.container;\n            var type = this.type;\n            var coordinate = this.coordinate;\n            var animateCfg = get(this.animateOption, 'appear');\n            var yScale = this.getYScale();\n            var yMinPoint = coordinate.convert({\n                x: 0,\n                y: yScale.scale(this.getYMinValue()),\n            });\n            doGroupAppearAnimate(container, animateCfg, type, coordinate, yMinPoint);\n        }\n        // 添加 label\n        if (this.labelOption) {\n            this.renderLabels(flatten(mappingArray), isUpdate);\n        }\n        this.dataArray = mappingArray;\n        // 销毁被删除的 elements\n        each(this.lastElementsMap, function (deletedElement) {\n            // 更新动画配置，用户有可能在更新之前有对动画进行配置操作\n            deletedElement.animate = _this.animateOption;\n            deletedElement.destroy();\n        });\n        this.lastElementsMap = this.elementsMap;\n        // 缓存，用于更新\n        this.lastAttributeOption = __assign({}, this.attributeOption);\n        if (this.visible === false) {\n            // 用户在初始化的时候声明 visible: false\n            this.changeVisible(false);\n        }\n    };\n    /**\n     * 清空当前 Geometry，配置项仍保留，但是内部创建的对象全部清空。\n     * @override\n     */\n    Geometry.prototype.clear = function () {\n        var _a = this, container = _a.container, geometryLabel = _a.geometryLabel, offscreenGroup = _a.offscreenGroup;\n        if (container) {\n            container.clear();\n        }\n        if (geometryLabel) {\n            geometryLabel.clear();\n        }\n        if (offscreenGroup) {\n            offscreenGroup.clear();\n        }\n        // 属性恢复至出厂状态\n        this.scaleDefs = undefined;\n        this.attributes = {};\n        this.scales = {};\n        this.elementsMap = {};\n        this.lastElementsMap = {};\n        this.elements = [];\n        this.adjusts = {};\n        this.dataArray = null;\n        this.beforeMappingData = null;\n        this.lastAttributeOption = undefined;\n        this.defaultSize = undefined;\n        this.idFields = [];\n        this.groupScales = undefined;\n        this.hasSorted = false;\n        this.isCoordinateChanged = false;\n    };\n    /**\n     * 销毁 Geometry 实例。\n     */\n    Geometry.prototype.destroy = function () {\n        this.clear();\n        var container = this.container;\n        container.remove(true);\n        if (this.offscreenGroup) {\n            this.offscreenGroup.remove(true);\n            this.offscreenGroup = null;\n        }\n        if (this.geometryLabel) {\n            this.geometryLabel.destroy();\n            this.geometryLabel = null;\n        }\n        this.theme = undefined;\n        this.shapeFactory = undefined;\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * 获取决定分组的图形属性对应的 scale 实例。\n     * @returns\n     */\n    Geometry.prototype.getGroupScales = function () {\n        return this.groupScales;\n    };\n    /**\n     * 根据名字获取图形属性实例。\n     */\n    Geometry.prototype.getAttribute = function (name) {\n        return this.attributes[name];\n    };\n    /** 获取 x 轴对应的 scale 实例。 */\n    Geometry.prototype.getXScale = function () {\n        return this.getAttribute('position').scales[0];\n    };\n    /** 获取 y 轴对应的 scale 实例。 */\n    Geometry.prototype.getYScale = function () {\n        return this.getAttribute('position').scales[1];\n    };\n    /**\n     * 获取决定分组的图形属性实例。\n     */\n    Geometry.prototype.getGroupAttributes = function () {\n        var rst = [];\n        each(this.attributes, function (attr) {\n            if (GROUP_ATTRS.includes(attr.type)) {\n                rst.push(attr);\n            }\n        });\n        return rst;\n    };\n    /** 获取图形属性默认的映射值。 */\n    Geometry.prototype.getDefaultValue = function (attrName) {\n        var value;\n        var attr = this.getAttribute(attrName);\n        if (attr && isEmpty(attr.scales)) {\n            // 获取映射至常量的值\n            value = attr.values[0];\n        }\n        return value;\n    };\n    /**\n     * 获取该数据发生图形映射后对应的 Attribute 图形空间数据。\n     * @param attr Attribute 图形属性实例。\n     * @param obj 需要进行映射的原始数据。\n     * @returns\n     */\n    Geometry.prototype.getAttributeValues = function (attr, obj) {\n        var params = [];\n        var scales = attr.scales;\n        for (var index = 0, length_2 = scales.length; index < length_2; index++) {\n            var scale = scales[index];\n            var field = scale.field;\n            if (scale.isIdentity) {\n                params.push(scale.values);\n            }\n            else {\n                params.push(obj[field]);\n            }\n        }\n        return attr.mapping.apply(attr, params);\n    };\n    Geometry.prototype.getAdjust = function (adjustType) {\n        return this.adjusts[adjustType];\n    };\n    /**\n     * 获取 shape 对应的 marker 样式。\n     * @param shapeName shape 具体名字\n     * @param cfg marker 信息\n     * @returns\n     */\n    Geometry.prototype.getShapeMarker = function (shapeName, cfg) {\n        var shapeFactory = this.getShapeFactory();\n        return shapeFactory.getMarker(shapeName, cfg);\n    };\n    /**\n     * 根据一定的规则查找 Geometry 的 Elements。\n     *\n     * ```typescript\n     * getElementsBy((element) => {\n     *   const data = element.getData();\n     *\n     *   return data.a === 'a';\n     * });\n     * ```\n     *\n     * @param condition 定义查找规则的回调函数。\n     * @returns\n     */\n    Geometry.prototype.getElementsBy = function (condition) {\n        return this.elements.filter(function (element) {\n            return condition(element);\n        });\n    };\n    /**\n     * 获取数据对应的唯一 id。\n     * @param data Element 对应的绘制数据\n     * @returns\n     */\n    Geometry.prototype.getElementId = function (data) {\n        data = isArray(data) ? data[0] : data;\n        var originData = data[FIELD_ORIGIN];\n        // 如果用户声明了使用哪些字段作为 id 值\n        if (this.idFields.length) {\n            var elementId = originData[this.idFields[0]];\n            for (var index = 1; index < this.idFields.length; index++) {\n                elementId += '-' + originData[this.idFields[index]];\n            }\n            return elementId;\n        }\n        var type = this.type;\n        var xScale = this.getXScale();\n        var yScale = this.getYScale();\n        var xField = xScale.field || 'x';\n        var yField = yScale.field || 'y';\n        var yVal = originData[yField];\n        var xVal;\n        if (xScale.type === 'identity') {\n            xVal = xScale.values[0];\n        }\n        else {\n            xVal = originData[xField];\n        }\n        var id;\n        if (type === 'interval' || type === 'schema') {\n            id = xVal;\n        }\n        else if (type === 'line' || type === 'area' || type === 'path') {\n            id = type;\n        }\n        else {\n            id = xVal + \"-\" + yVal;\n        }\n        var groupScales = this.groupScales;\n        for (var index = 0, length_3 = groupScales.length; index < length_3; index++) {\n            var groupScale = groupScales[index];\n            var field = groupScale.field;\n            id = id + \"-\" + originData[field];\n        }\n        // 用户在进行 dodge 类型的 adjust 调整的时候设置了 dodgeBy 属性\n        var dodgeAdjust = this.getAdjust('dodge');\n        if (dodgeAdjust) {\n            var dodgeBy = dodgeAdjust.dodgeBy;\n            if (dodgeBy) {\n                id = id + \"-\" + originData[dodgeBy];\n            }\n        }\n        if (this.getAdjust('jitter')) {\n            id = id + \"-\" + data.x + \"-\" + data.y;\n        }\n        return id;\n    };\n    /**\n     * 获取所有需要创建 scale 的字段名称。\n     */\n    Geometry.prototype.getScaleFields = function () {\n        var fields = [];\n        var tmpMap = {};\n        var _a = this, attributeOption = _a.attributeOption, labelOption = _a.labelOption, tooltipOption = _a.tooltipOption;\n        // 获取图形属性上的 fields\n        for (var attributeType in attributeOption) {\n            if (attributeOption.hasOwnProperty(attributeType)) {\n                var eachOpt = attributeOption[attributeType];\n                if (eachOpt.fields) {\n                    uniq(eachOpt.fields, fields, tmpMap);\n                }\n                else if (eachOpt.values) {\n                    // 考虑 size(10), shape('circle') 等场景\n                    uniq(eachOpt.values, fields, tmpMap);\n                }\n            }\n        }\n        // 获取 label 上的字段\n        if (labelOption && labelOption.fields) {\n            uniq(labelOption.fields, fields, tmpMap);\n        }\n        // 获取 tooltip 上的字段\n        if (isObject(tooltipOption) && tooltipOption.fields) {\n            uniq(tooltipOption.fields, fields, tmpMap);\n        }\n        return fields;\n    };\n    /**\n     * 显示或者隐藏 geometry。\n     * @param visible\n     */\n    Geometry.prototype.changeVisible = function (visible) {\n        _super.prototype.changeVisible.call(this, visible);\n        var elements = this.elements;\n        for (var index = 0, length_4 = elements.length; index < length_4; index++) {\n            var element = elements[index];\n            element.changeVisible(visible);\n        }\n        if (visible) {\n            if (this.container) {\n                this.container.show();\n            }\n            if (this.labelsContainer) {\n                this.labelsContainer.show();\n            }\n        }\n        else {\n            if (this.container) {\n                this.container.hide();\n            }\n            if (this.labelsContainer) {\n                this.labelsContainer.hide();\n            }\n        }\n    };\n    /**\n     * 获取当前配置中的所有分组 & 分类的字段。\n     * @return fields string[]\n     */\n    Geometry.prototype.getGroupFields = function () {\n        var groupFields = [];\n        var tmpMap = {}; // 用于去重过滤\n        for (var index = 0, length_5 = GROUP_ATTRS.length; index < length_5; index++) {\n            var attributeName = GROUP_ATTRS[index];\n            var cfg = this.attributeOption[attributeName];\n            if (cfg && cfg.fields) {\n                uniq(cfg.fields, groupFields, tmpMap);\n            }\n        }\n        return groupFields;\n    };\n    /**\n     * 获得图形的 x y 字段。\n     */\n    Geometry.prototype.getXYFields = function () {\n        var _a = this.attributeOption.position.fields, x = _a[0], y = _a[1];\n        return [x, y];\n    };\n    /**\n     * 获取该 Geometry 下所有生成的 shapes。\n     * @returns shapes\n     */\n    Geometry.prototype.getShapes = function () {\n        return this.elements.map(function (element) { return element.shape; });\n    };\n    /**\n     * 获取虚拟 Group。\n     * @returns\n     */\n    Geometry.prototype.getOffscreenGroup = function () {\n        if (!this.offscreenGroup) {\n            var GroupCtor = this.container.getGroupBase(); // 获取分组的构造函数\n            this.offscreenGroup = new GroupCtor({});\n        }\n        return this.offscreenGroup;\n    };\n    // 对数据进行排序\n    Geometry.prototype.sort = function (mappingArray) {\n        if (!this.hasSorted) {\n            // 未发生过排序\n            var xScale_1 = this.getXScale();\n            var xField_1 = xScale_1.field;\n            for (var index = 0; index < mappingArray.length; index++) {\n                var itemArr = mappingArray[index];\n                itemArr.sort(function (obj1, obj2) {\n                    return xScale_1.translate(obj1[FIELD_ORIGIN][xField_1]) - xScale_1.translate(obj2[FIELD_ORIGIN][xField_1]);\n                });\n            }\n        }\n        this.hasSorted = true;\n    };\n    /**\n     * 调整度量范围。主要针对发生层叠以及一些特殊需求的 Geometry，比如 Interval 下的柱状图 Y 轴默认从 0 开始。\n     */\n    Geometry.prototype.adjustScale = function () {\n        var yScale = this.getYScale();\n        // 如果数据发生过 stack adjust，需要调整下 yScale 的数据范围\n        if (yScale && this.getAdjust('stack')) {\n            this.updateStackRange(yScale, this.beforeMappingData);\n        }\n    };\n    /**\n     * 获取当前 Geometry 对应的 Shape 工厂实例。\n     */\n    Geometry.prototype.getShapeFactory = function () {\n        var shapeType = this.shapeType;\n        if (!getShapeFactory(shapeType)) {\n            return;\n        }\n        if (!this.shapeFactory) {\n            this.shapeFactory = clone(getShapeFactory(shapeType)); // 防止多个 view 共享一个 shapeFactory 实例，导致 coordinate 被篡改\n        }\n        // 因为这里缓存了 shapeFactory，但是外部可能会变更 coordinate，导致无法重新设置到 shapeFactory 中\n        this.shapeFactory.coordinate = this.coordinate;\n        // theme 原因同上\n        this.shapeFactory.theme = this.theme.geometries[shapeType] || {};\n        return this.shapeFactory;\n    };\n    /**\n     * 获取每个 Shape 对应的关键点数据。\n     * @param obj 经过分组 -> 数字化 -> adjust 调整后的数据记录\n     * @returns\n     */\n    Geometry.prototype.createShapePointsCfg = function (obj) {\n        var xScale = this.getXScale();\n        var yScale = this.getYScale();\n        var x = this.normalizeValues(obj[xScale.field], xScale);\n        var y; // 存在没有 y 的情况\n        if (yScale) {\n            y = this.normalizeValues(obj[yScale.field], yScale);\n        }\n        else {\n            y = obj.y ? obj.y : 0.1;\n        }\n        return {\n            x: x,\n            y: y,\n            y0: yScale ? yScale.scale(this.getYMinValue()) : undefined,\n        };\n    };\n    /**\n     * 创建 Element 实例。\n     * @param mappingDatum Element 对应的绘制数据\n     * @param [isUpdate] 是否处于更新阶段\n     * @returns element 返回创建的 Element 实例\n     */\n    Geometry.prototype.createElement = function (mappingDatum, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        var container = this.container;\n        var shapeCfg = this.getDrawCfg(mappingDatum); // 获取绘制图形的配置信息\n        var shapeFactory = this.getShapeFactory();\n        var element = new Element({\n            shapeFactory: shapeFactory,\n            container: container,\n            offscreenGroup: this.getOffscreenGroup(),\n        });\n        element.animate = this.animateOption;\n        element.geometry = this;\n        element.draw(shapeCfg, isUpdate); // 绘制\n        return element;\n    };\n    /**\n     * 获取每条数据对应的图形绘制数据。\n     * @param mappingDatum 映射后的数据\n     * @returns draw cfg\n     */\n    Geometry.prototype.getDrawCfg = function (mappingDatum) {\n        var originData = mappingDatum[FIELD_ORIGIN]; // 原始数据\n        var cfg = {\n            mappingData: mappingDatum,\n            data: originData,\n            x: mappingDatum.x,\n            y: mappingDatum.y,\n            color: mappingDatum.color,\n            size: mappingDatum.size,\n            isInCircle: this.coordinate.isPolar,\n            customInfo: this.customOption,\n        };\n        var shapeName = mappingDatum.shape;\n        if (!shapeName && this.getShapeFactory()) {\n            shapeName = this.getShapeFactory().defaultShapeType;\n        }\n        cfg.shape = shapeName;\n        // 获取默认样式\n        var theme = this.theme.geometries[this.shapeType];\n        cfg.defaultStyle = get(theme, [shapeName, 'default'], {}).style;\n        if (!cfg.defaultStyle && this.getShapeFactory()) {\n            cfg.defaultStyle = this.getShapeFactory().getDefaultStyle(theme);\n        }\n        var styleOption = this.styleOption;\n        if (styleOption) {\n            cfg.style = this.getStyleCfg(styleOption, originData);\n        }\n        if (this.generatePoints) {\n            cfg.points = mappingDatum.points;\n            cfg.nextPoints = mappingDatum.nextPoints;\n        }\n        return cfg;\n    };\n    /**\n     * 创建所有的 Elements。\n     * @param mappingData\n     * @param [isUpdate]\n     * @returns elements\n     */\n    Geometry.prototype.createElements = function (mappingData, index, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        var _a = this, lastElementsMap = _a.lastElementsMap, elementsMap = _a.elementsMap, elements = _a.elements;\n        for (var subIndex = 0, length_6 = mappingData.length; subIndex < length_6; subIndex++) {\n            var mappingDatum = mappingData[subIndex];\n            var id = this.getElementId(mappingDatum);\n            if (elementsMap[id]) {\n                // 存在重复数据，则根据再根据 index 进行区分\n                id = id + \"-\" + index + \"-\" + subIndex;\n            }\n            var result = lastElementsMap[id];\n            if (!result) {\n                // 创建新的 element\n                result = this.createElement(mappingDatum, isUpdate);\n            }\n            else {\n                // element 已经创建\n                var currentShapeCfg = this.getDrawCfg(mappingDatum);\n                var preShapeCfg = result.getModel();\n                if (this.isCoordinateChanged || isModelChange(currentShapeCfg, preShapeCfg)) {\n                    result.animate = this.animateOption;\n                    // 通过绘制数据的变更来判断是否需要更新，因为用户有可能会修改图形属性映射\n                    result.update(currentShapeCfg); // 更新对应的 element\n                }\n                delete lastElementsMap[id];\n            }\n            elements.push(result);\n            elementsMap[id] = result;\n        }\n        return elements;\n    };\n    /**\n     * 获取渲染的 label 类型。\n     */\n    Geometry.prototype.getLabelType = function () {\n        var _a = this, labelOption = _a.labelOption, coordinate = _a.coordinate, type = _a.type;\n        var coordinateType = coordinate.type, isTransposed = coordinate.isTransposed;\n        var labelType = get(labelOption, ['cfg', 'type']);\n        if (!labelType) {\n            // 用户未定义，则进行默认的逻辑\n            if (coordinateType === 'polar') {\n                // 极坐标下使用通用的极坐标文本，转置则使用饼图\n                labelType = isTransposed ? 'pie' : 'polar';\n            }\n            else if (coordinateType === 'theta') {\n                // theta 坐标系下使用饼图文本\n                labelType = 'pie';\n            }\n            else if (type === 'interval' || type === 'polygon') {\n                labelType = 'interval';\n            }\n            else {\n                labelType = 'base';\n            }\n        }\n        return labelType;\n    };\n    /**\n     * 获取 Y 轴上的最小值。\n     */\n    Geometry.prototype.getYMinValue = function () {\n        var yScale = this.getYScale();\n        var min = yScale.min, max = yScale.max;\n        var value;\n        if (min >= 0) {\n            value = min;\n        }\n        else if (max <= 0) {\n            // 当值全位于负区间时，需要保证 ymin 在区域内，不可为 0\n            value = max;\n        }\n        else {\n            value = 0;\n        }\n        return value;\n    };\n    // 创建图形属性相关的配置项\n    Geometry.prototype.createAttrOption = function (attrName, field, cfg) {\n        if (isNil(field) || isObject(field)) {\n            if (isObject(field) && isEqual(Object.keys(field), ['values'])) {\n                // shape({ values: [ 'funnel' ] })\n                set(this.attributeOption, attrName, {\n                    fields: field.values,\n                });\n            }\n            else {\n                set(this.attributeOption, attrName, field);\n            }\n        }\n        else {\n            var attrCfg = {};\n            if (isNumber(field)) {\n                // size(3)\n                attrCfg.values = [field];\n            }\n            else {\n                attrCfg.fields = parseFields(field);\n            }\n            if (cfg) {\n                if (isFunction(cfg)) {\n                    attrCfg.callback = cfg;\n                }\n                else {\n                    attrCfg.values = cfg;\n                }\n            }\n            set(this.attributeOption, attrName, attrCfg);\n        }\n    };\n    Geometry.prototype.initAttributes = function () {\n        var _this = this;\n        var _a = this, attributes = _a.attributes, attributeOption = _a.attributeOption, theme = _a.theme, shapeType = _a.shapeType;\n        this.groupScales = [];\n        var tmpMap = {};\n        var _loop_1 = function (attrType) {\n            if (attributeOption.hasOwnProperty(attrType)) {\n                var option = attributeOption[attrType];\n                if (!option) {\n                    return { value: void 0 };\n                }\n                var attrCfg = __assign({}, option);\n                var callback = attrCfg.callback, values = attrCfg.values, _a = attrCfg.fields, fields = _a === void 0 ? [] : _a;\n                // 获取每一个字段对应的 scale\n                var scales = fields.map(function (field) {\n                    var scale = _this.scales[field];\n                    if (scale.isCategory && !tmpMap[field] && GROUP_ATTRS.includes(attrType)) {\n                        _this.groupScales.push(scale);\n                        tmpMap[field] = true;\n                    }\n                    return scale;\n                });\n                attrCfg.scales = scales;\n                if (attrType !== 'position' && scales.length === 1 && scales[0].type === 'identity') {\n                    // 用户在图形通道上声明了常量字段 color('red'), size(5)\n                    attrCfg.values = scales[0].values;\n                }\n                else if (!callback && !values) {\n                    // 用户没有指定任何规则，则使用默认的映射规则\n                    if (attrType === 'size') {\n                        attrCfg.values = theme.sizes;\n                    }\n                    else if (attrType === 'shape') {\n                        attrCfg.values = theme.shapes[shapeType] || [];\n                    }\n                    else if (attrType === 'color') {\n                        if (scales.length) {\n                            // 根据数值个数使用对应的色板\n                            attrCfg.values = scales[0].values.length <= 10 ? theme.colors10 : theme.colors20;\n                        }\n                        else {\n                            attrCfg.values = theme.colors10;\n                        }\n                    }\n                }\n                var AttributeCtor = getAttributeClass(attrType);\n                attributes[attrType] = new AttributeCtor(attrCfg);\n            }\n        };\n        // 遍历每一个 attrOption，各自创建 Attribute 实例\n        for (var attrType in attributeOption) {\n            var state_1 = _loop_1(attrType);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n    };\n    // 处理数据：分组 -> 数字化 -> adjust 调整\n    Geometry.prototype.processData = function (data) {\n        this.hasSorted = false;\n        var scales = this.getAttribute('position').scales;\n        var categoryScales = scales.filter(function (scale) { return scale.isCategory; });\n        var groupedArray = this.groupData(data); // 数据分组\n        var beforeAdjust = [];\n        for (var i = 0, len = groupedArray.length; i < len; i++) {\n            var subData = groupedArray[i];\n            var arr = [];\n            for (var j = 0, subLen = subData.length; j < subLen; j++) {\n                var originData = subData[j];\n                var item = {};\n                // tslint:disable-next-line: forin\n                for (var k in originData) {\n                    item[k] = originData[k];\n                }\n                item[FIELD_ORIGIN] = originData;\n                // 将分类数据翻译成数据, 仅对位置相关的度量进行数字化处理\n                for (var _i = 0, categoryScales_1 = categoryScales; _i < categoryScales_1.length; _i++) {\n                    var scale = categoryScales_1[_i];\n                    var field = scale.field;\n                    item[field] = scale.translate(item[field]);\n                }\n                arr.push(item);\n            }\n            beforeAdjust.push(arr);\n        }\n        var dataArray = this.adjustData(beforeAdjust); // 进行 adjust 数据调整\n        this.beforeMappingData = dataArray;\n        return dataArray;\n    };\n    // 调整数据\n    Geometry.prototype.adjustData = function (dataArray) {\n        var adjustOption = this.adjustOption;\n        var result = dataArray;\n        if (adjustOption) {\n            var xScale = this.getXScale();\n            var yScale = this.getYScale();\n            var xField = xScale.field;\n            var yField = yScale ? yScale.field : null;\n            for (var i = 0, len = adjustOption.length; i < len; i++) {\n                var adjust = adjustOption[i];\n                var adjustCfg = __assign({ xField: xField,\n                    yField: yField }, adjust);\n                var type = adjust.type;\n                if (type === 'dodge') {\n                    var adjustNames = [];\n                    if (xScale.isCategory || xScale.type === 'identity') {\n                        adjustNames.push('x');\n                    }\n                    else if (!yScale) {\n                        adjustNames.push('y');\n                    }\n                    else {\n                        throw new Error('dodge is not support linear attribute, please use category attribute!');\n                    }\n                    adjustCfg.adjustNames = adjustNames;\n                    // 每个分组内每条柱子的宽度占比，用户不可指定，用户需要通过 columnWidthRatio 指定\n                    adjustCfg.dodgeRatio = this.theme.columnWidthRatio;\n                }\n                else if (type === 'stack') {\n                    var coordinate = this.coordinate;\n                    if (!yScale) {\n                        // 一维的情况下获取高度和默认size\n                        adjustCfg.height = coordinate.getHeight();\n                        var size = this.getDefaultValue('size') || 3;\n                        adjustCfg.size = size;\n                    }\n                    // 不进行 transpose 时，用户又没有设置这个参数时，默认从上向下\n                    if (!coordinate.isTransposed && isNil(adjustCfg.reverseOrder)) {\n                        adjustCfg.reverseOrder = true;\n                    }\n                }\n                var adjustCtor = getAdjustClass(type);\n                var adjustInstance = new adjustCtor(adjustCfg);\n                result = adjustInstance.process(result);\n                this.adjusts[type] = adjustInstance;\n            }\n        }\n        return result;\n    };\n    // 对数据进行分组\n    Geometry.prototype.groupData = function (data) {\n        var groupScales = this.getGroupScales();\n        var scaleDefs = this.scaleDefs;\n        var appendConditions = {};\n        var groupFields = [];\n        for (var index = 0; index < groupScales.length; index++) {\n            var scale = groupScales[index];\n            var field = scale.field;\n            groupFields.push(field);\n            if (get(scaleDefs, [field, 'values'])) {\n                // 用户通过 view.scale() 接口指定了 values 属性\n                appendConditions[field] = scaleDefs[field].values;\n            }\n        }\n        return group(data, groupFields, appendConditions);\n    };\n    // 更新发生层叠后的数据对应的度量范围\n    Geometry.prototype.updateStackRange = function (scale, dataArray) {\n        var mergeArray = flatten(dataArray);\n        var field = scale.field;\n        var min = scale.min;\n        var max = scale.max;\n        for (var index = 0; index < mergeArray.length; index++) {\n            var obj = mergeArray[index];\n            var tmpMin = Math.min.apply(null, obj[field]);\n            var tmpMax = Math.max.apply(null, obj[field]);\n            if (tmpMin < min) {\n                min = tmpMin;\n            }\n            if (tmpMax > max) {\n                max = tmpMax;\n            }\n        }\n        var scaleDefs = this.scaleDefs;\n        var cfg = {};\n        if (min < scale.min && !get(scaleDefs, [field, 'min'])) {\n            // 用户如果在列定义中定义了 min，则以用户定义的为准\n            cfg.min = min;\n        }\n        if (max > scale.max && !get(scaleDefs, [field, 'max'])) {\n            // 用户如果在列定义中定义了 max\n            cfg.max = max;\n        }\n        scale.change(cfg);\n    };\n    // 将数据映射至图形空间前的操作：排序以及关键点的生成\n    Geometry.prototype.beforeMapping = function (beforeMappingData) {\n        // 当初加 clone 是因为 points 的引用关系，导致更新失败，可是现在貌似复现不出来了，所以暂时不进行 clone\n        // const source = clone(beforeMappingData);\n        var source = beforeMappingData;\n        if (this.sortable) {\n            this.sort(source);\n        }\n        if (this.generatePoints) {\n            // 需要生成关键点\n            for (var index = 0, length_7 = source.length; index < length_7; index++) {\n                var currentData = source[index];\n                this.generateShapePoints(currentData);\n                var nextData = source[index + 1];\n                if (nextData) {\n                    this.generateShapePoints(nextData);\n                    currentData[0].nextPoints = nextData[0].points;\n                }\n            }\n        }\n        return source;\n    };\n    // 生成 shape 的关键点\n    Geometry.prototype.generateShapePoints = function (data) {\n        var shapeFactory = this.getShapeFactory();\n        var shapeAttr = this.getAttribute('shape');\n        for (var index = 0; index < data.length; index++) {\n            var obj = data[index];\n            var cfg = this.createShapePointsCfg(obj);\n            var shape = shapeAttr ? this.getAttributeValues(shapeAttr, obj) : null;\n            var points = shapeFactory.getShapePoints(shape, cfg);\n            obj.points = points;\n        }\n    };\n    // 将数据归一化\n    Geometry.prototype.normalizeValues = function (values, scale) {\n        var rst = [];\n        if (isArray(values)) {\n            for (var index = 0; index < values.length; index++) {\n                var value = values[index];\n                rst.push(scale.scale(value));\n            }\n        }\n        else {\n            rst = scale.scale(values);\n        }\n        return rst;\n    };\n    // 将数据映射至图形空间\n    Geometry.prototype.mapping = function (data) {\n        var attributes = this.attributes;\n        var mappingData = [];\n        for (var index = 0; index < data.length; index++) {\n            var record = data[index];\n            var newRecord = {\n                _origin: record[FIELD_ORIGIN],\n                points: record.points,\n                nextPoints: record.nextPoints,\n            };\n            for (var k in attributes) {\n                if (attributes.hasOwnProperty(k)) {\n                    var attr = attributes[k];\n                    var names = attr.names;\n                    var values = this.getAttributeValues(attr, record);\n                    if (names.length > 1) {\n                        // position 之类的生成多个字段的属性\n                        for (var j = 0; j < values.length; j += 1) {\n                            var val = values[j];\n                            var name_1 = names[j];\n                            newRecord[name_1] = isArray(val) && val.length === 1 ? val[0] : val; // 只有一个值时返回第一个属性值\n                        }\n                    }\n                    else {\n                        // values.length === 1 的判断是以下情况，获取用户设置的图形属性值\n                        // shape('a', ['dot', 'dash']), color('a', ['red', 'yellow'])\n                        newRecord[names[0]] = values.length === 1 ? values[0] : values;\n                    }\n                }\n            }\n            this.convertPoint(newRecord); // 将 x、y 转换成画布坐标\n            mappingData.push(newRecord);\n        }\n        return mappingData;\n    };\n    // 将归一化的坐标值转换成画布坐标\n    Geometry.prototype.convertPoint = function (mappingRecord) {\n        var x = mappingRecord.x, y = mappingRecord.y;\n        var rstX;\n        var rstY;\n        var obj;\n        var coordinate = this.coordinate;\n        if (isArray(x) && isArray(y)) {\n            rstX = [];\n            rstY = [];\n            for (var i = 0, j = 0, xLen = x.length, yLen = y.length; i < xLen && j < yLen; i += 1, j += 1) {\n                obj = coordinate.convert({\n                    x: x[i],\n                    y: y[j],\n                });\n                rstX.push(obj.x);\n                rstY.push(obj.y);\n            }\n        }\n        else if (isArray(y)) {\n            rstY = [];\n            for (var index = 0; index < y.length; index++) {\n                var yVal = y[index];\n                obj = coordinate.convert({\n                    x: x,\n                    y: yVal,\n                });\n                if (rstX && rstX !== obj.x) {\n                    if (!isArray(rstX)) {\n                        rstX = [rstX];\n                    }\n                    rstX.push(obj.x);\n                }\n                else {\n                    rstX = obj.x;\n                }\n                rstY.push(obj.y);\n            }\n        }\n        else if (isArray(x)) {\n            rstX = [];\n            for (var index = 0; index < x.length; index++) {\n                var xVal = x[index];\n                obj = coordinate.convert({\n                    x: xVal,\n                    y: y,\n                });\n                if (rstY && rstY !== obj.y) {\n                    if (!isArray(rstY)) {\n                        rstY = [rstY];\n                    }\n                    rstY.push(obj.y);\n                }\n                else {\n                    rstY = obj.y;\n                }\n                rstX.push(obj.x);\n            }\n        }\n        else {\n            var point = coordinate.convert({\n                x: x,\n                y: y,\n            });\n            rstX = point.x;\n            rstY = point.y;\n        }\n        mappingRecord.x = rstX;\n        mappingRecord.y = rstY;\n    };\n    // 获取 style 配置\n    Geometry.prototype.getStyleCfg = function (styleOption, originData) {\n        var _a = styleOption.fields, fields = _a === void 0 ? [] : _a, callback = styleOption.callback, cfg = styleOption.cfg;\n        if (cfg) {\n            // 用户直接配置样式属性\n            return cfg;\n        }\n        var params = fields.map(function (field) {\n            return originData[field];\n        });\n        return callback.apply(void 0, params);\n    };\n    Geometry.prototype.setCfg = function (cfg) {\n        var _this = this;\n        var coordinate = cfg.coordinate, data = cfg.data, theme = cfg.theme, scaleDefs = cfg.scaleDefs;\n        if (coordinate) {\n            this.coordinate = coordinate;\n        }\n        if (data) {\n            this.data = data;\n        }\n        if (scaleDefs) {\n            this.scaleDefs = scaleDefs;\n            this.idFields = [];\n            each(scaleDefs, function (scaleDef, field) {\n                if (scaleDef && scaleDef.key) {\n                    _this.idFields.push(field);\n                }\n            });\n        }\n        if (theme) {\n            this.theme = this.userTheme ? deepMix({}, theme, this.userTheme) : theme; // 支持 geometry 层级的主题设置\n        }\n    };\n    Geometry.prototype.renderLabels = function (mappingArray, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        var geometryLabel = this.geometryLabel;\n        if (!geometryLabel) {\n            // 初次创建\n            var labelType = this.getLabelType();\n            var GeometryLabelsCtor = getGeometryLabel(labelType);\n            geometryLabel = new GeometryLabelsCtor(this);\n            this.geometryLabel = geometryLabel;\n        }\n        geometryLabel.render(mappingArray, isUpdate);\n        // 将 label 同 element 进行关联\n        var labelsMap = geometryLabel.labelsRenderer.shapesMap;\n        each(this.elementsMap, function (element, id) {\n            var labels = filterLabelsById(id, labelsMap); // element 实例同 label 进行绑定\n            if (labels.length) {\n                element.labelShape = labels;\n                for (var i = 0; i < labels.length; i++) {\n                    var label = labels[i];\n                    var labelChildren = label.getChildren();\n                    for (var j = 0; j < labelChildren.length; j++) {\n                        var child = labelChildren[j];\n                        child.cfg.name = ['element', 'label'];\n                        child.cfg.element = element;\n                    }\n                }\n            }\n        });\n    };\n    /**\n     * 是否需要进行群组入场动画\n     * 规则：\n     * 1. 如果发生更新，则不进行\n     * 2. 如果用户关闭 geometry 动画，则不进行\n     * 3. 如果用户关闭了 appear 动画，则不进行\n     * 4. 如果用户配置了 appear.animation，则不进行\n     */\n    Geometry.prototype.canDoGroupAnimation = function (isUpdate) {\n        return (!isUpdate &&\n            this.animateOption &&\n            (get(this.animateOption, 'appear') === undefined ||\n                (get(this.animateOption, 'appear') && get(this.animateOption, ['appear', 'animation']) === undefined)));\n    };\n    return Geometry;\n}(Base));\nexport default Geometry;\n//# sourceMappingURL=base.js.map","import { groupToMap } from '@antv/util';\n/** @ignore */\nexport function group(data, fields, appendConditions) {\n    if (appendConditions === void 0) { appendConditions = {}; }\n    if (!fields) {\n        return [data];\n    }\n    var groups = groupToMap(data, fields);\n    var array = [];\n    if (fields.length === 1 && appendConditions[fields[0]]) {\n        var values = appendConditions[fields[0]];\n        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var value = values_1[_i];\n            var arr = groups[\"_\" + value];\n            if (arr) {\n                // 可能存在用户设置 values ，但是数据中没有对应的字段，则这时候 arr 就为 null\n                array.push(arr);\n            }\n        }\n    }\n    else {\n        for (var k in groups) {\n            if (groups.hasOwnProperty(k)) {\n                var eachGroup = groups[k];\n                array.push(eachGroup);\n            }\n        }\n    }\n    return array;\n}\n//# sourceMappingURL=group-data.js.map","import { ext } from '@antv/matrix-util';\nvar transform = ext.transform;\nexport { transform };\n/**\n * 对元素进行平移操作。\n * @param element 进行变换的元素\n * @param x x 方向位移\n * @param y y 方向位移\n */\nexport function translate(element, x, y) {\n    var matrix = transform(element.getMatrix(), [['t', x, y]]);\n    element.setMatrix(matrix);\n}\n/**\n * 获取元素旋转矩阵 (以元素的左上角为旋转点)\n * @param element 进行变换的元素\n * @param rotateRadian 旋转弧度\n */\nexport function getRotateMatrix(element, rotateRadian) {\n    var _a = element.attr(), x = _a.x, y = _a.y;\n    var matrix = transform(element.getMatrix(), [\n        ['t', -x, -y],\n        ['r', rotateRadian],\n        ['t', x, y],\n    ]);\n    return matrix;\n}\n/**\n * 对元素进行旋转操作。\n * @param element 进行变换的元素\n * @param rotateRadian 旋转弧度\n */\nexport function rotate(element, rotateRadian) {\n    var matrix = getRotateMatrix(element, rotateRadian);\n    element.setMatrix(matrix);\n}\n/**\n * 获取元矩阵。\n * @returns identity matrix\n */\nexport function getIdentityMatrix() {\n    return [1, 0, 0, 0, 1, 0, 0, 0, 1];\n}\n/**\n * 围绕图形中心点进行缩放\n * @param element 进行缩放的图形元素\n * @param ratio 缩放比例\n */\nexport function zoom(element, ratio) {\n    var bbox = element.getBBox();\n    var x = (bbox.minX + bbox.maxX) / 2;\n    var y = (bbox.minY + bbox.maxY) / 2;\n    element.applyToMatrix([x, y, 1]);\n    var matrix = transform(element.getMatrix(), [\n        ['t', -x, -y],\n        ['s', ratio, ratio],\n        ['t', x, y],\n    ]);\n    element.setMatrix(matrix);\n}\n//# sourceMappingURL=transform.js.map","import { isNil, isNumber } from '@antv/util';\nimport { rotate } from '../../../util/transform';\n/**\n * 查找 Label Group 中的文本 shape 对象\n * @param label\n */\nexport function findLabelTextShape(label) {\n    return label.find(function (el) { return el.get('type') === 'text'; });\n}\n/**\n * 获取标签背景信息: box (无旋转) + rotation (旋转角度)\n */\nexport function getlLabelBackgroundInfo(labelGroup, labelItem, padding) {\n    if (padding === void 0) { padding = [0, 0, 0, 0]; }\n    var content = labelGroup.getChildren()[0];\n    if (content) {\n        var labelShape = content.clone();\n        // revert rotate\n        if (labelItem.rotate) {\n            rotate(labelShape, -labelItem.rotate);\n        }\n        // use `getCanvasBBox`, because if Shape is been translated, `getBBox` is not the actual box position\n        var _a = labelShape.getCanvasBBox(), x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        labelShape.destroy();\n        var boxPadding = padding;\n        if (isNil(boxPadding)) {\n            boxPadding = [2, 2, 2, 2];\n        }\n        else if (isNumber(boxPadding)) {\n            boxPadding = new Array(4).fill(boxPadding);\n        }\n        return {\n            x: x - boxPadding[3],\n            y: y - boxPadding[0],\n            width: width + boxPadding[1] + boxPadding[3],\n            height: height + boxPadding[0] + boxPadding[2],\n            rotation: labelItem.rotate || 0,\n        };\n    }\n}\n//# sourceMappingURL=index.js.map","import { __assign, __rest } from \"tslib\";\nimport { deepMix, each, get, isArray } from '@antv/util';\nimport { doAnimate } from '../animate';\nimport { getGeometryLabelLayout } from '../geometry/label';\nimport { getlLabelBackgroundInfo } from '../geometry/label/util';\nimport { getReplaceAttrs, polarToCartesian } from '../util/graphics';\nimport { rotate, translate } from '../util/transform';\nimport { FIELD_ORIGIN } from '../constant';\n/**\n * Geometry labels 渲染组件\n */\nvar Labels = /** @class */ (function () {\n    function Labels(cfg) {\n        /** 存储当前 shape 的映射表，键值为 shape id */\n        this.shapesMap = {};\n        this.lastShapesMap = {};\n        var layout = cfg.layout, container = cfg.container;\n        this.layout = layout;\n        this.container = container;\n    }\n    /**\n     * 渲染文本\n     */\n    Labels.prototype.render = function (items, shapes, isUpdate) {\n        var _this = this;\n        if (isUpdate === void 0) { isUpdate = false; }\n        this.shapesMap = {};\n        var container = this.container;\n        var offscreenGroup = this.createOffscreenGroup(); // 创建虚拟分组\n        if (items.length) {\n            // 如果 items 空的话就不进行绘制调整操作\n            // step 1: 在虚拟 group 中创建 shapes\n            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n                var item = items_1[_i];\n                if (item) {\n                    this.renderLabel(item, offscreenGroup);\n                }\n            }\n            // step 2: 根据布局，调整 labels\n            this.doLayout(items, shapes);\n            // step 3.1: 绘制 labelLine\n            this.renderLabelLine(items);\n            // step 3.2: 绘制 labelBackground\n            this.renderLabelBackground(items);\n            // step 4: 根据用户设置的偏移量调整 label\n            this.adjustLabel(items);\n        }\n        // 进行添加、更新、销毁操作\n        var lastShapesMap = this.lastShapesMap;\n        var shapesMap = this.shapesMap;\n        each(shapesMap, function (shape, id) {\n            if (shape.destroyed) {\n                // label 在布局调整环节被删除了（doLayout）\n                delete shapesMap[id];\n            }\n            else {\n                if (lastShapesMap[id]) {\n                    // 图形发生更新\n                    var data_1 = shape.get('data');\n                    var origin_1 = shape.get('origin');\n                    var coordinate_1 = shape.get('coordinate');\n                    var currentShape = lastShapesMap[id]; // 已经在渲染树上的 shape\n                    var currentAnimateCfg_1 = shape.get('animateCfg');\n                    currentShape.set('data', data_1);\n                    currentShape.set('origin', origin_1);\n                    currentShape.set('animateCfg', currentAnimateCfg_1);\n                    currentShape.set('coordinate', coordinate_1);\n                    var updateAnimateCfg_1 = get(currentAnimateCfg_1, 'update');\n                    var currentChildren_1 = currentShape.getChildren();\n                    shape.getChildren().map(function (child, index) {\n                        var currentChild = currentChildren_1[index];\n                        currentChild.set('data', data_1);\n                        currentChild.set('origin', origin_1);\n                        currentChild.set('animateCfg', currentAnimateCfg_1);\n                        currentChild.set('coordinate', coordinate_1);\n                        var newAttrs = getReplaceAttrs(currentChild, child);\n                        if (updateAnimateCfg_1) {\n                            doAnimate(currentChild, updateAnimateCfg_1, {\n                                toAttrs: newAttrs,\n                                coordinate: coordinate_1,\n                            });\n                        }\n                        else {\n                            currentChild.attr(newAttrs);\n                        }\n                    });\n                    _this.shapesMap[id] = currentShape; // 保存引用\n                }\n                else {\n                    // 新生成的 shape\n                    container.add(shape);\n                    var animateCfg = get(shape.get('animateCfg'), isUpdate ? 'enter' : 'appear');\n                    if (animateCfg) {\n                        doAnimate(shape, animateCfg, {\n                            toAttrs: __assign({}, shape.attr()),\n                            coordinate: shape.get('coordinate'),\n                        });\n                    }\n                }\n                delete lastShapesMap[id];\n            }\n        });\n        // 移除\n        each(lastShapesMap, function (deleteShape) {\n            var animateCfg = get(deleteShape.get('animateCfg'), 'leave');\n            if (animateCfg) {\n                doAnimate(deleteShape, animateCfg, {\n                    toAttrs: null,\n                    coordinate: deleteShape.get('coordinate'),\n                });\n            }\n            else {\n                deleteShape.remove(true); // 移除\n            }\n        });\n        this.lastShapesMap = shapesMap;\n        offscreenGroup.destroy();\n    };\n    /** 清楚当前 labels */\n    Labels.prototype.clear = function () {\n        this.container.clear();\n        this.shapesMap = {};\n        this.lastShapesMap = {};\n    };\n    /** 销毁 */\n    Labels.prototype.destroy = function () {\n        this.container.destroy();\n        this.shapesMap = null;\n        this.lastShapesMap = null;\n    };\n    Labels.prototype.renderLabel = function (cfg, container) {\n        var id = cfg.id, data = cfg.data, mappingData = cfg.mappingData, coordinate = cfg.coordinate, animate = cfg.animate, content = cfg.content;\n        var shapeAppendCfg = {\n            id: id,\n            data: data,\n            origin: __assign(__assign({}, mappingData), { data: mappingData[FIELD_ORIGIN] }),\n            coordinate: coordinate,\n        };\n        var labelGroup = container.addGroup(__assign({ name: 'label', \n            // 如果 this.animate === false 或者 cfg.animate === false/null 则不进行动画，否则进行动画配置的合并\n            animateCfg: this.animate === false || animate === null || animate === false ? false : deepMix({}, this.animate, animate) }, shapeAppendCfg));\n        var labelShape;\n        if ((content.isGroup && content.isGroup()) || (content.isShape && content.isShape())) {\n            // 如果 content 是 Group 或者 Shape，根据 textAlign 调整位置后，直接将其加入 labelGroup\n            var _a = content.getCanvasBBox(), width = _a.width, height = _a.height;\n            var textAlign = get(cfg, 'textAlign', 'left');\n            var x = cfg.x;\n            var y = cfg.y - height / 2;\n            if (textAlign === 'center') {\n                x = x - width / 2;\n            }\n            else if (textAlign === 'right' || textAlign === 'end') {\n                x = x - width;\n            }\n            translate(content, x, y); // 将 label 平移至 x, y 指定的位置\n            labelShape = content;\n            labelGroup.add(content);\n        }\n        else {\n            labelShape = labelGroup.addShape('text', __assign({ attrs: __assign({ x: cfg.x, y: cfg.y, textAlign: cfg.textAlign, textBaseline: get(cfg, 'textBaseline', 'middle'), text: cfg.content }, cfg.style) }, shapeAppendCfg));\n        }\n        if (cfg.rotate) {\n            rotate(labelShape, cfg.rotate);\n        }\n        this.shapesMap[id] = labelGroup;\n    };\n    // 根据type对label布局\n    Labels.prototype.doLayout = function (items, shapes) {\n        var _this = this;\n        if (this.layout) {\n            var layouts = isArray(this.layout) ? this.layout : [this.layout];\n            each(layouts, function (layout) {\n                var layoutFn = getGeometryLabelLayout(get(layout, 'type', ''));\n                if (layoutFn) {\n                    var labelShapes_1 = [];\n                    var geometryShapes_1 = [];\n                    each(_this.shapesMap, function (labelShape, id) {\n                        labelShapes_1.push(labelShape);\n                        geometryShapes_1.push(shapes[id]);\n                    });\n                    layoutFn(items, labelShapes_1, geometryShapes_1, _this.region, layout.cfg);\n                }\n            });\n        }\n    };\n    Labels.prototype.renderLabelLine = function (labelItems) {\n        var _this = this;\n        each(labelItems, function (labelItem) {\n            var coordinate = get(labelItem, 'coordinate');\n            if (!labelItem || !coordinate) {\n                return;\n            }\n            var center = coordinate.getCenter();\n            var radius = coordinate.getRadius();\n            if (!labelItem.labelLine) {\n                // labelLine: null | false，关闭 label 对应的 labelLine\n                return;\n            }\n            var labelLineCfg = get(labelItem, 'labelLine', {});\n            var id = labelItem.id;\n            var path = labelLineCfg.path;\n            if (!path) {\n                var start = polarToCartesian(center.x, center.y, radius, labelItem.angle);\n                path = [\n                    ['M', start.x, start.y],\n                    ['L', labelItem.x, labelItem.y],\n                ];\n            }\n            var labelGroup = _this.shapesMap[id];\n            if (!labelGroup.destroyed) {\n                labelGroup.addShape('path', {\n                    capture: false,\n                    attrs: __assign({ path: path, stroke: labelItem.color ? labelItem.color : get(labelItem, ['style', 'fill'], '#000'), fill: null }, labelLineCfg.style),\n                    id: id,\n                    origin: labelItem.mappingData,\n                    data: labelItem.data,\n                    coordinate: labelItem.coordinate,\n                });\n            }\n        });\n    };\n    /**\n     * 绘制标签背景\n     * @param labelItems\n     */\n    Labels.prototype.renderLabelBackground = function (labelItems) {\n        var _this = this;\n        each(labelItems, function (labelItem) {\n            var coordinate = get(labelItem, 'coordinate');\n            var background = get(labelItem, 'background');\n            if (!background || !coordinate) {\n                return;\n            }\n            var id = labelItem.id;\n            var labelGroup = _this.shapesMap[id];\n            if (!labelGroup.destroyed) {\n                var labelContentShape = labelGroup.getChildren()[0];\n                if (labelContentShape) {\n                    var _a = getlLabelBackgroundInfo(labelGroup, labelItem, background.padding), rotation = _a.rotation, box = __rest(_a, [\"rotation\"]);\n                    var backgroundShape = labelGroup.addShape('rect', {\n                        attrs: __assign(__assign({}, box), (background.style || {})),\n                        id: id,\n                        origin: labelItem.mappingData,\n                        data: labelItem.data,\n                        coordinate: labelItem.coordinate,\n                    });\n                    backgroundShape.setZIndex(-1);\n                    if (rotation) {\n                        var matrix = labelContentShape.getMatrix();\n                        backgroundShape.setMatrix(matrix);\n                    }\n                }\n            }\n        });\n    };\n    Labels.prototype.createOffscreenGroup = function () {\n        var container = this.container;\n        var GroupClass = container.getGroupBase(); // 获取分组的构造函数\n        var newGroup = new GroupClass({});\n        return newGroup;\n    };\n    Labels.prototype.adjustLabel = function (items) {\n        var _this = this;\n        each(items, function (item) {\n            if (item) {\n                var id = item.id;\n                var labelGroup = _this.shapesMap[id];\n                if (!labelGroup.destroyed) {\n                    // fix: 如果说开发者的 label content 是一个 group，此处的偏移无法对 整个 content group 生效；场景类似 饼图 spider label 是一个含 2 个 textShape 的 gorup\n                    var labelShapes = labelGroup.findAll(function (ele) { return ele.get('type') !== 'path'; });\n                    each(labelShapes, function (labelShape) {\n                        if (labelShape) {\n                            if (item.offsetX) {\n                                labelShape.attr('x', labelShape.attr('x') + item.offsetX);\n                            }\n                            if (item.offsetY) {\n                                labelShape.attr('y', labelShape.attr('y') + item.offsetY);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n    };\n    return Labels;\n}());\nexport default Labels;\n//# sourceMappingURL=labels.js.map","import { __assign } from \"tslib\";\nimport { deepMix, each, get, isArray, isFunction, isNil, isUndefined } from '@antv/util';\nimport { FIELD_ORIGIN } from '../../constant';\nimport { getDefaultAnimateCfg } from '../../animate';\nimport { getPolygonCentroid } from '../../util/graphics';\nimport Labels from '../../component/labels';\nfunction avg(arr) {\n    var sum = 0;\n    each(arr, function (value) {\n        sum += value;\n    });\n    return sum / arr.length;\n}\n/**\n * Geometry Label 基类，用于生成 Geometry 下所有 label 的配置项信息\n */\nvar GeometryLabel = /** @class */ (function () {\n    function GeometryLabel(geometry) {\n        this.geometry = geometry;\n    }\n    GeometryLabel.prototype.getLabelItems = function (mapppingArray) {\n        var _this = this;\n        var items = [];\n        var labelCfgs = this.getLabelCfgs(mapppingArray);\n        // 获取 label 相关的 x，y 的值，获取具体的 x, y，防止存在数组\n        each(mapppingArray, function (mappingData, index) {\n            var labelCfg = labelCfgs[index];\n            if (!labelCfg || isNil(mappingData.x) || isNil(mappingData.y)) {\n                items.push(null);\n                return;\n            }\n            var labelContent = !isArray(labelCfg.content) ? [labelCfg.content] : labelCfg.content;\n            labelCfg.content = labelContent;\n            var total = labelContent.length;\n            each(labelContent, function (content, subIndex) {\n                if (isNil(content) || content === '') {\n                    items.push(null);\n                    return;\n                }\n                var item = __assign(__assign({}, labelCfg), _this.getLabelPoint(labelCfg, mappingData, subIndex));\n                if (!item.textAlign) {\n                    item.textAlign = _this.getLabelAlign(item, subIndex, total);\n                }\n                if (item.offset <= 0) {\n                    item.labelLine = null;\n                }\n                items.push(item);\n            });\n        });\n        return items;\n    };\n    GeometryLabel.prototype.render = function (mapppingArray, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        var labelItems = this.getLabelItems(mapppingArray);\n        var labelsRenderer = this.getLabelsRenderer();\n        var shapes = this.getGeometryShapes();\n        // 渲染文本\n        labelsRenderer.render(labelItems, shapes, isUpdate);\n    };\n    GeometryLabel.prototype.clear = function () {\n        var labelsRenderer = this.labelsRenderer;\n        if (labelsRenderer) {\n            labelsRenderer.clear();\n        }\n    };\n    GeometryLabel.prototype.destroy = function () {\n        var labelsRenderer = this.labelsRenderer;\n        if (labelsRenderer) {\n            labelsRenderer.destroy();\n        }\n        this.labelsRenderer = null;\n    };\n    // geometry 更新之后，对应的 Coordinate 也会更新，为了获取到最新鲜的 Coordinate，故使用方法获取\n    GeometryLabel.prototype.getCoordinate = function () {\n        return this.geometry.coordinate;\n    };\n    /**\n     * 获取 label 的默认配置\n     */\n    GeometryLabel.prototype.getDefaultLabelCfg = function () {\n        return get(this.geometry.theme, 'labels', {});\n    };\n    /**\n     * 获取当前 label 的最终配置\n     * @param labelCfg\n     */\n    GeometryLabel.prototype.getThemedLabelCfg = function (labelCfg) {\n        var geometry = this.geometry;\n        var defaultLabelCfg = this.getDefaultLabelCfg();\n        var type = geometry.type, theme = geometry.theme;\n        var themedLabelCfg;\n        if (type === 'polygon' || (labelCfg.offset < 0 && !['line', 'point', 'path'].includes(type))) {\n            // polygon 或者 offset 小于 0 时，文本展示在图形内部，将其颜色设置为 白色\n            themedLabelCfg = deepMix({}, defaultLabelCfg, theme.innerLabels, labelCfg);\n        }\n        else {\n            themedLabelCfg = deepMix({}, defaultLabelCfg, theme.labels, labelCfg);\n        }\n        return themedLabelCfg;\n    };\n    /**\n     * 设置 label 位置\n     * @param labelPointCfg\n     * @param mappingData\n     * @param index\n     * @param position\n     */\n    GeometryLabel.prototype.setLabelPosition = function (labelPointCfg, mappingData, index, position) { };\n    /**\n     * 获取文本默认偏移量\n     * @param offset\n     * @returns\n     */\n    GeometryLabel.prototype.getDefaultOffset = function (offset) {\n        var coordinate = this.getCoordinate();\n        var vector = this.getOffsetVector(offset);\n        return coordinate.isTransposed ? vector[0] : vector[1];\n    };\n    /**\n     * 获取每个 label 的偏移量\n     * @param labelCfg\n     * @param index\n     * @param total\n     * @returns\n     */\n    GeometryLabel.prototype.getLabelOffset = function (labelCfg, index, total) {\n        var offset = this.getDefaultOffset(labelCfg.offset);\n        var coordinate = this.getCoordinate();\n        var transposed = coordinate.isTransposed;\n        var dim = transposed ? 'x' : 'y';\n        var factor = transposed ? 1 : -1; // y 方向上越大，像素的坐标越小，所以transposed时将系数变成\n        var offsetPoint = {\n            x: 0,\n            y: 0,\n        };\n        if (index > 0 || total === 1) {\n            // 判断是否小于0\n            offsetPoint[dim] = offset * factor;\n        }\n        else {\n            offsetPoint[dim] = offset * factor * -1;\n        }\n        return offsetPoint;\n    };\n    /**\n     * 获取每个 label 的位置\n     * @param labelCfg\n     * @param mappingData\n     * @param index\n     * @returns label point\n     */\n    GeometryLabel.prototype.getLabelPoint = function (labelCfg, mappingData, index) {\n        var coordinate = this.getCoordinate();\n        var total = labelCfg.content.length;\n        function getDimValue(value, idx) {\n            var v = value;\n            if (isArray(v)) {\n                if (labelCfg.content.length === 1) {\n                    // 如果仅一个 label，多个 y, 取最后一个 y\n                    if (v.length <= 2) {\n                        v = v[value.length - 1];\n                    }\n                    else {\n                        v = avg(v);\n                    }\n                }\n                else {\n                    v = v[idx];\n                }\n            }\n            return v;\n        }\n        var label = {\n            content: labelCfg.content[index],\n            x: 0,\n            y: 0,\n            start: { x: 0, y: 0 },\n            color: '#fff',\n        };\n        // 多边形场景，多用于地图\n        if (mappingData && this.geometry.type === 'polygon') {\n            var centroid = getPolygonCentroid(mappingData.x, mappingData.y);\n            label.x = centroid[0];\n            label.y = centroid[1];\n        }\n        else {\n            label.x = getDimValue(mappingData.x, index);\n            label.y = getDimValue(mappingData.y, index);\n        }\n        // 处理漏斗图文本位置\n        var shape = isArray(mappingData.shape) ? mappingData.shape[0] : mappingData.shape;\n        if (shape === 'funnel' || shape === 'pyramid') {\n            var nextPoints = get(mappingData, 'nextPoints');\n            var points = get(mappingData, 'points');\n            if (nextPoints) {\n                // 非漏斗图底部\n                var point1 = coordinate.convert(points[1]);\n                var point2 = coordinate.convert(nextPoints[1]);\n                label.x = (point1.x + point2.x) / 2;\n                label.y = (point1.y + point2.y) / 2;\n            }\n            else if (shape === 'pyramid') {\n                var point1 = coordinate.convert(points[1]);\n                var point2 = coordinate.convert(points[2]);\n                label.x = (point1.x + point2.x) / 2;\n                label.y = (point1.y + point2.y) / 2;\n            }\n        }\n        if (labelCfg.position) {\n            // 如果 label 支持 position 属性\n            this.setLabelPosition(label, mappingData, index, labelCfg.position);\n        }\n        var offsetPoint = this.getLabelOffset(labelCfg, index, total);\n        label.start = { x: label.x, y: label.y };\n        label.x += offsetPoint.x;\n        label.y += offsetPoint.y;\n        label.color = mappingData.color;\n        return label;\n    };\n    /**\n     * 获取文本的对齐方式\n     * @param item\n     * @param index\n     * @param total\n     * @returns\n     */\n    GeometryLabel.prototype.getLabelAlign = function (item, index, total) {\n        var align = 'center';\n        var coordinate = this.getCoordinate();\n        if (coordinate.isTransposed) {\n            var offset = this.getDefaultOffset(item.offset);\n            if (offset < 0) {\n                align = 'right';\n            }\n            else if (offset === 0) {\n                align = 'center';\n            }\n            else {\n                align = 'left';\n            }\n            if (total > 1 && index === 0) {\n                if (align === 'right') {\n                    align = 'left';\n                }\n                else if (align === 'left') {\n                    align = 'right';\n                }\n            }\n        }\n        return align;\n    };\n    /**\n     * 获取每一个 label 的唯一 id\n     * @param mappingData label 对应的图形的绘制数据\n     */\n    GeometryLabel.prototype.getLabelId = function (mappingData) {\n        var geometry = this.geometry;\n        var type = geometry.type;\n        var xScale = geometry.getXScale();\n        var yScale = geometry.getYScale();\n        var origin = mappingData[FIELD_ORIGIN]; // 原始数据\n        var labelId = geometry.getElementId(mappingData);\n        if (type === 'line' || type === 'area') {\n            // 折线图以及区域图，一条线会对应一组数据，即多个 labels，为了区分这些 labels，需要在 line id 的前提下加上 x 字段值\n            labelId += \" \" + origin[xScale.field];\n        }\n        else if (type === 'path') {\n            // path 路径图，无序，有可能存在相同 x 不同 y 的情况，需要通过 x y 来确定唯一 id\n            labelId += \" \" + origin[xScale.field] + \"-\" + origin[yScale.field];\n        }\n        return labelId;\n    };\n    // 获取 labels 组件\n    GeometryLabel.prototype.getLabelsRenderer = function () {\n        var _a = this.geometry, labelsContainer = _a.labelsContainer, labelOption = _a.labelOption, canvasRegion = _a.canvasRegion, animateOption = _a.animateOption;\n        var coordinate = this.geometry.coordinate;\n        var labelsRenderer = this.labelsRenderer;\n        if (!labelsRenderer) {\n            labelsRenderer = new Labels({\n                container: labelsContainer,\n                layout: get(labelOption, ['cfg', 'layout'], {\n                    type: this.defaultLayout,\n                }),\n            });\n            this.labelsRenderer = labelsRenderer;\n        }\n        labelsRenderer.region = canvasRegion;\n        // 设置动画配置，如果 geometry 的动画关闭了，那么 label 的动画也会关闭\n        labelsRenderer.animate = animateOption ? getDefaultAnimateCfg('label', coordinate) : false;\n        return labelsRenderer;\n    };\n    GeometryLabel.prototype.getLabelCfgs = function (mapppingArray) {\n        var _this = this;\n        var geometry = this.geometry;\n        var defaultLabelCfg = this.getDefaultLabelCfg();\n        var type = geometry.type, theme = geometry.theme, labelOption = geometry.labelOption, scales = geometry.scales, coordinate = geometry.coordinate;\n        var _a = labelOption, fields = _a.fields, callback = _a.callback, cfg = _a.cfg;\n        var labelScales = fields.map(function (field) {\n            return scales[field];\n        });\n        var labelCfgs = [];\n        each(mapppingArray, function (mappingData, index) {\n            var origin = mappingData[FIELD_ORIGIN]; // 原始数据\n            var originText = _this.getLabelText(origin, labelScales);\n            var callbackCfg;\n            if (callback) {\n                // 当同时配置了 callback 和 cfg 时，以 callback 为准\n                var originValues = fields.map(function (field) { return origin[field]; });\n                callbackCfg = callback.apply(void 0, originValues);\n                if (isNil(callbackCfg)) {\n                    labelCfgs.push(null);\n                    return;\n                }\n            }\n            var labelCfg = __assign(__assign({ id: _this.getLabelId(mappingData), data: origin, // 存储原始数据\n                mappingData: mappingData,\n                coordinate: coordinate }, cfg), callbackCfg);\n            var content = labelCfg.content;\n            if (isFunction(content)) {\n                labelCfg.content = content(origin, mappingData, index);\n            }\n            else if (isUndefined(content)) {\n                // 用户未配置 content，则默认为映射的第一个字段的值\n                labelCfg.content = originText[0];\n            }\n            if (isFunction(labelCfg.position)) {\n                labelCfg.position = labelCfg.position(origin, mappingData, index);\n            }\n            labelCfg = _this.getThemedLabelCfg(labelCfg);\n            labelCfgs.push(labelCfg);\n        });\n        return labelCfgs;\n    };\n    GeometryLabel.prototype.getLabelText = function (origin, scales) {\n        var labelTexts = [];\n        each(scales, function (scale) {\n            var value = origin[scale.field];\n            if (isArray(value)) {\n                value = value.map(function (subVal) {\n                    return scale.getText(subVal);\n                });\n            }\n            else {\n                value = scale.getText(value);\n            }\n            if (isNil(value) || value === '') {\n                labelTexts.push(null);\n            }\n            else {\n                labelTexts.push(value);\n            }\n        });\n        return labelTexts;\n    };\n    GeometryLabel.prototype.getOffsetVector = function (offset) {\n        if (offset === void 0) { offset = 0; }\n        var coordinate = this.getCoordinate();\n        // 如果 x,y 翻转，则偏移 x，否则偏移 y\n        return coordinate.isTransposed ? coordinate.applyMatrix(offset, 0) : coordinate.applyMatrix(0, offset);\n    };\n    GeometryLabel.prototype.getGeometryShapes = function () {\n        var geometry = this.geometry;\n        var shapes = {};\n        each(geometry.elementsMap, function (element, id) {\n            shapes[id] = element.shape;\n        });\n        // 因为有可能 shape 还在进行动画，导致 shape.getBBox() 获取到的值不是最终态，所以需要从 offscreenGroup 获取\n        each(geometry.getOffscreenGroup().getChildren(), function (child) {\n            var id = geometry.getElementId(child.get('origin').mappingData);\n            shapes[id] = child;\n        });\n        return shapes;\n    };\n    return GeometryLabel;\n}());\nexport default GeometryLabel;\n//# sourceMappingURL=base.js.map","/* G2 的一个壳子，不包含 Geometry，由开发者自己定义和引入 */\nexport var VERSION = '4.1.0-beta.14';\n// 核心基类导出\nexport { Chart, View, Event } from './chart'; // Chart, View 类\nexport { Controller as ComponentController } from './chart/controller/base'; // G2 组件基类\nexport { default as Geometry } from './geometry/base'; // Geometry 基类\nexport { default as GeometryLabel } from './geometry/label/base'; // Geometry Label 基类\nexport { Interaction } from './interaction'; // Interaction 基类\nexport { Facet } from './facet'; // Facet 基类\nexport { default as InteractionAction } from './interaction/action/base'; // Interaction Action 基类\n// 注册 ComponentController\nexport { registerComponentController } from './chart';\n// 注册 Geometry\nexport { registerGeometry } from './chart';\n// 注册 Geometry Shape\nexport { registerShape, registerShapeFactory, getShapeFactory } from './geometry/shape/base';\n// 注册 Geometry label 以及 Geometry Label 布局函数\nexport { registerGeometryLabel, registerGeometryLabelLayout, getGeometryLabel, getGeometryLabelLayout, } from './geometry/label';\n// 注册 interaction\nexport { getInteraction, registerInteraction, registerAction, getActionClass } from './interaction';\n// 注册 facet\nexport { getFacet, registerFacet } from './facet';\n// 注册主题\nexport { getTheme, registerTheme } from './theme';\n// G engine 管理相关\nexport { registerEngine, getEngine } from './engine';\n// 注册动画函数\nexport { registerAnimation, getAnimation } from './animate/animation';\nexport { LAYER, DIRECTION } from './constant';\n// 因为 typescript 部分版本不支持 export * as 语法。\nimport * as Types from './interface';\nexport { Types };\n//# sourceMappingURL=core.js.map","var WHITE_COLORS = {\n    100: '#000',\n    95: '#0D0D0D',\n    85: '#262626',\n    65: '#595959',\n    45: '#8C8C8C',\n    25: '#BFBFBF',\n    15: '#D9D9D9',\n    6: '#F0F0F0',\n};\nvar BLACK_COLORS = {\n    100: '#FFFFFF',\n    95: '#F2F2F2',\n    85: '#D9D9D9',\n    65: '#A6A6A6',\n    45: '#737373',\n    25: '#404040',\n    15: '#262626',\n    6: '#0F0F0F',\n};\nvar QUALITATIVE_10 = [\n    '#5B8FF9',\n    '#5AD8A6',\n    '#5D7092',\n    '#F6BD16',\n    '#E86452',\n    '#6DC8EC',\n    '#945FB9',\n    '#FF9845',\n    '#1E9493',\n    '#FF99C3',\n];\nvar QUALITATIVE_20 = [\n    '#5B8FF9',\n    '#CDDDFD',\n    '#5AD8A6',\n    '#CDF3E4',\n    '#5D7092',\n    '#CED4DE',\n    '#F6BD16',\n    '#FCEBB9',\n    '#E86452',\n    '#F8D0CB',\n    '#6DC8EC',\n    '#D3EEF9',\n    '#945FB9',\n    '#DECFEA',\n    '#FF9845',\n    '#FFE0C7',\n    '#1E9493',\n    '#BBDEDE',\n    '#FF99C3',\n    '#FFE0ED',\n];\nexport var antvDark = {\n    /** 图表背景色 */\n    backgroundColor: '#141414',\n    /** 主题色 */\n    brandColor: QUALITATIVE_10[0],\n    /** 分类色板 1，在数据量小于等于 10 时使用 */\n    paletteQualitative10: QUALITATIVE_10,\n    /** 分类色板 2，在数据量大于 10 时使用 */\n    paletteQualitative20: QUALITATIVE_20,\n    /** 语义色 */\n    paletteSemanticRed: '#F4664A',\n    /** 语义色 */\n    paletteSemanticGreen: '#30BF78',\n    /** 语义色 */\n    paletteSemanticYellow: '#FAAD14',\n    /** 字体 */\n    fontFamily: \"\\\"-apple-system\\\", \\\"Segoe UI\\\", Roboto, \\\"Helvetica Neue\\\", Arial,\\n  \\\"Noto Sans\\\", sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\",\\n  \\\"Noto Color Emoji\\\"\",\n    // -------------------- 坐标轴 --------------------\n    /** 坐标轴线颜色 */\n    axisLineBorderColor: BLACK_COLORS[25],\n    /** 坐标轴线粗细 */\n    axisLineBorder: 1,\n    /** 坐标轴线 lineDash 设置 */\n    axisLineDash: null,\n    /** 坐标轴标题颜色 */\n    axisTitleTextFillColor: BLACK_COLORS[65],\n    /** 坐标轴标题文本字体大小 */\n    axisTitleTextFontSize: 12,\n    /** 坐标轴标题文本行高 */\n    axisTitleTextLineHeight: 12,\n    /** 坐标轴标题文本字体粗细 */\n    axisTitleTextFontWeight: 'normal',\n    /** 坐标轴标题距离坐标轴文本的间距 */\n    axisTitleSpacing: 12,\n    /** 坐标轴刻度线颜色 */\n    axisTickLineBorderColor: BLACK_COLORS[25],\n    /** 坐标轴刻度线长度 */\n    axisTickLineLength: 4,\n    /** 坐标轴刻度线粗细 */\n    axisTickLineBorder: 1,\n    /** 坐标轴次刻度线颜色 */\n    axisSubTickLineBorderColor: BLACK_COLORS[15],\n    /** 坐标轴次刻度线长度 */\n    axisSubTickLineLength: 2,\n    /** 坐标轴次刻度线粗细 */\n    axisSubTickLineBorder: 1,\n    /** 坐标轴刻度文本颜色 */\n    axisLabelFillColor: BLACK_COLORS[45],\n    /** 坐标轴刻度文本字体大小 */\n    axisLabelFontSize: 12,\n    /** 坐标轴刻度文本行高 */\n    axisLabelLineHeight: 12,\n    /** 坐标轴刻度文本字体粗细 */\n    axisLabelFontWeight: 'normal',\n    /** 坐标轴刻度文本距离坐标轴线的间距 */\n    axisLabelOffset: 8,\n    /** 坐标轴网格线颜色 */\n    axisGridBorderColor: BLACK_COLORS[15],\n    /** 坐标轴网格线粗细 */\n    axisGridBorder: 1,\n    /** 坐标轴网格线虚线设置 */\n    axisGridLineDash: null,\n    // -------------------- 图例 --------------------\n    /** 图例标题颜色 */\n    legendTitleTextFillColor: BLACK_COLORS[45],\n    /** 图例标题文本字体大小 */\n    legendTitleTextFontSize: 12,\n    /** 图例标题文本行高 */\n    legendTitleTextLineHeight: 21,\n    /** 图例标题文本字体粗细 */\n    legendTitleTextFontWeight: 'normal',\n    /** 图例 marker 颜色 */\n    legendMarkerColor: QUALITATIVE_10[0],\n    /** 图例 marker 距离图例文本的间距 */\n    legendMarkerSpacing: 8,\n    /** 图例 marker 默认半径大小 */\n    legendMarkerSize: 4,\n    /** 图例 'circle' marker 半径 */\n    legendCircleMarkerSize: 4,\n    /** 图例 'square' marker 半径 */\n    legendSquareMarkerSize: 4,\n    /** 图例 'line' marker 半径 */\n    legendLineMarkerSize: 5,\n    /** 图例项文本颜色 */\n    legendItemNameFillColor: BLACK_COLORS[65],\n    /** 图例项文本字体大小 */\n    legendItemNameFontSize: 12,\n    /** 图例项文本行高 */\n    legendItemNameLineHeight: 12,\n    /** 图例项粗细 */\n    legendItemNameFontWeight: 'normal',\n    /** 图例项之间的水平间距 */\n    legendItemSpacing: 24,\n    /** 图例项垂直方向的间隔 */\n    legendItemMarginBottom: 12,\n    /** 图例与图表绘图区域的便宜距离  */\n    legendSpacing: 16,\n    /** 连续图例滑块填充色 */\n    sliderRailFillColor: BLACK_COLORS[15],\n    /** 连续图例滑块边框粗细 */\n    sliderRailBorder: 0,\n    /** 连续图例滑块边框颜色 */\n    sliderRailBorderColor: null,\n    /** 连续图例滑块宽度 */\n    sliderRailWidth: 100,\n    /** 连续图例滑块高度 */\n    sliderRailHeight: 12,\n    /** 连续图例文本颜色 */\n    sliderLabelTextFillColor: BLACK_COLORS[45],\n    /** 连续图例文本字体大小 */\n    sliderLabelTextFontSize: 12,\n    /** 连续图例文本行高 */\n    sliderLabelTextLineHeight: 12,\n    /** 连续图例文本字体粗细 */\n    sliderLabelTextFontWeight: 'normal',\n    /** 连续图例滑块颜色 */\n    sliderHandlerFillColor: WHITE_COLORS[6],\n    /** 连续图例滑块宽度 */\n    sliderHandlerWidth: 10,\n    /** 连续图例滑块高度 */\n    sliderHandlerHeight: 14,\n    /** 连续图例滑块边框粗细 */\n    sliderHandlerBorder: 1,\n    /** 连续图例滑块边框颜色 */\n    sliderHandlerBorderColor: WHITE_COLORS[25],\n    // -------------------- Annotation，图形标注 --------------------\n    /** arc 图形标注描边颜色 */\n    annotationArcBorderColor: BLACK_COLORS[15],\n    /** arc 图形标注粗细 */\n    annotationArcBorder: 1,\n    /** line 图形标注颜色 */\n    annotationLineBorderColor: BLACK_COLORS[25],\n    /** line 图形标注粗细 */\n    annotationLineBorder: 1,\n    /** lube 图形标注的虚线间隔 */\n    annotationLineDash: null,\n    /** text 图形标注文本颜色 */\n    annotationTextFillColor: BLACK_COLORS[65],\n    /** text 图形标注文本字体大小 */\n    annotationTextFontSize: 12,\n    /** text 图形标注文本行高 */\n    annotationTextLineHeight: 12,\n    /** text 图形标注文本字体粗细 */\n    annotationTextFontWeight: 'normal',\n    /** text 图形标注文本边框颜色 */\n    annotationTextBorderColor: null,\n    /** text 图形标注文本边框粗细 */\n    annotationTextBorder: 0,\n    /** region 图形标注填充颜色 */\n    annotationRegionFillColor: BLACK_COLORS[100],\n    /** region 图形标注填充颜色透明色 */\n    annotationRegionFillOpacity: 0.06,\n    /** region 图形标注描边粗细 */\n    annotationRegionBorder: 0,\n    /** region 图形标注描边颜色 */\n    annotationRegionBorderColor: null,\n    /** dataMarker 图形标注线的长度 */\n    annotationDataMarkerLineLength: 16,\n    // -------------------- Tooltip --------------------\n    /** tooltip crosshairs 辅助线颜色 */\n    tooltipCrosshairsBorderColor: BLACK_COLORS[25],\n    /** tooltip crosshairs 辅助线粗细 */\n    tooltipCrosshairsBorder: 1,\n    /** tooltip crosshairs 辅助线虚线间隔 */\n    tooltipCrosshairsLineDash: null,\n    /** tooltip 内容框背景色 */\n    tooltipContainerFillColor: '#1f1f1f',\n    tooltipContainerFillOpacity: 0.95,\n    /** tooltip 内容框阴影 */\n    tooltipContainerShadow: '0px 2px 4px rgba(0,0,0,.5)',\n    /** tooltip 内容框圆角 */\n    tooltipContainerBorderRadius: 3,\n    /** tooltip 文本颜色 */\n    tooltipTextFillColor: BLACK_COLORS[65],\n    /** tooltip 文本字体大小 */\n    tooltipTextFontSize: 12,\n    /** tooltip 文本行高 */\n    tooltipTextLineHeight: 12,\n    /** tooltip 文本字体粗细 */\n    tooltipTextFontWeight: 'bold',\n    // -------------------- Geometry labels --------------------\n    /** Geometry label 文本颜色 */\n    labelFillColor: BLACK_COLORS[65],\n    labelFillColorDark: '#2c3542',\n    labelFillColorLight: '#ffffff',\n    /** Geometry label 文本字体大小 */\n    labelFontSize: 12,\n    /** Geometry label 文本行高 */\n    labelLineHeight: 12,\n    /** Geometry label 文本字体粗细 */\n    labelFontWeight: 'normal',\n    /** Geometry label 文本描边颜色 */\n    labelBorderColor: null,\n    /** Geometry label 文本描边粗细 */\n    labelBorder: 0,\n    /** Geometry innerLabel 文本颜色 */\n    innerLabelFillColor: WHITE_COLORS[100],\n    /** Geometry innerLabel 文本字体大小 */\n    innerLabelFontSize: 12,\n    /** Geometry innerLabel 文本行高 */\n    innerLabelLineHeight: 12,\n    /** Geometry innerLabel 文本字体粗细 */\n    innerLabelFontWeight: 'normal',\n    /** Geometry innerLabel 文本描边颜色 */\n    innerLabelBorderColor: null,\n    /** Geometry innerLabel 文本描边粗细 */\n    innerLabelBorder: 0,\n    /** Geometry label　文本连接线粗细 */\n    labelLineBorder: 1,\n    /** Geometry label 文本连接线颜色 */\n    labelLineBorderColor: BLACK_COLORS[25],\n    // -------------------- Geometry 图形样式--------------------\n    /** 点图填充颜色 */\n    pointFillColor: QUALITATIVE_10[0],\n    /** 点图填充颜色透明度 */\n    pointFillOpacity: 0.95,\n    /** 点图大小 */\n    pointSize: 4,\n    /** 点图描边粗细 */\n    pointBorder: 1,\n    /** 点图描边颜色 */\n    pointBorderColor: WHITE_COLORS[100],\n    /** 点图描边透明度 */\n    pointBorderOpacity: 1,\n    /** 点图 active 状态下描边颜色 */\n    pointActiveBorderColor: BLACK_COLORS[100],\n    /** 点图 selected 状态下描边粗细 */\n    pointSelectedBorder: 2,\n    /** 点图 selected 状态下描边颜色 */\n    pointSelectedBorderColor: BLACK_COLORS[100],\n    /** 点图 inactive 状态下填充颜色透明度 */\n    pointInactiveFillOpacity: 0.3,\n    /** 点图 inactive 状态下描边透明度 */\n    pointInactiveBorderOpacity: 0.3,\n    /** 空心点图大小 */\n    hollowPointSize: 4,\n    /** 空心点图描边粗细 */\n    hollowPointBorder: 1,\n    /** 空心点图描边颜色 */\n    hollowPointBorderColor: QUALITATIVE_10[0],\n    /** 空心点图描边透明度 */\n    hollowPointBorderOpacity: 0.95,\n    hollowPointFillColor: WHITE_COLORS[100],\n    /** 空心点图 active 状态下描边粗细 */\n    hollowPointActiveBorder: 1,\n    /** 空心点图 active 状态下描边颜色 */\n    hollowPointActiveBorderColor: BLACK_COLORS[100],\n    /** 空心点图 active 状态下描边透明度 */\n    hollowPointActiveBorderOpacity: 1,\n    /** 空心点图 selected 状态下描边粗细 */\n    hollowPointSelectedBorder: 2,\n    /** 空心点图 selected 状态下描边颜色 */\n    hollowPointSelectedBorderColor: BLACK_COLORS[100],\n    /** 空心点图 selected 状态下描边透明度 */\n    hollowPointSelectedBorderOpacity: 1,\n    /** 空心点图 inactive 状态下描边透明度 */\n    hollowPointInactiveBorderOpacity: 0.3,\n    /** 线图粗细 */\n    lineBorder: 2,\n    /** 线图颜色 */\n    lineBorderColor: QUALITATIVE_10[0],\n    /** 线图透明度 */\n    lineBorderOpacity: 1,\n    /** 线图 Active 状态下粗细 */\n    lineActiveBorder: 3,\n    /** 线图 selected 状态下粗细 */\n    lineSelectedBorder: 3,\n    /** 线图 inactive 状态下透明度 */\n    lineInactiveBorderOpacity: 0.3,\n    /** area 填充颜色 */\n    areaFillColor: QUALITATIVE_10[0],\n    /** area 填充透明度 */\n    areaFillOpacity: 0.25,\n    /** area 在 active 状态下的填充透明度 */\n    areaActiveFillColor: QUALITATIVE_10[0],\n    areaActiveFillOpacity: 0.5,\n    /** area 在 selected 状态下的填充透明度 */\n    areaSelectedFillColor: QUALITATIVE_10[0],\n    areaSelectedFillOpacity: 0.5,\n    /** area inactive 状态下填充透明度 */\n    areaInactiveFillOpacity: 0.3,\n    /** hollowArea 颜色 */\n    hollowAreaBorderColor: QUALITATIVE_10[0],\n    /** hollowArea 边框粗细 */\n    hollowAreaBorder: 2,\n    /** hollowArea 边框透明度 */\n    hollowAreaBorderOpacity: 1,\n    /** hollowArea active 状态下的边框粗细 */\n    hollowAreaActiveBorder: 3,\n    hollowAreaActiveBorderColor: BLACK_COLORS[100],\n    /** hollowArea selected 状态下的边框粗细 */\n    hollowAreaSelectedBorder: 3,\n    hollowAreaSelectedBorderColor: BLACK_COLORS[100],\n    /** hollowArea inactive 状态下的边框透明度 */\n    hollowAreaInactiveBorderOpacity: 0.3,\n    /** interval 填充颜色 */\n    intervalFillColor: QUALITATIVE_10[0],\n    /** interval 填充透明度 */\n    intervalFillOpacity: 0.95,\n    /** interval active 状态下边框粗细 */\n    intervalActiveBorder: 1,\n    /** interval active 状态下边框颜色 */\n    intervalActiveBorderColor: BLACK_COLORS[100],\n    intervalActiveBorderOpacity: 1,\n    /** interval selected 状态下边框粗细 */\n    intervalSelectedBorder: 2,\n    /** interval selected 状态下边框颜色 */\n    intervalSelectedBorderColor: BLACK_COLORS[100],\n    /** interval selected 状态下边框透明度 */\n    intervalSelectedBorderOpacity: 1,\n    /** interval inactive 状态下边框透明度 */\n    intervalInactiveBorderOpacity: 0.3,\n    /** interval inactive 状态下填充透明度 */\n    intervalInactiveFillOpacity: 0.3,\n    /** interval 边框粗细 */\n    hollowIntervalBorder: 2,\n    /** hollowInterval 边框颜色 */\n    hollowIntervalBorderColor: QUALITATIVE_10[0],\n    /** hollowInterval 边框透明度 */\n    hollowIntervalBorderOpacity: 1,\n    hollowIntervalFillColor: WHITE_COLORS[100],\n    /** hollowInterval active 状态下边框粗细 */\n    hollowIntervalActiveBorder: 2,\n    /** hollowInterval active 状态下边框颜色 */\n    hollowIntervalActiveBorderColor: BLACK_COLORS[100],\n    /** hollowInterval selected 状态下边框粗细 */\n    hollowIntervalSelectedBorder: 3,\n    /** hollowInterval selected 状态下边框颜色 */\n    hollowIntervalSelectedBorderColor: BLACK_COLORS[100],\n    /** hollowInterval selected 状态下边框透明度 */\n    hollowIntervalSelectedBorderOpacity: 1,\n    /** hollowInterval inactive 状态下边框透明度 */\n    hollowIntervalInactiveBorderOpacity: 0.3,\n};\n//# sourceMappingURL=dark.js.map","import { isArray } from '@antv/util';\nfunction isValueEmpty(value) {\n    if (value) {\n        return false;\n    }\n    return value === null || value === undefined || isNaN(value);\n}\nfunction isYNil(point) {\n    if (isArray(point)) {\n        // 特殊处理 area 的关键点数据，其关键点结构为 [{x: 0, y: 1}, {x: 0, y: 2}]\n        return isValueEmpty(point[1].y);\n    }\n    var value = point.y;\n    return isArray(value) ? isValueEmpty(value[0]) : isValueEmpty(value);\n}\n/**\n * @ignore\n * 分割数据，用于处理在一组点数据中，y 对应的数值存在 null/undefined/NaN 的情况\n * 应用于折线图、区域图以及路径图\n *\n * ```typescript\n * // return [[{x: 1, y: 2}, {x: 3, y: 3}]]\n * getPathPoints([{x: 1, y: 2}, {x: 2, y: null}, {x: 3, y: 3}], true);\n * // return [[{x: 1, y: 2}], [{x: 3, y: 3}]]\n * getPathPoints([{x: 1, y: 2}, {x: 2, y: null}, {x: 3, y: 3}], false);\n * // return [[[{ x: 1, y: 10 }, { x: 2, y: 2 }], [{ x: 9, y: 34 }, { x: 1, y: 1 }]]]\n * getPathPoints([\n *   [{ x: 1, y: 10 }, { x: 2, y: 2 }],\n *   [{ x: 4, y: 2 }, { x: 8, y: NaN }],\n *   [{ x: 9, y: 34 }, { x: 1, y: 1 }],\n * ], true);\n * ```\n *\n * @param points 要进行处理点集合\n * @param connectNulls 是否连接空值数据\n * @param showSinglePoint 是否展示孤立点\n * @returns 返回处理后的点集合\n */\nexport function getPathPoints(points, connectNulls, showSinglePoint) {\n    if (connectNulls === void 0) { connectNulls = false; }\n    if (showSinglePoint === void 0) { showSinglePoint = true; }\n    if (!points.length || (points.length === 1 && !showSinglePoint)) {\n        // 空或者只有一个点并配置不展示时\n        return [];\n    }\n    if (connectNulls) {\n        // 即 y 值为空的场景\n        var filtered = [];\n        for (var i = 0, len = points.length; i < len; i++) {\n            var point = points[i];\n            if (!isYNil(point)) {\n                filtered.push(point);\n            }\n        }\n        return [filtered];\n    }\n    var result = [];\n    var tmp = [];\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (isYNil(point)) {\n            if (tmp.length) {\n                if (!(tmp.length === 1 && !showSinglePoint)) {\n                    // 如果前段数据只有一个字段并且不需要展示时则不加入\n                    result.push(tmp);\n                }\n                tmp = [];\n            }\n        }\n        else {\n            tmp.push(point);\n        }\n    }\n    if (tmp.length) {\n        result.push(tmp);\n    }\n    return result;\n}\n//# sourceMappingURL=get-path-points.js.map","import { __assign } from \"tslib\";\nimport { isNil } from '@antv/util';\n/**\n * @ignore\n * 获取 Shape 的图形属性\n * @param cfg\n * @param isStroke 是否需要描边\n * @param isFill 是否需要填充\n * @param [sizeName] 可选，表示图形大小的属性，lineWidth 或者 r\n * @returns\n */\nexport function getStyle(cfg, isStroke, isFill, sizeName) {\n    if (sizeName === void 0) { sizeName = ''; }\n    var _a = cfg.style, style = _a === void 0 ? {} : _a, defaultStyle = cfg.defaultStyle, color = cfg.color, size = cfg.size;\n    var attrs = __assign(__assign({}, defaultStyle), style);\n    if (color) {\n        if (isStroke) {\n            if (!style.stroke) {\n                // 如果用户在 style() 中配置了 stroke，则以用户配置的为准\n                attrs.stroke = color;\n            }\n        }\n        if (isFill) {\n            if (!style.fill) {\n                // 如果用户在 style() 中配置了 fill\n                attrs.fill = color;\n            }\n        }\n    }\n    if (sizeName && isNil(style[sizeName]) && !isNil(size)) {\n        // 如果用户在 style() 中配置了 lineWidth 或者 r 属性\n        attrs[sizeName] = size;\n    }\n    return attrs;\n}\n//# sourceMappingURL=get-style.js.map","import { isArray } from '@antv/util';\n/**\n * @ignore\n * 拆分点数据\n * @example\n * // result: [{x: 20, y: 20}, {x: 20, y: 30}]\n * splitPoints({x: 20,y: [20, 30]});\n * @example\n * // result: [{x: 20, y: 20}, {x: 30, y: 30}]\n * splitPoints({x: [20, 30],y: [20, 30]});\n * @param obj\n */\nexport function splitPoints(obj) {\n    // y 有可能是数组，对应原始数据中 y 为一个区间数据，如 [19, 30]，为了统一也将 x 转换为数组\n    var x = obj.x;\n    var y = isArray(obj.y) ? obj.y : [obj.y];\n    return y.map(function (eachY, index) {\n        return {\n            x: isArray(x) ? x[index] : x,\n            y: eachY,\n        };\n    });\n}\n//# sourceMappingURL=split-points.js.map","var LineSymbols = {\n    line: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['L', x + r, y],\n        ];\n    },\n    dot: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['L', x + r, y],\n        ];\n    },\n    dash: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['L', x + r, y],\n        ];\n    },\n    smooth: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['A', r / 2, r / 2, 0, 1, 1, x, y],\n            ['A', r / 2, r / 2, 0, 1, 0, x + r, y],\n        ];\n    },\n    hv: function (x, y, r) {\n        return [\n            ['M', x - r - 1, y - 2.5],\n            ['L', x, y - 2.5],\n            ['L', x, y + 2.5],\n            ['L', x + r + 1, y + 2.5],\n        ];\n    },\n    vh: function (x, y, r) {\n        return [\n            ['M', x - r - 1, y + 2.5],\n            ['L', x, y + 2.5],\n            ['L', x, y - 2.5],\n            ['L', x + r + 1, y - 2.5],\n        ];\n    },\n    hvh: function (x, y, r) {\n        return [\n            ['M', x - (r + 1), y + 2.5],\n            ['L', x - r / 2, y + 2.5],\n            ['L', x - r / 2, y - 2.5],\n            ['L', x + r / 2, y - 2.5],\n            ['L', x + r / 2, y + 2.5],\n            ['L', x + r + 1, y + 2.5],\n        ];\n    },\n    vhv: function (x, y) {\n        // 宽 13px，高 8px\n        return [\n            ['M', x - 5, y + 2.5],\n            ['L', x - 5, y],\n            ['L', x, y],\n            ['L', x, y - 3],\n            ['L', x, y + 3],\n            ['L', x + 6.5, y + 3],\n        ];\n    },\n};\n/**\n * Gets line marker\n * @ignore\n * @param markerCfg\n * @param shapeType\n * @returns 返回 Line 的 marker 配置\n */\nexport function getLineMarker(markerCfg, shapeType) {\n    var color = markerCfg.color;\n    return {\n        symbol: LineSymbols[shapeType],\n        style: {\n            lineWidth: 2,\n            r: 6,\n            stroke: color,\n        },\n    };\n}\n//# sourceMappingURL=util.js.map","import { each, isArray } from '@antv/util';\nimport { registerShape, registerShapeFactory } from '../base';\nimport { getPathPoints } from '../util/get-path-points';\nimport { getStyle } from '../util/get-style';\nimport { getLinePath, getSplinePath } from '../util/path';\nimport { splitPoints } from '../util/split-points';\nimport { getLineMarker } from './util';\nfunction getShapeAttrs(cfg, smooth, constraint) {\n    var isStack = cfg.isStack, connectNulls = cfg.connectNulls, isInCircle = cfg.isInCircle, showSinglePoint = cfg.showSinglePoint;\n    var shapeAttrs = getStyle(cfg, true, false, 'lineWidth');\n    var points = getPathPoints(cfg.points, connectNulls, showSinglePoint); // 根据 connectNulls 值处理 points\n    var path = [];\n    for (var i = 0, len = points.length; i < len; i++) {\n        var eachLinePoints = points[i];\n        path = path.concat(getPath(eachLinePoints, isInCircle, isStack, smooth, constraint, shapeAttrs));\n    }\n    shapeAttrs.path = path;\n    return shapeAttrs;\n}\n// 单条 path\nfunction getSinglePath(points, isInCircle, smooth, constraint, style) {\n    if (points.length === 1) {\n        // 只有一个点时\n        return [\n            ['M', points[0].x, points[0].y - style.lineWidth / 2],\n            ['L', points[0].x, points[0].y],\n            ['L', points[0].x, points[0].y + style.lineWidth / 2],\n        ];\n    }\n    var path;\n    if (!smooth) {\n        path = getLinePath(points, false);\n        if (isInCircle) {\n            path.push(['Z']);\n        }\n    }\n    else {\n        // 直角坐标系下绘制曲线时限制最大值、最小值\n        if (isInCircle && points.length) {\n            points.push({ x: points[0].x, y: points[0].y });\n        }\n        path = getSplinePath(points, false, constraint);\n    }\n    return path;\n}\nfunction getRangePath(points, isInCircle, isStack, smooth, constraint, style) {\n    var topPoints = [];\n    var bottomPoints = [];\n    each(points, function (point) {\n        var result = splitPoints(point);\n        topPoints.push(result[1]); // 上边\n        bottomPoints.push(result[0]); // 底边\n    });\n    var topPath = getSinglePath(topPoints, isInCircle, smooth, constraint, style);\n    var bottomPath = getSinglePath(bottomPoints, isInCircle, smooth, constraint, style);\n    if (isStack) {\n        return topPath;\n    }\n    return topPath.concat(bottomPath);\n}\nfunction getPath(points, isInCircle, isStack, smooth, constraint, style) {\n    if (points.length) {\n        var first = points[0];\n        return isArray(first.y)\n            ? getRangePath(points, isInCircle, isStack, smooth, constraint, style)\n            : getSinglePath(points, isInCircle, smooth, constraint, style);\n    }\n    return [];\n}\nvar LineShapeFactory = registerShapeFactory('line', {\n    defaultShapeType: 'line',\n});\n// 这里因为代码公用，所以直接全部注册\n// 'line' 默认折线；'dot' 点线 ···；'dash' 断线 - - -\neach(['line', 'dot', 'dash', 'smooth'], function (shapeType) {\n    registerShape('line', shapeType, {\n        draw: function (cfg, container) {\n            var smooth = shapeType === 'smooth';\n            var constraint;\n            if (smooth) {\n                var _a = this.coordinate, start = _a.start, end = _a.end;\n                constraint = [\n                    [start.x, end.y],\n                    [end.x, start.y],\n                ];\n            }\n            var attrs = getShapeAttrs(cfg, smooth, constraint);\n            var shape = container.addShape({\n                type: 'path',\n                attrs: attrs,\n                name: 'line',\n            });\n            return shape;\n        },\n        getMarker: function (markerCfg) {\n            return getLineMarker(markerCfg, shapeType);\n        },\n    });\n});\nexport default LineShapeFactory;\n//# sourceMappingURL=index.js.map","import { __extends } from \"tslib\";\nimport { FIELD_ORIGIN } from '../constant';\nimport Geometry from './base';\nimport Element from './element';\n/** 引入对应的 ShapeFactory */\nimport './shape/line';\nimport { isModelChange } from './util/is-model-change';\n/**\n * Path 几何标记。\n * 用于绘制路径图等。\n */\nvar Path = /** @class */ (function (_super) {\n    __extends(Path, _super);\n    function Path(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.type = 'path';\n        _this.shapeType = 'line';\n        var _a = cfg.connectNulls, connectNulls = _a === void 0 ? false : _a, _b = cfg.showSinglePoint, showSinglePoint = _b === void 0 ? true : _b;\n        _this.connectNulls = connectNulls;\n        _this.showSinglePoint = showSinglePoint;\n        return _this;\n    }\n    /**\n     * 创建所有的 Element 实例，对于 Path、Line、Area，一组数据对应一个 Element。\n     * @param mappingData\n     * @param [isUpdate]\n     * @returns elements\n     */\n    Path.prototype.createElements = function (mappingData, index, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        // Path 的每个 element 对应一组数据\n        var _a = this, lastElementsMap = _a.lastElementsMap, elementsMap = _a.elementsMap, elements = _a.elements, container = _a.container;\n        var elementId = this.getElementId(mappingData);\n        var shapeCfg = this.getShapeInfo(mappingData);\n        var result = lastElementsMap[elementId];\n        if (!result) {\n            var shapeFactory = this.getShapeFactory();\n            result = new Element({\n                shapeFactory: shapeFactory,\n                container: container,\n                offscreenGroup: this.getOffscreenGroup(),\n            });\n            result.geometry = this;\n            result.animate = this.animateOption;\n            result.draw(shapeCfg, isUpdate); // 绘制 shape\n        }\n        else {\n            // element 已经创建\n            var preShapeCfg = result.getModel();\n            if (this.isCoordinateChanged || isModelChange(preShapeCfg, shapeCfg)) {\n                result.animate = this.animateOption;\n                // 通过绘制数据的变更来判断是否需要更新，因为用户有可能会修改图形属性映射\n                result.update(shapeCfg); // 更新对应的 element\n            }\n            delete lastElementsMap[elementId];\n        }\n        elements.push(result);\n        elementsMap[elementId] = result;\n        return elements;\n    };\n    /**\n     * 获取组成一条线（一组数据）的所有点以及数据\n     * @param mappingData 映射后的数组\n     */\n    Path.prototype.getPointsAndData = function (mappingData) {\n        var points = [];\n        var data = [];\n        for (var i = 0, len = mappingData.length; i < len; i++) {\n            var obj = mappingData[i];\n            points.push({\n                x: obj.x,\n                y: obj.y,\n            });\n            data.push(obj[FIELD_ORIGIN]);\n        }\n        return {\n            points: points,\n            data: data,\n        };\n    };\n    Path.prototype.getShapeInfo = function (mappingData) {\n        var shapeCfg = this.getDrawCfg(mappingData[0]);\n        var _a = this.getPointsAndData(mappingData), points = _a.points, data = _a.data;\n        shapeCfg.mappingData = mappingData;\n        shapeCfg.data = data;\n        shapeCfg.isStack = !!this.getAdjust('stack');\n        shapeCfg.points = points;\n        shapeCfg.connectNulls = this.connectNulls;\n        shapeCfg.showSinglePoint = this.showSinglePoint;\n        return shapeCfg;\n    };\n    return Path;\n}(Geometry));\nexport default Path;\n//# sourceMappingURL=path.js.map","import { each } from '@antv/util';\nimport { getPathPoints } from '../util/get-path-points';\nimport { getStyle } from '../util/get-style';\nimport { getLinePath, getSplinePath } from '../util/path';\nfunction getPath(points, isInCircle, smooth, registeredShape, constraint) {\n    var path = [];\n    if (points.length) {\n        var topLinePoints_1 = []; // area 区域上部分\n        var bottomLinePoints_1 = []; // area 区域下部分\n        for (var i = 0, len = points.length; i < len; i++) {\n            var point = points[i];\n            topLinePoints_1.push(point[1]);\n            bottomLinePoints_1.push(point[0]);\n        }\n        bottomLinePoints_1 = bottomLinePoints_1.reverse();\n        each([topLinePoints_1, bottomLinePoints_1], function (pointsData, index) {\n            var subPath = [];\n            var parsedPoints = registeredShape.parsePoints(pointsData);\n            var p1 = parsedPoints[0];\n            if (topLinePoints_1.length === 1 && bottomLinePoints_1.length === 1) {\n                // 都只有一个点，绘制一条竖线\n                subPath =\n                    index === 0\n                        ? [\n                            ['M', p1.x - 0.5, p1.y],\n                            ['L', p1.x + 0.5, p1.y],\n                        ]\n                        : [\n                            ['L', p1.x + 0.5, p1.y],\n                            ['L', p1.x - 0.5, p1.y],\n                        ];\n            }\n            else {\n                if (isInCircle) {\n                    parsedPoints.push({ x: p1.x, y: p1.y });\n                }\n                if (smooth) {\n                    subPath = getSplinePath(parsedPoints, false, constraint);\n                }\n                else {\n                    subPath = getLinePath(parsedPoints, false);\n                }\n                if (index > 0) {\n                    subPath[0][0] = 'L';\n                }\n            }\n            path = path.concat(subPath);\n        });\n        path.push(['Z']);\n    }\n    return path;\n}\n/**\n * @ignore\n * Gets shape attrs\n * @param cfg\n * @param isStroke\n * @param smooth\n * @param registeredShape\n * @param [constraint]\n * @returns\n */\nexport function getShapeAttrs(cfg, isStroke, smooth, registeredShape, constraint) {\n    var attrs = getStyle(cfg, isStroke, !isStroke, 'lineWidth');\n    var connectNulls = cfg.connectNulls, isInCircle = cfg.isInCircle, points = cfg.points, showSinglePoint = cfg.showSinglePoint;\n    var pathPoints = getPathPoints(points, connectNulls, showSinglePoint); // 根据 connectNulls 配置获取图形关键点\n    var path = [];\n    for (var i = 0, len = pathPoints.length; i < len; i++) {\n        var eachPoints = pathPoints[i];\n        path = path.concat(getPath(eachPoints, isInCircle, smooth, registeredShape, constraint));\n    }\n    attrs.path = path;\n    return attrs;\n}\n/**\n * @ignore\n * Gets constraint\n * @param coordinate\n * @returns constraint\n */\nexport function getConstraint(coordinate) {\n    var start = coordinate.start, end = coordinate.end;\n    return [\n        [start.x, end.y],\n        [end.x, start.y],\n    ];\n}\n//# sourceMappingURL=util.js.map","import { isArray } from '@antv/util';\nimport { registerShape, registerShapeFactory } from '../base';\nimport { getShapeAttrs } from './util';\nvar AreaShapeFactory = registerShapeFactory('area', {\n    defaultShapeType: 'area',\n    getDefaultPoints: function (pointInfo) {\n        // area 基本标记的绘制需要获取上下两边的顶点\n        var x = pointInfo.x, y0 = pointInfo.y0;\n        var y = isArray(pointInfo.y) ? pointInfo.y : [y0, pointInfo.y];\n        return y.map(function (yItem) {\n            return {\n                x: x,\n                y: yItem,\n            };\n        });\n    },\n});\n// Area 几何标记默认的 shape：填充的区域图\nregisterShape('area', 'area', {\n    draw: function (cfg, container) {\n        var attrs = getShapeAttrs(cfg, false, false, this);\n        var shape = container.addShape({\n            type: 'path',\n            attrs: attrs,\n            name: 'area',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                if (r === void 0) { r = 5.5; }\n                return [['M', x - r, y - 4], ['L', x + r, y - 4], ['L', x + r, y + 4], ['L', x - r, y + 4], ['Z']];\n            },\n            style: {\n                r: 5,\n                fill: color,\n            },\n        };\n    },\n});\nexport default AreaShapeFactory;\n//# sourceMappingURL=index.js.map","import { __extends } from \"tslib\";\nimport { FIELD_ORIGIN } from '../constant';\nimport Path from './path';\nimport './shape/area';\n/**\n * Area 几何标记类。\n * 常用于绘制面积图。\n */\nvar Area = /** @class */ (function (_super) {\n    __extends(Area, _super);\n    function Area(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.type = 'area';\n        _this.shapeType = 'area';\n        /** 生成图形关键点 */\n        _this.generatePoints = true;\n        /**\n         * 面积图是否从 0 基准线开始填充。\n         * 1. 默认值为 `true`，表现如下：\n         * ![image](https://gw.alipayobjects.com/zos/rmsportal/ZQqwUCczalrKqGgagOVp.png)\n         * 2. 当值为 `false` 时，表现如下：\n         * ![image](https://gw.alipayobjects.com/zos/rmsportal/yPswkaXvUpCYOdhocGwB.png)\n         */\n        _this.startOnZero = true;\n        var _a = cfg.startOnZero, startOnZero = _a === void 0 ? true : _a, _b = cfg.sortable, sortable = _b === void 0 ? true : _b, _c = cfg.showSinglePoint, showSinglePoint = _c === void 0 ? false : _c;\n        _this.startOnZero = startOnZero; // 默认为 true\n        _this.sortable = sortable; // Area 默认会对数据按照 x 轴字段进行正向排序\n        _this.showSinglePoint = showSinglePoint;\n        return _this;\n    }\n    /**\n     * 获取图形绘制的关键点以及数据\n     * @param mappingData 映射后的数据\n     */\n    Area.prototype.getPointsAndData = function (mappingData) {\n        var points = [];\n        var data = [];\n        for (var i = 0, len = mappingData.length; i < len; i++) {\n            var obj = mappingData[i];\n            points.push(obj.points);\n            data.push(obj[FIELD_ORIGIN]);\n        }\n        return {\n            points: points,\n            data: data,\n        };\n    };\n    /**\n     * 获取 Y 轴上的最小值\n     * @returns y 字段最小值\n     */\n    Area.prototype.getYMinValue = function () {\n        if (this.startOnZero) {\n            return _super.prototype.getYMinValue.call(this);\n        }\n        var yScale = this.getYScale();\n        return yScale.min;\n    };\n    return Area;\n}(Path));\nexport default Area;\n//# sourceMappingURL=area.js.map","import { __assign } from \"tslib\";\nimport { registerShape, registerShapeFactory } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getLinePath } from '../util/path';\nimport { splitPoints } from '../util/split-points';\nvar EdgeShapeFactory = registerShapeFactory('edge', {\n    defaultShapeType: 'line',\n    getDefaultPoints: function (pointInfo) {\n        return splitPoints(pointInfo);\n    },\n});\nregisterShape('edge', 'line', {\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false, 'lineWidth');\n        var path = getLinePath(this.parsePoints(cfg.points), this.coordinate.isPolar);\n        return container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n        });\n    },\n    getMarker: function (markerCfg) {\n        return {\n            symbol: 'circle',\n            style: {\n                r: 4.5,\n                fill: markerCfg.color,\n            },\n        };\n    },\n});\nexport default EdgeShapeFactory;\n//# sourceMappingURL=index.js.map","import { __extends } from \"tslib\";\nimport Geometry from './base';\nimport './shape/edge';\n/**\n * Edge 几何标记，用于绘制关系图中的**边**图形，如：\n * 1. 流程图\n * 2. 树\n * 3. 弧长连接图\n * 4. 和弦图\n * 5. 桑基图\n */\nvar Edge = /** @class */ (function (_super) {\n    __extends(Edge, _super);\n    function Edge() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'edge';\n        _this.shapeType = 'edge';\n        _this.generatePoints = true;\n        return _this;\n    }\n    return Edge;\n}(Geometry));\nexport default Edge;\n//# sourceMappingURL=edge.js.map","import { __assign, __extends } from \"tslib\";\nimport ColorUtil from '@antv/color-util';\nimport { get, isNumber } from '@antv/util';\nimport { FIELD_ORIGIN } from '../constant';\nimport Geometry from './base';\n/**\n * 用于绘制热力图。\n */\nvar Heatmap = /** @class */ (function (_super) {\n    __extends(Heatmap, _super);\n    function Heatmap() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'heatmap';\n        _this.paletteCache = {};\n        return _this;\n    }\n    Heatmap.prototype.createElements = function (mappingData, index, isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n        var range = this.prepareRange(mappingData);\n        var radius = this.prepareSize();\n        var blur = get(this.styleOption, ['style', 'shadowBlur']);\n        if (!isNumber(blur)) {\n            blur = radius / 2;\n        }\n        this.prepareGreyScaleBlurredCircle(radius, blur);\n        this.drawWithRange(mappingData, range, radius, blur);\n        return null;\n    };\n    /**\n     * clear\n     */\n    Heatmap.prototype.clear = function () {\n        _super.prototype.clear.call(this);\n        this.clearShadowCanvasCtx();\n        this.paletteCache = {};\n    };\n    Heatmap.prototype.prepareRange = function (data) {\n        var colorAttr = this.getAttribute('color');\n        var colorField = colorAttr.getFields()[0];\n        var min = Infinity;\n        var max = -Infinity;\n        data.forEach(function (row) {\n            var value = row[FIELD_ORIGIN][colorField];\n            if (value > max) {\n                max = value;\n            }\n            if (value < min) {\n                min = value;\n            }\n        });\n        if (min === max) {\n            min = max - 1;\n        }\n        return [min, max];\n    };\n    Heatmap.prototype.prepareSize = function () {\n        var radius = this.getDefaultValue('size');\n        if (!isNumber(radius)) {\n            radius = this.getDefaultSize();\n        }\n        return radius;\n    };\n    Heatmap.prototype.prepareGreyScaleBlurredCircle = function (radius, blur) {\n        var grayScaleBlurredCanvas = this.getGrayScaleBlurredCanvas();\n        var r2 = radius + blur;\n        var ctx = grayScaleBlurredCanvas.getContext('2d');\n        grayScaleBlurredCanvas.width = grayScaleBlurredCanvas.height = r2 * 2;\n        ctx.clearRect(0, 0, grayScaleBlurredCanvas.width, grayScaleBlurredCanvas.height);\n        ctx.shadowOffsetX = ctx.shadowOffsetY = r2 * 2;\n        ctx.shadowBlur = blur;\n        ctx.shadowColor = 'black';\n        ctx.beginPath();\n        ctx.arc(-r2, -r2, radius, 0, Math.PI * 2, true);\n        ctx.closePath();\n        ctx.fill();\n    };\n    Heatmap.prototype.drawWithRange = function (data, range, radius, blur) {\n        // canvas size\n        var _a = this.coordinate, start = _a.start, end = _a.end;\n        var width = this.coordinate.getWidth();\n        var height = this.coordinate.getHeight();\n        // value, range, etc\n        var colorAttr = this.getAttribute('color');\n        var valueField = colorAttr.getFields()[0];\n        // prepare shadow canvas context\n        this.clearShadowCanvasCtx();\n        var ctx = this.getShadowCanvasCtx();\n        // filter data\n        if (range) {\n            data = data.filter(function (row) {\n                return row[FIELD_ORIGIN][valueField] <= range[1] && row[FIELD_ORIGIN][valueField] >= range[0];\n            });\n        }\n        // step1. draw points with shadow\n        var scale = this.scales[valueField];\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n            var obj = data_1[_i];\n            var _b = this.getDrawCfg(obj), x = _b.x, y = _b.y;\n            var alpha = scale.scale(obj[FIELD_ORIGIN][valueField]);\n            this.drawGrayScaleBlurredCircle(x - start.x, y - end.y, radius + blur, alpha, ctx);\n        }\n        // step2. convert pixels\n        var colored = ctx.getImageData(0, 0, width, height);\n        this.clearShadowCanvasCtx();\n        this.colorize(colored);\n        ctx.putImageData(colored, 0, 0);\n        var imageShape = this.getImageShape();\n        imageShape.attr('x', start.x);\n        imageShape.attr('y', end.y);\n        imageShape.attr('width', width);\n        imageShape.attr('height', height);\n        imageShape.attr('img', ctx.canvas);\n        imageShape.set('origin', this.getShapeInfo(data)); // 存储绘图信息数据\n    };\n    Heatmap.prototype.getDefaultSize = function () {\n        var position = this.getAttribute('position');\n        var coordinate = this.coordinate;\n        return Math.min(coordinate.getWidth() / (position.scales[0].ticks.length * 4), coordinate.getHeight() / (position.scales[1].ticks.length * 4));\n    };\n    Heatmap.prototype.clearShadowCanvasCtx = function () {\n        var ctx = this.getShadowCanvasCtx();\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    };\n    Heatmap.prototype.getShadowCanvasCtx = function () {\n        var canvas = this.shadowCanvas;\n        if (!canvas) {\n            canvas = document.createElement('canvas');\n            this.shadowCanvas = canvas;\n        }\n        canvas.width = this.coordinate.getWidth();\n        canvas.height = this.coordinate.getHeight();\n        return canvas.getContext('2d');\n    };\n    Heatmap.prototype.getGrayScaleBlurredCanvas = function () {\n        if (!this.grayScaleBlurredCanvas) {\n            this.grayScaleBlurredCanvas = document.createElement('canvas');\n        }\n        return this.grayScaleBlurredCanvas;\n    };\n    Heatmap.prototype.drawGrayScaleBlurredCircle = function (x, y, r, alpha, ctx) {\n        var grayScaleBlurredCanvas = this.getGrayScaleBlurredCanvas();\n        ctx.globalAlpha = alpha;\n        ctx.drawImage(grayScaleBlurredCanvas, x - r, y - r);\n    };\n    Heatmap.prototype.colorize = function (img) {\n        var colorAttr = this.getAttribute('color');\n        var pixels = img.data;\n        var paletteCache = this.paletteCache;\n        for (var i = 3; i < pixels.length; i += 4) {\n            var alpha = pixels[i]; // get gradient color from opacity value\n            if (isNumber(alpha)) {\n                var palette = paletteCache[alpha] ? paletteCache[alpha] : ColorUtil.rgb2arr(colorAttr.gradient(alpha / 256));\n                pixels[i - 3] = palette[0];\n                pixels[i - 2] = palette[1];\n                pixels[i - 1] = palette[2];\n                pixels[i] = alpha;\n            }\n        }\n    };\n    Heatmap.prototype.getImageShape = function () {\n        var imageShape = this.imageShape;\n        if (imageShape) {\n            return imageShape;\n        }\n        var container = this.container;\n        imageShape = container.addShape({\n            type: 'image',\n            attrs: {},\n        });\n        this.imageShape = imageShape;\n        return imageShape;\n    };\n    Heatmap.prototype.getShapeInfo = function (mappingData) {\n        var shapeCfg = this.getDrawCfg(mappingData[0]);\n        return __assign(__assign({}, shapeCfg), { mappingData: mappingData, data: this.getData(mappingData) });\n    };\n    Heatmap.prototype.getData = function (mappingData) {\n        return mappingData.map(function (obj) {\n            return obj[FIELD_ORIGIN];\n        });\n    };\n    return Heatmap;\n}(Geometry));\nexport default Heatmap;\n//# sourceMappingURL=heatmap.js.map","import { isArray, isNil } from '@antv/util';\n/**\n * @ignore\n * 根据数据点生成矩形的四个关键点\n * @param pointInfo 数据点信息\n * @param [isPyramid] 是否为尖底漏斗图\n * @returns rect points 返回矩形四个顶点信息\n */\nexport function getRectPoints(pointInfo, isPyramid) {\n    if (isPyramid === void 0) { isPyramid = false; }\n    var x = pointInfo.x, y = pointInfo.y, y0 = pointInfo.y0, size = pointInfo.size;\n    // 有 4 种情况，\n    // 1. x, y 都不是数组\n    // 2. y是数组，x不是\n    // 3. x是数组，y不是\n    // 4. x, y 都是数组\n    var yMin;\n    var yMax;\n    if (isArray(y)) {\n        yMin = y[0], yMax = y[1];\n    }\n    else {\n        yMin = y0;\n        yMax = y;\n    }\n    var xMin;\n    var xMax;\n    if (isArray(x)) {\n        xMin = x[0], xMax = x[1];\n    }\n    else {\n        xMin = x - size / 2;\n        xMax = x + size / 2;\n    }\n    var points = [\n        { x: xMin, y: yMin },\n        { x: xMin, y: yMax },\n    ];\n    if (isPyramid) {\n        // 绘制尖底漏斗图\n        // 金字塔漏斗图的关键点\n        // 1\n        // |   2\n        // 0\n        points.push({\n            x: xMax,\n            y: (yMax + yMin) / 2,\n        });\n    }\n    else {\n        // 矩形的四个关键点，结构如下（左下角顺时针连接）\n        // 1 ---- 2\n        // |      |\n        // 0 ---- 3\n        points.push({ x: xMax, y: yMax }, { x: xMax, y: yMin });\n    }\n    return points;\n}\n/**\n * @ignore\n * 根据矩形关键点绘制 path\n * @param points 关键点数组\n * @param isClosed path 是否需要闭合\n * @returns 返回矩形的 path\n */\nexport function getRectPath(points, isClosed) {\n    if (isClosed === void 0) { isClosed = true; }\n    var path = [];\n    var firstPoint = points[0];\n    path.push(['M', firstPoint.x, firstPoint.y]);\n    for (var i = 1, len = points.length; i < len; i++) {\n        path.push(['L', points[i].x, points[i].y]);\n    }\n    // 对于 shape=\"line\" path 不应该闭合，否则会造成 lineCap 绘图属性失效\n    if (isClosed) {\n        path.push(['L', firstPoint.x, firstPoint.y]); // 需要闭合\n        path.push(['z']);\n    }\n    return path;\n}\n/**\n * @ignore\n * 根据 funnel 关键点绘制漏斗图的 path\n * @param points 图形关键点信息\n * @param nextPoints 下一个数据的图形关键点信息\n * @param isPyramid 是否为尖底漏斗图\n * @returns 返回漏斗图的图形 path\n */\nexport function getFunnelPath(points, nextPoints, isPyramid) {\n    var path = [];\n    if (!isNil(nextPoints)) {\n        path.push(['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], ['L', nextPoints[1].x, nextPoints[1].y], ['L', nextPoints[0].x, nextPoints[0].y], ['Z']);\n    }\n    else if (isPyramid) {\n        // 金字塔最底部\n        path.push(['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], ['L', points[2].x, points[2].y], ['L', points[2].x, points[2].y], ['Z']);\n    }\n    else {\n        // 漏斗图最底部\n        path.push(['M', points[0].x, points[0].y], ['L', points[1].x, points[1].y], ['L', points[2].x, points[2].y], ['L', points[3].x, points[3].y], ['Z']);\n    }\n    return path;\n}\n//# sourceMappingURL=util.js.map","import { __assign } from \"tslib\";\nimport { registerShape, registerShapeFactory } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getRectPath, getRectPoints } from './util';\n/** Interval 的 shape 工厂 */\nvar IntervalShapeFactory = registerShapeFactory('interval', {\n    defaultShapeType: 'rect',\n    getDefaultPoints: function (pointInfo) {\n        return getRectPoints(pointInfo);\n    },\n});\n/** Inerval 默认 shape，填充的矩形 */\nregisterShape('interval', 'rect', {\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, false, true);\n        var path = this.parsePath(getRectPath(cfg.points));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n            name: 'interval',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color, isInPolar = markerCfg.isInPolar;\n        if (isInPolar) {\n            return {\n                symbol: 'circle',\n                style: {\n                    r: 4.5,\n                    fill: color,\n                },\n            };\n        }\n        return {\n            symbol: 'square',\n            style: {\n                r: 4,\n                fill: color,\n            },\n        };\n    },\n});\nexport default IntervalShapeFactory;\n//# sourceMappingURL=index.js.map","import { flatten, isString, valuesOfKey } from '@antv/util';\nimport { getXDimensionLength } from '../../util/coordinate';\n// 已经排序后的数据查找距离最小的\nfunction findMinDistance(arr, scale) {\n    var count = arr.length;\n    var sourceArr = arr;\n    if (isString(sourceArr[0])) {\n        // 日期类型的 values 经常上文本类型，所以需要转换一下\n        sourceArr = arr.map(function (v) {\n            return scale.translate(v);\n        });\n    }\n    var distance = sourceArr[1] - sourceArr[0];\n    for (var i = 2; i < count; i++) {\n        var tmp = sourceArr[i] - sourceArr[i - 1];\n        if (distance > tmp) {\n            distance = tmp;\n        }\n    }\n    return distance;\n}\nfunction getDodgeCount(dataArray, dodgeBy) {\n    if (dodgeBy) {\n        var mergeData = flatten(dataArray);\n        var values = valuesOfKey(mergeData, dodgeBy);\n        return values.length;\n    }\n    return dataArray.length;\n}\n/** @ignore */\nexport function getDefaultSize(geometry) {\n    var theme = geometry.theme;\n    var coordinate = geometry.coordinate;\n    var xScale = geometry.getXScale();\n    var xValues = xScale.values;\n    var dataArray = geometry.beforeMappingData;\n    var count = xValues.length;\n    if (xScale.isLinear && xValues.length > 1) {\n        // Linear 类型用户有可能设置了 min, max 范围所以需要根据数据最小区间计算 count\n        xValues.sort();\n        var interval = findMinDistance(xValues, xScale);\n        count = (xScale.max - xScale.min) / interval;\n        if (xValues.length > count) {\n            count = xValues.length;\n        }\n    }\n    var range = xScale.range;\n    var normalizedSize = 1 / count;\n    var wr = 1;\n    if (coordinate.isPolar) {\n        if (coordinate.isTransposed && count > 1) {\n            // 极坐标下多层环图\n            wr = theme.multiplePieWidthRatio;\n        }\n        else {\n            wr = theme.roseWidthRatio;\n        }\n    }\n    else {\n        if (xScale.isLinear) {\n            normalizedSize *= range[1] - range[0];\n        }\n        wr = theme.columnWidthRatio;\n    }\n    normalizedSize *= wr;\n    if (geometry.getAdjust('dodge')) {\n        var dodgeAdjust = geometry.getAdjust('dodge');\n        var dodgeBy = dodgeAdjust.dodgeBy;\n        var dodgeCount = getDodgeCount(dataArray, dodgeBy);\n        normalizedSize = normalizedSize / dodgeCount;\n    }\n    // 最大和最小限制\n    var maxColumnWidth = theme.maxColumnWidth, minColumnWidth = theme.minColumnWidth;\n    var xDimensionLength = getXDimensionLength(geometry.coordinate);\n    if (maxColumnWidth) {\n        var normalizedMaxColumnWidth = maxColumnWidth / xDimensionLength;\n        if (normalizedSize > normalizedMaxColumnWidth) {\n            normalizedSize = normalizedMaxColumnWidth;\n        }\n    }\n    if (minColumnWidth) {\n        var normalizedMinColumnWidth = minColumnWidth / xDimensionLength;\n        if (normalizedSize < normalizedMinColumnWidth) {\n            normalizedSize = normalizedMinColumnWidth;\n        }\n    }\n    return normalizedSize;\n}\n//# sourceMappingURL=shape-size.js.map","import { __extends } from \"tslib\";\nimport { get } from '@antv/util';\nimport { getXDimensionLength } from '../util/coordinate';\nimport Geometry from './base';\n/** 引入对应的 ShapeFactory */\nimport './shape/interval';\nimport { getDefaultSize } from './util/shape-size';\n/**\n * Interval 几何标记。\n * 用于绘制柱状图、饼图、条形图、玫瑰图等。\n */\nvar Interval = /** @class */ (function (_super) {\n    __extends(Interval, _super);\n    function Interval() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'interval';\n        _this.shapeType = 'interval';\n        _this.generatePoints = true;\n        return _this;\n    }\n    /**\n     * 获取每条数据的 Shape 绘制信息\n     * @param obj 经过分组 -> 数字化 -> adjust 调整后的数据记录\n     * @returns\n     */\n    Interval.prototype.createShapePointsCfg = function (obj) {\n        var cfg = _super.prototype.createShapePointsCfg.call(this, obj);\n        // 计算每个 shape 的 size\n        var size;\n        var sizeAttr = this.getAttribute('size');\n        if (sizeAttr) {\n            size = this.getAttributeValues(sizeAttr, obj)[0];\n            // 归一化\n            var coordinate = this.coordinate;\n            var coordinateWidth = getXDimensionLength(coordinate);\n            size = size / coordinateWidth;\n        }\n        else {\n            if (!this.defaultSize) {\n                this.defaultSize = getDefaultSize(this);\n            }\n            size = this.defaultSize;\n        }\n        cfg.size = size;\n        return cfg;\n    };\n    /**\n     * 调整 y 轴的 scale 范围。\n     * 对于 Y 轴为数值轴柱状图，默认从 0 开始 生长。\n     */\n    Interval.prototype.adjustScale = function () {\n        _super.prototype.adjustScale.call(this);\n        var yScale = this.getYScale();\n        // 特殊逻辑：饼图需要填充满整个空间\n        if (this.coordinate.type === 'theta') {\n            yScale.change({\n                nice: false,\n                min: 0,\n                // 发生过 stack 调整，yScale 的 max 被调整过，this.updateStackRange()\n                max: Math.max(Math.max.apply(null, yScale.values), yScale.max),\n            });\n        }\n        else {\n            // 柱状图数值轴默认从 0 开始\n            var scaleDefs = this.scaleDefs;\n            var field = yScale.field, min = yScale.min, max = yScale.max, type = yScale.type;\n            if (type !== 'time') {\n                // time 类型不做调整\n                // 柱状图的 Y 轴要从 0 开始生长，但是如果用户设置了则以用户的为准\n                if (min > 0 && !get(scaleDefs, [field, 'min'])) {\n                    yScale.change({\n                        min: 0,\n                    });\n                }\n                // 柱当柱状图全为负值时也需要从 0 开始生长，但是如果用户设置了则以用户的为准\n                if (max <= 0 && !get(scaleDefs, [field, 'max'])) {\n                    yScale.change({\n                        max: 0,\n                    });\n                }\n            }\n        }\n    };\n    return Interval;\n}(Geometry));\nexport default Interval;\n//# sourceMappingURL=interval.js.map","import { __extends } from \"tslib\";\nimport Path from './path';\n/** 引入 Path 对应的 ShapeFactory */\nimport './shape/line';\n/**\n * Line 几何标记。\n * 常用于折线图的绘制。\n */\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        _this.type = 'line';\n        var _a = cfg.sortable, sortable = _a === void 0 ? true : _a; // Line 默认会对数据按照 x 轴字段进行排序\n        _this.sortable = sortable;\n        return _this;\n    }\n    return Line;\n}(Path));\nexport default Line;\n//# sourceMappingURL=line.js.map","/** @ignore */\nexport var MarkerSymbols = {\n    hexagon: function (x, y, r) {\n        var diffX = (r / 2) * Math.sqrt(3);\n        return [\n            ['M', x, y - r],\n            ['L', x + diffX, y - r / 2],\n            ['L', x + diffX, y + r / 2],\n            ['L', x, y + r],\n            ['L', x - diffX, y + r / 2],\n            ['L', x - diffX, y - r / 2],\n            ['Z'],\n        ];\n    },\n    bowtie: function (x, y, r) {\n        var diffY = r - 1.5;\n        return [['M', x - r, y - diffY], ['L', x + r, y + diffY], ['L', x + r, y - diffY], ['L', x - r, y + diffY], ['Z']];\n    },\n    cross: function (x, y, r) {\n        return [\n            ['M', x - r, y - r],\n            ['L', x + r, y + r],\n            ['M', x + r, y - r],\n            ['L', x - r, y + r],\n        ];\n    },\n    tick: function (x, y, r) {\n        return [\n            ['M', x - r / 2, y - r],\n            ['L', x + r / 2, y - r],\n            ['M', x, y - r],\n            ['L', x, y + r],\n            ['M', x - r / 2, y + r],\n            ['L', x + r / 2, y + r],\n        ];\n    },\n    plus: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['L', x + r, y],\n            ['M', x, y - r],\n            ['L', x, y + r],\n        ];\n    },\n    hyphen: function (x, y, r) {\n        return [\n            ['M', x - r, y],\n            ['L', x + r, y],\n        ];\n    },\n    line: function (x, y, r) {\n        return [\n            ['M', x, y - r],\n            ['L', x, y + r],\n        ];\n    },\n};\n//# sourceMappingURL=marker.js.map","import { __assign } from \"tslib\";\nimport { MarkerSymbols } from '../../../util/marker';\nimport { getStyle } from '../util/get-style';\nexport var SHAPES = ['circle', 'square', 'bowtie', 'diamond', 'hexagon', 'triangle', 'triangle-down'];\nexport var HOLLOW_SHAPES = ['cross', 'tick', 'plus', 'hyphen', 'line'];\n/**\n * @ignore\n * Draws points\n * @param shape\n * @param cfg\n * @param container\n * @param shapeName\n * @param isStroke\n * @returns points\n */\nexport function drawPoints(shape, cfg, container, shapeName, isStroke) {\n    var style = getStyle(cfg, isStroke, !isStroke, 'r');\n    var points = shape.parsePoints(cfg.points);\n    var pointPosition = points[0];\n    if (cfg.isStack) {\n        pointPosition = points[1];\n    }\n    else if (points.length > 1) {\n        var group = container.addGroup();\n        for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {\n            var point = points_1[_i];\n            group.addShape({\n                type: 'marker',\n                attrs: __assign(__assign(__assign({}, style), { symbol: MarkerSymbols[shapeName] || shapeName }), point),\n            });\n        }\n        return group;\n    }\n    return container.addShape({\n        type: 'marker',\n        attrs: __assign(__assign(__assign({}, style), { symbol: MarkerSymbols[shapeName] || shapeName }), pointPosition),\n    });\n}\n//# sourceMappingURL=util.js.map","import { each } from '@antv/util';\nimport { MarkerSymbols } from '../../../util/marker';\nimport { registerShape, registerShapeFactory } from '../base';\nimport { splitPoints } from '../util/split-points';\nimport { drawPoints, SHAPES } from './util';\nvar PointShapeFactory = registerShapeFactory('point', {\n    defaultShapeType: 'hollow-circle',\n    getDefaultPoints: function (pointInfo) {\n        return splitPoints(pointInfo);\n    },\n});\neach(SHAPES, function (shapeName) {\n    // 添加该 shape 对应的 hollow-shape\n    registerShape('point', \"hollow-\" + shapeName, {\n        draw: function (cfg, container) {\n            return drawPoints(this, cfg, container, shapeName, true);\n        },\n        getMarker: function (markerCfg) {\n            var color = markerCfg.color;\n            return {\n                symbol: MarkerSymbols[shapeName] || shapeName,\n                style: {\n                    r: 4.5,\n                    stroke: color,\n                    fill: null,\n                },\n            };\n        },\n    });\n});\nexport default PointShapeFactory;\n//# sourceMappingURL=index.js.map","import { __assign, __extends } from \"tslib\";\nimport Geometry from './base';\n/** 引入 Point 对应的 ShapeFactory */\nimport './shape/point';\n/**\n * Point 几何标记。\n * 常用于绘制点图。\n */\nvar Point = /** @class */ (function (_super) {\n    __extends(Point, _super);\n    function Point() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'point';\n        _this.shapeType = 'point';\n        _this.generatePoints = true;\n        return _this;\n    }\n    /**\n     * 获取一个点的绘制信息。\n     * @param mappingDatum\n     * @returns draw cfg\n     */\n    Point.prototype.getDrawCfg = function (mappingDatum) {\n        var shapeCfg = _super.prototype.getDrawCfg.call(this, mappingDatum);\n        return __assign(__assign({}, shapeCfg), { isStack: !!this.getAdjust('stack') });\n    };\n    return Point;\n}(Geometry));\nexport default Point;\n//# sourceMappingURL=point.js.map","import { __assign } from \"tslib\";\nimport { each, isEmpty, isEqual, last } from '@antv/util';\nimport { registerShape, registerShapeFactory } from '../base';\nimport { getStyle } from '../util/get-style';\nfunction getPath(points) {\n    var flag = points[0];\n    var i = 1;\n    var path = [['M', flag.x, flag.y]];\n    while (i < points.length) {\n        var c = points[i];\n        if (c.x !== points[i - 1].x || c.y !== points[i - 1].y) {\n            path.push(['L', c.x, c.y]);\n            if (c.x === flag.x && c.y === flag.y && i < points.length - 1) {\n                flag = points[i + 1];\n                path.push(['Z']);\n                path.push(['M', flag.x, flag.y]);\n                i++;\n            }\n        }\n        i++;\n    }\n    if (!isEqual(last(path), flag)) {\n        path.push(['L', flag.x, flag.y]);\n    }\n    path.push(['Z']);\n    return path;\n}\nvar PolygonShapeFactory = registerShapeFactory('polygon', {\n    defaultShapeType: 'polygon',\n    getDefaultPoints: function (pointInfo) {\n        var points = [];\n        each(pointInfo.x, function (subX, index) {\n            var subY = pointInfo.y[index];\n            points.push({\n                x: subX,\n                y: subY,\n            });\n        });\n        return points;\n    },\n});\nregisterShape('polygon', 'polygon', {\n    draw: function (cfg, container) {\n        if (!isEmpty(cfg.points)) {\n            var shapeAttrs = getStyle(cfg, true, true);\n            var path = this.parsePath(getPath(cfg.points));\n            return container.addShape('path', {\n                attrs: __assign(__assign({}, shapeAttrs), { path: path }),\n                name: 'polygon',\n            });\n        }\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: 'square',\n            style: {\n                r: 4,\n                fill: color,\n            },\n        };\n    },\n});\nexport default PolygonShapeFactory;\n//# sourceMappingURL=index.js.map","import { __extends } from \"tslib\";\nimport { isArray } from '@antv/util';\nimport Geometry from './base';\n/** 引入 Path 对应的 ShapeFactory */\nimport './shape/polygon';\n/**\n * Polygon 几何标记。\n * 常用于绘制色块图、日历图等。\n */\nvar Polygon = /** @class */ (function (_super) {\n    __extends(Polygon, _super);\n    function Polygon() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'polygon';\n        _this.shapeType = 'polygon';\n        _this.generatePoints = true;\n        return _this;\n    }\n    /**\n     * 获取 Shape 的关键点数据。\n     * @param obj\n     * @returns\n     */\n    Polygon.prototype.createShapePointsCfg = function (obj) {\n        var cfg = _super.prototype.createShapePointsCfg.call(this, obj);\n        var x = cfg.x;\n        var y = cfg.y;\n        var temp;\n        // x y 都是数组时，不做处理\n        if (!(isArray(x) && isArray(y))) {\n            var xScale = this.getXScale();\n            var yScale = this.getYScale();\n            var xCount = xScale.values.length;\n            var yCount = yScale.values.length;\n            var xOffset = (0.5 * 1) / xCount;\n            var yOffset = (0.5 * 1) / yCount;\n            if (xScale.isCategory && yScale.isCategory) {\n                // 如果x,y都是分类\n                x = [x - xOffset, x - xOffset, x + xOffset, x + xOffset];\n                y = [y - yOffset, y + yOffset, y + yOffset, y - yOffset];\n            }\n            else if (isArray(x)) {\n                // x 是数组\n                temp = x;\n                x = [temp[0], temp[0], temp[1], temp[1]];\n                y = [y - yOffset / 2, y + yOffset / 2, y + yOffset / 2, y - yOffset / 2];\n            }\n            else if (isArray(y)) {\n                // y 是数组\n                temp = y;\n                y = [temp[0], temp[1], temp[1], temp[0]];\n                x = [x - xOffset / 2, x - xOffset / 2, x + xOffset / 2, x + xOffset / 2];\n            }\n            cfg.x = x;\n            cfg.y = y;\n        }\n        return cfg;\n    };\n    return Polygon;\n}(Geometry));\nexport default Polygon;\n//# sourceMappingURL=polygon.js.map","import { __extends } from \"tslib\";\nimport { getXDimensionLength } from '../util/coordinate';\nimport Geometry from './base';\n/** 引入对应的 ShapeFactory */\nimport './shape/schema';\nimport { getDefaultSize } from './util/shape-size';\n/**\n * Schema 几何标记，用于一些自定义图形的绘制，比如箱型图、股票图等。\n */\nvar Schema = /** @class */ (function (_super) {\n    __extends(Schema, _super);\n    function Schema() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'schema';\n        _this.shapeType = 'schema';\n        _this.generatePoints = true;\n        return _this;\n    }\n    /**\n     * 获取 Shape 的关键点数据。\n     * @param record\n     * @returns\n     */\n    Schema.prototype.createShapePointsCfg = function (record) {\n        var cfg = _super.prototype.createShapePointsCfg.call(this, record);\n        // 计算每个 shape 的 size\n        var size;\n        var sizeAttr = this.getAttribute('size');\n        if (sizeAttr) {\n            size = this.getAttributeValues(sizeAttr, record)[0];\n            // 归一化\n            var coordinate = this.coordinate;\n            var coordinateWidth = getXDimensionLength(coordinate);\n            size = size / coordinateWidth;\n        }\n        else {\n            if (!this.defaultSize) {\n                this.defaultSize = getDefaultSize(this);\n            }\n            size = this.defaultSize;\n        }\n        cfg.size = size;\n        return cfg;\n    };\n    return Schema;\n}(Geometry));\nexport default Schema;\n//# sourceMappingURL=schema.js.map","import { registerShapeFactory } from '../base';\nvar SchemaShapeFactory = registerShapeFactory('schema', {\n    defaultShapeType: '',\n});\nexport default SchemaShapeFactory;\n//# sourceMappingURL=index.js.map","import { each } from '@antv/util';\n/**\n * @ignore\n * Gets cpath\n * @param from\n * @param to\n * @returns\n */\nexport function getCPath(from, to) {\n    var points = [];\n    points.push({\n        x: from.x,\n        y: (from.y * 1) / 2 + (to.y * 1) / 2,\n    });\n    points.push({\n        x: to.x,\n        y: (from.y * 1) / 2 + (to.y * 1) / 2,\n    });\n    points.push(to);\n    var sub = ['C'];\n    each(points, function (point) {\n        sub.push(point.x, point.y);\n    });\n    return sub;\n}\n/**\n * @ignore\n * Gets qpath\n * @param to\n * @param center\n * @returns\n */\nexport function getQPath(to, center) {\n    var points = [];\n    points.push({\n        x: center.x,\n        y: center.y,\n    });\n    points.push(to);\n    var sub = ['Q'];\n    each(points, function (point) {\n        sub.push(point.x, point.y);\n    });\n    return sub;\n}\n//# sourceMappingURL=util.js.map","import { registerShape } from '../base';\nimport { getShapeAttrs } from './util';\n/**\n * 描边但不填充的区域图\n */\nregisterShape('area', 'line', {\n    draw: function (cfg, container) {\n        var attrs = getShapeAttrs(cfg, true, false, this);\n        var shape = container.addShape({\n            type: 'path',\n            attrs: attrs,\n            name: 'area',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                if (r === void 0) { r = 5.5; }\n                return [['M', x - r, y - 4], ['L', x + r, y - 4], ['L', x + r, y + 4], ['L', x - r, y + 4], ['Z']];\n            },\n            style: {\n                r: 5,\n                stroke: color,\n                fill: null,\n            },\n        };\n    },\n});\n//# sourceMappingURL=line.js.map","import { registerShape } from '../base';\nimport { getConstraint, getShapeAttrs } from './util';\n/**\n * 填充的平滑曲面图\n */\nregisterShape('area', 'smooth', {\n    draw: function (cfg, container) {\n        var coordinate = this.coordinate;\n        var attrs = getShapeAttrs(cfg, false, true, this, getConstraint(coordinate));\n        var shape = container.addShape({\n            type: 'path',\n            attrs: attrs,\n            name: 'area',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                if (r === void 0) { r = 5.5; }\n                return [['M', x - r, y - 4], ['L', x + r, y - 4], ['L', x + r, y + 4], ['L', x - r, y + 4], ['Z']];\n            },\n            style: {\n                r: 5,\n                fill: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=smooth.js.map","import { registerShape } from '../base';\nimport { getConstraint, getShapeAttrs } from './util';\n/** 描边的平滑曲面图 */\nregisterShape('area', 'smooth-line', {\n    draw: function (cfg, container) {\n        var coordinate = this.coordinate;\n        var attrs = getShapeAttrs(cfg, true, true, this, getConstraint(coordinate));\n        var shape = container.addShape({\n            type: 'path',\n            attrs: attrs,\n            name: 'area',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                if (r === void 0) { r = 5.5; }\n                return [['M', x - r, y - 4], ['L', x + r, y - 4], ['L', x + r, y + 4], ['L', x - r, y + 4], ['Z']];\n            },\n            style: {\n                r: 5,\n                stroke: color,\n                fill: null,\n            },\n        };\n    },\n});\n//# sourceMappingURL=smooth-line.js.map","import { __assign } from \"tslib\";\nimport { getArcPath } from '../../../util/graphics';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getCPath, getQPath } from './util';\nfunction getArcShapePath(from, to, center) {\n    var sub = getQPath(to, center);\n    var path = [['M', from.x, from.y]];\n    path.push(sub);\n    return path;\n}\nfunction getArcShapeWeightPath(points, center) {\n    var arc1 = getQPath(points[1], center);\n    var arc2 = getQPath(points[3], center);\n    var path = [['M', points[0].x, points[0].y]];\n    path.push(arc2);\n    path.push(['L', points[3].x, points[3].y]);\n    path.push(['L', points[2].x, points[2].y]);\n    path.push(arc1);\n    path.push(['L', points[1].x, points[1].y]);\n    path.push(['L', points[0].x, points[0].y]);\n    path.push(['Z']);\n    return path;\n}\n// 弧线包括笛卡尔坐标系下的半圆弧线、极坐标系下以圆心为控制点的二阶曲线、笛卡尔坐标系下带权重的三阶曲线、极坐标系下带权重的以圆心为控制点的二阶曲线\nregisterShape('edge', 'arc', {\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false, 'lineWidth');\n        var points = cfg.points;\n        var type = points.length > 2 ? 'weight' : 'normal';\n        var path;\n        if (cfg.isInCircle) {\n            var center = { x: 0, y: 1 };\n            if (type === 'normal') {\n                path = getArcShapePath(points[0], points[1], center);\n            }\n            else {\n                style.fill = style.stroke;\n                path = getArcShapeWeightPath(points, center);\n            }\n            path = this.parsePath(path);\n            return container.addShape('path', {\n                attrs: __assign(__assign({}, style), { path: path }),\n            });\n        }\n        else {\n            if (type === 'normal') {\n                points = this.parsePoints(points);\n                path = getArcPath((points[1].x + points[0].x) / 2, points[0].y, Math.abs(points[1].x - points[0].x) / 2, Math.PI, Math.PI * 2);\n                return container.addShape('path', {\n                    attrs: __assign(__assign({}, style), { path: path }),\n                });\n            }\n            else {\n                var c1 = getCPath(points[1], points[3]);\n                var c2 = getCPath(points[2], points[0]);\n                path = [\n                    ['M', points[0].x, points[0].y],\n                    ['L', points[1].x, points[1].y],\n                    c1,\n                    ['L', points[3].x, points[3].y],\n                    ['L', points[2].x, points[2].y],\n                    c2,\n                    ['Z'],\n                ];\n                path = this.parsePath(path);\n                style.fill = style.stroke;\n                return container.addShape('path', {\n                    attrs: __assign(__assign({}, style), { path: path }),\n                });\n            }\n        }\n    },\n    getMarker: function (markerCfg) {\n        return {\n            symbol: 'circle',\n            style: {\n                r: 4.5,\n                fill: markerCfg.color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=arc.js.map","import { __assign } from \"tslib\";\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getCPath } from './util';\nfunction getSmoothPath(from, to) {\n    var sub = getCPath(from, to);\n    var path = [['M', from.x, from.y]];\n    path.push(sub);\n    return path;\n}\nregisterShape('edge', 'smooth', {\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false, 'lineWidth');\n        var points = cfg.points;\n        var path = this.parsePath(getSmoothPath(points[0], points[1]));\n        return container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n        });\n    },\n    getMarker: function (markerCfg) {\n        return {\n            symbol: 'circle',\n            style: {\n                r: 4.5,\n                fill: markerCfg.color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=smooth.js.map","import { __assign } from \"tslib\";\nimport { each } from '@antv/util';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nvar CORNER_PERCENT = 1 / 3;\nfunction getVHVPath(from, to) {\n    var points = [];\n    points.push({\n        x: from.x,\n        y: from.y * (1 - CORNER_PERCENT) + to.y * CORNER_PERCENT,\n    });\n    points.push({\n        x: to.x,\n        y: from.y * (1 - CORNER_PERCENT) + to.y * CORNER_PERCENT,\n    });\n    points.push(to);\n    var path = [['M', from.x, from.y]];\n    each(points, function (point) {\n        path.push(['L', point.x, point.y]);\n    });\n    return path;\n}\nregisterShape('edge', 'vhv', {\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false, 'lineWidth');\n        var points = cfg.points;\n        var path = this.parsePath(getVHVPath(points[0], points[1]));\n        return container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n        });\n    },\n    getMarker: function (markerCfg) {\n        return {\n            symbol: 'circle',\n            style: {\n                r: 4.5,\n                fill: markerCfg.color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=vhv.js.map","import { __assign } from \"tslib\";\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getFunnelPath, getRectPoints } from './util';\n/** 漏斗图 */\nregisterShape('interval', 'funnel', {\n    getPoints: function (shapePoint) {\n        shapePoint.size = shapePoint.size * 2; // 漏斗图的 size 是柱状图的两倍\n        return getRectPoints(shapePoint);\n    },\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, false, true);\n        var path = this.parsePath(getFunnelPath(cfg.points, cfg.nextPoints, false));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n            name: 'interval',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: 'square',\n            style: {\n                r: 4,\n                fill: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=funnel.js.map","import { __assign } from \"tslib\";\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getRectPath } from './util';\n/** 描边柱状图 */\nregisterShape('interval', 'hollow-rect', {\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false);\n        var path = this.parsePath(getRectPath(cfg.points));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n            name: 'interval',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color, isInPolar = markerCfg.isInPolar;\n        if (isInPolar) {\n            return {\n                symbol: 'circle',\n                style: {\n                    r: 4.5,\n                    stroke: color,\n                    fill: null,\n                },\n            };\n        }\n        return {\n            symbol: 'square',\n            style: {\n                r: 4,\n                stroke: color,\n                fill: null,\n            },\n        };\n    },\n});\n//# sourceMappingURL=hollow-rect.js.map","import { __assign } from \"tslib\";\nimport { isArray } from '@antv/util';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getRectPath } from './util';\n// 根据数据点生成 Line 的两个关键点\nfunction getLinePoints(pointInfo) {\n    var x = pointInfo.x, y = pointInfo.y, y0 = pointInfo.y0;\n    if (isArray(y)) {\n        return y.map(function (yItem, idx) {\n            return {\n                x: isArray(x) ? x[idx] : x,\n                y: yItem,\n            };\n        });\n    }\n    // 起始点从 y0 开始\n    return [\n        { x: x, y: y0 },\n        { x: x, y: y },\n    ];\n}\nregisterShape('interval', 'line', {\n    getPoints: function (shapePoint) {\n        return getLinePoints(shapePoint);\n    },\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false, 'lineWidth');\n        var path = this.parsePath(getRectPath(cfg.points, false));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n            name: 'interval',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                return [\n                    ['M', x, y - r],\n                    ['L', x, y + r],\n                ];\n            },\n            style: {\n                r: 5,\n                stroke: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=line.js.map","import { __assign } from \"tslib\";\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nimport { getFunnelPath, getRectPoints } from './util';\n/** 金字塔图，尖底漏斗图 */\nregisterShape('interval', 'pyramid', {\n    getPoints: function (shapePoint) {\n        shapePoint.size = shapePoint.size * 2; // 漏斗图的 size 是柱状图的两倍\n        return getRectPoints(shapePoint, true);\n    },\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, false, true);\n        var path = this.parsePath(getFunnelPath(cfg.points, cfg.nextPoints, true));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n            name: 'interval',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: 'square',\n            style: {\n                r: 4,\n                fill: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=pyramid.js.map","import { __assign } from \"tslib\";\nimport { isArray } from '@antv/util';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\n// 根据数据点生成 tick shape 的 6 个关键点\nfunction getTickPoints(pointInfo) {\n    var x = pointInfo.x, y = pointInfo.y, y0 = pointInfo.y0, size = pointInfo.size;\n    var yMin;\n    var yMax;\n    if (isArray(y)) {\n        yMin = y[0], yMax = y[1];\n    }\n    else {\n        yMin = y0;\n        yMax = y;\n    }\n    var xMax = x + size / 2;\n    var xMin = x - size / 2;\n    // tick 关键点顺序\n    // 4 - 1 - 5\n    //     |\n    // 2 - 0 - 3\n    return [\n        { x: x, y: yMin },\n        { x: x, y: yMax },\n        { x: xMin, y: yMin },\n        { x: xMax, y: yMin },\n        { x: xMin, y: yMax },\n        { x: xMax, y: yMax },\n    ];\n}\n// 根据 tick 关键点绘制 path\nfunction getTickPath(points) {\n    return [\n        ['M', points[0].x, points[0].y],\n        ['L', points[1].x, points[1].y],\n        ['M', points[2].x, points[2].y],\n        ['L', points[3].x, points[3].y],\n        ['M', points[4].x, points[4].y],\n        ['L', points[5].x, points[5].y],\n    ];\n}\n/** I 形状柱状图，常用于 error bar chart */\nregisterShape('interval', 'tick', {\n    getPoints: function (shapePoint) {\n        return getTickPoints(shapePoint);\n    },\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false);\n        var path = this.parsePath(getTickPath(cfg.points));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path }),\n            name: 'interval',\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                return [\n                    ['M', x - r / 2, y - r],\n                    ['L', x + r / 2, y - r],\n                    ['M', x, y - r],\n                    ['L', x, y + r],\n                    ['M', x - r / 2, y + r],\n                    ['L', x + r / 2, y + r],\n                ];\n            },\n            style: {\n                r: 5,\n                stroke: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=tick.js.map","import { __assign } from \"tslib\";\nimport { each } from '@antv/util';\nimport { registerShape } from '../base';\nimport { getPathPoints } from '../util/get-path-points';\nimport { getStyle } from '../util/get-style';\nimport { getLineMarker } from './util';\nvar interpolateCallback = function (point, nextPoint, shapeType) {\n    var x = point.x;\n    var y = point.y;\n    var nextX = nextPoint.x;\n    var nextY = nextPoint.y;\n    var result;\n    switch (shapeType) {\n        case 'hv':\n            result = [{ x: nextX, y: y }];\n            break;\n        case 'vh':\n            result = [{ x: x, y: nextY }];\n            break;\n        case 'hvh':\n            var middleX = (nextX + x) / 2;\n            result = [\n                { x: middleX, y: y },\n                { x: middleX, y: nextY },\n            ];\n            break;\n        case 'vhv':\n            var middleY = (y + nextY) / 2;\n            result = [\n                { x: x, y: middleY },\n                { x: nextX, y: middleY },\n            ];\n            break;\n        default:\n            break;\n    }\n    return result;\n};\nfunction getInterpolatePoints(points, shapeType) {\n    var result = [];\n    each(points, function (point, index) {\n        var nextPoint = points[index + 1];\n        result.push(point);\n        if (nextPoint) {\n            var interpolatePoint = interpolateCallback(point, nextPoint, shapeType);\n            result = result.concat(interpolatePoint);\n        }\n    });\n    return result;\n}\n// 插值的图形path，不考虑null\nfunction getInterpolatePath(points) {\n    return points.map(function (point, index) {\n        return index === 0 ? ['M', point.x, point.y] : ['L', point.x, point.y];\n    });\n}\n// 插值的图形\nfunction getInterpolateShapeAttrs(cfg, shapeType) {\n    var points = getPathPoints(cfg.points, cfg.connectNulls, cfg.showSinglePoint); // 根据 connectNulls 值处理 points\n    var path = [];\n    each(points, function (eachLinePoints) {\n        var interpolatePoints = getInterpolatePoints(eachLinePoints, shapeType);\n        path = path.concat(getInterpolatePath(interpolatePoints));\n    });\n    return __assign(__assign({}, getStyle(cfg, true, false, 'lineWidth')), { path: path });\n}\n// step line\neach(['hv', 'vh', 'hvh', 'vhv'], function (shapeType) {\n    registerShape('line', shapeType, {\n        draw: function (cfg, container) {\n            var attrs = getInterpolateShapeAttrs(cfg, shapeType);\n            var shape = container.addShape({\n                type: 'path',\n                attrs: attrs,\n                name: 'line',\n            });\n            return shape;\n        },\n        getMarker: function (markerCfg) {\n            return getLineMarker(markerCfg, shapeType);\n        },\n    });\n});\n//# sourceMappingURL=step.js.map","import { __assign } from \"tslib\";\nimport { isArray, isNil } from '@antv/util';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nfunction parseValue(value) {\n    var array = !isArray(value) ? [value] : value;\n    var min = array[0]; // 最小值\n    var max = array[array.length - 1]; // 最大值\n    var min1 = array.length > 1 ? array[1] : min;\n    var max1 = array.length > 3 ? array[3] : max;\n    var median = array.length > 2 ? array[2] : min1;\n    return {\n        min: min,\n        max: max,\n        min1: min1,\n        max1: max1,\n        median: median,\n    };\n}\nfunction getBoxPoints(x, y, size) {\n    var halfSize = size / 2;\n    var pointsArray;\n    if (isArray(y)) {\n        // 2维\n        var _a = parseValue(y), min = _a.min, max = _a.max, median = _a.median, min1 = _a.min1, max1 = _a.max1;\n        var minX = x - halfSize;\n        var maxX = x + halfSize;\n        pointsArray = [\n            [minX, max],\n            [maxX, max],\n            [x, max],\n            [x, max1],\n            [minX, min1],\n            [minX, max1],\n            [maxX, max1],\n            [maxX, min1],\n            [x, min1],\n            [x, min],\n            [minX, min],\n            [maxX, min],\n            [minX, median],\n            [maxX, median],\n        ];\n    }\n    else {\n        // 只有一个维度\n        y = isNil(y) ? 0.5 : y;\n        var _b = parseValue(x), min = _b.min, max = _b.max, median = _b.median, min1 = _b.min1, max1 = _b.max1;\n        var minY = y - halfSize;\n        var maxY = y + halfSize;\n        pointsArray = [\n            [min, minY],\n            [min, maxY],\n            [min, y],\n            [min1, y],\n            [min1, minY],\n            [min1, maxY],\n            [max1, maxY],\n            [max1, minY],\n            [max1, y],\n            [max, y],\n            [max, minY],\n            [max, maxY],\n            [median, minY],\n            [median, maxY],\n        ];\n    }\n    return pointsArray.map(function (arr) {\n        return {\n            x: arr[0],\n            y: arr[1],\n        };\n    });\n}\nfunction getBoxPath(points) {\n    return [\n        ['M', points[0].x, points[0].y],\n        ['L', points[1].x, points[1].y],\n        ['M', points[2].x, points[2].y],\n        ['L', points[3].x, points[3].y],\n        ['M', points[4].x, points[4].y],\n        ['L', points[5].x, points[5].y],\n        ['L', points[6].x, points[6].y],\n        ['L', points[7].x, points[7].y],\n        ['L', points[4].x, points[4].y],\n        ['Z'],\n        ['M', points[8].x, points[8].y],\n        ['L', points[9].x, points[9].y],\n        ['M', points[10].x, points[10].y],\n        ['L', points[11].x, points[11].y],\n        ['M', points[12].x, points[12].y],\n        ['L', points[13].x, points[13].y],\n    ];\n}\n// box shape\nregisterShape('schema', 'box', {\n    getPoints: function (shapePoint) {\n        var x = shapePoint.x, y = shapePoint.y, size = shapePoint.size;\n        return getBoxPoints(x, y, size);\n    },\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, false);\n        var path = this.parsePath(getBoxPath(cfg.points));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path, name: 'schema' }),\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                var yValues = [y - 6, y - 3, y, y + 3, y + 6];\n                var points = getBoxPoints(x, yValues, r);\n                return [\n                    ['M', points[0].x + 1, points[0].y],\n                    ['L', points[1].x - 1, points[1].y],\n                    ['M', points[2].x, points[2].y],\n                    ['L', points[3].x, points[3].y],\n                    ['M', points[4].x, points[4].y],\n                    ['L', points[5].x, points[5].y],\n                    ['L', points[6].x, points[6].y],\n                    ['L', points[7].x, points[7].y],\n                    ['L', points[4].x, points[4].y],\n                    ['Z'],\n                    ['M', points[8].x, points[8].y],\n                    ['L', points[9].x, points[9].y],\n                    ['M', points[10].x + 1, points[10].y],\n                    ['L', points[11].x - 1, points[11].y],\n                    ['M', points[12].x, points[12].y],\n                    ['L', points[13].x, points[13].y],\n                ];\n            },\n            style: {\n                r: 6,\n                lineWidth: 1,\n                stroke: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=box.js.map","import { __assign } from \"tslib\";\nimport { isArray } from '@antv/util';\nimport { padEnd } from '../../../util/helper';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nfunction getCandleYValues(value) {\n    var array = !isArray(value) ? [value] : value;\n    // 从大到小排序\n    var sorted = array.sort(function (a, b) { return b - a; });\n    return padEnd(sorted, 4, sorted[sorted.length - 1]);\n}\n// get candle shape's key points\nfunction getCandlePoints(x, y, size) {\n    var yValues = getCandleYValues(y);\n    return [\n        { x: x, y: yValues[0] },\n        { x: x, y: yValues[1] },\n        { x: x - size / 2, y: yValues[2] },\n        { x: x - size / 2, y: yValues[1] },\n        { x: x + size / 2, y: yValues[1] },\n        { x: x + size / 2, y: yValues[2] },\n        { x: x, y: yValues[2] },\n        { x: x, y: yValues[3] },\n    ];\n}\nfunction getCandlePath(points) {\n    return [\n        ['M', points[0].x, points[0].y],\n        ['L', points[1].x, points[1].y],\n        ['M', points[2].x, points[2].y],\n        ['L', points[3].x, points[3].y],\n        ['L', points[4].x, points[4].y],\n        ['L', points[5].x, points[5].y],\n        ['Z'],\n        ['M', points[6].x, points[6].y],\n        ['L', points[7].x, points[7].y],\n    ];\n}\n// k line shape\nregisterShape('schema', 'candle', {\n    getPoints: function (shapePoint) {\n        var x = shapePoint.x, y = shapePoint.y, size = shapePoint.size;\n        return getCandlePoints(x, y, size);\n    },\n    draw: function (cfg, container) {\n        var style = getStyle(cfg, true, true);\n        var path = this.parsePath(getCandlePath(cfg.points));\n        var shape = container.addShape('path', {\n            attrs: __assign(__assign({}, style), { path: path, name: 'schema' }),\n        });\n        return shape;\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: function (x, y, r) {\n                var yValues = [y + 7.5, y + 3, y - 3, y - 7.5];\n                var points = getCandlePoints(x, yValues, r);\n                return [\n                    ['M', points[0].x, points[0].y],\n                    ['L', points[1].x, points[1].y],\n                    ['M', points[2].x, points[2].y],\n                    ['L', points[3].x, points[3].y],\n                    ['L', points[4].x, points[4].y],\n                    ['L', points[5].x, points[5].y],\n                    ['Z'],\n                    ['M', points[6].x, points[6].y],\n                    ['L', points[7].x, points[7].y],\n                ];\n            },\n            style: {\n                lineWidth: 1,\n                stroke: color,\n                fill: color,\n                r: 6,\n            },\n        };\n    },\n});\n//# sourceMappingURL=candle.js.map","import { __assign } from \"tslib\";\nimport { isEmpty, clamp } from '@antv/util';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nfunction getRectAttrs(points, size) {\n    var width = Math.abs(points[0].x - points[2].x);\n    var height = Math.abs(points[0].y - points[2].y);\n    var len = Math.min(width, height);\n    if (size) {\n        len = clamp(size, 0, Math.min(width, height));\n    }\n    len = len / 2;\n    var centerX = (points[0].x + points[2].x) / 2;\n    var centerY = (points[0].y + points[2].y) / 2;\n    return {\n        x: centerX - len,\n        y: centerY - len,\n        width: len * 2,\n        height: len * 2,\n    };\n}\nregisterShape('polygon', 'square', {\n    draw: function (cfg, container) {\n        if (!isEmpty(cfg.points)) {\n            var shapeAttrs = getStyle(cfg, true, true);\n            var points = this.parsePoints(cfg.points); // 转换为画布坐标\n            return container.addShape('rect', {\n                attrs: __assign(__assign({}, shapeAttrs), getRectAttrs(points, cfg.size)),\n                name: 'polygon',\n            });\n        }\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: 'square',\n            style: {\n                r: 4,\n                fill: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=square.js.map","import { each } from '@antv/util';\nimport { MarkerSymbols } from '../../../util/marker';\nimport { registerShape } from '../base';\nimport { drawPoints, HOLLOW_SHAPES } from './util';\n// 添加 hollowShape\neach(HOLLOW_SHAPES, function (shapeName) {\n    registerShape('point', shapeName, {\n        draw: function (cfg, container) {\n            return drawPoints(this, cfg, container, shapeName, true);\n        },\n        getMarker: function (markerCfg) {\n            var color = markerCfg.color;\n            return {\n                symbol: MarkerSymbols[shapeName],\n                style: {\n                    r: 4.5,\n                    stroke: color,\n                    fill: null,\n                },\n            };\n        },\n    });\n});\n//# sourceMappingURL=hollow.js.map","import { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nregisterShape('point', 'image', {\n    draw: function (cfg, container) {\n        var size = getStyle(cfg, false, false, 'r').r;\n        var points = this.parsePoints(cfg.points);\n        var pointPosition = points[0];\n        if (cfg.isStack) {\n            pointPosition = points[1];\n        }\n        else if (points.length > 1) {\n            var group = container.addGroup();\n            for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {\n                var point = points_1[_i];\n                group.addShape('image', {\n                    attrs: {\n                        x: point.x - size / 2,\n                        y: point.y - size,\n                        width: size,\n                        height: size,\n                        img: cfg.shape[1],\n                    },\n                });\n            }\n            return group;\n        }\n        return container.addShape('image', {\n            attrs: {\n                x: pointPosition.x - size / 2,\n                y: pointPosition.y - size,\n                width: size,\n                height: size,\n                img: cfg.shape[1],\n            },\n        });\n    },\n    getMarker: function (markerCfg) {\n        var color = markerCfg.color;\n        return {\n            symbol: 'circle',\n            style: {\n                r: 4.5,\n                fill: color,\n            },\n        };\n    },\n});\n//# sourceMappingURL=image.js.map","import { each } from '@antv/util';\nimport { MarkerSymbols } from '../../../util/marker';\nimport { registerShape } from '../base';\nimport { drawPoints, SHAPES } from './util';\n// 所有的 SHAPES 都注册一下\neach(SHAPES, function (shapeName) {\n    registerShape('point', shapeName, {\n        draw: function (cfg, container) {\n            return drawPoints(this, cfg, container, shapeName, false);\n        },\n        getMarker: function (markerCfg) {\n            var color = markerCfg.color;\n            return {\n                symbol: MarkerSymbols[shapeName] || shapeName,\n                style: {\n                    r: 4.5,\n                    fill: color,\n                },\n            };\n        },\n    });\n});\n//# sourceMappingURL=solid.js.map","import { __extends } from \"tslib\";\nimport { get, deepMix, isArray } from '@antv/util';\nimport GeometryLabel from './base';\n/**\n * 柱状图 label\n */\nvar IntervalLabel = /** @class */ (function (_super) {\n    __extends(IntervalLabel, _super);\n    function IntervalLabel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 获取 interval label 的方向，取决于 value 的值是正还是负\n     * @param labelCfg\n     */\n    IntervalLabel.prototype.getLabelValueDir = function (mappingData) {\n        // points 中的 x/y 和 transpose 无关\n        var dim = 'y';\n        var points = mappingData.points;\n        return points[0][dim] < points[2][dim] ? 1 : -1;\n    };\n    /**\n     * 重载：根据 interval 值的正负来调整 label 偏移量\n     * @param labelCfg\n     * @param index\n     * @param total\n     */\n    IntervalLabel.prototype.getLabelOffset = function (labelCfg, index, total) {\n        var point = _super.prototype.getLabelOffset.call(this, labelCfg, index, total);\n        var transposed = this.getCoordinate().isTransposed;\n        var dim = transposed ? 'x' : 'y';\n        var dir = this.getLabelValueDir(labelCfg.mappingData);\n        point[dim] *= dir;\n        return point;\n    };\n    /**\n     * 重载：定制 interval label 的默认主题配置\n     * @param labelCfg\n     */\n    IntervalLabel.prototype.getThemedLabelCfg = function (labelCfg) {\n        var geometry = this.geometry;\n        var defaultLabelCfg = this.getDefaultLabelCfg();\n        var theme = geometry.theme;\n        // 如果 interval label position 设置为 middle，则将主题中的 offset 覆盖为 0\n        return deepMix({}, defaultLabelCfg, theme.labels, labelCfg.position === 'middle' ? { offset: 0 } : {}, labelCfg);\n    };\n    IntervalLabel.prototype.setLabelPosition = function (labelPointCfg, mappingData, index, position) {\n        var coordinate = this.getCoordinate();\n        var transposed = coordinate.isTransposed;\n        var shapePoints = mappingData.points;\n        var point0 = coordinate.convert(shapePoints[0]);\n        var point2 = coordinate.convert(shapePoints[2]);\n        var dir = this.getLabelValueDir(mappingData);\n        var top;\n        var right;\n        var bottom;\n        var left;\n        var shape = isArray(mappingData.shape) ? mappingData.shape[0] : mappingData.shape;\n        if (shape === 'funnel' || shape === 'pyramid') {\n            // 处理漏斗图\n            var nextPoints = get(mappingData, 'nextPoints');\n            var points = get(mappingData, 'points');\n            if (nextPoints) {\n                // 非漏斗图底部\n                var p0 = coordinate.convert(points[0]);\n                var p1 = coordinate.convert(points[1]);\n                var nextP0 = coordinate.convert(nextPoints[0]);\n                var nextP1 = coordinate.convert(nextPoints[1]);\n                // TODO: 使用包围盒的计算方法\n                if (transposed) {\n                    top = Math.min(nextP0.y, p0.y);\n                    bottom = Math.max(nextP0.y, p0.y);\n                    right = (p1.x + nextP1.x) / 2;\n                    left = (p0.x + nextP0.x) / 2;\n                }\n                else {\n                    top = Math.min((p1.y + nextP1.y) / 2, (p0.y + nextP0.y) / 2);\n                    bottom = Math.max((p1.y + nextP1.y) / 2, (p0.y + nextP0.y) / 2);\n                    right = nextP1.x;\n                    left = p0.x;\n                }\n            }\n            else {\n                top = Math.min(point2.y, point0.y);\n                bottom = Math.max(point2.y, point0.y);\n                right = point2.x;\n                left = point0.x;\n            }\n        }\n        else {\n            top = Math.min(point2.y, point0.y);\n            bottom = Math.max(point2.y, point0.y);\n            right = point2.x;\n            left = point0.x;\n        }\n        switch (position) {\n            case 'right':\n                labelPointCfg.x = right;\n                labelPointCfg.y = (top + bottom) / 2;\n                labelPointCfg.textAlign = get(labelPointCfg, 'textAlign', dir > 0 ? 'left' : 'right');\n                break;\n            case 'left':\n                labelPointCfg.x = left;\n                labelPointCfg.y = (top + bottom) / 2;\n                labelPointCfg.textAlign = get(labelPointCfg, 'textAlign', dir > 0 ? 'left' : 'right');\n                break;\n            case 'bottom':\n                if (transposed) {\n                    labelPointCfg.x = (right + left) / 2;\n                }\n                labelPointCfg.y = bottom;\n                labelPointCfg.textAlign = get(labelPointCfg, 'textAlign', 'center');\n                labelPointCfg.textBaseline = get(labelPointCfg, 'textBaseline', dir > 0 ? 'bottom' : 'top');\n                break;\n            case 'middle':\n                if (transposed) {\n                    labelPointCfg.x = (right + left) / 2;\n                }\n                labelPointCfg.y = (top + bottom) / 2;\n                labelPointCfg.textAlign = get(labelPointCfg, 'textAlign', 'center');\n                labelPointCfg.textBaseline = get(labelPointCfg, 'textBaseline', 'middle');\n                break;\n            case 'top':\n                if (transposed) {\n                    labelPointCfg.x = (right + left) / 2;\n                }\n                labelPointCfg.y = top;\n                labelPointCfg.textAlign = get(labelPointCfg, 'textAlign', 'center');\n                labelPointCfg.textBaseline = get(labelPointCfg, 'textBaseline', dir > 0 ? 'bottom' : 'top');\n                break;\n            default:\n                break;\n        }\n    };\n    return IntervalLabel;\n}(GeometryLabel));\nexport default IntervalLabel;\n//# sourceMappingURL=interval.js.map","import { __assign, __extends } from \"tslib\";\nimport { each, get, isArray, map } from '@antv/util';\nimport { getDistanceToCenter } from '../../util/coordinate';\nimport { getAngleByPoint } from '../../util/coordinate';\nimport GeometryLabel from './base';\nvar HALF_PI = Math.PI / 2;\n/**\n * 极坐标下的图形 label\n */\nvar PolarLabel = /** @class */ (function (_super) {\n    __extends(PolarLabel, _super);\n    function PolarLabel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @override\n     * 获取 labelItems, 增加切片 percent\n     * @param mapppingArray\n     */\n    PolarLabel.prototype.getLabelItems = function (mapppingArray) {\n        var items = _super.prototype.getLabelItems.call(this, mapppingArray);\n        var yScale = this.geometry.getYScale();\n        return map(items, function (item) {\n            if (item) {\n                var percent = null;\n                if (yScale) {\n                    percent = yScale.scale(get(item.data, yScale.field));\n                }\n                return __assign(__assign({}, item), { percent: percent });\n            }\n            return item;\n        });\n    };\n    /**\n     * @override\n     * 获取文本的对齐方式\n     * @param point\n     */\n    PolarLabel.prototype.getLabelAlign = function (point) {\n        var coordinate = this.getCoordinate();\n        var align;\n        if (point.labelEmit) {\n            align = point.angle <= Math.PI / 2 && point.angle >= -Math.PI / 2 ? 'left' : 'right';\n        }\n        else if (!coordinate.isTransposed) {\n            align = 'center';\n        }\n        else {\n            var center = coordinate.getCenter();\n            var offset = this.getDefaultOffset(point.offset);\n            if (Math.abs(point.x - center.x) < 1) {\n                align = 'center';\n            }\n            else if (point.angle > Math.PI || point.angle <= 0) {\n                align = offset > 0 ? 'left' : 'right';\n            }\n            else {\n                align = offset > 0 ? 'right' : 'left';\n            }\n        }\n        return align;\n    };\n    /**\n     * @override\n     * 获取 label 的位置\n     * @param labelCfg\n     * @param mappingData\n     * @param index\n     */\n    PolarLabel.prototype.getLabelPoint = function (labelCfg, mappingData, index) {\n        var factor = 1;\n        var arcPoint;\n        var content = labelCfg.content[index];\n        if (this.isToMiddle(mappingData)) {\n            arcPoint = this.getMiddlePoint(mappingData.points);\n        }\n        else {\n            if (labelCfg.content.length === 1 && index === 0) {\n                index = 1;\n            }\n            else if (index === 0) {\n                factor = -1;\n            }\n            arcPoint = this.getArcPoint(mappingData, index);\n        }\n        var offset = this.getDefaultOffset(labelCfg.offset) * factor;\n        var middleAngle = this.getPointAngle(arcPoint);\n        var isLabelEmit = labelCfg.labelEmit;\n        var labelPositionCfg = this.getCirclePoint(middleAngle, offset, arcPoint, isLabelEmit);\n        if (labelPositionCfg.r === 0) {\n            // 如果文本位置位于圆心，则不展示\n            labelPositionCfg.content = '';\n        }\n        else {\n            labelPositionCfg.content = content;\n            labelPositionCfg.angle = middleAngle;\n            labelPositionCfg.color = mappingData.color;\n        }\n        labelPositionCfg.rotate = labelCfg.autoRotate\n            ? this.getLabelRotate(middleAngle, offset, isLabelEmit)\n            : labelCfg.rotate;\n        labelPositionCfg.start = {\n            x: arcPoint.x,\n            y: arcPoint.y,\n        };\n        return labelPositionCfg;\n    };\n    /**\n     * 获取圆弧的位置\n     */\n    PolarLabel.prototype.getArcPoint = function (mappingData, index) {\n        if (index === void 0) { index = 0; }\n        if (!isArray(mappingData.x) && !isArray(mappingData.y)) {\n            return {\n                x: mappingData.x,\n                y: mappingData.y,\n            };\n        }\n        return {\n            x: isArray(mappingData.x) ? mappingData.x[index] : mappingData.x,\n            y: isArray(mappingData.y) ? mappingData.y[index] : mappingData.y,\n        };\n    };\n    /**\n     * 计算坐标线点在极坐标系下角度\n     * @param point\n     */\n    PolarLabel.prototype.getPointAngle = function (point) {\n        return getAngleByPoint(this.getCoordinate(), point);\n    };\n    /**\n     * 获取坐标点与圆心形成的圆的位置信息\n     * @param angle\n     * @param offset\n     * @param point\n     * @param isLabelEmit\n     */\n    PolarLabel.prototype.getCirclePoint = function (angle, offset, point, isLabelEmit) {\n        var coordinate = this.getCoordinate();\n        var center = coordinate.getCenter();\n        var r = getDistanceToCenter(coordinate, point);\n        if (r === 0) {\n            return __assign(__assign({}, center), { r: r });\n        }\n        var labelAngle = angle;\n        if (coordinate.isTransposed && r > offset && !isLabelEmit) {\n            var appendAngle = Math.asin(offset / (2 * r));\n            labelAngle = angle + appendAngle * 2;\n        }\n        else {\n            r = r + offset;\n        }\n        return {\n            x: center.x + r * Math.cos(labelAngle),\n            y: center.y + r * Math.sin(labelAngle),\n            r: r,\n        };\n    };\n    /**\n     * 获取 label 的旋转角度\n     * @param angle\n     * @param offset\n     * @param isLabelEmit\n     */\n    PolarLabel.prototype.getLabelRotate = function (angle, offset, isLabelEmit) {\n        var rotate = angle + HALF_PI;\n        if (isLabelEmit) {\n            rotate -= HALF_PI;\n        }\n        if (rotate) {\n            if (rotate > HALF_PI) {\n                rotate = rotate - Math.PI;\n            }\n            else if (rotate < -HALF_PI) {\n                rotate = rotate + Math.PI;\n            }\n        }\n        return rotate;\n    };\n    // 获取中心的位置\n    PolarLabel.prototype.getMiddlePoint = function (points) {\n        var coordinate = this.getCoordinate();\n        var count = points.length;\n        var middlePoint = {\n            x: 0,\n            y: 0,\n        };\n        each(points, function (point) {\n            middlePoint.x += point.x;\n            middlePoint.y += point.y;\n        });\n        middlePoint.x /= count;\n        middlePoint.y /= count;\n        middlePoint = coordinate.convert(middlePoint);\n        return middlePoint;\n    };\n    // 是否居中\n    PolarLabel.prototype.isToMiddle = function (mappingData) {\n        return mappingData.x.length > 2;\n    };\n    return PolarLabel;\n}(GeometryLabel));\nexport default PolarLabel;\n//# sourceMappingURL=polar.js.map","import { __assign, __extends } from \"tslib\";\nimport { get, isArray } from '@antv/util';\nimport { getAngleByPoint } from '../../../util/coordinate';\nimport { polarToCartesian } from '../../../util/graphics';\nimport PolarLabel from '../polar';\n/**\n * 饼图 label\n */\nvar PieLabel = /** @class */ (function (_super) {\n    __extends(PieLabel, _super);\n    function PieLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.defaultLayout = 'distribute';\n        return _this;\n    }\n    PieLabel.prototype.getDefaultLabelCfg = function () {\n        return get(this.geometry.theme, 'pieLabels', {});\n    };\n    PieLabel.prototype.getDefaultOffset = function (offset) {\n        return offset || 0;\n    };\n    PieLabel.prototype.getLabelRotate = function (angle, offset, isLabelLimit) {\n        var rotate;\n        if (offset < 0) {\n            rotate = angle;\n            if (rotate > Math.PI / 2) {\n                rotate = rotate - Math.PI;\n            }\n            if (rotate < -Math.PI / 2) {\n                rotate = rotate + Math.PI;\n            }\n        }\n        return rotate;\n    };\n    PieLabel.prototype.getLabelAlign = function (point) {\n        var coordinate = this.getCoordinate();\n        var center = coordinate.getCenter();\n        var align;\n        if (point.angle <= Math.PI / 2 && point.x >= center.x) {\n            align = 'left';\n        }\n        else {\n            align = 'right';\n        }\n        var offset = this.getDefaultOffset(point.offset);\n        if (offset <= 0) {\n            if (align === 'right') {\n                align = 'left';\n            }\n            else {\n                align = 'right';\n            }\n        }\n        return align;\n    };\n    PieLabel.prototype.getArcPoint = function (point) {\n        return point;\n    };\n    PieLabel.prototype.getPointAngle = function (point) {\n        var coordinate = this.getCoordinate();\n        var startPoint = {\n            x: isArray(point.x) ? point.x[0] : point.x,\n            y: point.y[0],\n        };\n        var endPoint = {\n            x: isArray(point.x) ? point.x[1] : point.x,\n            y: point.y[1],\n        };\n        var angle;\n        var startAngle = getAngleByPoint(coordinate, startPoint);\n        if (point.points && point.points[0].y === point.points[1].y) {\n            angle = startAngle;\n        }\n        else {\n            var endAngle = getAngleByPoint(coordinate, endPoint);\n            if (startAngle >= endAngle) {\n                // 100% pie slice\n                endAngle = endAngle + Math.PI * 2;\n            }\n            angle = startAngle + (endAngle - startAngle) / 2;\n        }\n        return angle;\n    };\n    PieLabel.prototype.getCirclePoint = function (angle, offset, p) {\n        var coordinate = this.getCoordinate();\n        var center = coordinate.getCenter();\n        var r = coordinate.getRadius() + offset;\n        return __assign(__assign({}, polarToCartesian(center.x, center.y, r, angle)), { angle: angle,\n            r: r });\n    };\n    return PieLabel;\n}(PolarLabel));\nexport default PieLabel;\n//# sourceMappingURL=index.js.map","/**\n * 碰撞检测算法\n */\nexport function antiCollision(items, labelHeight, plotRange) {\n    var labels = items.filter(function (item) { return !item.invisible; });\n    // sorted by y, mutable\n    labels.sort(function (a, b) { return a.y - b.y; });\n    // adjust y position of labels to avoid overlapping\n    var overlapping = true;\n    var startY = plotRange.minY;\n    var endY = plotRange.maxY;\n    var totalHeight = Math.abs(startY - endY);\n    var i;\n    var maxY = 0;\n    var minY = Number.MIN_VALUE;\n    var boxes = labels.map(function (label) {\n        if (label.y > maxY) {\n            maxY = label.y;\n        }\n        if (label.y < minY) {\n            minY = label.y;\n        }\n        return {\n            content: label.content,\n            size: labelHeight,\n            targets: [label.y - startY],\n            pos: null,\n        };\n    });\n    if (maxY - startY > totalHeight) {\n        totalHeight = maxY - startY;\n    }\n    while (overlapping) {\n        /* eslint no-loop-func: 0 */\n        boxes.forEach(function (box) {\n            var target = (Math.min.apply(minY, box.targets) + Math.max.apply(minY, box.targets)) / 2;\n            box.pos = Math.min(Math.max(minY, target - box.size / 2), totalHeight - box.size);\n        });\n        // detect overlapping and join boxes\n        overlapping = false;\n        i = boxes.length;\n        while (i--) {\n            if (i > 0) {\n                var previousBox = boxes[i - 1];\n                var box = boxes[i];\n                if (previousBox.pos + previousBox.size > box.pos) {\n                    // overlapping\n                    previousBox.size += box.size;\n                    previousBox.targets = previousBox.targets.concat(box.targets);\n                    // overflow, shift up\n                    if (previousBox.pos + previousBox.size > totalHeight) {\n                        previousBox.pos = totalHeight - previousBox.size;\n                    }\n                    boxes.splice(i, 1); // removing box\n                    overlapping = true;\n                }\n            }\n        }\n    }\n    i = 0;\n    // step 4: normalize y and adjust x\n    boxes.forEach(function (b) {\n        var posInCompositeBox = startY + labelHeight / 2; // middle of the label\n        b.targets.forEach(function () {\n            labels[i].y = b.pos + posInCompositeBox;\n            posInCompositeBox += labelHeight;\n            i++;\n        });\n    });\n}\n//# sourceMappingURL=util.js.map","import { each } from '@antv/util';\nvar MAX_TIMES = 100;\n/**\n * @ignore\n * Greedy 贪婪算法\n */\nvar Greedy = /** @class */ (function () {\n    function Greedy(cfg) {\n        if (cfg === void 0) { cfg = {}; }\n        this.bitmap = {};\n        var _a = cfg.xGap, xGap = _a === void 0 ? 1 : _a, _b = cfg.yGap, yGap = _b === void 0 ? 8 : _b;\n        this.xGap = xGap;\n        this.yGap = yGap;\n    }\n    Greedy.prototype.hasGap = function (bbox) {\n        var hasGap = true;\n        var bitmap = this.bitmap;\n        var minX = Math.round(bbox.minX);\n        var maxX = Math.round(bbox.maxX);\n        var minY = Math.round(bbox.minY);\n        var maxY = Math.round(bbox.maxY);\n        for (var i = minX; i <= maxX; i += 1) {\n            if (!bitmap[i]) {\n                bitmap[i] = {};\n                continue;\n            }\n            if (i === minX || i === maxX) {\n                for (var j = minY; j <= maxY; j++) {\n                    if (bitmap[i][j]) {\n                        hasGap = false;\n                        break;\n                    }\n                }\n            }\n            else {\n                if (bitmap[i][minY] || bitmap[i][maxY]) {\n                    hasGap = false;\n                    break;\n                }\n            }\n        }\n        return hasGap;\n    };\n    Greedy.prototype.fillGap = function (bbox) {\n        var bitmap = this.bitmap;\n        var minX = Math.round(bbox.minX);\n        var maxX = Math.round(bbox.maxX);\n        var minY = Math.round(bbox.minY);\n        var maxY = Math.round(bbox.maxY);\n        // filling grid\n        for (var i = minX; i <= maxX; i += 1) {\n            if (!bitmap[i]) {\n                bitmap[i] = {};\n            }\n        }\n        for (var i = minX; i <= maxX; i += this.xGap) {\n            for (var j = minY; j <= maxY; j += this.yGap) {\n                bitmap[i][j] = true;\n            }\n            bitmap[i][maxY] = true;\n        }\n        // filling y edges\n        if (this.yGap !== 1) {\n            for (var i = minY; i <= maxY; i += 1) {\n                bitmap[minX][i] = true;\n                bitmap[maxX][i] = true;\n            }\n        }\n        // filling x edges\n        if (this.xGap !== 1) {\n            for (var i = minX; i <= maxX; i += 1) {\n                bitmap[i][minY] = true;\n                bitmap[i][maxY] = true;\n            }\n        }\n    };\n    Greedy.prototype.destroy = function () {\n        this.bitmap = {};\n    };\n    return Greedy;\n}());\nfunction spiralFill(label, greedy, maxTimes) {\n    if (maxTimes === void 0) { maxTimes = MAX_TIMES; }\n    var dt = -1;\n    var _a = label.attr(), x = _a.x, y = _a.y;\n    var bbox = label.getCanvasBBox();\n    var maxDelta = Math.sqrt(bbox.width * bbox.width + bbox.height * bbox.height);\n    var dxdy;\n    var t = -dt;\n    var dx = 0;\n    var dy = 0;\n    var f = function (param) {\n        var nt = param * 0.1;\n        return [nt * Math.cos(nt), nt * Math.sin(nt)];\n    };\n    if (greedy.hasGap(bbox)) {\n        greedy.fillGap(bbox);\n        return true;\n    }\n    var canFill = false;\n    var times = 0;\n    var accessedCache = {};\n    while (Math.min(Math.abs(dx), Math.abs(dy)) < maxDelta && times < maxTimes) {\n        dxdy = f((t += dt));\n        dx = ~~dxdy[0];\n        dy = ~~dxdy[1];\n        if ((!dx && !dy) || accessedCache[dx + \"-\" + dy]) {\n            continue;\n        }\n        label.attr({ x: x + dx, y: y + dy });\n        if (dx + dy < 0) {\n            label.attr('textAlign', 'right');\n        }\n        times++;\n        if (greedy.hasGap(label.getCanvasBBox())) {\n            greedy.fillGap(label.getCanvasBBox());\n            canFill = true;\n            accessedCache[dx + \"-\" + dy] = true;\n            break;\n        }\n    }\n    return canFill;\n}\n/*\n *  根据如下规则尝试放置label\n *                5\n *        ------------------\n *        |    1   |   0   |\n *    8   —————————4————————   7\n *        |    2   |   3   |\n *        ——————————————————\n *                 6\n */\nfunction adjustLabelPosition(label, x, y, index) {\n    var _a = label.getCanvasBBox(), width = _a.width, height = _a.height;\n    var attrs = {\n        x: x,\n        y: y,\n        textAlign: 'center',\n    };\n    switch (index) {\n        case 0:\n            attrs.y -= height + 1;\n            attrs.x += 1;\n            attrs.textAlign = 'left';\n            break;\n        case 1:\n            attrs.y -= height + 1;\n            attrs.x -= 1;\n            attrs.textAlign = 'right';\n            break;\n        case 2:\n            attrs.y += height + 1;\n            attrs.x -= 1;\n            attrs.textAlign = 'right';\n            break;\n        case 3:\n            attrs.y += height + 1;\n            attrs.x += 1;\n            attrs.textAlign = 'left';\n            break;\n        case 5:\n            attrs.y -= height * 2 + 2;\n            break;\n        case 6:\n            attrs.y += height * 2 + 2;\n            break;\n        case 7:\n            attrs.x += width + 1;\n            attrs.textAlign = 'left';\n            break;\n        case 8:\n            attrs.x -= width + 1;\n            attrs.textAlign = 'right';\n            break;\n        default:\n            break;\n    }\n    label.attr(attrs);\n    return label.getCanvasBBox();\n}\n/**\n * @ignore\n * label 防遮挡布局：在不改变 label 位置的情况下对相互重叠的 label 进行调整。\n * 不同于 'overlap' 类型的布局，该布局不会对 label 的位置进行偏移调整。\n * @param labels 参与布局调整的 label 数组集合\n */\nexport function fixedOverlap(items, labels, shapes, region) {\n    var greedy = new Greedy();\n    each(labels, function (label) {\n        var labelShape = label.find(function (shape) { return shape.get('type') === 'text'; });\n        if (!spiralFill(labelShape, greedy)) {\n            label.remove(true);\n        }\n    });\n    greedy.destroy();\n}\n/**\n * @ignore\n * label 防遮挡布局：为了防止 label 之间相互覆盖同时保证尽可能多 的 label 展示，通过尝试将 label 向**四周偏移**来剔除放不下的 label\n * @param labels 参与布局调整的 label 数组集合\n */\nexport function overlap(items, labels, shapes, region) {\n    var greedy = new Greedy();\n    each(labels, function (label) {\n        var labelShape = label.find(function (shape) { return shape.get('type') === 'text'; });\n        var _a = labelShape.attr(), x = _a.x, y = _a.y;\n        var canFill = false;\n        for (var i = 0; i <= 8; i++) {\n            var bbox = adjustLabelPosition(labelShape, x, y, i);\n            if (greedy.hasGap(bbox)) {\n                greedy.fillGap(bbox);\n                canFill = true;\n                break;\n            }\n        }\n        if (!canFill) {\n            label.remove(true);\n        }\n    });\n    greedy.destroy();\n}\n//# sourceMappingURL=overlap.js.map","import { __spreadArrays } from \"tslib\";\nimport { vec2 } from '@antv/matrix-util';\nvar dot = vec2.dot;\n/**\n * @private\n * 1. 获取投影轴\n */\nfunction getAxes(points /** 多边形的关键点 */) {\n    // 目前先处理 平行矩形 的场景, 其他多边形不处理\n    if (points.length > 4) {\n        return [];\n    }\n    // 获取向量\n    var vector = function (start, end) {\n        return [end.x - start.x, end.y - start.y];\n    };\n    // 由于 矩形的平行原理，所以只有 2 条投影轴: A -> B, B -> C\n    var AB = vector(points[0], points[1]);\n    var BC = vector(points[1], points[2]);\n    return [AB, BC];\n}\n/**\n * @private\n * 绕指定点顺时针旋转后的点坐标\n * 默认绕原点旋转\n */\nfunction rotateAtPoint(point, deg, origin) {\n    if (deg === void 0) { deg = 0; }\n    if (origin === void 0) { origin = { x: 0, y: 0 }; }\n    var x = point.x, y = point.y;\n    return {\n        x: (x - origin.x) * Math.cos(-deg) + (y - origin.y) * Math.sin(-deg) + origin.x,\n        y: (origin.x - x) * Math.sin(-deg) + (y - origin.y) * Math.cos(-deg) + origin.y,\n    };\n}\n/**\n * @private\n * 转化为顶点坐标数组\n *\n * @param {Object} box\n */\nfunction getRectPoints(box) {\n    var points = [\n        { x: box.x, y: box.y },\n        { x: box.x + box.width, y: box.y },\n        { x: box.x + box.width, y: box.y + box.height },\n        { x: box.x, y: box.y + box.height },\n    ];\n    var rotation = box.rotation;\n    if (rotation) {\n        return [\n            rotateAtPoint(points[0], rotation, points[0]),\n            rotateAtPoint(points[1], rotation, points[0]),\n            rotateAtPoint(points[2], rotation, points[0]),\n            rotateAtPoint(points[3], rotation, points[0]),\n        ];\n    }\n    return points;\n}\n/**\n * @private\n * 2. 获取多边形在投影轴上的投影\n *\n * 向量的点积的其中一个几何含义是：一个向量在平行于另一个向量方向上的投影的数值乘积。\n * 由于投影轴是单位向量（长度为1），投影的长度为 x1 * x2 + y1 * y2\n */\nfunction getProjection(points /** 多边形的关键点 */, axis) {\n    // 目前先处理矩形的场景\n    if (points.length > 4) {\n        return { min: 0, max: 0 };\n    }\n    var scalars = [];\n    points.forEach(function (point) {\n        scalars.push(dot([point.x, point.y], axis));\n    });\n    return { min: Math.min.apply(Math, scalars), max: Math.max.apply(Math, scalars) };\n}\nfunction isProjectionOverlap(projection1, projection2) {\n    return projection1.max > projection2.min && projection1.min < projection2.max;\n}\n/**\n * 快速判断两个无旋转矩形是否遮挡\n */\nexport function isIntersectRect(box1, box2, margin) {\n    if (margin === void 0) { margin = 0; }\n    return !(box2.x > box1.x + box1.width + margin ||\n        box2.x + box2.width < box1.x - margin ||\n        box2.y > box1.y + box1.height + margin ||\n        box2.y + box2.height < box1.y - margin);\n}\n/**\n * detect whether two shape is intersected, useful when shape is been rotated\n * 判断两个矩形是否重叠（相交和包含, 是否旋转）\n *\n * - 原理: 分离轴定律\n */\nexport function isIntersect(box1, box2) {\n    // 如果两个矩形没有旋转，使用快速判断\n    if (!box1.rotation && !box2.rotation) {\n        return isIntersectRect(box1, box2);\n    }\n    // 分别获取 4 个关键点\n    var rect1Points = getRectPoints(box1);\n    var rect2Points = getRectPoints(box2);\n    // 获取所有投影轴\n    var axes = __spreadArrays(getAxes(rect1Points), getAxes(rect2Points));\n    for (var i = 0; i < axes.length; i++) {\n        var axis = axes[i];\n        var projection1 = getProjection(rect1Points, axis);\n        var projection2 = getProjection(rect2Points, axis);\n        // 判断投影轴上的投影是否存在重叠，若检测到存在间隙则立刻退出判断，消除不必要的运算。\n        if (!isProjectionOverlap(projection1, projection2))\n            return false;\n    }\n    return true;\n}\n//# sourceMappingURL=collision-detect.js.map","import { BBox } from '../../../../util/bbox';\nimport { findLabelTextShape } from '../../util';\nfunction shouldInShapeSingle(geometry, label, shape) {\n    var coordinate = geometry.coordinate;\n    var textShape = findLabelTextShape(label);\n    var textBBox = BBox.fromObject(textShape.getCanvasBBox());\n    var shapeBBox = BBox.fromObject(shape.getBBox());\n    return coordinate.isTransposed ? shapeBBox.height >= textBBox.height : shapeBBox.width >= textBBox.width;\n}\nfunction shouldInShape(geometry, labels, shapes) {\n    var isStack = !!geometry.getAdjust('stack');\n    return (isStack ||\n        labels.every(function (label, index) {\n            var shape = shapes[index];\n            return shouldInShapeSingle(geometry, label, shape);\n        }));\n}\nfunction moveInShape(geometry, label, shape) {\n    var coordinate = geometry.coordinate;\n    var shapeBBox = BBox.fromObject(shape.getBBox());\n    var textShape = findLabelTextShape(label);\n    if (coordinate.isTransposed) {\n        // 水平方向：条形图系列\n        textShape.attr({\n            x: shapeBBox.minX + shapeBBox.width / 2,\n            textAlign: 'center',\n        });\n    }\n    else {\n        // 垂直方向：柱形图系列\n        textShape.attr({\n            y: shapeBBox.minY + shapeBBox.height / 2,\n            textBaseline: 'middle',\n        });\n    }\n}\n/**\n * 适用于 interval geometry 的数据标签位置自动调整布局方法\n * @param items\n * @param labels\n * @param shapes\n */\nexport function intervalAdjustPosition(items, labels, shapes) {\n    var _a;\n    if (shapes.length === 0) {\n        return;\n    }\n    var element = (_a = shapes[0]) === null || _a === void 0 ? void 0 : _a.get('element');\n    var geometry = element === null || element === void 0 ? void 0 : element.geometry;\n    if (!geometry) {\n        return;\n    }\n    var inShape = shouldInShape(geometry, labels, shapes);\n    if (inShape) {\n        shapes.forEach(function (shape, index) {\n            var label = labels[index];\n            moveInShape(geometry, label, shape);\n        });\n    }\n}\n//# sourceMappingURL=adjust-position.js.map","import { groupBy, keys, map } from '@antv/util';\nimport { findLabelTextShape } from '../../util';\n/**\n * 对同一组(相同 xField )的 Label 进行排序：第一个、最后一个、其他...\n * @param geometry\n * @param labels\n */\nfunction sortLabels(geometry, labels) {\n    var yField = geometry.getXYFields()[1];\n    var result = [];\n    var sortedLabels = labels.sort(function (left, right) { return left.get('data')[yField] - left.get('data')[yField]; });\n    if (sortedLabels.length > 0) {\n        result.push(sortedLabels.shift());\n    }\n    if (sortedLabels.length > 0) {\n        result.push(sortedLabels.pop());\n    }\n    result.push.apply(result, sortedLabels);\n    return result;\n}\nfunction hasSome(dones, current, compare) {\n    return dones.some(function (done) { return compare(done, current); });\n}\n/**\n * 计算两个矩形之间的堆叠区域面积\n */\nfunction getOverlapArea(a, b, margin) {\n    if (margin === void 0) { margin = 0; }\n    var xOverlap = Math.max(0, Math.min(a.x + a.width + margin, b.x + b.width + margin) - Math.max(a.x - margin, b.x - margin));\n    var yOverlap = Math.max(0, Math.min(a.y + a.height + margin, b.y + b.height + margin) - Math.max(a.y - margin, b.y - margin));\n    return xOverlap * yOverlap;\n}\n/**\n * 判断新添加的 Label 是否和已存在的发生重叠\n * @param dones\n * @param current\n */\nfunction checkShapeOverlap(dones, current) {\n    return hasSome(dones, current, function (left, right) {\n        var leftText = findLabelTextShape(left);\n        var rightText = findLabelTextShape(right);\n        return getOverlapArea(leftText.getCanvasBBox(), rightText.getCanvasBBox(), 2) > 0;\n    });\n}\n/**\n * 适用于 point geometry 的数据标签位置自动调整布局方法\n * @param items\n * @param labels\n * @param shapes\n * @param region\n * @param cfg\n */\nexport function pointAdjustPosition(items, labels, shapes, region, cfg) {\n    var _a, _b;\n    if (shapes.length === 0) {\n        return;\n    }\n    var element = (_a = shapes[0]) === null || _a === void 0 ? void 0 : _a.get('element');\n    var geometry = element === null || element === void 0 ? void 0 : element.geometry;\n    if (!geometry) {\n        return;\n    }\n    var _c = geometry.getXYFields(), xField = _c[0], yField = _c[1];\n    var groupedLabels = groupBy(labels, function (label) { return label.get('data')[xField]; });\n    var dones = [];\n    var offset = (cfg && cfg.offset) || ((_b = items[0]) === null || _b === void 0 ? void 0 : _b.offset) || 12;\n    map(keys(groupedLabels).reverse(), function (xValue) {\n        var sortedCollections = sortLabels(geometry, groupedLabels[xValue]);\n        while (sortedCollections.length) {\n            var current = sortedCollections.shift();\n            var textShape = findLabelTextShape(current);\n            if (hasSome(dones, current, function (left, right) {\n                return left.get('data')[xField] === right.get('data')[xField] &&\n                    left.get('data')[yField] === right.get('data')[yField];\n            })) {\n                // 重复位置，直接隐藏\n                textShape.set('visible', false);\n                continue;\n            }\n            var upFail = checkShapeOverlap(dones, current);\n            var downFail = false;\n            if (upFail) {\n                textShape.attr('y', textShape.attr('y') + 2 * offset);\n                downFail = checkShapeOverlap(dones, current);\n            }\n            if (downFail) {\n                textShape.set('visible', false);\n                continue;\n            }\n            dones.push(current);\n        }\n    });\n}\n//# sourceMappingURL=adjust-position.js.map","import { ext } from '@antv/matrix-util';\n/**\n * @ignore\n * 对图形元素进行矩阵变换，同时返回变换前的图形矩阵\n * @param shape 进行矩阵变换的图形\n * @param vector 矩阵变换的中心点\n * @param direct 矩阵变换的类型\n */\nexport function transformShape(shape, vector, direct) {\n    var scaledMatrix;\n    var x = vector[0], y = vector[1];\n    shape.applyToMatrix([x, y, 1]);\n    if (direct === 'x') {\n        shape.setMatrix(ext.transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 0.01, 1],\n            ['t', x, y],\n        ]));\n        scaledMatrix = ext.transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 100, 1],\n            ['t', x, y],\n        ]);\n    }\n    else if (direct === 'y') {\n        shape.setMatrix(ext.transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 1, 0.01],\n            ['t', x, y],\n        ]));\n        scaledMatrix = ext.transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 1, 100],\n            ['t', x, y],\n        ]);\n    }\n    else if (direct === 'xy') {\n        shape.setMatrix(ext.transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 0.01, 0.01],\n            ['t', x, y],\n        ]));\n        scaledMatrix = ext.transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 100, 100],\n            ['t', x, y],\n        ]);\n    }\n    return scaledMatrix;\n}\n/**\n * 对图形元素进行剪切动画\n * @param element 进行动画的图形元素\n * @param animateCfg 动画配置\n * @param coordinate 当前坐标系\n * @param yMinPoint y 轴的最小值对应的图形坐标点\n * @param type 剪切动画的类型\n */\nexport function doScaleAnimate(element, animateCfg, coordinate, yMinPoint, type) {\n    var start = coordinate.start, end = coordinate.end;\n    var width = coordinate.getWidth();\n    var height = coordinate.getHeight();\n    var x;\n    var y;\n    if (type === 'y') {\n        x = start.x + width / 2;\n        y = yMinPoint.y < start.y ? yMinPoint.y : start.y;\n    }\n    else if (type === 'x') {\n        x = yMinPoint.x > start.x ? yMinPoint.x : start.x;\n        y = start.y + height / 2;\n    }\n    else if (type === 'xy') {\n        if (coordinate.isPolar) {\n            x = coordinate.getCenter().x;\n            y = coordinate.getCenter().y;\n        }\n        else {\n            x = (start.x + end.x) / 2;\n            y = (start.y + end.y) / 2;\n        }\n    }\n    var endMatrix = transformShape(element, [x, y], type);\n    element.animate({\n        matrix: endMatrix,\n    }, animateCfg);\n}\n//# sourceMappingURL=util.js.map","import { __assign } from \"tslib\";\nimport getArcParams from '@antv/g-canvas/lib/util/arc-params';\nimport { isNumberEqual, isEqual } from '@antv/util';\nimport { getArcPath, getSectorPath } from '../../util/graphics';\nfunction getAngle(startPoint, arcPath) {\n    var _a;\n    var _b = getArcParams(startPoint, arcPath), startAngle = _b.startAngle, endAngle = _b.endAngle;\n    if (!isNumberEqual(startAngle, -Math.PI * 0.5) && startAngle < -Math.PI * 0.5) {\n        startAngle += Math.PI * 2;\n    }\n    if (!isNumberEqual(endAngle, -Math.PI * 0.5) && endAngle < -Math.PI * 0.5) {\n        endAngle += Math.PI * 2;\n    }\n    if (arcPath[5] === 0) {\n        // 逆时针，需要将 startAngle 和 endAngle 转置，因为 G2 极坐标系为顺时针方向\n        _a = [endAngle, startAngle], startAngle = _a[0], endAngle = _a[1];\n    }\n    if (isNumberEqual(startAngle, Math.PI * 1.5)) {\n        startAngle = Math.PI * -0.5;\n    }\n    if (isNumberEqual(endAngle, Math.PI * -0.5)) {\n        endAngle = Math.PI * 1.5;\n    }\n    return {\n        startAngle: startAngle,\n        endAngle: endAngle,\n    };\n}\nfunction getArcStartPoint(path) {\n    var startPoint;\n    if (path[0] === 'M' || path[0] === 'L') {\n        startPoint = [path[1], path[2]];\n    }\n    else if (path[0] === 'a' || path[0] === 'A') {\n        startPoint = [path[path.length - 2], path[path.length - 1]];\n    }\n    return startPoint;\n}\n/**\n * path 存在以下情况\n * 1. 饼图不为整圆的 path，命令为 M, L, A, L, Z\n * 2. 饼图为整圆的 path，命令为 M, M, A, A, M, Z\n * 3. 环图不为整圆的 path，命令为 M, A, L, A, L, Z\n * 4. 环图为整圆的 path，命令为 M, A, A, M, A, A, M, Z\n * 5. radial-line, 不为整圆时的 path, 命令为 M, A, A, Z\n * 6. radial-line, 为整圆时的 path，命令为 M, A, A, A, A, Z\n * @param path theta 坐标系下圆弧的 path 命令\n */\nfunction getArcInfo(path) {\n    var _a;\n    var startAngle;\n    var endAngle;\n    var arcPaths = path.filter(function (command) {\n        return command[0] === 'A' || command[0] === 'a';\n    });\n    var firstArcPathCommand = arcPaths[0];\n    var lastArcPathCommand = arcPaths.length > 1 ? arcPaths[1] : arcPaths[0];\n    var firstIndex = path.indexOf(firstArcPathCommand);\n    var lastIndex = path.indexOf(lastArcPathCommand);\n    var firstStartPoint = getArcStartPoint(path[firstIndex - 1]);\n    var lastStartPoint = getArcStartPoint(path[lastIndex - 1]);\n    var _b = getAngle(firstStartPoint, firstArcPathCommand), firstStartAngle = _b.startAngle, firstEndAngle = _b.endAngle;\n    var _c = getAngle(lastStartPoint, lastArcPathCommand), lastStartAngle = _c.startAngle, lastEndAngle = _c.endAngle;\n    if (isNumberEqual(firstStartAngle, lastStartAngle) && isNumberEqual(firstEndAngle, lastEndAngle)) {\n        startAngle = firstStartAngle;\n        endAngle = firstEndAngle;\n    }\n    else {\n        startAngle = Math.min(firstStartAngle, lastStartAngle);\n        endAngle = Math.max(firstEndAngle, lastEndAngle);\n    }\n    var radius = firstArcPathCommand[1];\n    var innerRadius = arcPaths[arcPaths.length - 1][1];\n    if (radius < innerRadius) {\n        _a = [innerRadius, radius], radius = _a[0], innerRadius = _a[1];\n    }\n    else if (radius === innerRadius) {\n        innerRadius = 0;\n    }\n    return {\n        startAngle: startAngle,\n        endAngle: endAngle,\n        radius: radius,\n        innerRadius: innerRadius,\n    };\n}\n/**\n * @ignore\n * 饼图更新动画\n * @param shape 文本图形\n * @param animateCfg\n * @param cfg\n */\nexport function sectorPathUpdate(shape, animateCfg, cfg) {\n    var toAttrs = cfg.toAttrs, coordinate = cfg.coordinate;\n    // @ts-ignore\n    var path = toAttrs.path;\n    var pathCommands = path.map(function (command) { return command[0]; });\n    var _a = getArcInfo(path), curStartAngle = _a.startAngle, curEndAngle = _a.endAngle, radius = _a.radius, innerRadius = _a.innerRadius;\n    var _b = getArcInfo(shape.attr('path')), preStartAngle = _b.startAngle, preEndAngle = _b.endAngle;\n    var center = coordinate.getCenter();\n    var diffStartAngle = curStartAngle - preStartAngle;\n    var diffEndAngle = curEndAngle - preEndAngle;\n    shape.animate(function (ratio) {\n        var onFrameStartAngle = preStartAngle + ratio * diffStartAngle;\n        var onFrameEndAngle = preEndAngle + ratio * diffEndAngle;\n        return __assign(__assign({}, toAttrs), { path: \n            // hack, 兼容 /examples/bar/basic/demo/radial-line.ts 动画\n            isEqual(pathCommands, ['M', 'A', 'A', 'Z'])\n                ? getArcPath(center.x, center.y, radius, onFrameStartAngle, onFrameEndAngle)\n                : getSectorPath(center.x, center.y, radius, onFrameStartAngle, onFrameEndAngle, innerRadius) });\n    }, __assign(__assign({}, animateCfg), { callback: function () {\n            // 将 path 保持原始态，否则会影响 setState() 的动画\n            shape.attr('path', path);\n        } }));\n}\n//# sourceMappingURL=sector-path-update.js.map","import { __assign } from \"tslib\";\nimport { ext } from '@antv/matrix-util';\nimport { each } from '@antv/util';\nfunction doShapeZoom(shape, animateCfg, type) {\n    if (shape.isGroup()) {\n        each(shape.getChildren(), function (child) {\n            doShapeZoom(child, animateCfg, type);\n        });\n    }\n    else {\n        var bbox = shape.getBBox();\n        var x = (bbox.minX + bbox.maxX) / 2;\n        var y = (bbox.minY + bbox.maxY) / 2;\n        shape.applyToMatrix([x, y, 1]);\n        if (type === 'zoomIn') {\n            // 放大\n            var matrix = ext.transform(shape.getMatrix(), [\n                ['t', -x, -y],\n                ['s', 0.01, 0.01],\n                ['t', x, y],\n            ]);\n            shape.setMatrix(matrix);\n            shape.animate({\n                matrix: ext.transform(shape.getMatrix(), [\n                    ['t', -x, -y],\n                    ['s', 100, 100],\n                    ['t', x, y],\n                ]),\n            }, animateCfg);\n        }\n        else {\n            shape.animate({\n                matrix: ext.transform(shape.getMatrix(), [\n                    ['t', -x, -y],\n                    ['s', 0.01, 0.01],\n                    ['t', x, y],\n                ]),\n            }, __assign(__assign({}, animateCfg), { callback: function () {\n                    shape.remove(true);\n                } }));\n        }\n    }\n}\n/**\n * @ignore\n * 单个 shape 动画\n * shape 以自身中心点逐渐放大的进入动画\n * @param shape 参与动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function zoomIn(shape, animateCfg, cfg) {\n    doShapeZoom(shape, animateCfg, 'zoomIn');\n}\n/**\n * @ignore\n * 单个 shape 动画\n * 消失动画，shape 以自身为中心点的逐渐缩小\n * @param shape 参与动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function zoomOut(shape, animateCfg, cfg) {\n    doShapeZoom(shape, animateCfg, 'zoomOut');\n}\n//# sourceMappingURL=zoom.js.map","import { DIRECTION } from '../constant';\n/**\n * @ignore\n * 获取 facet title 的最佳默认配置，防止\n */\nexport function getFactTitleConfig(direction) {\n    if ([DIRECTION.TOP, DIRECTION.BOTTOM].includes(direction)) {\n        return {\n            offsetX: 0,\n            offsetY: direction === DIRECTION.TOP ? -8 : 8,\n            style: {\n                textAlign: 'center',\n                textBaseline: direction === DIRECTION.TOP ? 'bottom' : 'top',\n            },\n        };\n    }\n    if ([DIRECTION.LEFT, DIRECTION.RIGHT].includes(direction)) {\n        return {\n            offsetX: direction === DIRECTION.LEFT ? -8 : 8,\n            offsetY: 0,\n            style: {\n                textAlign: direction === DIRECTION.LEFT ? 'right' : 'left',\n                textBaseline: 'middle',\n                rotate: Math.PI / 2,\n            },\n        };\n    }\n    return {};\n}\n/**\n * @ignore\n * 根据角度，获取 ○ 上的点\n * @param center\n * @param r\n * @param angle\n */\nexport function getAnglePoint(center, r, angle) {\n    return {\n        x: center.x + r * Math.cos(angle),\n        y: center.y + r * Math.sin(angle),\n    };\n}\n//# sourceMappingURL=facet.js.map","import { __extends } from \"tslib\";\nimport { deepMix, each, filter, get } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getAnglePoint, getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 镜像分面\n */\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Circle.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'circle',\n            showTitle: true,\n            title: _super.prototype.getDefaultTitleCfg.call(this),\n        });\n    };\n    Circle.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    /**\n     * 根据总数和当前索引，计算分面的 region\n     * @param count\n     * @param index\n     */\n    Circle.prototype.getRegion = function (count, index) {\n        var r = 1 / 2; // 画布半径\n        // 画布圆心\n        var center = { x: 0.5, y: 0.5 };\n        // 每隔分面间隔的弧度\n        var avgAngle = (Math.PI * 2) / count;\n        // 当前分面所在的弧度\n        var angle = (-1 * Math.PI) / 2 + avgAngle * index;\n        // TODO 没看懂\n        var facetR = r / (1 + 1 / Math.sin(avgAngle / 2));\n        // 分面的中心点\n        var middle = getAnglePoint(center, r - facetR, angle);\n        var startAngle = (Math.PI * 5) / 4; // 右上角\n        var endAngle = (Math.PI * 1) / 4; // 左下角\n        return {\n            start: getAnglePoint(middle, facetR, startAngle),\n            end: getAnglePoint(middle, facetR, endAngle),\n        };\n    };\n    Circle.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    Circle.prototype.beforeEachView = function (view, facet) { };\n    Circle.prototype.generateFacets = function (data) {\n        var _this = this;\n        var _a = this.cfg, fields = _a.fields, type = _a.type;\n        var field = fields[0];\n        if (!field) {\n            throw new Error('No `fields` specified!');\n        }\n        var values = this.getFieldValues(data, field);\n        var count = values.length;\n        var rst = [];\n        values.forEach(function (value, index) {\n            var conditions = [{ field: field, value: value, values: values }];\n            var facetData = filter(data, _this.getFacetDataFilter(conditions));\n            var facet = {\n                type: type,\n                data: facetData,\n                region: _this.getRegion(count, index),\n                columnValue: value,\n                columnField: field,\n                columnIndex: index,\n                columnValuesLength: count,\n                rowValue: null,\n                rowField: null,\n                rowIndex: 0,\n                rowValuesLength: 1,\n            };\n            rst.push(facet);\n        });\n        return rst;\n    };\n    Circle.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 不做任何处理\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Circle.prototype.getYAxisOption = function (y, axes, option, facet) {\n        // 不做任何处理\n        return option;\n    };\n    /**\n     * facet title\n     */\n    Circle.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet) {\n            var columnValue = facet.columnValue, view = facet.view;\n            var formatter = get(_this.cfg.title, 'formatter');\n            var config = deepMix({\n                position: ['50%', '0%'],\n                content: formatter ? formatter(columnValue) : columnValue,\n            }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\n            view.annotation().text(config);\n        });\n    };\n    return Circle;\n}(Facet));\nexport default Circle;\n//# sourceMappingURL=circle.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, each, filter, get } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 镜像分面\n */\nvar List = /** @class */ (function (_super) {\n    __extends(List, _super);\n    function List() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    List.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'list',\n            cols: null,\n            showTitle: true,\n            title: _super.prototype.getDefaultTitleCfg.call(this),\n        });\n    };\n    List.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    List.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    List.prototype.beforeEachView = function (view, facet) { };\n    List.prototype.generateFacets = function (data) {\n        var _this = this;\n        var fields = this.cfg.fields;\n        var cols = this.cfg.cols;\n        var columnField = fields[0];\n        if (!columnField) {\n            throw new Error('No `fields` specified!');\n        }\n        var colValues = this.getFieldValues(data, columnField);\n        var count = colValues.length;\n        cols = cols || count; // 每行有几列数据\n        // 总共有几行\n        var rows = this.getPageCount(count, cols);\n        var rst = [];\n        colValues.forEach(function (val, index) {\n            // 当前 index 在那个行列\n            var _a = _this.getRowCol(index, cols), row = _a.row, col = _a.col;\n            var conditions = [{ field: columnField, value: val, values: colValues }];\n            var facetData = filter(data, _this.getFacetDataFilter(conditions));\n            var facet = {\n                type: _this.cfg.type,\n                data: facetData,\n                region: _this.getRegion(rows, cols, col, row),\n                columnValue: val,\n                rowValue: val,\n                columnField: columnField,\n                rowField: null,\n                columnIndex: col,\n                rowIndex: row,\n                columnValuesLength: cols,\n                rowValuesLength: rows,\n                total: count,\n            };\n            rst.push(facet);\n        });\n        return rst;\n    };\n    /**\n     * 设置 x 坐标轴的文本、title 是否显示\n     * @param x\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    List.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 当是最后一行或者下面没有 view 时文本不显示\n        if (facet.rowIndex !== facet.rowValuesLength - 1 &&\n            facet.columnValuesLength * facet.rowIndex + facet.columnIndex + 1 + facet.columnValuesLength <= facet.total) {\n            return __assign(__assign({}, option), { label: null, title: null });\n        }\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    List.prototype.getYAxisOption = function (y, axes, option, facet) {\n        if (facet.columnIndex !== 0) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        return option;\n    };\n    /**\n     * facet title\n     */\n    List.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet) {\n            var columnValue = facet.columnValue, view = facet.view;\n            var formatter = get(_this.cfg.title, 'formatter');\n            var config = deepMix({\n                position: ['50%', '0%'],\n                content: formatter ? formatter(columnValue) : columnValue,\n            }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\n            view.annotation().text(config);\n        });\n    };\n    /**\n     * 计算分页数\n     * @param total\n     * @param pageSize\n     */\n    List.prototype.getPageCount = function (total, pageSize) {\n        return Math.floor((total + pageSize - 1) / pageSize);\n    };\n    /**\n     * 索引值在哪一页\n     * @param index\n     * @param pageSize\n     */\n    List.prototype.getRowCol = function (index, pageSize) {\n        var row = Math.floor(index / pageSize);\n        var col = index % pageSize;\n        return { row: row, col: col };\n    };\n    return List;\n}(Facet));\nexport default List;\n//# sourceMappingURL=list.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, each, get } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 镜像分面\n */\nvar Matrix = /** @class */ (function (_super) {\n    __extends(Matrix, _super);\n    function Matrix() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Matrix.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'matrix',\n            showTitle: false,\n            columnTitle: __assign({}, _super.prototype.getDefaultTitleCfg.call(this)),\n            rowTitle: __assign({}, _super.prototype.getDefaultTitleCfg.call(this)),\n        });\n    };\n    Matrix.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    Matrix.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    Matrix.prototype.beforeEachView = function (view, facet) { };\n    Matrix.prototype.generateFacets = function (data) {\n        var _a = this.cfg, fields = _a.fields, type = _a.type;\n        // 矩阵中行列相等，等于指定的字段个数\n        var rowValuesLength = fields.length;\n        var columnValuesLength = rowValuesLength;\n        var rst = [];\n        for (var i = 0; i < columnValuesLength; i++) {\n            var columnField = fields[i];\n            for (var j = 0; j < rowValuesLength; j++) {\n                var rowField = fields[j];\n                var facet = {\n                    type: type,\n                    data: data,\n                    region: this.getRegion(rowValuesLength, columnValuesLength, i, j),\n                    columnValue: columnField,\n                    rowValue: rowField,\n                    columnField: columnField,\n                    rowField: rowField,\n                    columnIndex: i,\n                    rowIndex: j,\n                    columnValuesLength: columnValuesLength,\n                    rowValuesLength: rowValuesLength,\n                };\n                rst.push(facet);\n            }\n        }\n        return rst;\n    };\n    /**\n     * 设置 x 坐标轴的文本、title 是否显示\n     * @param x\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Matrix.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 最后一行显示\n        if (facet.rowIndex !== facet.rowValuesLength - 1) {\n            return __assign(__assign({}, option), { label: null, title: null });\n        }\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Matrix.prototype.getYAxisOption = function (y, axes, option, facet) {\n        // 第一列显示\n        if (facet.columnIndex !== 0) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        return option;\n    };\n    /**\n     * facet title\n     */\n    Matrix.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet, facetIndex) {\n            var columnIndex = facet.columnIndex, rowIndex = facet.rowIndex, columnValuesLength = facet.columnValuesLength, rowValuesLength = facet.rowValuesLength, columnValue = facet.columnValue, rowValue = facet.rowValue, view = facet.view;\n            // top\n            if (rowIndex === 0) {\n                var formatter = get(_this.cfg.columnTitle, 'formatter');\n                var config = deepMix({\n                    position: ['50%', '0%'],\n                    content: formatter ? formatter(columnValue) : columnValue,\n                }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.columnTitle);\n                view.annotation().text(config);\n            }\n            // right\n            if (columnIndex === columnValuesLength - 1) {\n                var formatter = get(_this.cfg.rowTitle, 'formatter');\n                var config = deepMix({\n                    position: ['100%', '50%'],\n                    content: formatter ? formatter(rowValue) : rowValue,\n                }, getFactTitleConfig(DIRECTION.RIGHT), _this.cfg.rowTitle);\n                view.annotation().text(config);\n            }\n        });\n    };\n    return Matrix;\n}(Facet));\nexport default Matrix;\n//# sourceMappingURL=matrix.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, each, filter, get } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 镜像分面\n */\nvar Mirror = /** @class */ (function (_super) {\n    __extends(Mirror, _super);\n    function Mirror() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Mirror.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'mirror',\n            showTitle: true,\n            title: _super.prototype.getDefaultTitleCfg.call(this),\n            transpose: false,\n        });\n    };\n    Mirror.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    Mirror.prototype.beforeEachView = function (view, facet) {\n        // 做一下坐标系转化\n        if (this.cfg.transpose) {\n            if (facet.columnIndex % 2 === 0) {\n                view.coordinate().transpose().reflect('x');\n            }\n            else {\n                view.coordinate().transpose();\n            }\n        }\n        else {\n            if (facet.rowIndex % 2 !== 0) {\n                view.coordinate().reflect('y');\n            }\n        }\n    };\n    Mirror.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    Mirror.prototype.generateFacets = function (data) {\n        var _this = this;\n        var f = this.cfg.fields[0];\n        var rst = [];\n        var columnValuesLength = 1;\n        var rowValuesLength = 1;\n        var columnValues = [''];\n        var rowValues = [''];\n        var columnField;\n        var rowField;\n        if (this.cfg.transpose) {\n            columnField = f;\n            columnValues = this.getFieldValues(data, columnField).slice(0, 2); // 镜像最多两个\n            columnValuesLength = columnValues.length;\n        }\n        else {\n            rowField = f;\n            rowValues = this.getFieldValues(data, rowField).slice(0, 2); // 镜像最多两个\n            rowValuesLength = rowValues.length;\n        }\n        // 获取每个维度对应的数据配置片段\n        columnValues.forEach(function (xVal, xIndex) {\n            rowValues.forEach(function (yVal, yIndex) {\n                var conditions = [\n                    { field: columnField, value: xVal, values: columnValues },\n                    { field: rowField, value: yVal, values: rowValues },\n                ];\n                var facetData = filter(data, _this.getFacetDataFilter(conditions));\n                var facet = {\n                    type: _this.cfg.type,\n                    data: facetData,\n                    region: _this.getRegion(rowValuesLength, columnValuesLength, xIndex, yIndex),\n                    columnValue: xVal,\n                    rowValue: yVal,\n                    columnField: columnField,\n                    rowField: rowField,\n                    columnIndex: xIndex,\n                    rowIndex: yIndex,\n                    columnValuesLength: columnValuesLength,\n                    rowValuesLength: rowValuesLength,\n                };\n                rst.push(facet);\n            });\n        });\n        return rst;\n    };\n    /**\n     * 设置 x 坐标轴的文本、title 是否显示\n     * @param x\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Mirror.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 非最后一行\n        // 当是最后一行或者下面没有 view 时文本不显示\n        if (facet.columnIndex === 1 || facet.rowIndex === 1) {\n            return __assign(__assign({}, option), { label: null, title: null });\n        }\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Mirror.prototype.getYAxisOption = function (y, axes, option, facet) {\n        // do nothing\n        return option;\n    };\n    Mirror.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet, facetIndex) {\n            var columnValue = facet.columnValue, rowValue = facet.rowValue, view = facet.view;\n            var formatter = get(_this.cfg.title, 'formatter');\n            if (_this.cfg.transpose) {\n                var config = deepMix({\n                    position: ['50%', '0%'],\n                    content: formatter ? formatter(columnValue) : columnValue,\n                }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\n                view.annotation().text(config);\n            }\n            else {\n                var config = deepMix({\n                    position: ['100%', '50%'],\n                    content: formatter ? formatter(rowValue) : rowValue,\n                }, getFactTitleConfig(DIRECTION.RIGHT), _this.cfg.title);\n                view.annotation().text(config);\n            }\n        });\n    };\n    return Mirror;\n}(Facet));\nexport default Mirror;\n//# sourceMappingURL=mirror.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, each, filter, get } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * 矩阵分面\n */\nvar Rect = /** @class */ (function (_super) {\n    __extends(Rect, _super);\n    function Rect() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Rect.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    Rect.prototype.beforeEachView = function (view, facet) {\n        // do nothing\n    };\n    Rect.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'rect',\n            columnTitle: __assign({}, _super.prototype.getDefaultTitleCfg.call(this)),\n            rowTitle: __assign({}, _super.prototype.getDefaultTitleCfg.call(this)),\n        });\n    };\n    Rect.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    /**\n     * 生成矩阵分面的分面数据\n     * @param data\n     */\n    Rect.prototype.generateFacets = function (data) {\n        var _this = this;\n        var _a = this.cfg.fields, columnField = _a[0], rowField = _a[1];\n        var rst = [];\n        var columnValuesLength = 1;\n        var rowValuesLength = 1;\n        var columnValues = [''];\n        var rowValues = [''];\n        if (columnField) {\n            columnValues = this.getFieldValues(data, columnField);\n            columnValuesLength = columnValues.length;\n        }\n        if (rowField) {\n            rowValues = this.getFieldValues(data, rowField);\n            rowValuesLength = rowValues.length;\n        }\n        // 获取每个维度对应的数据配置片段\n        columnValues.forEach(function (xVal, xIndex) {\n            rowValues.forEach(function (yVal, yIndex) {\n                var conditions = [\n                    { field: columnField, value: xVal, values: columnValues },\n                    { field: rowField, value: yVal, values: rowValues },\n                ];\n                var facetData = filter(data, _this.getFacetDataFilter(conditions));\n                var facet = {\n                    type: _this.cfg.type,\n                    data: facetData,\n                    region: _this.getRegion(rowValuesLength, columnValuesLength, xIndex, yIndex),\n                    columnValue: xVal,\n                    rowValue: yVal,\n                    columnField: columnField,\n                    rowField: rowField,\n                    columnIndex: xIndex,\n                    rowIndex: yIndex,\n                    columnValuesLength: columnValuesLength,\n                    rowValuesLength: rowValuesLength,\n                };\n                rst.push(facet);\n            });\n        });\n        return rst;\n    };\n    Rect.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet, facetIndex) {\n            var columnIndex = facet.columnIndex, rowIndex = facet.rowIndex, columnValuesLength = facet.columnValuesLength, columnValue = facet.columnValue, rowValue = facet.rowValue, view = facet.view;\n            // top\n            if (rowIndex === 0) {\n                var formatter = get(_this.cfg.columnTitle, 'formatter');\n                var config = deepMix({\n                    position: ['50%', '0%'],\n                    content: formatter ? formatter(columnValue) : columnValue,\n                }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.columnTitle);\n                view.annotation().text(config);\n            }\n            // right\n            if (columnIndex === columnValuesLength - 1) {\n                var formatter = get(_this.cfg.rowTitle, 'formatter');\n                var config = deepMix({\n                    position: ['100%', '50%'],\n                    content: formatter ? formatter(rowValue) : rowValue,\n                }, getFactTitleConfig(DIRECTION.RIGHT), _this.cfg.rowTitle);\n                view.annotation().text(config);\n            }\n        });\n    };\n    /**\n     * 设置 x 坐标轴的文本、title 是否显示\n     * @param x\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Rect.prototype.getXAxisOption = function (x, axes, option, facet) {\n        // 非最后一行\n        if (facet.rowIndex !== facet.rowValuesLength - 1) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        else if (facet.columnIndex !== Math.floor((facet.columnValuesLength - 1) / 2)) {\n            // 不是中间列\n            return __assign(__assign({}, option), { title: null });\n        }\n        return option;\n    };\n    /**\n     * 设置 y 坐标轴的文本、title 是否显示\n     * @param y\n     * @param axes\n     * @param option\n     * @param facet\n     */\n    Rect.prototype.getYAxisOption = function (y, axes, option, facet) {\n        if (facet.columnIndex !== 0) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        else if (facet.rowIndex !== Math.floor((facet.rowValuesLength - 1) / 2)) {\n            return __assign(__assign({}, option), { title: null });\n        }\n        return option;\n    };\n    return Rect;\n}(Facet));\nexport default Rect;\n//# sourceMappingURL=rect.js.map","import { __assign, __extends } from \"tslib\";\n/**\n * Create By Bruce Too\n * On 2020-02-10\n */\nimport { assign, deepMix, each, get } from '@antv/util';\nimport { DIRECTION, VIEW_LIFE_CIRCLE } from '../constant';\nimport { getFactTitleConfig } from '../util/facet';\nimport { Facet } from './facet';\n/**\n * @ignore\n * Tree Facet\n */\nvar Tree = /** @class */ (function (_super) {\n    __extends(Tree, _super);\n    function Tree() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.afterChartRender = function () {\n            if (_this.facets && _this.cfg.line) {\n                _this.container.clear();\n                _this.drawLines(_this.facets);\n            }\n        };\n        return _this;\n    }\n    Tree.prototype.afterEachView = function (view, facet) {\n        this.processAxis(view, facet);\n    };\n    Tree.prototype.beforeEachView = function (view, facet) { };\n    Tree.prototype.init = function () {\n        _super.prototype.init.call(this);\n        this.view.on(VIEW_LIFE_CIRCLE.AFTER_RENDER, this.afterChartRender);\n    };\n    Tree.prototype.getDefaultCfg = function () {\n        return deepMix({}, _super.prototype.getDefaultCfg.call(this), {\n            type: 'tree',\n            line: {\n                style: {\n                    lineWidth: 1,\n                    stroke: '#ddd',\n                },\n                smooth: false,\n            },\n            showTitle: true,\n            title: _super.prototype.getDefaultTitleCfg.call(this),\n        });\n    };\n    Tree.prototype.generateFacets = function (data) {\n        var fields = this.cfg.fields;\n        if (!fields.length) {\n            throw new Error('Please specify for the fields for rootFacet!');\n        }\n        var rst = [];\n        var rootFacet = {\n            type: this.cfg.type,\n            data: data,\n            region: null,\n            rowValuesLength: this.getRows(),\n            columnValuesLength: 1,\n            rowIndex: 0,\n            columnIndex: 0,\n            rowField: '',\n            columnField: '',\n            rowValue: '',\n            columnValue: '',\n        };\n        rst.push(rootFacet);\n        rootFacet.children = this.getChildFacets(data, 1, rst);\n        this.setRegion(rst);\n        return rst;\n    };\n    Tree.prototype.setRegion = function (facets) {\n        var _this = this;\n        this.forceColIndex(facets);\n        facets.forEach(function (facet) {\n            // @ts-ignore 允许调整\n            facet.region = _this.getRegion(facet.rowValuesLength, facet.columnValuesLength, facet.columnIndex, facet.rowIndex);\n        });\n    };\n    Tree.prototype.getRegion = function (rows, cols, xIndex, yIndex) {\n        var xWidth = 1 / cols; // x轴方向的每个分面的偏移\n        var yWidth = 1 / rows; // y轴方向的每个分面的偏移\n        var start = {\n            x: xWidth * xIndex,\n            y: yWidth * yIndex,\n        };\n        var end = {\n            x: start.x + xWidth,\n            y: start.y + (yWidth * 2) / 3,\n        };\n        return {\n            start: start,\n            end: end,\n        };\n    };\n    Tree.prototype.forceColIndex = function (facets) {\n        var _this = this;\n        var leafs = [];\n        var index = 0;\n        facets.forEach(function (facet) {\n            if (_this.isLeaf(facet)) {\n                leafs.push(facet);\n                // @ts-ignore 允许调整\n                facet.columnIndex = index;\n                index++;\n            }\n        });\n        leafs.forEach(function (facet) {\n            // @ts-ignore\n            facet.columnValuesLength = leafs.length;\n        });\n        var maxLevel = this.cfg.fields.length;\n        for (var i = maxLevel - 1; i >= 0; i--) {\n            var levelFacets = this.getFacetsByLevel(facets, i);\n            // var yIndex = maxLevel - i;\n            for (var _i = 0, levelFacets_1 = levelFacets; _i < levelFacets_1.length; _i++) {\n                var facet = levelFacets_1[_i];\n                if (!this.isLeaf(facet)) {\n                    facet.originColIndex = facet.columnIndex;\n                    // @ts-ignore\n                    facet.columnIndex = this.getRegionIndex(facet.children);\n                    // @ts-ignore\n                    facet.columnValuesLength = leafs.length;\n                }\n            }\n        }\n    };\n    // get facet use level\n    Tree.prototype.getFacetsByLevel = function (facets, level) {\n        var rst = [];\n        facets.forEach(function (facet) {\n            if (facet.rowIndex === level) {\n                rst.push(facet);\n            }\n        });\n        return rst;\n    };\n    // if the facet has children , make it's column index in the middle of it's children\n    Tree.prototype.getRegionIndex = function (children) {\n        var first = children[0];\n        var last = children[children.length - 1];\n        return (last.columnIndex - first.columnIndex) / 2 + first.columnIndex;\n    };\n    // is  a leaf without children\n    Tree.prototype.isLeaf = function (facet) {\n        return !facet.children || !facet.children.length;\n    };\n    Tree.prototype.getRows = function () {\n        return this.cfg.fields.length + 1;\n    };\n    // get child\n    Tree.prototype.getChildFacets = function (data, level, arr) {\n        var _this = this;\n        // [ 'grade', 'class' ]\n        var fields = this.cfg.fields;\n        var length = fields.length;\n        if (length < level) {\n            return;\n        }\n        var rst = [];\n        // get fist level except root node\n        var field = fields[level - 1];\n        // get field value\n        var values = this.getFieldValues(data, field);\n        values.forEach(function (value, index) {\n            var conditions = [{ field: field, value: value, values: values }];\n            var subData = data.filter(_this.getFacetDataFilter(conditions));\n            if (subData.length) {\n                var facet = {\n                    type: _this.cfg.type,\n                    data: subData,\n                    region: null,\n                    columnValue: value,\n                    rowValue: '',\n                    columnField: field,\n                    rowField: '',\n                    columnIndex: index,\n                    rowValuesLength: _this.getRows(),\n                    columnValuesLength: 1,\n                    rowIndex: level,\n                    children: _this.getChildFacets(subData, level + 1, arr),\n                };\n                rst.push(facet);\n                arr.push(facet);\n            }\n        });\n        return rst;\n    };\n    Tree.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (this.cfg.showTitle) {\n            this.renderTitle();\n        }\n    };\n    Tree.prototype.renderTitle = function () {\n        var _this = this;\n        each(this.facets, function (facet) {\n            var columnValue = facet.columnValue, view = facet.view;\n            var formatter = get(_this.cfg.title, 'formatter');\n            var config = deepMix({\n                position: ['50%', '0%'],\n                content: formatter ? formatter(columnValue) : columnValue,\n            }, getFactTitleConfig(DIRECTION.TOP), _this.cfg.title);\n            view.annotation().text(config);\n        });\n    };\n    Tree.prototype.drawLines = function (facets) {\n        var _this = this;\n        facets.forEach(function (facet) {\n            if (!_this.isLeaf(facet)) {\n                var children = facet.children;\n                _this.addFacetLines(facet, children);\n            }\n        });\n    };\n    // add lines with it's children\n    Tree.prototype.addFacetLines = function (facet, children) {\n        var _this = this;\n        var view = facet.view;\n        var region = view.coordinateBBox;\n        // top, right, bottom, left\n        var start = {\n            x: region.x + region.width / 2,\n            y: region.y + region.height,\n        };\n        children.forEach(function (subFacet) {\n            var subRegion = subFacet.view.coordinateBBox;\n            var end = {\n                x: subRegion.bl.x + (subRegion.tr.x - subRegion.bl.x) / 2,\n                y: subRegion.tr.y,\n            };\n            var middle1 = {\n                x: start.x,\n                y: start.y + (end.y - start.y) / 2,\n            };\n            var middle2 = {\n                x: end.x,\n                y: middle1.y,\n            };\n            _this.drawLine([start, middle1, middle2, end]);\n        });\n    };\n    Tree.prototype.getPath = function (points) {\n        var path = [];\n        var smooth = this.cfg.line.smooth;\n        if (smooth) {\n            path.push(['M', points[0].x, points[0].y]);\n            path.push(['C', points[1].x, points[1].y, points[2].x, points[2].y, points[3].x, points[3].y]);\n        }\n        else {\n            points.forEach(function (point, index) {\n                if (index === 0) {\n                    path.push(['M', point.x, point.y]);\n                }\n                else {\n                    path.push(['L', point.x, point.y]);\n                }\n            });\n        }\n        return path;\n    };\n    // draw line width points\n    Tree.prototype.drawLine = function (points) {\n        var path = this.getPath(points);\n        var line = this.cfg.line.style;\n        this.container.addShape('path', {\n            attrs: assign({\n                // @ts-ignore\n                path: path,\n            }, line),\n        });\n    };\n    Tree.prototype.getXAxisOption = function (x, axes, option, facet) {\n        if (facet.rowIndex !== facet.rowValuesLength - 1) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        return option;\n    };\n    Tree.prototype.getYAxisOption = function (y, axes, option, facet) {\n        if (facet.originColIndex !== 0 && facet.columnIndex !== 0) {\n            return __assign(__assign({}, option), { title: null, label: null });\n        }\n        return option;\n    };\n    return Tree;\n}(Facet));\nexport default Tree;\n//# sourceMappingURL=tree.js.map","import { __spreadArrays } from \"tslib\";\nimport { reduce, isNumber } from '@antv/util';\n/**\n * 获得中位数\n * @param array\n */\nexport function getMedian(array) {\n    var arr = __spreadArrays(array);\n    // 先排序\n    arr.sort(function (a, b) {\n        return a - b;\n    });\n    var len = arr.length;\n    // median\n    // 0\n    if (len === 0) {\n        return 0;\n    }\n    // 奇数\n    if (len % 2 === 1) {\n        return arr[(len - 1) / 2];\n    }\n    // 偶数\n    return (arr[len / 2] + arr[len / 2 - 1]) / 2;\n}\n/**\n * 获得平均值\n * @param array\n */\nexport function getMean(array) {\n    var sum = reduce(array, function (r, num) {\n        return r += (isNaN(num) || !isNumber(num) ? 0 : num);\n    }, 0);\n    return array.length === 0 ? 0 : sum / array.length;\n}\n//# sourceMappingURL=stat.js.map","import { getMedian, getMean } from './stat';\n/**\n * parse the value position\n * @param val\n * @param scale\n */\nexport function getNormalizedValue(val, scale) {\n    var scaled;\n    switch (val) {\n        case 'start':\n            return 0;\n        case 'end':\n            return 1;\n        case 'median': {\n            scaled = scale.isCategory ? getMedian(scale.values.map(function (_, idx) { return idx; })) : getMedian(scale.values);\n            break;\n        }\n        case 'mean': {\n            scaled = scale.isCategory ? (scale.values.length - 1) / 2 : getMean(scale.values);\n            break;\n        }\n        case 'min':\n            scaled = scale.isCategory ? 0 : scale[val];\n            break;\n        case 'max':\n            scaled = scale.isCategory ? scale.values.length - 1 : scale[val];\n            break;\n        default:\n            scaled = val;\n            break;\n    }\n    return scale.scale(scaled);\n}\n//# sourceMappingURL=annotation.js.map","import { __assign, __extends, __rest } from \"tslib\";\nimport { contains, deepMix, each, get, isArray, isFunction, isNil, isString, keys, upperFirst, find, includes, } from '@antv/util';\nimport { Annotation as AnnotationComponent } from '../../dependents';\nimport { DEFAULT_ANIMATE_CFG } from '../../animate/';\nimport { COMPONENT_TYPE, DIRECTION, GEOMETRY_LIFE_CIRCLE, LAYER, VIEW_LIFE_CIRCLE } from '../../constant';\nimport { getAngleByPoint, getDistanceToCenter } from '../../util/coordinate';\nimport { omit } from '../../util/helper';\nimport { getNormalizedValue } from '../../util/annotation';\nimport { Controller } from './base';\n/** 需要在图形绘制完成后才渲染的辅助组件类型列表 */\nvar ANNOTATIONS_AFTER_RENDER = ['regionFilter', 'shape'];\n/**\n * Annotation controller, 主要作用:\n * 1. 创建 Annotation: line、text、arc ...\n * 2. 生命周期: init、layout、render、clear、destroy\n */\nvar Annotation = /** @class */ (function (_super) {\n    __extends(Annotation, _super);\n    function Annotation(view) {\n        var _this = _super.call(this, view) || this;\n        /* 组件更新的 cache，组件配置 object : 组件 */\n        _this.cache = new Map();\n        _this.foregroundContainer = _this.view.getLayer(LAYER.FORE).addGroup();\n        _this.backgroundContainer = _this.view.getLayer(LAYER.BG).addGroup();\n        _this.option = [];\n        return _this;\n    }\n    Object.defineProperty(Annotation.prototype, \"name\", {\n        get: function () {\n            return 'annotation';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Annotation.prototype.init = function () { };\n    /**\n     * 因为 annotation 需要依赖坐标系信息，所以 render 阶段为空方法，实际的创建逻辑都在 layout 中\n     */\n    Annotation.prototype.layout = function () {\n        this.update();\n    };\n    // 因为 Annotation 不参与布局，但是渲染的位置依赖于坐标系，所以可以将绘制阶段延迟到 layout() 进行\n    Annotation.prototype.render = function () { };\n    /**\n     * 更新\n     */\n    Annotation.prototype.update = function () {\n        var _this = this;\n        // 1. 先处理需要在图形渲染之后的辅助组件 需要在 Geometry 完成之后，拿到图形信息\n        this.onAfterRender(function () {\n            var updated = new Map();\n            // 先看是否有 regionFilter/shape 要更新\n            each(_this.option, function (option) {\n                if (includes(ANNOTATIONS_AFTER_RENDER, option.type)) {\n                    var co = _this.updateOrCreate(option);\n                    // 存储已经处理过的\n                    if (co) {\n                        updated.set(_this.getCacheKey(option), co);\n                    }\n                }\n            });\n            // 处理完成之后，更新 cache\n            // 处理完成之后，销毁删除的\n            _this.cache = _this.syncCache(updated);\n        });\n        // 2. 处理非 regionFilter\n        var updateCache = new Map();\n        each(this.option, function (option) {\n            if (!includes(ANNOTATIONS_AFTER_RENDER, option.type)) {\n                var co = _this.updateOrCreate(option);\n                // 存储已经处理过的\n                if (co) {\n                    updateCache.set(_this.getCacheKey(option), co);\n                }\n            }\n        });\n        this.cache = this.syncCache(updateCache);\n    };\n    /**\n     * 清空\n     * @param includeOption 是否清空 option 配置项\n     */\n    Annotation.prototype.clear = function (includeOption) {\n        if (includeOption === void 0) { includeOption = false; }\n        _super.prototype.clear.call(this);\n        this.cache.clear();\n        this.foregroundContainer.clear();\n        this.backgroundContainer.clear();\n        // clear all option\n        if (includeOption) {\n            this.option = [];\n        }\n    };\n    Annotation.prototype.destroy = function () {\n        this.clear(true);\n        this.foregroundContainer.remove(true);\n        this.backgroundContainer.remove(true);\n    };\n    /**\n     * 复写基类的方法\n     */\n    Annotation.prototype.getComponents = function () {\n        var co = [];\n        this.cache.forEach(function (value) {\n            co.push(value);\n        });\n        return co;\n    };\n    /**\n     * region filter 比较特殊的渲染时机\n     * @param doWhat\n     */\n    Annotation.prototype.onAfterRender = function (doWhat) {\n        if (this.view.getOptions().animate) {\n            this.view.geometries.forEach(function (g) {\n                // 如果 geometry 开启，则监听\n                if (g.animateOption) {\n                    g.once(GEOMETRY_LIFE_CIRCLE.AFTER_DRAW_ANIMATE, function () {\n                        doWhat();\n                    });\n                }\n            });\n        }\n        else {\n            this.view.getRootView().once(VIEW_LIFE_CIRCLE.AFTER_RENDER, function () {\n                doWhat();\n            });\n        }\n    };\n    Annotation.prototype.createAnnotation = function (option) {\n        var type = option.type;\n        var Ctor = AnnotationComponent[upperFirst(type)];\n        if (Ctor) {\n            var theme = this.getAnnotationTheme(type);\n            var cfg = this.getAnnotationCfg(type, option, theme);\n            var annotation = new Ctor(cfg);\n            return {\n                component: annotation,\n                layer: this.isTop(cfg) ? LAYER.FORE : LAYER.BG,\n                direction: DIRECTION.NONE,\n                type: COMPONENT_TYPE.ANNOTATION,\n                extra: option,\n            };\n        }\n    };\n    // APIs for creating annotation component\n    Annotation.prototype.annotation = function (option) {\n        this.option.push(option);\n    };\n    /**\n     * 创建 Arc\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.arc = function (option) {\n        this.annotation(__assign({ type: 'arc' }, option));\n        return this;\n    };\n    /**\n     * 创建 image\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.image = function (option) {\n        this.annotation(__assign({ type: 'image' }, option));\n        return this;\n    };\n    /**\n     * 创建 Line\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.line = function (option) {\n        this.annotation(__assign({ type: 'line' }, option));\n        return this;\n    };\n    /**\n     * 创建 Region\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.region = function (option) {\n        this.annotation(__assign({ type: 'region' }, option));\n        return this;\n    };\n    /**\n     * 创建 Text\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.text = function (option) {\n        this.annotation(__assign({ type: 'text' }, option));\n        return this;\n    };\n    /**\n     * 创建 DataMarker\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.dataMarker = function (option) {\n        this.annotation(__assign({ type: 'dataMarker' }, option));\n        return this;\n    };\n    /**\n     * 创建 DataRegion\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.dataRegion = function (option) {\n        this.annotation(__assign({ type: 'dataRegion' }, option));\n    };\n    /**\n     * 创建 RegionFilter\n     * @param option\n     * @returns AnnotationController\n     */\n    Annotation.prototype.regionFilter = function (option) {\n        this.annotation(__assign({ type: 'regionFilter' }, option));\n    };\n    /**\n     * 创建 ShapeAnnotation\n     * @param option\n     */\n    Annotation.prototype.shape = function (option) {\n        this.annotation(__assign({ type: 'shape' }, option));\n    };\n    /**\n     * 创建 HtmlAnnotation\n     * @param option\n     */\n    Annotation.prototype.html = function (option) {\n        this.annotation(__assign({ type: 'html' }, option));\n    };\n    // end API\n    /**\n     * parse the point position to [x, y]\n     * @param p Position\n     * @returns { x, y }\n     */\n    Annotation.prototype.parsePosition = function (p) {\n        var xScale = this.view.getXScale();\n        // 转成 object\n        var yScales = this.view.getScalesByDim('y');\n        var position = isFunction(p) ? p.call(null, xScale, yScales) : p;\n        var x = 0;\n        var y = 0;\n        // 入参是 [24, 24] 这类时\n        if (isArray(position)) {\n            var xPos = position[0], yPos = position[1];\n            // 如果数据格式是 ['50%', '50%'] 的格式\n            // fix: 原始数据中可能会包含 'xxx5%xxx' 这样的数据，需要判断下 https://github.com/antvis/f2/issues/590\n            // @ts-ignore\n            if (isString(xPos) && xPos.indexOf('%') !== -1 && !isNaN(xPos.slice(0, -1))) {\n                return this.parsePercentPosition(position);\n            }\n            x = getNormalizedValue(xPos, xScale);\n            y = getNormalizedValue(yPos, Object.values(yScales)[0]);\n        }\n        else if (!isNil(position)) {\n            // 入参是 object 结构，数据点\n            for (var _i = 0, _a = keys(position); _i < _a.length; _i++) {\n                var key = _a[_i];\n                var value = position[key];\n                if (key === xScale.field) {\n                    x = getNormalizedValue(value, xScale);\n                }\n                if (yScales[key]) {\n                    y = getNormalizedValue(value, yScales[key]);\n                }\n            }\n        }\n        return this.view.getCoordinate().convert({ x: x, y: y });\n    };\n    /**\n     * parse all the points between start and end\n     * @param start\n     * @param end\n     * @return Point[]\n     */\n    Annotation.prototype.getRegionPoints = function (start, end) {\n        var _this = this;\n        var xScale = this.view.getXScale();\n        var yScales = this.view.getScalesByDim('y');\n        var yScale = Object.values(yScales)[0];\n        var xField = xScale.field;\n        var viewData = this.view.getData();\n        var startXValue = isArray(start) ? start[0] : start[xField];\n        var endXValue = isArray(end) ? end[0] : end[xField];\n        var arr = [];\n        var startIndex;\n        each(viewData, function (item, idx) {\n            if (item[xField] === startXValue) {\n                startIndex = idx;\n            }\n            if (idx >= startIndex) {\n                var point = _this.parsePosition([item[xField], item[yScale.field]]);\n                if (point) {\n                    arr.push(point);\n                }\n            }\n            if (item[xField] === endXValue) {\n                return false;\n            }\n        });\n        return arr;\n    };\n    /**\n     * parse percent position\n     * @param position\n     */\n    Annotation.prototype.parsePercentPosition = function (position) {\n        var xPercent = parseFloat(position[0]) / 100;\n        var yPercent = parseFloat(position[1]) / 100;\n        var coordinate = this.view.getCoordinate();\n        var start = coordinate.start, end = coordinate.end;\n        var topLeft = {\n            x: Math.min(start.x, end.x),\n            y: Math.min(start.y, end.y),\n        };\n        var x = coordinate.getWidth() * xPercent + topLeft.x;\n        var y = coordinate.getHeight() * yPercent + topLeft.y;\n        return { x: x, y: y };\n    };\n    /**\n     * get coordinate bbox\n     */\n    Annotation.prototype.getCoordinateBBox = function () {\n        var coordinate = this.view.getCoordinate();\n        var start = coordinate.start, end = coordinate.end;\n        var width = coordinate.getWidth();\n        var height = coordinate.getHeight();\n        var topLeft = {\n            x: Math.min(start.x, end.x),\n            y: Math.min(start.y, end.y),\n        };\n        return {\n            x: topLeft.x,\n            y: topLeft.y,\n            minX: topLeft.x,\n            minY: topLeft.y,\n            maxX: topLeft.x + width,\n            maxY: topLeft.y + height,\n            width: width,\n            height: height,\n        };\n    };\n    /**\n     * get annotation component config by different type\n     * @param type\n     * @param option 用户的配置\n     * @param theme\n     */\n    Annotation.prototype.getAnnotationCfg = function (type, option, theme) {\n        var _this = this;\n        var coordinate = this.view.getCoordinate();\n        var canvas = this.view.getCanvas();\n        var o = {};\n        if (isNil(option)) {\n            return null;\n        }\n        if (type === 'arc') {\n            var _a = option, start = _a.start, end = _a.end;\n            var sp = this.parsePosition(start);\n            var ep = this.parsePosition(end);\n            var startAngle = getAngleByPoint(coordinate, sp);\n            var endAngle = getAngleByPoint(coordinate, ep);\n            if (startAngle > endAngle) {\n                endAngle = Math.PI * 2 + endAngle;\n            }\n            o = {\n                center: coordinate.getCenter(),\n                radius: getDistanceToCenter(coordinate, sp),\n                startAngle: startAngle,\n                endAngle: endAngle,\n            };\n        }\n        else if (type === 'image') {\n            var _b = option, start = _b.start, end = _b.end;\n            o = {\n                start: this.parsePosition(start),\n                end: this.parsePosition(end),\n                src: option.src,\n            };\n        }\n        else if (type === 'line') {\n            var _c = option, start = _c.start, end = _c.end;\n            o = {\n                start: this.parsePosition(start),\n                end: this.parsePosition(end),\n                text: get(option, 'text', null),\n            };\n        }\n        else if (type === 'region') {\n            var _d = option, start = _d.start, end = _d.end;\n            o = {\n                start: this.parsePosition(start),\n                end: this.parsePosition(end),\n            };\n        }\n        else if (type === 'text') {\n            var filteredData = this.view.getData();\n            var _e = option, position = _e.position, content = _e.content, rest = __rest(_e, [\"position\", \"content\"]);\n            var textContent = content;\n            if (isFunction(content)) {\n                textContent = content(filteredData);\n            }\n            o = __assign(__assign(__assign({}, this.parsePosition(position)), rest), { content: textContent });\n        }\n        else if (type === 'dataMarker') {\n            var _f = option, position = _f.position, point = _f.point, line = _f.line, text = _f.text, autoAdjust = _f.autoAdjust, direction = _f.direction;\n            o = __assign(__assign({}, this.parsePosition(position)), { coordinateBBox: this.getCoordinateBBox(), point: point,\n                line: line,\n                text: text,\n                autoAdjust: autoAdjust,\n                direction: direction });\n        }\n        else if (type === 'dataRegion') {\n            var _g = option, start = _g.start, end = _g.end, region = _g.region, text = _g.text, lineLength = _g.lineLength;\n            o = {\n                points: this.getRegionPoints(start, end),\n                region: region,\n                text: text,\n                lineLength: lineLength,\n            };\n        }\n        else if (type === 'regionFilter') {\n            var _h = option, start = _h.start, end = _h.end, apply_1 = _h.apply, color = _h.color;\n            var geometries = this.view.geometries;\n            var shapes_1 = [];\n            var addShapes_1 = function (item) {\n                if (!item) {\n                    return;\n                }\n                if (item.isGroup()) {\n                    item.getChildren().forEach(function (child) { return addShapes_1(child); });\n                }\n                else {\n                    shapes_1.push(item);\n                }\n            };\n            each(geometries, function (geom) {\n                if (apply_1) {\n                    if (contains(apply_1, geom.type)) {\n                        each(geom.elements, function (elem) {\n                            addShapes_1(elem.shape);\n                        });\n                    }\n                }\n                else {\n                    each(geom.elements, function (elem) {\n                        addShapes_1(elem.shape);\n                    });\n                }\n            });\n            o = {\n                color: color,\n                shapes: shapes_1,\n                start: this.parsePosition(start),\n                end: this.parsePosition(end),\n            };\n        }\n        else if (type === 'shape') {\n            var _j = option, render_1 = _j.render, restOptions = __rest(_j, [\"render\"]);\n            var wrappedRender = function (container) {\n                if (isFunction(option.render)) {\n                    return render_1(container, _this.view, { parsePosition: _this.parsePosition.bind(_this) });\n                }\n            };\n            o = __assign(__assign({}, restOptions), { render: wrappedRender });\n        }\n        else if (type === 'html') {\n            var _k = option, html_1 = _k.html, position = _k.position, restOptions = __rest(_k, [\"html\", \"position\"]);\n            var wrappedHtml = function (container) {\n                if (isFunction(html_1)) {\n                    return html_1(container, _this.view);\n                }\n                return html_1;\n            };\n            o = __assign(__assign(__assign({}, restOptions), this.parsePosition(position)), { \n                // html 组件需要指定 parent\n                parent: canvas.get('el').parentNode, html: wrappedHtml });\n        }\n        // 合并主题，用户配置优先级高于默认主题\n        var cfg = deepMix({}, theme, __assign(__assign({}, o), { top: option.top, style: option.style, offsetX: option.offsetX, offsetY: option.offsetY }));\n        if (type !== 'html') {\n            // html 类型不使用 G container\n            cfg.container = this.getComponentContainer(cfg);\n        }\n        cfg.animate = this.view.getOptions().animate && cfg.animate && get(option, 'animate', cfg.animate); // 如果 view 关闭动画，则不执行\n        cfg.animateOption = deepMix({}, DEFAULT_ANIMATE_CFG, cfg.animateOption, option.animateOption);\n        return cfg;\n    };\n    /**\n     * is annotation render on top\n     * @param option\n     * @return whethe on top\n     */\n    Annotation.prototype.isTop = function (option) {\n        return get(option, 'top', true);\n    };\n    /**\n     * get the container by option.top\n     * default is on top\n     * @param option\n     * @returns the container\n     */\n    Annotation.prototype.getComponentContainer = function (option) {\n        return this.isTop(option) ? this.foregroundContainer : this.backgroundContainer;\n    };\n    Annotation.prototype.getAnnotationTheme = function (type) {\n        return get(this.view.getTheme(), ['components', 'annotation', type], {});\n    };\n    /**\n     * 创建或者更新 annotation\n     * @param option\n     */\n    Annotation.prototype.updateOrCreate = function (option) {\n        // 拿到缓存的内容\n        var co = this.cache.get(this.getCacheKey(option));\n        // 存在则更新，不存在在创建\n        if (co) {\n            var type = option.type;\n            var theme = this.getAnnotationTheme(type);\n            var cfg = this.getAnnotationCfg(type, option, theme);\n            // 忽略掉一些配置\n            omit(cfg, ['container']);\n            co.component.update(cfg);\n            // 对于 regionFilter/shape，因为生命周期的原因，需要额外 render\n            if (includes(ANNOTATIONS_AFTER_RENDER, option.type)) {\n                co.component.render();\n            }\n        }\n        else {\n            // 不存在，创建\n            co = this.createAnnotation(option);\n            if (co) {\n                co.component.init();\n                // Note：regionFilter/shape 特殊处理，regionFilter/shape 需要取到 Geometry 中的 Shape，需要在 view render 之后处理\n                // 其他组件使用外层的统一 render 逻辑\n                if (includes(ANNOTATIONS_AFTER_RENDER, option.type)) {\n                    co.component.render();\n                }\n            }\n        }\n        return co;\n    };\n    /**\n     * 更新缓存，以及销毁组件\n     * @param updated 更新或者创建的组件\n     */\n    Annotation.prototype.syncCache = function (updated) {\n        var _this = this;\n        var newCache = new Map(this.cache); // clone 一份\n        // 将 update 更新到 cache\n        updated.forEach(function (co, key) {\n            newCache.set(key, co);\n        });\n        // 另外和 options 进行对比，删除\n        newCache.forEach(function (co, key) {\n            // option 中已经找不到，那么就是删除的\n            if (!find(_this.option, function (option) {\n                return key === _this.getCacheKey(option);\n            })) {\n                co.component.destroy();\n                newCache.delete(key);\n            }\n        });\n        return newCache;\n    };\n    /**\n     * 获得缓存组件的 key\n     * @param option\n     */\n    Annotation.prototype.getCacheKey = function (option) {\n        // 如果存在 id，则使用 id string，否则直接使用 option 引用作为 key\n        return option;\n        // 后续扩展 id 用\n        // const id = get(option, 'id');\n        // return id ? id : option;\n    };\n    return Annotation;\n}(Controller));\nexport default Annotation;\n//# sourceMappingURL=annotation.js.map","import { get, map } from '@antv/util';\n/**\n * @ignore\n * get the grid theme by type\n * @param theme\n * @param direction\n * @returns theme object\n */\nexport function getGridThemeCfg(theme, direction) {\n    return get(theme, ['components', 'axis', direction, 'grid'], {});\n}\n/**\n * @ignore\n * get axis grid items\n * @param coordinate\n * @param scale\n * @param dim\n * @return items\n */\nexport function getLineGridItems(coordinate, scale, dim, alignTick) {\n    var items = [];\n    var ticks = scale.getTicks();\n    if (coordinate.isPolar) {\n        // 补全 ticks\n        ticks.push({\n            value: 1,\n            text: '',\n            tickValue: '',\n        });\n    }\n    ticks.reduce(function (preTick, currentTick, currentIndex) {\n        var currentValue = currentTick.value;\n        if (alignTick) {\n            items.push({\n                points: [\n                    coordinate.convert(dim === 'y' ? { x: 0, y: currentValue } : { x: currentValue, y: 0 }),\n                    coordinate.convert(dim === 'y' ? { x: 1, y: currentValue } : { x: currentValue, y: 1 }),\n                ],\n            });\n        }\n        else {\n            if (currentIndex) {\n                var preValue = preTick.value;\n                var middleValue = (preValue + currentValue) / 2;\n                items.push({\n                    points: [\n                        coordinate.convert(dim === 'y' ? { x: 0, y: middleValue } : { x: middleValue, y: 0 }),\n                        coordinate.convert(dim === 'y' ? { x: 1, y: middleValue } : { x: middleValue, y: 1 }),\n                    ],\n                });\n            }\n        }\n        return currentTick;\n    }, ticks[0]);\n    return items;\n}\n/**\n * @ignore\n * get\n * @param coordinate\n * @param xScale\n * @param yScale\n * @param dim\n * @returns items\n */\nexport function getCircleGridItems(coordinate, xScale, yScale, alignTick, dim) {\n    var count = xScale.values.length;\n    var items = [];\n    var ticks = yScale.getTicks();\n    ticks.reduce(function (preTick, currentTick) {\n        var preValue = preTick ? preTick.value : currentTick.value; // 只有一项数据时取当前值\n        var currentValue = currentTick.value;\n        var middleValue = (preValue + currentValue) / 2;\n        if (dim === 'x') {\n            // 如果是 x 轴作为半径轴，那么只需要取圆弧收尾两个即可\n            items.push({\n                points: [\n                    coordinate.convert({\n                        x: alignTick ? currentValue : middleValue,\n                        y: 0,\n                    }),\n                    coordinate.convert({\n                        x: alignTick ? currentValue : middleValue,\n                        y: 1,\n                    }),\n                ],\n            });\n        }\n        else {\n            items.push({\n                points: map(Array(count + 1), function (__, idx) {\n                    return coordinate.convert({\n                        x: idx / count,\n                        y: alignTick ? currentValue : middleValue,\n                    });\n                }),\n            });\n        }\n        return currentTick;\n    }, ticks[0]);\n    return items;\n}\n/**\n * @ignore\n * show grid or not\n * @param axisTheme\n * @param axisOption\n */\nexport function showGrid(axisTheme, axisOption) {\n    var userGrid = get(axisOption, 'grid');\n    if (userGrid === null) {\n        return false;\n    }\n    var themeGrid = get(axisTheme, 'grid');\n    return !(userGrid === undefined && themeGrid === null);\n}\n//# sourceMappingURL=grid.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, each, get, isUndefined } from '@antv/util';\nimport { DIRECTION, COMPONENT_TYPE, LAYER } from '../../constant';\nimport { CircleAxis, CircleGrid, LineAxis, LineGrid } from '../../dependents';\nimport { DEFAULT_ANIMATE_CFG } from '../../animate/';\nimport { getAxisDirection, getAxisFactorByRegion, getAxisRegion, getAxisThemeCfg, getAxisTitleText, getCircleAxisCenterRadius, isVertical, } from '../../util/axis';\nimport { getAxisOption } from '../../util/axis';\nimport { getCircleGridItems, getGridThemeCfg, getLineGridItems, showGrid } from '../../util/grid';\nimport { omit } from '../../util/helper';\nimport { Controller } from './base';\n// update 组件的时候，忽略的数据更新\nvar OMIT_CFG = ['container'];\n// 坐标轴默认动画配置\nvar AXIS_DEFAULT_ANIMATE_CFG = __assign(__assign({}, DEFAULT_ANIMATE_CFG), { appear: null });\n/**\n * @ignore\n * G2 Axis controller, will:\n *  - create component\n *    - axis\n *    - grid\n *  - life circle\n */\nvar Axis = /** @class */ (function (_super) {\n    __extends(Axis, _super);\n    function Axis(view) {\n        var _this = _super.call(this, view) || this;\n        /** 使用 object 存储组件 */\n        _this.cache = new Map();\n        // 先创建 gridContainer，将 grid 放到 axis 底层\n        _this.gridContainer = _this.view.getLayer(LAYER.BG).addGroup();\n        _this.axisContainer = _this.view.getLayer(LAYER.BG).addGroup();\n        return _this;\n    }\n    Object.defineProperty(Axis.prototype, \"name\", {\n        get: function () {\n            return 'axis';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Axis.prototype.init = function () { };\n    Axis.prototype.render = function () {\n        this.update();\n    };\n    /**\n     * 更新组件布局，位置大小\n     */\n    Axis.prototype.layout = function () {\n        var _this = this;\n        var coordinate = this.view.getCoordinate();\n        each(this.getComponents(), function (co) {\n            var component = co.component, direction = co.direction, type = co.type, extra = co.extra;\n            var dim = extra.dim, scale = extra.scale, alignTick = extra.alignTick;\n            var updated;\n            if (type === COMPONENT_TYPE.AXIS) {\n                if (coordinate.isPolar) {\n                    if (dim === 'x') {\n                        updated = coordinate.isTransposed\n                            ? getAxisRegion(coordinate, direction)\n                            : getCircleAxisCenterRadius(coordinate);\n                    }\n                    else if (dim === 'y') {\n                        updated = coordinate.isTransposed\n                            ? getCircleAxisCenterRadius(coordinate)\n                            : getAxisRegion(coordinate, direction);\n                    }\n                }\n                else {\n                    updated = getAxisRegion(coordinate, direction);\n                }\n            }\n            else if (type === COMPONENT_TYPE.GRID) {\n                if (coordinate.isPolar) {\n                    var items = void 0;\n                    if (coordinate.isTransposed) {\n                        items =\n                            dim === 'x'\n                                ? getCircleGridItems(coordinate, _this.view.getYScales()[0], scale, alignTick, dim)\n                                : getLineGridItems(coordinate, scale, dim, alignTick);\n                    }\n                    else {\n                        items =\n                            dim === 'x'\n                                ? getLineGridItems(coordinate, scale, dim, alignTick)\n                                : getCircleGridItems(coordinate, _this.view.getXScale(), scale, alignTick, dim);\n                    }\n                    updated = {\n                        items: items,\n                        // coordinate 更新之后，center 也变化了\n                        center: _this.view.getCoordinate().getCenter(),\n                    };\n                }\n                else {\n                    updated = { items: getLineGridItems(coordinate, scale, dim, alignTick) };\n                }\n            }\n            component.update(updated);\n        });\n    };\n    /**\n     * 更新 axis 组件\n     */\n    Axis.prototype.update = function () {\n        this.option = this.view.getOptions().axes;\n        var updatedCache = new Map();\n        this.updateXAxes(updatedCache);\n        this.updateYAxes(updatedCache);\n        // 处理完成之后，销毁删除的\n        // 不在处理中的\n        var newCache = new Map();\n        this.cache.forEach(function (co, key) {\n            if (updatedCache.has(key)) {\n                newCache.set(key, co);\n            }\n            else {\n                // 不存在，则是所有需要被销毁的组件\n                co.component.destroy();\n            }\n        });\n        // 更新缓存\n        this.cache = newCache;\n    };\n    Axis.prototype.clear = function () {\n        _super.prototype.clear.call(this);\n        this.cache.clear();\n        this.gridContainer.clear();\n        this.axisContainer.clear();\n    };\n    Axis.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.gridContainer.remove(true);\n        this.axisContainer.remove(true);\n    };\n    /**\n     * @override\n     */\n    Axis.prototype.getComponents = function () {\n        var co = [];\n        this.cache.forEach(function (value) {\n            co.push(value);\n        });\n        return co;\n    };\n    /**\n     * 更新 x axis\n     * @param updatedCache\n     */\n    Axis.prototype.updateXAxes = function (updatedCache) {\n        // x axis\n        var scale = this.view.getXScale();\n        if (!scale || scale.isIdentity) {\n            return;\n        }\n        var xAxisOption = getAxisOption(this.option, scale.field);\n        if (xAxisOption === false) {\n            return;\n        }\n        var direction = getAxisDirection(xAxisOption, DIRECTION.BOTTOM);\n        var layer = LAYER.BG;\n        var dim = 'x';\n        var coordinate = this.view.getCoordinate();\n        var axisId = this.getId('axis', scale.field);\n        var gridId = this.getId('grid', scale.field);\n        if (coordinate.isRect) {\n            // 1. do axis update\n            var axis = this.cache.get(axisId);\n            // 存在则更新\n            if (axis) {\n                var cfg = this.getLineAxisCfg(scale, xAxisOption, direction);\n                omit(cfg, OMIT_CFG);\n                axis.component.update(cfg);\n                updatedCache.set(axisId, axis);\n            }\n            else {\n                // 不存在，则创建\n                axis = this.createLineAxis(scale, xAxisOption, layer, direction, dim);\n                this.cache.set(axisId, axis);\n                updatedCache.set(axisId, axis);\n            }\n            // 2. do grid update\n            var grid = this.cache.get(gridId);\n            // 存在则更新\n            if (grid) {\n                var cfg = this.getLineGridCfg(scale, xAxisOption, direction, dim);\n                omit(cfg, OMIT_CFG);\n                grid.component.update(cfg);\n                updatedCache.set(gridId, grid);\n            }\n            else {\n                // 不存在则创建\n                grid = this.createLineGrid(scale, xAxisOption, layer, direction, dim);\n                if (grid) {\n                    this.cache.set(gridId, grid);\n                    updatedCache.set(gridId, grid);\n                }\n            }\n        }\n        else if (coordinate.isPolar) {\n            // 1. do axis update\n            var axis = this.cache.get(axisId);\n            // 存在则更新\n            if (axis) {\n                var cfg = coordinate.isTransposed\n                    ? this.getLineAxisCfg(scale, xAxisOption, DIRECTION.RADIUS)\n                    : this.getCircleAxisCfg(scale, xAxisOption, direction);\n                omit(cfg, OMIT_CFG);\n                axis.component.update(cfg);\n                updatedCache.set(axisId, axis);\n            }\n            else {\n                // 不存在，则创建\n                if (coordinate.isTransposed) {\n                    if (isUndefined(xAxisOption)) {\n                        // 默认不渲染转置极坐标下的坐标轴\n                        return;\n                    }\n                    else {\n                        // 如果用户打开了隐藏的坐标轴 chart.axis(true)/chart.axis('x', true)\n                        // 那么对于转置了的极坐标，半径轴显示的是 x 轴对应的数据\n                        axis = this.createLineAxis(scale, xAxisOption, layer, DIRECTION.RADIUS, dim);\n                    }\n                }\n                else {\n                    axis = this.createCircleAxis(scale, xAxisOption, layer, direction, dim);\n                }\n                this.cache.set(axisId, axis);\n                updatedCache.set(axisId, axis);\n            }\n            // 2. do grid update\n            var grid = this.cache.get(gridId);\n            // 存在则更新\n            if (grid) {\n                var cfg = coordinate.isTransposed\n                    ? this.getCircleGridCfg(scale, xAxisOption, DIRECTION.RADIUS, dim)\n                    : this.getLineGridCfg(scale, xAxisOption, DIRECTION.CIRCLE, dim);\n                omit(cfg, OMIT_CFG);\n                grid.component.update(cfg);\n                updatedCache.set(gridId, grid);\n            }\n            else {\n                // 不存在则创建\n                if (coordinate.isTransposed) {\n                    if (isUndefined(xAxisOption)) {\n                        return;\n                    }\n                    else {\n                        grid = this.createCircleGrid(scale, xAxisOption, layer, DIRECTION.RADIUS, dim);\n                    }\n                }\n                else {\n                    // grid，极坐标下的 x 轴网格线沿着半径方向绘制\n                    grid = this.createLineGrid(scale, xAxisOption, layer, DIRECTION.CIRCLE, dim);\n                }\n                if (grid) {\n                    this.cache.set(gridId, grid);\n                    updatedCache.set(gridId, grid);\n                }\n            }\n        }\n        else {\n            // helix and other, do not draw axis\n        }\n    };\n    Axis.prototype.updateYAxes = function (updatedCache) {\n        var _this = this;\n        // y axes\n        var yScales = this.view.getYScales();\n        each(yScales, function (scale, idx) {\n            // @ts-ignore\n            if (!scale || scale.isIdentity) {\n                return;\n            }\n            var field = scale.field;\n            var yAxisOption = getAxisOption(_this.option, field);\n            if (yAxisOption !== false) {\n                var layer = LAYER.BG;\n                var dim = 'y';\n                var axisId = _this.getId('axis', field);\n                var gridId = _this.getId('grid', field);\n                var coordinate = _this.view.getCoordinate();\n                if (coordinate.isRect) {\n                    var direction = getAxisDirection(yAxisOption, idx === 0 ? DIRECTION.LEFT : DIRECTION.RIGHT);\n                    // 1. do axis update\n                    var axis = _this.cache.get(axisId);\n                    // 存在则更新\n                    if (axis) {\n                        var cfg = _this.getLineAxisCfg(scale, yAxisOption, direction);\n                        omit(cfg, OMIT_CFG);\n                        axis.component.update(cfg);\n                        updatedCache.set(axisId, axis);\n                    }\n                    else {\n                        // 不存在，则创建\n                        axis = _this.createLineAxis(scale, yAxisOption, layer, direction, dim);\n                        _this.cache.set(axisId, axis);\n                        updatedCache.set(axisId, axis);\n                    }\n                    // 2. do grid update\n                    var grid = _this.cache.get(gridId);\n                    // 存在则更新\n                    if (grid) {\n                        var cfg = _this.getLineGridCfg(scale, yAxisOption, direction, dim);\n                        omit(cfg, OMIT_CFG);\n                        grid.component.update(cfg);\n                        updatedCache.set(gridId, grid);\n                    }\n                    else {\n                        // 不存在则创建\n                        grid = _this.createLineGrid(scale, yAxisOption, layer, direction, dim);\n                        if (grid) {\n                            _this.cache.set(gridId, grid);\n                            updatedCache.set(gridId, grid);\n                        }\n                    }\n                }\n                else if (coordinate.isPolar) {\n                    // 1. do axis update\n                    var axis = _this.cache.get(axisId);\n                    // 存在则更新\n                    if (axis) {\n                        var cfg = coordinate.isTransposed\n                            ? _this.getCircleAxisCfg(scale, yAxisOption, DIRECTION.CIRCLE)\n                            : _this.getLineAxisCfg(scale, yAxisOption, DIRECTION.RADIUS);\n                        // @ts-ignore\n                        omit(cfg, OMIT_CFG);\n                        axis.component.update(cfg);\n                        updatedCache.set(axisId, axis);\n                    }\n                    else {\n                        // 不存在，则创建\n                        if (coordinate.isTransposed) {\n                            if (isUndefined(yAxisOption)) {\n                                return;\n                            }\n                            else {\n                                axis = _this.createCircleAxis(scale, yAxisOption, layer, DIRECTION.CIRCLE, dim);\n                            }\n                        }\n                        else {\n                            axis = _this.createLineAxis(scale, yAxisOption, layer, DIRECTION.RADIUS, dim);\n                        }\n                        _this.cache.set(axisId, axis);\n                        updatedCache.set(axisId, axis);\n                    }\n                    // 2. do grid update\n                    var grid = _this.cache.get(gridId);\n                    // 存在则更新\n                    if (grid) {\n                        var cfg = coordinate.isTransposed\n                            ? _this.getLineGridCfg(scale, yAxisOption, DIRECTION.CIRCLE, dim)\n                            : _this.getCircleGridCfg(scale, yAxisOption, DIRECTION.RADIUS, dim);\n                        omit(cfg, OMIT_CFG);\n                        grid.component.update(cfg);\n                        updatedCache.set(gridId, grid);\n                    }\n                    else {\n                        // 不存在则创建\n                        if (coordinate.isTransposed) {\n                            if (isUndefined(yAxisOption)) {\n                                return;\n                            }\n                            else {\n                                grid = _this.createLineGrid(scale, yAxisOption, layer, DIRECTION.CIRCLE, dim);\n                            }\n                        }\n                        else {\n                            grid = _this.createCircleGrid(scale, yAxisOption, layer, DIRECTION.RADIUS, dim);\n                        }\n                        if (grid) {\n                            _this.cache.set(gridId, grid);\n                            updatedCache.set(gridId, grid);\n                        }\n                    }\n                }\n                else {\n                    // helix and other, do not draw axis\n                }\n            }\n        });\n    };\n    /**\n     * 创建 line axis\n     * @param scale\n     * @param option\n     * @param layer\n     * @param direction\n     * @param dim\n     */\n    Axis.prototype.createLineAxis = function (scale, option, layer, direction, dim) {\n        // axis\n        var axis = {\n            component: new LineAxis(this.getLineAxisCfg(scale, option, direction)),\n            layer: layer,\n            direction: direction === DIRECTION.RADIUS ? DIRECTION.NONE : direction,\n            type: COMPONENT_TYPE.AXIS,\n            extra: { dim: dim, scale: scale },\n        };\n        axis.component.set('field', scale.field);\n        axis.component.init();\n        return axis;\n    };\n    Axis.prototype.createLineGrid = function (scale, option, layer, direction, dim) {\n        var cfg = this.getLineGridCfg(scale, option, direction, dim);\n        if (cfg) {\n            var grid = {\n                component: new LineGrid(cfg),\n                layer: layer,\n                direction: DIRECTION.NONE,\n                type: COMPONENT_TYPE.GRID,\n                extra: {\n                    dim: dim,\n                    scale: scale,\n                    alignTick: get(cfg, 'alignTick', true),\n                },\n            };\n            grid.component.init();\n            return grid;\n        }\n    };\n    Axis.prototype.createCircleAxis = function (scale, option, layer, direction, dim) {\n        var axis = {\n            component: new CircleAxis(this.getCircleAxisCfg(scale, option, direction)),\n            layer: layer,\n            direction: direction,\n            type: COMPONENT_TYPE.AXIS,\n            extra: { dim: dim, scale: scale },\n        };\n        axis.component.set('field', scale.field);\n        axis.component.init();\n        return axis;\n    };\n    Axis.prototype.createCircleGrid = function (scale, option, layer, direction, dim) {\n        var cfg = this.getCircleGridCfg(scale, option, direction, dim);\n        if (cfg) {\n            var grid = {\n                component: new CircleGrid(cfg),\n                layer: layer,\n                direction: DIRECTION.NONE,\n                type: COMPONENT_TYPE.GRID,\n                extra: {\n                    dim: dim,\n                    scale: scale,\n                    alignTick: get(cfg, 'alignTick', true),\n                },\n            };\n            grid.component.init();\n            return grid;\n        }\n    };\n    /**\n     * generate line axis cfg\n     * @param scale\n     * @param axisOption\n     * @param direction\n     * @return line axis cfg\n     */\n    Axis.prototype.getLineAxisCfg = function (scale, axisOption, direction) {\n        var container = this.axisContainer;\n        var coordinate = this.view.getCoordinate();\n        var region = getAxisRegion(coordinate, direction);\n        var titleText = getAxisTitleText(scale, axisOption);\n        var axisThemeCfg = getAxisThemeCfg(this.view.getTheme(), direction);\n        // the cfg order should be ensure\n        var optionWithTitle = get(axisOption, ['title'])\n            ? deepMix({ title: { style: { text: titleText } } }, {\n                title: get(getAxisThemeCfg(this.view.getTheme(), 'common'), 'title'),\n            }, axisOption)\n            : axisOption;\n        var cfg = deepMix(__assign(__assign({ container: container }, region), { ticks: scale.getTicks().map(function (tick) { return ({ id: \"\" + tick.tickValue, name: tick.text, value: tick.value }); }), verticalFactor: coordinate.isPolar\n                ? getAxisFactorByRegion(region, coordinate.getCenter()) * -1\n                : getAxisFactorByRegion(region, coordinate.getCenter()), theme: axisThemeCfg }), axisThemeCfg, optionWithTitle);\n        var _a = this.getAnimateCfg(cfg), animate = _a.animate, animateOption = _a.animateOption;\n        cfg.animateOption = animateOption;\n        cfg.animate = animate;\n        // 计算 verticalLimitLength\n        var isAxisVertical = isVertical(region);\n        // TODO: 1 / 3 等默认值需要有一个全局的配置的地方\n        var verticalLimitLength = get(cfg, 'verticalLimitLength', isAxisVertical ? 1 / 3 : 1 / 2);\n        if (verticalLimitLength <= 1) {\n            // 配置的相对值，相对于画布\n            var canvasWidth = this.view.getCanvas().get('width');\n            var canvasHeight = this.view.getCanvas().get('height');\n            cfg.verticalLimitLength = verticalLimitLength * (isAxisVertical ? canvasWidth : canvasHeight);\n        }\n        return cfg;\n    };\n    /**\n     * generate line grid cfg\n     * @param scale\n     * @param axisOption\n     * @param direction\n     * @param dim\n     * @return line grid cfg\n     */\n    Axis.prototype.getLineGridCfg = function (scale, axisOption, direction, dim) {\n        if (!showGrid(getAxisThemeCfg(this.view.getTheme(), direction), axisOption)) {\n            return undefined;\n        }\n        var gridThemeCfg = getGridThemeCfg(this.view.getTheme(), direction);\n        // the cfg order should be ensure\n        // grid 动画以 axis 为准\n        var gridCfg = deepMix({\n            container: this.gridContainer,\n        }, gridThemeCfg, get(axisOption, 'grid'), this.getAnimateCfg(axisOption));\n        gridCfg.items = getLineGridItems(this.view.getCoordinate(), scale, dim, get(gridCfg, 'alignTick', true));\n        return gridCfg;\n    };\n    /**\n     * generate circle axis cfg\n     * @param scale\n     * @param axisOption\n     * @param direction\n     * @return circle axis cfg\n     */\n    Axis.prototype.getCircleAxisCfg = function (scale, axisOption, direction) {\n        var container = this.axisContainer;\n        var coordinate = this.view.getCoordinate();\n        var ticks = scale.getTicks().map(function (tick) { return ({ id: \"\" + tick.tickValue, name: tick.text, value: tick.value }); });\n        if (!scale.isCategory && Math.abs(coordinate.endAngle - coordinate.startAngle) === Math.PI * 2) {\n            // x 轴对应的值如果是非 cat 类型，在整圆的情况下坐标轴第一个和最后一个文本会重叠，默认只展示第一个文本\n            ticks.pop();\n        }\n        var titleText = getAxisTitleText(scale, axisOption);\n        var axisThemeCfg = getAxisThemeCfg(this.view.getTheme(), DIRECTION.CIRCLE);\n        // the cfg order should be ensure\n        var optionWithTitle = get(axisOption, ['title'])\n            ? deepMix({ title: { style: { text: titleText } } }, {\n                title: get(getAxisThemeCfg(this.view.getTheme(), 'common'), 'title'),\n            }, axisOption)\n            : axisOption;\n        var cfg = deepMix(__assign(__assign({ container: container }, getCircleAxisCenterRadius(this.view.getCoordinate())), { ticks: ticks, verticalFactor: 1, theme: axisThemeCfg }), axisThemeCfg, optionWithTitle);\n        var _a = this.getAnimateCfg(cfg), animate = _a.animate, animateOption = _a.animateOption;\n        cfg.animate = animate;\n        cfg.animateOption = animateOption;\n        return cfg;\n    };\n    /**\n     * generate circle grid cfg\n     * @param scale\n     * @param axisOption\n     * @param direction\n     * @return circle grid cfg\n     */\n    Axis.prototype.getCircleGridCfg = function (scale, axisOption, direction, dim) {\n        if (!showGrid(getAxisThemeCfg(this.view.getTheme(), direction), axisOption)) {\n            return undefined;\n        }\n        // the cfg order should be ensure\n        // grid 动画以 axis 为准\n        var gridThemeCfg = getGridThemeCfg(this.view.getTheme(), DIRECTION.RADIUS);\n        var gridCfg = deepMix({\n            container: this.gridContainer,\n            center: this.view.getCoordinate().getCenter(),\n        }, gridThemeCfg, get(axisOption, 'grid'), this.getAnimateCfg(axisOption));\n        var alignTick = get(gridCfg, 'alignTick', true);\n        var verticalScale = dim === 'x' ? this.view.getYScales()[0] : this.view.getXScale();\n        gridCfg.items = getCircleGridItems(this.view.getCoordinate(), verticalScale, scale, alignTick, dim);\n        // the cfg order should be ensure\n        // grid 动画以 axis 为准\n        return gridCfg;\n    };\n    Axis.prototype.getId = function (name, key) {\n        var coordinate = this.view.getCoordinate();\n        // 坐标系类型也作为组件的 key\n        return name + \"-\" + key + \"-\" + coordinate.type;\n    };\n    Axis.prototype.getAnimateCfg = function (cfg) {\n        return {\n            animate: this.view.getOptions().animate && get(cfg, 'animate'),\n            animateOption: cfg && cfg.animateOption ? deepMix({}, AXIS_DEFAULT_ANIMATE_CFG, cfg.animateOption) : AXIS_DEFAULT_ANIMATE_CFG,\n        };\n    };\n    return Axis;\n}(Controller));\nexport default Axis;\n//# sourceMappingURL=axis.js.map","import { DIRECTION } from '../constant';\n/**\n * @ignore\n * 方位常量转实际的 bbox 位置大小\n * @param parentBBox\n * @param bbox\n * @param direction\n */\nexport function directionToPosition(parentBBox, bbox, direction) {\n    if (direction === DIRECTION.TOP) {\n        return [parentBBox.minX + parentBBox.width / 2 - bbox.width / 2, parentBBox.minY];\n    }\n    if (direction === DIRECTION.BOTTOM) {\n        return [parentBBox.minX + parentBBox.width / 2 - bbox.width / 2, parentBBox.maxY - bbox.height];\n    }\n    if (direction === DIRECTION.LEFT) {\n        return [parentBBox.minX, parentBBox.minY + parentBBox.height / 2 - bbox.height / 2];\n    }\n    if (direction === DIRECTION.RIGHT) {\n        return [parentBBox.maxX - bbox.width, parentBBox.minY + parentBBox.height / 2 - bbox.height / 2];\n    }\n    if (direction === DIRECTION.TOP_LEFT || direction === DIRECTION.LEFT_TOP) {\n        return [parentBBox.tl.x, parentBBox.tl.y];\n    }\n    if (direction === DIRECTION.TOP_RIGHT || direction === DIRECTION.RIGHT_TOP) {\n        return [parentBBox.tr.x - bbox.width, parentBBox.tr.y];\n    }\n    if (direction === DIRECTION.BOTTOM_LEFT || direction === DIRECTION.LEFT_BOTTOM) {\n        return [parentBBox.bl.x, parentBBox.bl.y - bbox.height];\n    }\n    if (direction === DIRECTION.BOTTOM_RIGHT || direction === DIRECTION.RIGHT_BOTTOM) {\n        return [parentBBox.br.x - bbox.width, parentBBox.br.y - bbox.height];\n    }\n    return [0, 0];\n}\n/**\n * get direction after coordinate transpose\n * @param direction\n * @param coordinate\n * @returns direction after transpose or not\n */\nfunction getTransposedDirection(direction, coordinate) {\n    if (coordinate.isTransposed) {\n        switch (direction) {\n            case DIRECTION.BOTTOM:\n                return DIRECTION.LEFT;\n            case DIRECTION.LEFT:\n                return DIRECTION.BOTTOM;\n            case DIRECTION.RIGHT:\n                return DIRECTION.TOP;\n            case DIRECTION.TOP:\n                return DIRECTION.RIGHT;\n        }\n    }\n    return direction;\n}\nfunction reflectX(direct) {\n    if (direct === DIRECTION.LEFT) {\n        return DIRECTION.RIGHT;\n    }\n    if (direct === DIRECTION.RIGHT) {\n        return DIRECTION.LEFT;\n    }\n    return direct;\n}\nfunction reflectY(direct) {\n    if (direct === DIRECTION.TOP) {\n        return DIRECTION.BOTTOM;\n    }\n    if (direct === DIRECTION.BOTTOM) {\n        return DIRECTION.TOP;\n    }\n    return direct;\n}\n/**\n * get direction after coordinate.scale\n * @param direction\n * @param coordinate\n */\nfunction getScaleDirection(direction, coordinate) {\n    var x = coordinate.matrix[0];\n    var y = coordinate.matrix[4];\n    var d = direction;\n    if (x < 0) {\n        d = reflectX(d);\n    }\n    if (y < 0) {\n        d = reflectY(d);\n    }\n    return d;\n}\n/**\n *\n * @param direction\n * @param coordinate\n */\nfunction getReflectDirection(direction, coordinate) {\n    var d = direction;\n    if (coordinate.isReflect('x')) {\n        d = reflectX(d);\n    }\n    if (coordinate.isReflect('y')) {\n        d = reflectY(d);\n    }\n    return d;\n}\n/**\n * @ignore\n * get direction after coordinate translate\n * @param direction\n * @param coordinate\n */\nexport function getTranslateDirection(direction, coordinate) {\n    var d = direction;\n    d = getTransposedDirection(d, coordinate);\n    d = getScaleDirection(d, coordinate);\n    d = getReflectDirection(d, coordinate);\n    return d;\n}\n//# sourceMappingURL=direction.js.map","import { __spreadArrays } from \"tslib\";\n/**\n * @ignore\n * get the mapping value by attribute, if mapping value is nil, return def\n * @param attr\n * @param value\n * @param def\n * @returns get mapping value\n */\nexport function getMappingValue(attr, value, def) {\n    if (!attr) {\n        return def;\n    }\n    var r;\n    // 多参数映射，阻止程序报错\n    if (attr.callback && attr.callback.length > 1) {\n        var restArgs = Array(attr.callback.length - 1).fill('');\n        r = attr.mapping.apply(attr, __spreadArrays([value], restArgs)).join('');\n    }\n    else {\n        r = attr.mapping(value).join('');\n    }\n    return r || def;\n}\n//# sourceMappingURL=attr.js.map","import { deepMix, isString, each } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { getMappingValue } from './attr';\nimport { MarkerSymbols } from './marker';\nfunction setMarkerSymbol(marker) {\n    var symbol = marker.symbol;\n    if (isString(symbol) && MarkerSymbols[symbol]) {\n        marker.symbol = MarkerSymbols[symbol];\n    }\n}\n/**\n * @ignore\n * get the legend layout from direction\n * @param direction\n * @returns layout 'horizontal' | 'vertical'\n */\nexport function getLegendLayout(direction) {\n    return direction.startsWith(DIRECTION.LEFT) || direction.startsWith(DIRECTION.RIGHT) ? 'vertical' : 'horizontal';\n}\n/**\n * @ignore\n * get the legend items\n * @param view\n * @param geometry\n * @param attr\n * @param themeMarker\n * @param userMarker\n * @returns legend items\n */\nexport function getLegendItems(view, geometry, attr, themeMarker, userMarker) {\n    var scale = attr.getScale(attr.type);\n    if (scale.isCategory) {\n        var field_1 = scale.field;\n        var colorAttr_1 = geometry.getAttribute('color');\n        var shapeAttr_1 = geometry.getAttribute('shape');\n        var defaultColor_1 = view.getTheme().defaultColor;\n        var isInPolar_1 = geometry.coordinate.isPolar;\n        return scale.getTicks().map(function (tick) {\n            var _a;\n            var text = tick.text, scaleValue = tick.value;\n            var name = text;\n            var value = scale.invert(scaleValue);\n            // 通过过滤图例项的数据，来看是否 unchecked\n            var unchecked = view.filterFieldData(field_1, [(_a = {}, _a[field_1] = value, _a)]).length === 0;\n            each(view.views, function (subView) {\n                var _a;\n                if (!subView.filterFieldData(field_1, [(_a = {}, _a[field_1] = value, _a)]).length) {\n                    unchecked = true;\n                }\n            });\n            // @ts-ignore\n            var color = getMappingValue(colorAttr_1, value, defaultColor_1);\n            var shape = getMappingValue(shapeAttr_1, value, 'point');\n            var marker = geometry.getShapeMarker(shape, {\n                color: color,\n                isInPolar: isInPolar_1,\n            });\n            // the marker configure order should be ensure\n            marker = deepMix({}, themeMarker, marker, userMarker);\n            setMarkerSymbol(marker);\n            return { id: value, name: name, value: value, marker: marker, unchecked: unchecked };\n        });\n    }\n    return [];\n}\n/**\n * @ignore\n * custom legend 的 items 获取\n * @param themeMarker\n * @param userMarker\n * @param customItems\n */\nexport function getCustomLegendItems(themeMarker, userMarker, customItems) {\n    // 如果有自定义的 item，那么就直接使用，并合并主题的 marker 配置\n    return customItems.map(function (item) {\n        var marker = deepMix({}, themeMarker, userMarker, item.marker);\n        setMarkerSymbol(marker);\n        item.marker = marker;\n        return item;\n    });\n}\n//# sourceMappingURL=legend.js.map","import { __extends } from \"tslib\";\nimport { deepMix, each, find, get, head, isBoolean, last } from '@antv/util';\nimport { COMPONENT_MAX_VIEW_PERCENTAGE, COMPONENT_TYPE, DIRECTION, LAYER } from '../../constant';\nimport { CategoryLegend, ContinuousLegend } from '../../dependents';\nimport { DEFAULT_ANIMATE_CFG } from '../../animate';\nimport { BBox } from '../../util/bbox';\nimport { directionToPosition } from '../../util/direction';\nimport { omit } from '../../util/helper';\nimport { getCustomLegendItems, getLegendItems, getLegendLayout } from '../../util/legend';\nimport { getName } from '../../util/scale';\nimport { Controller } from './base';\n/**\n * 从配置中获取单个字段的 legend 配置\n * @param legends\n * @param field\n * @returns the option of one legend field\n */\nfunction getLegendOption(legends, field) {\n    if (isBoolean(legends)) {\n        return legends === false ? false : {};\n    }\n    return get(legends, [field], legends);\n}\nfunction getDirection(legendOption) {\n    return get(legendOption, 'position', DIRECTION.BOTTOM);\n}\n/**\n * @ignore\n * legend Controller\n */\nvar Legend = /** @class */ (function (_super) {\n    __extends(Legend, _super);\n    function Legend(view) {\n        var _this = _super.call(this, view) || this;\n        _this.container = _this.view.getLayer(LAYER.FORE).addGroup();\n        return _this;\n    }\n    Object.defineProperty(Legend.prototype, \"name\", {\n        get: function () {\n            return 'legend';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Legend.prototype.init = function () { };\n    /**\n     * render the legend component by legend options\n     */\n    Legend.prototype.render = function () {\n        // 和 update 逻辑保持一致\n        this.update();\n    };\n    /**\n     * layout legend\n     * 计算出 legend 的 direction 位置 x, y\n     */\n    Legend.prototype.layout = function () {\n        var _this = this;\n        this.layoutBBox = this.view.viewBBox;\n        each(this.components, function (co) {\n            var component = co.component, direction = co.direction;\n            var layout = getLegendLayout(direction);\n            var maxSize = _this.getCategoryLegendSizeCfg(layout);\n            var maxWidth = component.get('maxWidth');\n            var maxHeight = component.get('maxHeight');\n            // 先更新 maxSize，更新 layoutBBox，以便计算正确的 x y\n            component.update({\n                maxWidth: Math.min(maxSize.maxWidth, maxWidth || 0),\n                maxHeight: Math.min(maxSize.maxHeight, maxHeight || 0),\n            });\n            var padding = component.get('padding');\n            var bboxObject = component.getLayoutBBox(); // 这里只需要他的 width、height 信息做位置调整\n            var bbox = new BBox(bboxObject.x, bboxObject.y, bboxObject.width, bboxObject.height).expand(padding);\n            var _a = directionToPosition(_this.view.viewBBox, bbox, direction), x1 = _a[0], y1 = _a[1];\n            var _b = directionToPosition(_this.layoutBBox, bbox, direction), x2 = _b[0], y2 = _b[1];\n            var x = 0;\n            var y = 0;\n            // 因为 legend x y 要和 coordinateBBox 对齐，所以要做一个简单的判断\n            if (direction.startsWith('top') || direction.startsWith('bottom')) {\n                x = x1;\n                y = y2;\n            }\n            else {\n                x = x2;\n                y = y1;\n            }\n            // 更新位置\n            component.setLocation({ x: x + padding[3], y: y + padding[0] });\n            _this.layoutBBox = _this.layoutBBox.cut(bbox, direction);\n        });\n    };\n    /**\n     * legend 的更新逻辑\n     */\n    Legend.prototype.update = function () {\n        var _this = this;\n        this.option = this.view.getOptions().legends;\n        // 已经处理过的 legend\n        var updated = {};\n        var eachLegend = function (geometry, attr, scale) {\n            var id = _this.getId(scale.field);\n            var existCo = _this.getComponentById(id);\n            // 存在则 update\n            if (existCo) {\n                var cfg = void 0;\n                var legendOption = getLegendOption(_this.option, scale.field);\n                // if the legend option is not false, means legend should be created.\n                if (legendOption !== false) {\n                    if (get(legendOption, 'custom')) {\n                        cfg = _this.getCategoryCfg(geometry, attr, scale, legendOption, true);\n                    }\n                    else {\n                        if (scale.isLinear) {\n                            // linear field, create continuous legend\n                            cfg = _this.getContinuousCfg(geometry, attr, scale, legendOption);\n                        }\n                        else if (scale.isCategory) {\n                            // category field, create category legend\n                            cfg = _this.getCategoryCfg(geometry, attr, scale, legendOption);\n                        }\n                    }\n                }\n                // 如果 cfg 为空，则不在 updated 标记，那么会在后面逻辑中删除\n                if (cfg) {\n                    // omit 掉一些属性，比如 container 等\n                    omit(cfg, ['container']);\n                    existCo.direction = getDirection(legendOption);\n                    existCo.component.update(cfg);\n                    // 标记为新的\n                    updated[id] = true;\n                }\n            }\n            else {\n                // 不存在则 create\n                var legend = _this.createFieldLegend(geometry, attr, scale);\n                if (legend) {\n                    legend.component.init();\n                    _this.components.push(legend);\n                    // 标记为新的\n                    updated[id] = true;\n                }\n            }\n        };\n        // 全局自定义图例\n        if (get(this.option, 'custom')) {\n            var id = 'global-custom';\n            var existCo = this.getComponentById(id);\n            if (existCo) {\n                var customCfg = this.getCategoryCfg(undefined, undefined, undefined, this.option, true);\n                omit(customCfg, ['container']);\n                existCo.component.update(customCfg);\n                updated[id] = true;\n            }\n            else {\n                var component = this.createCustomLegend(undefined, undefined, undefined, this.option);\n                if (component) {\n                    component.init();\n                    var layer = LAYER.FORE;\n                    var direction = getDirection(this.option);\n                    this.components.push({\n                        id: id,\n                        component: component,\n                        layer: layer,\n                        direction: direction,\n                        type: COMPONENT_TYPE.LEGEND,\n                        extra: undefined,\n                    });\n                    // 标记为更新\n                    updated[id] = true;\n                }\n            }\n        }\n        else {\n            // 遍历处理每一个创建逻辑\n            this.loopLegends(eachLegend);\n        }\n        // 处理完成之后，销毁删除的\n        // 不在处理中的\n        var components = [];\n        each(this.getComponents(), function (co) {\n            if (updated[co.id]) {\n                components.push(co);\n            }\n            else {\n                co.component.destroy();\n            }\n        });\n        // 更新当前已有的 components\n        this.components = components;\n    };\n    Legend.prototype.clear = function () {\n        _super.prototype.clear.call(this);\n        this.container.clear();\n    };\n    Legend.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.container.remove(true);\n    };\n    /**\n     * 递归获取所有的 Geometry\n     */\n    Legend.prototype.getGeometries = function (view) {\n        var _this = this;\n        var geometries = view.geometries;\n        each(view.views, function (v) {\n            geometries = geometries.concat(_this.getGeometries(v));\n        });\n        return geometries;\n    };\n    /**\n     * 遍历 Geometry，处理 legend 逻辑\n     * @param doEach 每个 loop 中的处理方法\n     */\n    Legend.prototype.loopLegends = function (doEach) {\n        var isRootView = this.view.getRootView() === this.view;\n        // 非根 view，不处理 legend\n        if (!isRootView) {\n            return;\n        }\n        // 递归 view 中所有的 Geometry，进行创建 legend\n        var geometries = this.getGeometries(this.view);\n        var looped = {}; // 防止一个字段创建两个 legend\n        each(geometries, function (geometry) {\n            var attributes = geometry.getGroupAttributes();\n            each(attributes, function (attr) {\n                var scale = attr.getScale(attr.type);\n                // 如果在视觉通道上映射常量值，如 size(2) shape('circle') 不创建 legend\n                if (!scale || scale.type === 'identity' || looped[scale.field]) {\n                    return;\n                }\n                doEach(geometry, attr, scale);\n                looped[scale.field] = true;\n            });\n        });\n    };\n    /**\n     * 创建一个 legend\n     * @param geometry\n     * @param attr\n     * @param scale\n     */\n    Legend.prototype.createFieldLegend = function (geometry, attr, scale) {\n        var component;\n        var legendOption = getLegendOption(this.option, scale.field);\n        var layer = LAYER.FORE;\n        var direction = getDirection(legendOption);\n        // if the legend option is not false, means legend should be created.\n        if (legendOption !== false) {\n            if (get(legendOption, 'custom')) {\n                component = this.createCustomLegend(geometry, attr, scale, legendOption);\n            }\n            else {\n                if (scale.isLinear) {\n                    // linear field, create continuous legend\n                    component = this.createContinuousLegend(geometry, attr, scale, legendOption);\n                }\n                else if (scale.isCategory) {\n                    // category field, create category legend\n                    component = this.createCategoryLegend(geometry, attr, scale, legendOption);\n                }\n            }\n        }\n        if (component) {\n            component.set('field', scale.field);\n            return {\n                id: this.getId(scale.field),\n                component: component,\n                layer: layer,\n                direction: direction,\n                type: COMPONENT_TYPE.LEGEND,\n                extra: { scale: scale },\n            };\n        }\n    };\n    /**\n     * 自定义图例使用 category 图例去渲染\n     * @param geometry\n     * @param attr\n     * @param scale\n     * @param legendOption\n     */\n    Legend.prototype.createCustomLegend = function (geometry, attr, scale, legendOption) {\n        // 直接使用 分类图例渲染\n        var cfg = this.getCategoryCfg(geometry, attr, scale, legendOption, true);\n        return new CategoryLegend(cfg);\n    };\n    /**\n     * 创建连续图例\n     * @param geometry\n     * @param attr\n     * @param scale\n     * @param legendOption\n     */\n    Legend.prototype.createContinuousLegend = function (geometry, attr, scale, legendOption) {\n        var cfg = this.getContinuousCfg(geometry, attr, scale, legendOption);\n        return new ContinuousLegend(cfg);\n    };\n    /**\n     * 创建分类图例\n     * @param geometry\n     * @param attr\n     * @param scale\n     * @param legendOption\n     */\n    Legend.prototype.createCategoryLegend = function (geometry, attr, scale, legendOption) {\n        var cfg = this.getCategoryCfg(geometry, attr, scale, legendOption);\n        return new CategoryLegend(cfg);\n    };\n    /**\n     * 获得连续图例的配置\n     * @param geometry\n     * @param attr\n     * @param scale\n     * @param legendOption\n     */\n    Legend.prototype.getContinuousCfg = function (geometry, attr, scale, legendOption) {\n        var ticks = scale.getTicks();\n        var containMin = find(ticks, function (tick) { return tick.value === 0; });\n        var containMax = find(ticks, function (tick) { return tick.value === 1; });\n        var items = ticks.map(function (tick) {\n            var value = tick.value, tickValue = tick.tickValue;\n            var attrValue = attr.mapping(scale.invert(value)).join('');\n            return {\n                value: tickValue,\n                attrValue: attrValue,\n                color: attrValue,\n                scaleValue: value,\n            };\n        });\n        if (!containMin) {\n            items.push({\n                value: scale.min,\n                attrValue: attr.mapping(scale.invert(0)).join(''),\n                color: attr.mapping(scale.invert(0)).join(''),\n                scaleValue: 0,\n            });\n        }\n        if (!containMax) {\n            items.push({\n                value: scale.max,\n                attrValue: attr.mapping(scale.invert(1)).join(''),\n                color: attr.mapping(scale.invert(1)).join(''),\n                scaleValue: 1,\n            });\n        }\n        // 排序\n        items.sort(function (a, b) { return a.value - b.value; });\n        // 跟 attr 相关的配置\n        // size color 区别的配置\n        var attrLegendCfg = {\n            min: head(items).value,\n            max: last(items).value,\n            colors: [],\n            rail: {\n                type: attr.type,\n            },\n            track: {},\n        };\n        if (attr.type === 'size') {\n            attrLegendCfg.track = {\n                style: {\n                    // size 的选中前景色，对于 color，则直接使用 color 标识\n                    // @ts-ignore\n                    fill: attr.type === 'size' ? this.view.getTheme().defaultColor : undefined,\n                },\n            };\n        }\n        if (attr.type === 'color') {\n            attrLegendCfg.colors = items.map(function (item) { return item.attrValue; });\n        }\n        var container = this.container;\n        // if position is not set, use top as default\n        var direction = getDirection(legendOption);\n        var layout = getLegendLayout(direction);\n        var title = get(legendOption, 'title');\n        if (title) {\n            title = deepMix({\n                text: getName(scale),\n            }, title);\n        }\n        // 基础配置，从当前数据中读到的配置\n        attrLegendCfg.container = container;\n        attrLegendCfg.layout = layout;\n        attrLegendCfg.title = title;\n        attrLegendCfg.animateOption = DEFAULT_ANIMATE_CFG;\n        // @ts-ignore\n        return this.mergeLegendCfg(attrLegendCfg, legendOption, 'continuous');\n    };\n    /**\n     * 获取分类图例的配置项\n     * @param geometry\n     * @param attr\n     * @param scale\n     * @param custom\n     * @param legendOption\n     */\n    Legend.prototype.getCategoryCfg = function (geometry, attr, scale, legendOption, custom) {\n        var container = this.container;\n        // if position is not set, use top as default\n        var direction = get(legendOption, 'position', DIRECTION.BOTTOM);\n        // the default marker style\n        var themeMarker = get(this.view.getTheme(), ['components', 'legend', direction, 'marker']);\n        var userMarker = get(legendOption, 'marker');\n        var layout = getLegendLayout(direction);\n        var items = custom\n            ? getCustomLegendItems(themeMarker, userMarker, legendOption.items)\n            : getLegendItems(this.view, geometry, attr, themeMarker, userMarker);\n        var title = get(legendOption, 'title');\n        if (title) {\n            title = deepMix({\n                text: scale ? getName(scale) : '',\n            }, title);\n        }\n        var baseCfg = this.getCategoryLegendSizeCfg(layout);\n        baseCfg.container = container;\n        baseCfg.layout = layout;\n        baseCfg.items = items;\n        baseCfg.title = title;\n        baseCfg.animateOption = DEFAULT_ANIMATE_CFG;\n        var categoryCfg = this.mergeLegendCfg(baseCfg, legendOption, direction);\n        if (categoryCfg.reversed) {\n            // 图例项需要逆序\n            categoryCfg.items.reverse();\n        }\n        var maxItemWidth = get(categoryCfg, 'maxItemWidth');\n        if (maxItemWidth && maxItemWidth <= 1) {\n            // 转换成像素值\n            categoryCfg.maxItemWidth = this.view.viewBBox.width * maxItemWidth;\n        }\n        return categoryCfg;\n    };\n    /**\n     * get legend config, use option > suggestion > theme\n     * @param baseCfg\n     * @param legendOption\n     * @param direction\n     */\n    Legend.prototype.mergeLegendCfg = function (baseCfg, legendOption, direction) {\n        var position = direction.split('-')[0];\n        var themeObject = get(this.view.getTheme(), ['components', 'legend', position], {});\n        return deepMix({}, themeObject, baseCfg, legendOption);\n    };\n    /**\n     * 生成 id\n     * @param key\n     */\n    Legend.prototype.getId = function (key) {\n        return this.name + \"-\" + key;\n    };\n    /**\n     * 根据 id 来获取组件\n     * @param id\n     */\n    Legend.prototype.getComponentById = function (id) {\n        return find(this.components, function (co) { return co.id === id; });\n    };\n    Legend.prototype.getCategoryLegendSizeCfg = function (layout) {\n        var _a = this.view.viewBBox, vw = _a.width, vh = _a.height;\n        // 目前 legend 的布局是以 viewBBox 为参照\n        // const { width: cw, height: ch } = this.view.coordinateBBox;\n        return layout === 'vertical'\n            ? {\n                maxWidth: vw * COMPONENT_MAX_VIEW_PERCENTAGE,\n                maxHeight: vh,\n            }\n            : {\n                maxWidth: vw,\n                maxHeight: vh * COMPONENT_MAX_VIEW_PERCENTAGE,\n            };\n    };\n    return Legend;\n}(Controller));\nexport default Legend;\n//# sourceMappingURL=legend.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, get, isObject, size, clamp, isNil, noop, throttle, groupBy, keys, isEmpty } from '@antv/util';\nimport { COMPONENT_TYPE, DIRECTION, LAYER, VIEW_LIFE_CIRCLE } from '../../constant';\nimport { Slider as SliderComponent } from '../../dependents';\nimport { BBox } from '../../util/bbox';\nimport { directionToPosition } from '../../util/direction';\nimport { isBetween } from '../../util/helper';\nimport { Controller } from './base';\n/**\n * @ignore\n * slider Controller\n */\nvar Slider = /** @class */ (function (_super) {\n    __extends(Slider, _super);\n    function Slider(view) {\n        var _this = _super.call(this, view) || this;\n        _this.onChangeFn = noop;\n        /**\n         * 清除测量\n         */\n        _this.resetMeasure = function () {\n            _this.clear();\n        };\n        /**\n         * 滑块滑动的时候出发\n         * @param v\n         */\n        _this.onValueChange = function (v) {\n            var min = v[0], max = v[1];\n            _this.start = min;\n            _this.end = max;\n            _this.changeViewData(min, max);\n        };\n        _this.container = _this.view.getLayer(LAYER.FORE).addGroup();\n        _this.onChangeFn = throttle(_this.onValueChange, 20, {\n            leading: true,\n        });\n        _this.width = 0;\n        _this.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA, _this.resetMeasure);\n        _this.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE, _this.resetMeasure);\n        return _this;\n    }\n    Object.defineProperty(Slider.prototype, \"name\", {\n        get: function () {\n            return 'slider';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Slider.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA, this.resetMeasure);\n        this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE, this.resetMeasure);\n    };\n    /**\n     * 初始化\n     */\n    Slider.prototype.init = function () { };\n    /**\n     * 渲染\n     */\n    Slider.prototype.render = function () {\n        this.option = this.view.getOptions().slider;\n        var _a = this.getSliderCfg(), start = _a.start, end = _a.end;\n        if (isNil(this.start)) {\n            this.start = start;\n            this.end = end;\n        }\n        var viewData = this.view.getOptions().data;\n        if (this.option && !isEmpty(viewData)) {\n            if (this.slider) {\n                // exist, update\n                this.slider = this.updateSlider();\n            }\n            else {\n                // not exist, create\n                this.slider = this.createSlider();\n                // 监听事件，绑定交互\n                this.slider.component.on('sliderchange', this.onChangeFn);\n            }\n        }\n        else {\n            if (this.slider) {\n                // exist, destroy\n                this.slider.component.destroy();\n                this.slider = undefined;\n            }\n            else {\n                // do nothing\n            }\n        }\n    };\n    /**\n     * 布局\n     */\n    Slider.prototype.layout = function () {\n        var _this = this;\n        if (this.option && !this.width) {\n            this.measureSlider();\n            setTimeout(function () {\n                // 初始状态下的 view 数据过滤\n                if (!_this.view.destroyed) {\n                    _this.changeViewData(_this.start, _this.end);\n                }\n            }, 0);\n        }\n        if (this.slider) {\n            var width = this.view.coordinateBBox.width;\n            // 获取组件的 layout bbox\n            var padding = this.slider.component.get('padding');\n            var paddingTop = padding[0], paddingRight = padding[1], paddingBottom = padding[2], paddingLeft = padding[3];\n            var bboxObject = this.slider.component.getLayoutBBox();\n            var bbox = new BBox(bboxObject.x, bboxObject.y, Math.min(bboxObject.width, width), bboxObject.height).expand(padding);\n            var _a = this.getMinMaxText(this.start, this.end), minText = _a.minText, maxText = _a.maxText;\n            var _b = directionToPosition(this.view.viewBBox, bbox, DIRECTION.BOTTOM), x1 = _b[0], y1 = _b[1];\n            var _c = directionToPosition(this.view.coordinateBBox, bbox, DIRECTION.BOTTOM), x2 = _c[0], y2 = _c[1];\n            // 默认放在 bottom\n            this.slider.component.update(__assign(__assign({}, this.getSliderCfg()), { x: x2 + paddingLeft, y: y1 + paddingTop, width: this.width, start: this.start, end: this.end, minText: minText,\n                maxText: maxText }));\n            this.view.viewBBox = this.view.viewBBox.cut(bbox, DIRECTION.BOTTOM);\n        }\n    };\n    /**\n     * 更新\n     */\n    Slider.prototype.update = function () {\n        // 逻辑和 render 保持一致\n        this.render();\n    };\n    /**\n     * 创建 slider 组件\n     */\n    Slider.prototype.createSlider = function () {\n        var cfg = this.getSliderCfg();\n        // 添加 slider 组件\n        var component = new SliderComponent(__assign({ container: this.container }, cfg));\n        component.init();\n        return {\n            component: component,\n            layer: LAYER.FORE,\n            direction: DIRECTION.BOTTOM,\n            type: COMPONENT_TYPE.SLIDER,\n        };\n    };\n    /**\n     * 更新配置\n     */\n    Slider.prototype.updateSlider = function () {\n        var cfg = this.getSliderCfg();\n        if (this.width) {\n            var _a = this.getMinMaxText(this.start, this.end), minText = _a.minText, maxText = _a.maxText;\n            cfg = __assign(__assign({}, cfg), { width: this.width, start: this.start, end: this.end, minText: minText, maxText: maxText });\n        }\n        this.slider.component.update(cfg);\n        return this.slider;\n    };\n    /**\n     * 进行测量操作\n     */\n    Slider.prototype.measureSlider = function () {\n        var width = this.getSliderCfg().width;\n        this.width = width;\n    };\n    /**\n     * 生成 slider 配置\n     */\n    Slider.prototype.getSliderCfg = function () {\n        var cfg = {\n            height: 16,\n            start: 0,\n            end: 1,\n            minText: '',\n            maxText: '',\n            x: 0,\n            y: 0,\n            width: this.view.coordinateBBox.width,\n        };\n        if (isObject(this.option)) {\n            // 用户配置的数据，优先级更高\n            var trendCfg = __assign({ data: this.getData() }, get(this.option, 'trendCfg', {}));\n            // 因为有样式，所以深层覆盖\n            cfg = deepMix({}, cfg, this.getThemeOptions(), this.option);\n            // trendCfg 因为有数据数组，所以使用浅替换\n            cfg = __assign(__assign({}, cfg), { trendCfg: trendCfg });\n        }\n        cfg.start = clamp(Math.min(isNil(cfg.start) ? 0 : cfg.start, isNil(cfg.end) ? 1 : cfg.end), 0, 1);\n        cfg.end = clamp(Math.max(isNil(cfg.start) ? 0 : cfg.start, isNil(cfg.end) ? 1 : cfg.end), 0, 1);\n        return cfg;\n    };\n    /**\n     * 从 view 中获取数据，缩略轴使用全量的数据\n     */\n    Slider.prototype.getData = function () {\n        var data = this.view.getOptions().data;\n        var yScale = this.view.getYScales()[0];\n        var groupScales = this.view.getGroupScales();\n        if (groupScales.length) {\n            var _a = groupScales[0], field_1 = _a.field, ticks_1 = _a.ticks;\n            return data.reduce(function (pre, cur) {\n                if (cur[field_1] === ticks_1[0]) {\n                    pre.push(cur[yScale.field]);\n                }\n                return pre;\n            }, []);\n        }\n        return data.map(function (datum) { return datum[yScale.field] || 0; });\n    };\n    /**\n     * 获取 slider 的主题配置\n     */\n    Slider.prototype.getThemeOptions = function () {\n        var theme = this.view.getTheme();\n        return get(theme, ['components', 'slider', 'common'], {});\n    };\n    /**\n     * 根据 start/end 和当前数据计算出当前的 minText/maxText\n     * @param min\n     * @param max\n     */\n    Slider.prototype.getMinMaxText = function (min, max) {\n        var data = this.view.getOptions().data;\n        var xScale = this.view.getXScale();\n        var groupedData = groupBy(data, xScale.field);\n        var isHorizontal = true;\n        var xValues = isHorizontal ? keys(groupedData) : keys(groupedData).reverse();\n        var dataSize = size(data);\n        if (!xScale || !dataSize) {\n            return {}; // fix: 需要兼容，否则调用方直接取值会报错\n        }\n        var xTickCount = size(xValues);\n        var minIndex = Math.floor(min * (xTickCount - 1));\n        var maxIndex = Math.floor(max * (xTickCount - 1));\n        var minText = get(xValues, [minIndex]);\n        var maxText = get(xValues, [maxIndex]);\n        var formatter = this.getSliderCfg().formatter;\n        if (formatter) {\n            minText = formatter(minText, data[minIndex], minIndex);\n            maxText = formatter(maxText, data[maxIndex], maxIndex);\n        }\n        return {\n            minText: minText,\n            maxText: maxText,\n        };\n    };\n    /**\n     * 更新 view 过滤数据\n     * @param min\n     * @param max\n     */\n    Slider.prototype.changeViewData = function (min, max) {\n        var data = this.view.getOptions().data;\n        var xScale = this.view.getXScale();\n        var groupedData = groupBy(data, xScale.field);\n        var isHorizontal = true;\n        var xValues = isHorizontal ? keys(groupedData) : keys(groupedData).reverse();\n        var dataSize = size(data);\n        if (!xScale || !dataSize) {\n            return;\n        }\n        var xTickCount = size(xValues);\n        var minIndex = Math.floor(min * (xTickCount - 1));\n        var maxIndex = Math.floor(max * (xTickCount - 1));\n        // 增加 x 轴的过滤器\n        this.view.filter(xScale.field, function (value, datum) {\n            var idx = xValues.indexOf(value);\n            return idx > -1 ? isBetween(idx, minIndex, maxIndex) : true;\n        });\n        this.view.render(true);\n    };\n    /**\n     * 覆写父类方法\n     */\n    Slider.prototype.getComponents = function () {\n        return this.slider ? [this.slider] : [];\n    };\n    /**\n     * 覆盖父类\n     */\n    Slider.prototype.clear = function () {\n        if (this.slider) {\n            this.slider.component.destroy();\n            this.slider = undefined;\n        }\n        this.width = 0;\n        this.start = undefined;\n        this.end = undefined;\n    };\n    return Slider;\n}(Controller));\nexport default Slider;\n//# sourceMappingURL=slider.js.map","import { __assign, __extends } from \"tslib\";\nimport { deepMix, find, flatten, get, isArray, isEqual, isFunction, mix, isString, isBoolean } from '@antv/util';\nimport { Crosshair, HtmlTooltip } from '../../dependents';\nimport { getAngleByPoint, getDistanceToCenter, isPointInCoordinate } from '../../util/coordinate';\nimport { polarToCartesian } from '../../util/graphics';\nimport { findDataByPoint, getTooltipItems } from '../../util/tooltip';\nimport { BBox } from '../../util/bbox';\nimport { Controller } from './base';\nimport Event from '../event';\n// Filter duplicates, use `name`, `color`, `value` and `title` property values as condition\nfunction uniq(items) {\n    var uniqItems = [];\n    var _loop_1 = function (index) {\n        var item = items[index];\n        var result = find(uniqItems, function (subItem) {\n            return (subItem.color === item.color &&\n                subItem.name === item.name &&\n                subItem.value === item.value &&\n                subItem.title === item.title);\n        });\n        if (!result) {\n            uniqItems.push(item);\n        }\n    };\n    for (var index = 0; index < items.length; index++) {\n        _loop_1(index);\n    }\n    return uniqItems;\n}\n/** @ignore */\nvar Tooltip = /** @class */ (function (_super) {\n    __extends(Tooltip, _super);\n    function Tooltip() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isLocked = false;\n        return _this;\n    }\n    Object.defineProperty(Tooltip.prototype, \"name\", {\n        get: function () {\n            return 'tooltip';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Tooltip.prototype.init = function () { };\n    Tooltip.prototype.isVisible = function () {\n        var option = this.view.getOptions().tooltip;\n        return option !== false;\n    };\n    Tooltip.prototype.render = function () { };\n    /**\n     * Shows tooltip\n     * @param point\n     */\n    Tooltip.prototype.showTooltip = function (point) {\n        this.point = point;\n        if (!this.isVisible()) {\n            // 如果设置 tooltip(false) 则始终不显示\n            return;\n        }\n        var view = this.view;\n        var items = this.getTooltipItems(point);\n        if (!items.length) {\n            // 无内容则不展示，同时 tooltip 需要隐藏\n            this.hideTooltip();\n            return;\n        }\n        var title = this.getTitle(items);\n        var dataPoint = {\n            x: items[0].x,\n            y: items[0].y,\n        }; // 数据点位置\n        view.emit('tooltip:show', Event.fromData(view, 'tooltip:show', __assign({ items: items,\n            title: title }, point)));\n        var cfg = this.getTooltipCfg();\n        var follow = cfg.follow, showMarkers = cfg.showMarkers, showCrosshairs = cfg.showCrosshairs, showContent = cfg.showContent, marker = cfg.marker;\n        var lastItems = this.items;\n        var lastTitle = this.title;\n        if (!isEqual(lastTitle, title) || !isEqual(lastItems, items)) {\n            // 内容发生变化了更新 tooltip\n            view.emit('tooltip:change', Event.fromData(view, 'tooltip:change', __assign({ items: items,\n                title: title }, point)));\n            if (showContent) {\n                // 展示 tooltip 内容框才渲染 tooltip\n                if (!this.tooltip) {\n                    // 延迟生成\n                    this.renderTooltip();\n                }\n                this.tooltip.update(mix({}, cfg, {\n                    items: items,\n                    title: title,\n                }, follow ? point : {}));\n                this.tooltip.show();\n            }\n            if (showMarkers) {\n                // 展示 tooltipMarkers，tooltipMarkers 跟随数据\n                this.renderTooltipMarkers(items, marker);\n            }\n        }\n        else {\n            // 内容未发生变化，则更新位置\n            if (this.tooltip && follow) {\n                this.tooltip.update(point);\n                this.tooltip.show(); // tooltip 有可能被隐藏，需要保证显示状态\n            }\n            if (this.tooltipMarkersGroup) {\n                this.tooltipMarkersGroup.show();\n            }\n        }\n        this.items = items;\n        this.title = title;\n        if (showCrosshairs) {\n            // 展示 tooltip 辅助线\n            var isCrosshairsFollowCursor = get(cfg, ['crosshairs', 'follow'], false); // 辅助线是否要跟随鼠标\n            this.renderCrosshairs(isCrosshairsFollowCursor ? point : dataPoint, cfg);\n        }\n    };\n    Tooltip.prototype.hideTooltip = function () {\n        var follow = this.getTooltipCfg().follow;\n        if (!follow) {\n            this.point = null;\n            return;\n        }\n        // hide the tooltipMarkers\n        var tooltipMarkersGroup = this.tooltipMarkersGroup;\n        if (tooltipMarkersGroup) {\n            tooltipMarkersGroup.hide();\n        }\n        // hide crosshairs\n        var xCrosshair = this.xCrosshair;\n        var yCrosshair = this.yCrosshair;\n        if (xCrosshair) {\n            xCrosshair.hide();\n        }\n        if (yCrosshair) {\n            yCrosshair.hide();\n        }\n        var tooltip = this.tooltip;\n        if (tooltip) {\n            tooltip.hide();\n        }\n        this.view.emit('tooltip:hide', Event.fromData(this.view, 'tooltip:hide', {}));\n        this.point = null;\n    };\n    /**\n     * lockTooltip\n     */\n    Tooltip.prototype.lockTooltip = function () {\n        this.isLocked = true;\n        if (this.tooltip) {\n            // tooltip contianer 可捕获事件\n            this.tooltip.setCapture(true);\n        }\n    };\n    /**\n     * unlockTooltip\n     */\n    Tooltip.prototype.unlockTooltip = function () {\n        this.isLocked = false;\n        var cfg = this.getTooltipCfg();\n        if (this.tooltip) {\n            // 重置 capture 属性\n            this.tooltip.setCapture(cfg.capture);\n        }\n    };\n    /**\n     * isTooltipLocked\n     */\n    Tooltip.prototype.isTooltipLocked = function () {\n        return this.isLocked;\n    };\n    Tooltip.prototype.clear = function () {\n        var _a = this, tooltip = _a.tooltip, xCrosshair = _a.xCrosshair, yCrosshair = _a.yCrosshair, tooltipMarkersGroup = _a.tooltipMarkersGroup;\n        if (tooltip) {\n            tooltip.hide();\n            tooltip.clear();\n        }\n        if (xCrosshair) {\n            xCrosshair.clear();\n        }\n        if (yCrosshair) {\n            yCrosshair.clear();\n        }\n        if (tooltipMarkersGroup) {\n            tooltipMarkersGroup.clear();\n        }\n    };\n    Tooltip.prototype.destroy = function () {\n        if (this.tooltip) {\n            this.tooltip.destroy();\n        }\n        if (this.xCrosshair) {\n            this.xCrosshair.destroy();\n        }\n        if (this.yCrosshair) {\n            this.yCrosshair.destroy();\n        }\n        if (this.guideGroup) {\n            this.guideGroup.remove(true);\n        }\n        this.items = null;\n        this.title = null;\n        this.tooltipMarkersGroup = null;\n        this.tooltipCrosshairsGroup = null;\n        this.xCrosshair = null;\n        this.yCrosshair = null;\n        this.tooltip = null;\n        this.guideGroup = null;\n        this.isLocked = false;\n        this.point = null;\n    };\n    Tooltip.prototype.changeVisible = function (visible) {\n        if (this.visible === visible) {\n            return;\n        }\n        var _a = this, tooltip = _a.tooltip, tooltipMarkersGroup = _a.tooltipMarkersGroup, xCrosshair = _a.xCrosshair, yCrosshair = _a.yCrosshair;\n        if (visible) {\n            if (tooltip) {\n                tooltip.show();\n            }\n            if (tooltipMarkersGroup) {\n                tooltipMarkersGroup.show();\n            }\n            if (xCrosshair) {\n                xCrosshair.show();\n            }\n            if (yCrosshair) {\n                yCrosshair.show();\n            }\n        }\n        else {\n            if (tooltip) {\n                tooltip.hide();\n            }\n            if (tooltipMarkersGroup) {\n                tooltipMarkersGroup.hide();\n            }\n            if (xCrosshair) {\n                xCrosshair.hide();\n            }\n            if (yCrosshair) {\n                yCrosshair.hide();\n            }\n        }\n        this.visible = visible;\n    };\n    Tooltip.prototype.getTooltipItems = function (point) {\n        var items = this.findItemsFromView(this.view, point);\n        if (items.length) {\n            // 三层\n            items = flatten(items);\n            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n                var itemArr = items_1[_i];\n                for (var _a = 0, itemArr_1 = itemArr; _a < itemArr_1.length; _a++) {\n                    var item = itemArr_1[_a];\n                    var _b = item.mappingData, x = _b.x, y = _b.y;\n                    item.x = isArray(x) ? x[x.length - 1] : x;\n                    item.y = isArray(y) ? y[y.length - 1] : y;\n                }\n            }\n            var shared = this.getTooltipCfg().shared;\n            // shared: false 代表只显示当前拾取到的 shape 的数据，但是一个 view 会有多个 Geometry，所以有可能会拾取到多个 shape\n            if (shared === false && items.length > 1) {\n                var snapItem = items[0];\n                var min = Math.abs(point.y - snapItem[0].y);\n                for (var _c = 0, items_2 = items; _c < items_2.length; _c++) {\n                    var aItem = items_2[_c];\n                    var yDistance = Math.abs(point.y - aItem[0].y);\n                    if (yDistance <= min) {\n                        snapItem = aItem;\n                        min = yDistance;\n                    }\n                }\n                items = [snapItem];\n            }\n            return uniq(flatten(items));\n        }\n        return [];\n    };\n    Tooltip.prototype.layout = function () { };\n    Tooltip.prototype.update = function () {\n        if (this.point) {\n            this.showTooltip(this.point);\n        }\n        if (this.tooltip) {\n            // #2279 修复resize之后tooltip越界的问题\n            // 确保tooltip已经创建的情况下\n            var canvas = this.view.getCanvas();\n            // TODO 逍为 tooltip 的区域不应该是 canvas，而应该是整个 特别是在图比较小的时候\n            // 更新 region\n            this.tooltip.set('region', {\n                start: { x: 0, y: 0 },\n                end: { x: canvas.get('width'), y: canvas.get('height') },\n            });\n        }\n    };\n    /**\n     * 当前鼠标点是在 enter tooltip 中\n     * @param point\n     */\n    Tooltip.prototype.isCursorEntered = function (point) {\n        // 是可捕获的，并且点在 tooltip dom 上\n        if (this.tooltip) {\n            var el = this.tooltip.getContainer();\n            var capture = this.tooltip.get('capture');\n            if (el && capture) {\n                var _a = el.getBoundingClientRect(), x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n                return new BBox(x, y, width, height).isPointIn(point);\n            }\n        }\n        return false;\n    };\n    // 获取 tooltip 配置，因为用户可能会通过 view.tooltip() 重新配置 tooltip，所以就不做缓存，每次直接读取\n    Tooltip.prototype.getTooltipCfg = function () {\n        var view = this.view;\n        var option = view.getOptions().tooltip;\n        var processOption = this.processCustomContent(option);\n        var theme = view.getTheme();\n        var defaultCfg = get(theme, ['components', 'tooltip'], {});\n        var enterable = get(processOption, 'enterable', defaultCfg.enterable);\n        return deepMix({}, defaultCfg, processOption, {\n            capture: enterable || this.isLocked ? true : false,\n        });\n    };\n    // process customContent\n    Tooltip.prototype.processCustomContent = function (option) {\n        if (isBoolean(option) || !get(option, 'customContent')) {\n            return option;\n        }\n        var currentCustomContent = option.customContent;\n        var customContent = function (title, items) {\n            var content = currentCustomContent(title, items) || '';\n            return isString(content) ? '<div class=\"g2-tooltip\">' + content + '</div>' : content;\n        };\n        return __assign(__assign({}, option), { customContent: customContent });\n    };\n    Tooltip.prototype.getTitle = function (items) {\n        var title = items[0].title || items[0].name;\n        this.title = title;\n        return title;\n    };\n    Tooltip.prototype.renderTooltip = function () {\n        var canvas = this.view.getCanvas();\n        var region = {\n            start: { x: 0, y: 0 },\n            end: { x: canvas.get('width'), y: canvas.get('height') },\n        };\n        var cfg = this.getTooltipCfg();\n        var tooltip = new HtmlTooltip(__assign(__assign({ parent: canvas.get('el').parentNode, region: region }, cfg), { visible: false, crosshairs: null }));\n        tooltip.init();\n        this.tooltip = tooltip;\n    };\n    Tooltip.prototype.renderTooltipMarkers = function (items, marker) {\n        var tooltipMarkersGroup = this.getTooltipMarkersGroup();\n        for (var _i = 0, items_3 = items; _i < items_3.length; _i++) {\n            var item = items_3[_i];\n            var x = item.x, y = item.y;\n            var attrs = __assign(__assign({ fill: item.color, symbol: 'circle', shadowColor: item.color }, marker), { x: x,\n                y: y });\n            tooltipMarkersGroup.addShape('marker', {\n                attrs: attrs,\n            });\n        }\n    };\n    Tooltip.prototype.renderCrosshairs = function (point, cfg) {\n        var crosshairsType = get(cfg, ['crosshairs', 'type'], 'x'); // 默认展示 x 轴上的辅助线\n        if (crosshairsType === 'x') {\n            if (this.yCrosshair) {\n                this.yCrosshair.hide();\n            }\n            this.renderXCrosshairs(point, cfg);\n        }\n        else if (crosshairsType === 'y') {\n            if (this.xCrosshair) {\n                this.xCrosshair.hide();\n            }\n            this.renderYCrosshairs(point, cfg);\n        }\n        else if (crosshairsType === 'xy') {\n            this.renderXCrosshairs(point, cfg);\n            this.renderYCrosshairs(point, cfg);\n        }\n    };\n    // 渲染 x 轴上的 tooltip 辅助线\n    Tooltip.prototype.renderXCrosshairs = function (point, tooltipCfg) {\n        var coordinate = this.getViewWithGeometry(this.view).getCoordinate();\n        if (!isPointInCoordinate(coordinate, point)) {\n            return;\n        }\n        var start;\n        var end;\n        if (coordinate.isRect) {\n            if (coordinate.isTransposed) {\n                start = {\n                    x: coordinate.start.x,\n                    y: point.y,\n                };\n                end = {\n                    x: coordinate.end.x,\n                    y: point.y,\n                };\n            }\n            else {\n                start = {\n                    x: point.x,\n                    y: coordinate.end.y,\n                };\n                end = {\n                    x: point.x,\n                    y: coordinate.start.y,\n                };\n            }\n        }\n        else {\n            // 极坐标下 x 轴上的 crosshairs 表现为半径\n            var angle = getAngleByPoint(coordinate, point);\n            var center = coordinate.getCenter();\n            var radius = coordinate.getRadius();\n            end = polarToCartesian(center.x, center.y, radius, angle);\n            start = center;\n        }\n        var cfg = deepMix({\n            start: start,\n            end: end,\n            container: this.getTooltipCrosshairsGroup(),\n        }, get(tooltipCfg, 'crosshairs', {}), this.getCrosshairsText('x', point, tooltipCfg));\n        delete cfg.type; // 与 Crosshairs 组件的 type 冲突故删除\n        var xCrosshair = this.xCrosshair;\n        if (xCrosshair) {\n            xCrosshair.update(cfg);\n        }\n        else {\n            xCrosshair = new Crosshair.Line(cfg);\n            xCrosshair.init();\n        }\n        xCrosshair.render();\n        xCrosshair.show();\n        this.xCrosshair = xCrosshair;\n    };\n    // 渲染 y 轴上的辅助线\n    Tooltip.prototype.renderYCrosshairs = function (point, tooltipCfg) {\n        var coordinate = this.getViewWithGeometry(this.view).getCoordinate();\n        if (!isPointInCoordinate(coordinate, point)) {\n            return;\n        }\n        var cfg;\n        var type;\n        if (coordinate.isRect) {\n            var start = void 0;\n            var end = void 0;\n            if (coordinate.isTransposed) {\n                start = {\n                    x: point.x,\n                    y: coordinate.end.y,\n                };\n                end = {\n                    x: point.x,\n                    y: coordinate.start.y,\n                };\n            }\n            else {\n                start = {\n                    x: coordinate.start.x,\n                    y: point.y,\n                };\n                end = {\n                    x: coordinate.end.x,\n                    y: point.y,\n                };\n            }\n            cfg = {\n                start: start,\n                end: end,\n            };\n            type = 'Line';\n        }\n        else {\n            // 极坐标下 y 轴上的 crosshairs 表现为圆弧\n            cfg = {\n                center: coordinate.getCenter(),\n                // @ts-ignore\n                radius: getDistanceToCenter(coordinate, point),\n                startAngle: coordinate.startAngle,\n                endAngle: coordinate.endAngle,\n            };\n            type = 'Circle';\n        }\n        cfg = deepMix({\n            container: this.getTooltipCrosshairsGroup(),\n        }, cfg, get(tooltipCfg, 'crosshairs', {}), this.getCrosshairsText('y', point, tooltipCfg));\n        delete cfg.type; // 与 Crosshairs 组件的 type 冲突故删除\n        var yCrosshair = this.yCrosshair;\n        if (yCrosshair) {\n            // 如果坐标系发生直角坐标系与极坐标的切换操作\n            if ((coordinate.isRect && yCrosshair.get('type') === 'circle') ||\n                (!coordinate.isRect && yCrosshair.get('type') === 'line')) {\n                yCrosshair = new Crosshair[type](cfg);\n                yCrosshair.init();\n            }\n            else {\n                yCrosshair.update(cfg);\n            }\n        }\n        else {\n            yCrosshair = new Crosshair[type](cfg);\n            yCrosshair.init();\n        }\n        yCrosshair.render();\n        yCrosshair.show();\n        this.yCrosshair = yCrosshair;\n    };\n    Tooltip.prototype.getCrosshairsText = function (type, point, tooltipCfg) {\n        var textCfg = get(tooltipCfg, ['crosshairs', 'text']);\n        var follow = get(tooltipCfg, ['crosshairs', 'follow']);\n        var items = this.items;\n        if (textCfg) {\n            var view = this.getViewWithGeometry(this.view);\n            // 需要展示文本\n            var firstItem = items[0];\n            var xScale = view.getXScale();\n            var yScale = view.getYScales()[0];\n            var xValue = void 0;\n            var yValue = void 0;\n            if (follow) {\n                // 如果需要跟随鼠标移动，就需要将当前鼠标坐标点转换为对应的数值\n                var invertPoint = this.view.getCoordinate().invert(point);\n                xValue = xScale.invert(invertPoint.x); // 转换为原始值\n                yValue = yScale.invert(invertPoint.y); // 转换为原始值\n            }\n            else {\n                xValue = firstItem.data[xScale.field];\n                yValue = firstItem.data[yScale.field];\n            }\n            var content = type === 'x' ? xValue : yValue;\n            if (isFunction(textCfg)) {\n                textCfg = textCfg(type, content, items, point);\n            }\n            else {\n                textCfg.content = content;\n            }\n            return {\n                text: textCfg,\n            };\n        }\n    };\n    // 获取存储 tooltipMarkers 和 crosshairs 的容器\n    Tooltip.prototype.getGuideGroup = function () {\n        if (!this.guideGroup) {\n            var foregroundGroup = this.view.foregroundGroup;\n            this.guideGroup = foregroundGroup.addGroup({\n                name: 'tooltipGuide',\n                capture: false,\n            });\n        }\n        return this.guideGroup;\n    };\n    // 获取 tooltipMarkers 存储的容器\n    Tooltip.prototype.getTooltipMarkersGroup = function () {\n        var tooltipMarkersGroup = this.tooltipMarkersGroup;\n        if (tooltipMarkersGroup && !tooltipMarkersGroup.destroyed) {\n            tooltipMarkersGroup.clear();\n            tooltipMarkersGroup.show();\n        }\n        else {\n            tooltipMarkersGroup = this.getGuideGroup().addGroup({\n                name: 'tooltipMarkersGroup',\n            });\n            tooltipMarkersGroup.toFront();\n            this.tooltipMarkersGroup = tooltipMarkersGroup;\n        }\n        return tooltipMarkersGroup;\n    };\n    // 获取 tooltip crosshairs 存储的容器\n    Tooltip.prototype.getTooltipCrosshairsGroup = function () {\n        var tooltipCrosshairsGroup = this.tooltipCrosshairsGroup;\n        if (!tooltipCrosshairsGroup) {\n            tooltipCrosshairsGroup = this.getGuideGroup().addGroup({\n                name: 'tooltipCrosshairsGroup',\n                capture: false,\n            });\n            tooltipCrosshairsGroup.toBack();\n            this.tooltipCrosshairsGroup = tooltipCrosshairsGroup;\n        }\n        return tooltipCrosshairsGroup;\n    };\n    Tooltip.prototype.getTooltipItemsByHitShape = function (geometry, point, title) {\n        var result = [];\n        var container = geometry.container;\n        var shape = container.getShape(point.x, point.y);\n        if (shape && shape.get('visible') && shape.get('origin')) {\n            var mappingData = shape.get('origin').mappingData;\n            var items = getTooltipItems(mappingData, geometry, title);\n            if (items.length) {\n                result.push(items);\n            }\n        }\n        return result;\n    };\n    Tooltip.prototype.getTooltipItemsByFindData = function (geometry, point, title) {\n        var result = [];\n        var dataArray = geometry.dataArray;\n        geometry.sort(dataArray); // 先进行排序，便于 tooltip 查找\n        for (var _i = 0, dataArray_1 = dataArray; _i < dataArray_1.length; _i++) {\n            var data = dataArray_1[_i];\n            var record = findDataByPoint(point, data, geometry);\n            if (record) {\n                var elementId = geometry.getElementId(record);\n                var element = geometry.elementsMap[elementId];\n                if (geometry.type === 'heatmap' || element.visible) {\n                    // Heatmap 没有 Element\n                    // 如果图形元素隐藏了，怎不再 tooltip 上展示相关数据\n                    var items = getTooltipItems(record, geometry, title);\n                    if (items.length) {\n                        result.push(items);\n                    }\n                }\n            }\n        }\n        return result;\n    };\n    Tooltip.prototype.findItemsFromView = function (view, point) {\n        if (view.getOptions().tooltip === false) {\n            // 如果 view 关闭了 tooltip\n            return [];\n        }\n        var result = [];\n        // 先从 view 本身查找\n        var geometries = view.geometries;\n        var _a = this.getTooltipCfg(), shared = _a.shared, title = _a.title;\n        for (var _i = 0, geometries_1 = geometries; _i < geometries_1.length; _i++) {\n            var geometry = geometries_1[_i];\n            if (geometry.visible && geometry.tooltipOption !== false) {\n                // geometry 可见同时未关闭 tooltip\n                var geometryType = geometry.type;\n                var tooltipItems = void 0;\n                if (['point', 'edge', 'polygon'].includes(geometryType)) {\n                    // 始终通过图形拾取\n                    tooltipItems = this.getTooltipItemsByHitShape(geometry, point, title);\n                }\n                else if (['area', 'line', 'path', 'heatmap'].includes(geometryType)) {\n                    // 如果是 'area', 'line', 'path'，始终通过数据查找方法查找 tooltip\n                    tooltipItems = this.getTooltipItemsByFindData(geometry, point, title);\n                }\n                else {\n                    if (shared !== false) {\n                        tooltipItems = this.getTooltipItemsByFindData(geometry, point, title);\n                    }\n                    else {\n                        tooltipItems = this.getTooltipItemsByHitShape(geometry, point, title);\n                    }\n                }\n                if (tooltipItems.length) {\n                    // geometry 有可能会有多个 item，因为用户可以设置 geometry.tooltip('x*y*z')\n                    result.push(tooltipItems);\n                }\n            }\n        }\n        // 递归查找，并合并结果\n        for (var _b = 0, _c = view.views; _b < _c.length; _b++) {\n            var childView = _c[_b];\n            result = result.concat(this.findItemsFromView(childView, point));\n        }\n        return result;\n    };\n    // FIXME: hack 方法\n    // 因为 tooltip 的交互是挂载在 Chart 上，所以当chart 上没有绘制 Geometry 的时候，就查找不到数据，并且绘图区域同子 View 的区域不同\n    Tooltip.prototype.getViewWithGeometry = function (view) {\n        var _this = this;\n        if (view.geometries.length) {\n            return view;\n        }\n        return find(view.views, function (childView) { return _this.getViewWithGeometry(childView); });\n    };\n    return Tooltip;\n}(Controller));\nexport default Tooltip;\n//# sourceMappingURL=tooltip.js.map","import { __assign, __extends } from \"tslib\";\nimport { Controller } from './base';\nimport { Scrollbar as ScrollbarComponent } from '../../dependents';\nimport { BBox } from '../../util/bbox';\nimport { directionToPosition } from '../../util/direction';\nimport { COMPONENT_TYPE, DIRECTION, LAYER, VIEW_LIFE_CIRCLE } from '../../constant';\nimport { isObject, clamp, size, groupBy, throttle, noop, keys, get } from '@antv/util';\nimport { isBetween } from '../../util/helper';\nvar DEFAULT_PADDING = 0;\nvar DEFAULT_SIZE = 8;\nvar DEFAULT_CATEGORY_SIZE = 32;\nvar MIN_THUMB_LENGTH = 20;\nvar Scrollbar = /** @class */ (function (_super) {\n    __extends(Scrollbar, _super);\n    function Scrollbar(view) {\n        var _this = _super.call(this, view) || this;\n        _this.onChangeFn = noop;\n        _this.resetMeasure = function () {\n            _this.clear();\n        };\n        _this.onValueChange = function (_a) {\n            var ratio = _a.ratio;\n            var animate = _this.getValidScrollbarCfg().animate;\n            _this.ratio = clamp(ratio, 0, 1);\n            var originalAnimate = _this.view.getOptions().animate;\n            if (!animate) {\n                _this.view.animate(false);\n            }\n            _this.changeViewData(_this.getScrollRange(), true);\n            _this.view.animate(originalAnimate);\n        };\n        _this.container = _this.view.getLayer(LAYER.FORE).addGroup();\n        _this.onChangeFn = throttle(_this.onValueChange, 20, {\n            leading: true,\n        });\n        _this.trackLen = 0;\n        _this.thumbLen = 0;\n        _this.ratio = 0;\n        _this.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA, _this.resetMeasure);\n        _this.view.on(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE, _this.resetMeasure);\n        return _this;\n    }\n    Object.defineProperty(Scrollbar.prototype, \"name\", {\n        get: function () {\n            return 'scrollbar';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Scrollbar.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA, this.resetMeasure);\n        this.view.off(VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE, this.resetMeasure);\n    };\n    Scrollbar.prototype.init = function () { };\n    /**\n     * 渲染\n     */\n    Scrollbar.prototype.render = function () {\n        this.option = this.view.getOptions().scrollbar;\n        if (this.option) {\n            if (this.scrollbar) {\n                // exist, update\n                this.scrollbar = this.updateScrollbar();\n            }\n            else {\n                // not exist, create\n                this.scrollbar = this.createScrollbar();\n                this.scrollbar.component.on('scrollchange', this.onChangeFn);\n            }\n        }\n        else {\n            if (this.scrollbar) {\n                // exist, destroy\n                this.scrollbar.component.destroy();\n                this.scrollbar = undefined;\n            }\n        }\n    };\n    /**\n     * 布局\n     */\n    Scrollbar.prototype.layout = function () {\n        var _this = this;\n        if (this.option && !this.trackLen) {\n            this.measureScrollbar();\n            setTimeout(function () {\n                if (!_this.view.destroyed) {\n                    _this.changeViewData(_this.getScrollRange(), true);\n                }\n            });\n        }\n        if (this.scrollbar) {\n            var width = this.view.coordinateBBox.width;\n            var padding = this.scrollbar.component.get('padding');\n            var bboxObject = this.scrollbar.component.getLayoutBBox();\n            var bbox = new BBox(bboxObject.x, bboxObject.y, Math.min(bboxObject.width, width), bboxObject.height).expand(padding);\n            var cfg = this.getScrollbarComponentCfg();\n            var x = void 0;\n            var y = void 0;\n            if (cfg.isHorizontal) {\n                var _a = directionToPosition(this.view.viewBBox, bbox, DIRECTION.BOTTOM), x1 = _a[0], y1 = _a[1];\n                var _b = directionToPosition(this.view.coordinateBBox, bbox, DIRECTION.BOTTOM), x2 = _b[0], y2 = _b[1];\n                x = x2;\n                y = y1;\n            }\n            else {\n                var _c = directionToPosition(this.view.viewBBox, bbox, DIRECTION.RIGHT), x1 = _c[0], y1 = _c[1];\n                var _d = directionToPosition(this.view.viewBBox, bbox, DIRECTION.RIGHT), x2 = _d[0], y2 = _d[1];\n                x = x2;\n                y = y1;\n            }\n            x += padding[3];\n            y += padding[0];\n            // 默认放在 bottom\n            if (this.trackLen) {\n                this.scrollbar.component.update(__assign(__assign({}, cfg), { x: x,\n                    y: y, trackLen: this.trackLen, thumbLen: this.thumbLen, thumbOffset: (this.trackLen - this.thumbLen) * this.ratio }));\n            }\n            else {\n                this.scrollbar.component.update(__assign(__assign({}, cfg), { x: x,\n                    y: y }));\n            }\n            this.view.viewBBox = this.view.viewBBox.cut(bbox, cfg.isHorizontal ? DIRECTION.BOTTOM : DIRECTION.RIGHT);\n        }\n    };\n    /**\n     * 更新\n     */\n    Scrollbar.prototype.update = function () {\n        // 逻辑和 render 保持一致\n        this.render();\n    };\n    Scrollbar.prototype.getComponents = function () {\n        return this.scrollbar ? [this.scrollbar] : [];\n    };\n    Scrollbar.prototype.clear = function () {\n        if (this.scrollbar) {\n            this.scrollbar.component.destroy();\n            this.scrollbar = undefined;\n        }\n        this.trackLen = 0;\n        this.thumbLen = 0;\n        this.ratio = 0;\n        this.cnt = 0;\n        this.step = 0;\n        this.data = undefined;\n        this.xScaleCfg = undefined;\n        this.yScalesCfg = [];\n    };\n    /**\n     * 获取 scrollbar 的主题配置\n     */\n    Scrollbar.prototype.getThemeOptions = function () {\n        var theme = this.view.getTheme();\n        return get(theme, ['components', 'slider', 'common'], {});\n    };\n    Scrollbar.prototype.measureScrollbar = function () {\n        var xScale = this.view.getXScale();\n        var yScales = this.view.getYScales().slice();\n        this.data = this.view.getOptions().data;\n        this.step = this.getStep();\n        this.cnt = this.getCnt();\n        var _a = this.getScrollbarComponentCfg(), trackLen = _a.trackLen, thumbLen = _a.thumbLen;\n        this.trackLen = trackLen;\n        this.thumbLen = thumbLen;\n        this.xScaleCfg = {\n            field: xScale.field,\n            values: xScale.values || [],\n        };\n        this.yScalesCfg = yScales;\n    };\n    Scrollbar.prototype.getScrollRange = function () {\n        var startIdx = Math.floor((this.cnt - this.step) * clamp(this.ratio, 0, 1));\n        var endIdx = Math.min(startIdx + this.step - 1, this.cnt - 1);\n        return [startIdx, endIdx];\n    };\n    Scrollbar.prototype.changeViewData = function (_a, render) {\n        var _this = this;\n        var startIdx = _a[0], endIdx = _a[1];\n        var type = this.getValidScrollbarCfg().type;\n        var isHorizontal = type !== 'vertical';\n        var groupedData = groupBy(this.data, this.xScaleCfg.field);\n        var xValues = isHorizontal ? keys(groupedData) : keys(groupedData).reverse();\n        this.yScalesCfg.forEach(function (cfg) {\n            _this.view.scale(cfg.field, {\n                formatter: cfg.formatter,\n                type: cfg.type,\n                min: cfg.min,\n                max: cfg.max,\n            });\n        });\n        this.view.filter(this.xScaleCfg.field, function (val) {\n            var idx = xValues.indexOf(val);\n            return idx > -1 ? isBetween(idx, startIdx, endIdx) : true;\n        });\n        this.view.render(true);\n    };\n    Scrollbar.prototype.createScrollbar = function () {\n        var type = this.getValidScrollbarCfg().type;\n        var isHorizontal = type !== 'vertical';\n        var component = new ScrollbarComponent(__assign(__assign({ container: this.container }, this.getScrollbarComponentCfg()), { x: 0, y: 0 }));\n        component.init();\n        return {\n            component: component,\n            layer: LAYER.FORE,\n            direction: isHorizontal ? DIRECTION.BOTTOM : DIRECTION.RIGHT,\n            type: COMPONENT_TYPE.SCROLLBAR,\n        };\n    };\n    Scrollbar.prototype.updateScrollbar = function () {\n        var config = this.getScrollbarComponentCfg();\n        var realConfig = this.trackLen\n            ? __assign(__assign({}, config), { trackLen: this.trackLen, thumbLen: this.thumbLen, thumbOffset: (this.trackLen - this.thumbLen) * this.ratio }) : __assign({}, config);\n        this.scrollbar.component.update(realConfig);\n        return this.scrollbar;\n    };\n    Scrollbar.prototype.getStep = function () {\n        if (this.step) {\n            return this.step;\n        }\n        var coordinateBBox = this.view.coordinateBBox;\n        var _a = this.getValidScrollbarCfg(), type = _a.type, categorySize = _a.categorySize;\n        var isHorizontal = type !== 'vertical';\n        return Math.floor((isHorizontal ? coordinateBBox.width : coordinateBBox.height) / categorySize);\n    };\n    Scrollbar.prototype.getCnt = function () {\n        if (this.cnt) {\n            return this.cnt;\n        }\n        var xScale = this.view.getXScale();\n        var data = this.view.getOptions().data;\n        var groupedData = groupBy(data, xScale.field);\n        return size(keys(groupedData));\n    };\n    Scrollbar.prototype.getScrollbarComponentCfg = function () {\n        var _a = this.view, coordinateBBox = _a.coordinateBBox, viewBBox = _a.viewBBox;\n        var xScale = this.view.getXScale();\n        var _b = this.getValidScrollbarCfg(), type = _b.type, padding = _b.padding, width = _b.width, height = _b.height;\n        var isHorizontal = type !== 'vertical';\n        var paddingTop = padding[0], paddingRight = padding[1], paddingBottom = padding[2], paddingLeft = padding[3];\n        var position = isHorizontal\n            ? {\n                x: coordinateBBox.minX + paddingLeft,\n                y: viewBBox.maxY - height - paddingBottom,\n            }\n            : {\n                x: viewBBox.maxX - width - paddingRight,\n                y: coordinateBBox.minY + paddingTop,\n            };\n        var step = this.getStep();\n        var cnt = this.getCnt();\n        var trackLen = isHorizontal\n            ? coordinateBBox.width - paddingLeft - paddingRight\n            : coordinateBBox.height - paddingTop - paddingBottom;\n        var thumbLen = Math.max(trackLen * clamp(step / cnt, 0, 1), MIN_THUMB_LENGTH);\n        return __assign(__assign({}, this.getThemeOptions()), { x: position.x, y: position.y, size: isHorizontal ? height : width, isHorizontal: isHorizontal,\n            trackLen: trackLen,\n            thumbLen: thumbLen, thumbOffset: 0 });\n    };\n    /**\n     * 填充一些默认的配置项目\n     */\n    Scrollbar.prototype.getValidScrollbarCfg = function () {\n        var cfg = {\n            type: 'horizontal',\n            categorySize: DEFAULT_CATEGORY_SIZE,\n            width: DEFAULT_SIZE,\n            height: DEFAULT_SIZE,\n            padding: [0, 0, 0, 0],\n            animate: true,\n        };\n        if (isObject(this.option)) {\n            cfg = __assign(__assign({}, cfg), this.option);\n        }\n        if (!isObject(this.option) || !this.option.padding) {\n            cfg.padding =\n                cfg.type === 'horizontal' ? [DEFAULT_PADDING, 0, DEFAULT_PADDING, 0] : [0, DEFAULT_PADDING, 0, DEFAULT_PADDING];\n        }\n        return cfg;\n    };\n    return Scrollbar;\n}(Controller));\nexport default Scrollbar;\n//# sourceMappingURL=scrollbar.js.map","import { __extends } from \"tslib\";\nimport { each, head, isEqual, last } from '@antv/util';\nimport { getAngle, getSectorPath } from '../../util/graphics';\nimport Action from './base';\n/**\n * 背景框的 Action\n * @ignore\n */\nvar ActiveRegion = /** @class */ (function (_super) {\n    __extends(ActiveRegion, _super);\n    function ActiveRegion() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 显示\n     */\n    ActiveRegion.prototype.show = function () {\n        var view = this.context.view;\n        var ev = this.context.event;\n        var tooltipItems = view.getTooltipItems({\n            x: ev.x,\n            y: ev.y,\n        });\n        if (isEqual(tooltipItems, this.items)) {\n            // 如果拾取数据同上次相同，则不重复绘制\n            return;\n        }\n        this.items = tooltipItems;\n        if (tooltipItems.length) {\n            var xField_1 = view.getXScale().field;\n            var xValue_1 = tooltipItems[0].data[xField_1];\n            // 根据 x 对应的值查找 elements\n            var elements_1 = [];\n            var geometries = view.geometries;\n            each(geometries, function (geometry) {\n                if (geometry.type === 'interval' || geometry.type === 'schema') {\n                    var result = geometry.getElementsBy(function (ele) {\n                        var eleData = ele.getData();\n                        return eleData[xField_1] === xValue_1;\n                    });\n                    elements_1 = elements_1.concat(result);\n                }\n            });\n            // 根据 bbox 计算背景框的面积区域\n            if (elements_1.length) {\n                var coordinate_1 = view.getCoordinate();\n                var firstBBox_1 = elements_1[0].shape.getCanvasBBox();\n                var lastBBox_1 = elements_1[0].shape.getCanvasBBox();\n                var groupBBox_1 = firstBBox_1;\n                each(elements_1, function (ele) {\n                    var bbox = ele.shape.getCanvasBBox();\n                    if (coordinate_1.isTransposed) {\n                        if (bbox.minY < firstBBox_1.minY) {\n                            firstBBox_1 = bbox;\n                        }\n                        if (bbox.maxY > lastBBox_1.maxY) {\n                            lastBBox_1 = bbox;\n                        }\n                    }\n                    else {\n                        if (bbox.minX < firstBBox_1.minX) {\n                            firstBBox_1 = bbox;\n                        }\n                        if (bbox.maxX > lastBBox_1.maxX) {\n                            lastBBox_1 = bbox;\n                        }\n                    }\n                    groupBBox_1.x = Math.min(bbox.minX, groupBBox_1.minX);\n                    groupBBox_1.y = Math.min(bbox.minY, groupBBox_1.minY);\n                    groupBBox_1.width = Math.max(bbox.maxX, groupBBox_1.maxX) - groupBBox_1.x;\n                    groupBBox_1.height = Math.max(bbox.maxY, groupBBox_1.maxY) - groupBBox_1.y;\n                });\n                var backgroundGroup = view.backgroundGroup, coordinateBBox = view.coordinateBBox;\n                var path = void 0;\n                if (coordinate_1.isRect) {\n                    var xScale = view.getXScale();\n                    var appendRatio = xScale.isLinear ? 0 : 0.25; // 如果 x 轴是数值类型，如直方图，不需要家额外的宽度\n                    var minX = void 0;\n                    var minY = void 0;\n                    var width = void 0;\n                    var height = void 0;\n                    if (coordinate_1.isTransposed) {\n                        minX = coordinateBBox.minX;\n                        minY = Math.min(lastBBox_1.minY, firstBBox_1.minY) - appendRatio * lastBBox_1.height;\n                        width = coordinateBBox.width;\n                        height = groupBBox_1.height + appendRatio * 2 * lastBBox_1.height;\n                    }\n                    else {\n                        minX = Math.min(firstBBox_1.minX, lastBBox_1.minX) - appendRatio * firstBBox_1.width;\n                        minY = Math.min(coordinateBBox.minY, firstBBox_1.minY);\n                        width = groupBBox_1.width + appendRatio * 2 * firstBBox_1.width;\n                        height = coordinateBBox.height;\n                    }\n                    path = [\n                        ['M', minX, minY],\n                        ['L', minX + width, minY],\n                        ['L', minX + width, minY + height],\n                        ['L', minX, minY + height],\n                        ['Z'],\n                    ];\n                }\n                else {\n                    var firstElement = head(elements_1);\n                    var lastElement = last(elements_1);\n                    var startAngle = getAngle(firstElement.getModel(), coordinate_1).startAngle;\n                    var endAngle = getAngle(lastElement.getModel(), coordinate_1).endAngle;\n                    var center = coordinate_1.getCenter();\n                    var radius = coordinate_1.getRadius();\n                    var innterRadius = coordinate_1.innerRadius * radius;\n                    path = getSectorPath(center.x, center.y, radius, startAngle, endAngle, innterRadius);\n                }\n                if (this.regionPath) {\n                    this.regionPath.attr('path', path);\n                    this.regionPath.show();\n                }\n                else {\n                    this.regionPath = backgroundGroup.addShape({\n                        type: 'path',\n                        name: 'active-region',\n                        capture: false,\n                        attrs: {\n                            path: path,\n                            fill: '#CCD6EC',\n                            opacity: 0.3,\n                        },\n                    });\n                }\n            }\n        }\n    };\n    /**\n     * 隐藏\n     */\n    ActiveRegion.prototype.hide = function () {\n        if (this.regionPath) {\n            this.regionPath.hide();\n        }\n        // this.regionPath = null;\n        this.items = null;\n    };\n    /**\n     * 销毁\n     */\n    ActiveRegion.prototype.destroy = function () {\n        this.hide();\n        if (this.regionPath) {\n            this.regionPath.remove(true);\n        }\n        _super.prototype.destroy.call(this);\n    };\n    return ActiveRegion;\n}(Action));\nexport default ActiveRegion;\n//# sourceMappingURL=active-region.js.map","import { __extends } from \"tslib\";\nimport { isEqual, get } from '@antv/util';\nimport Action from '../../base';\n/**\n * Tooltip 展示隐藏的 Action\n * @ignore\n */\nvar TooltipAction = /** @class */ (function (_super) {\n    __extends(TooltipAction, _super);\n    function TooltipAction() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.timeStamp = 0;\n        return _this;\n    }\n    /**\n     * 显示 Tooltip\n     * @returns\n     */\n    TooltipAction.prototype.show = function () {\n        var context = this.context;\n        var ev = context.event;\n        var view = context.view;\n        var isTooltipLocked = view.isTooltipLocked();\n        if (isTooltipLocked) {\n            // 锁定时不移动 tooltip\n            return;\n        }\n        var lastTimeStamp = this.timeStamp;\n        var timeStamp = +new Date();\n        // 在 showDelay 毫秒（默认 16ms）内到 tooltip 上可以实现 enterable（调参工程师）\n        var showDelay = get(context.view.getOptions(), 'tooltip.showDelay', 16);\n        if (timeStamp - lastTimeStamp > showDelay) {\n            var preLoc = this.location;\n            var curLoc = { x: ev.x, y: ev.y };\n            if (!preLoc || !isEqual(preLoc, curLoc)) {\n                this.showTooltip(view, curLoc);\n            }\n            this.timeStamp = timeStamp;\n            this.location = curLoc;\n        }\n    };\n    /**\n     * 隐藏 Tooltip。\n     * @returns\n     */\n    TooltipAction.prototype.hide = function () {\n        var view = this.context.view;\n        var tooltip = view.getController('tooltip');\n        var _a = this.context.event, clientX = _a.clientX, clientY = _a.clientY;\n        // 如果已经 enterable + 已经在 tooltip 上，那么不隐藏\n        if (tooltip.isCursorEntered({ x: clientX, y: clientY })) {\n            return;\n        }\n        // 锁定 tooltip 时不隐藏\n        if (view.isTooltipLocked()) {\n            return;\n        }\n        this.hideTooltip(view);\n        this.location = null;\n    };\n    TooltipAction.prototype.showTooltip = function (view, point) {\n        // 相同位置不重复展示\n        view.showTooltip(point);\n    };\n    TooltipAction.prototype.hideTooltip = function (view) {\n        view.hideTooltip();\n    };\n    return TooltipAction;\n}(Action));\nexport default TooltipAction;\n//# sourceMappingURL=geometry.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { getSiblingPoint, getSilbings } from '../../util';\nimport TooltipAction from './geometry';\n/**\n * 存在多个 view 时，控制其他 view 上的 tooltip 显示\n * @ignore\n */\nvar SiblingTooltip = /** @class */ (function (_super) {\n    __extends(SiblingTooltip, _super);\n    function SiblingTooltip() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 所有同一层级的 tooltip 显示\n     * @param view\n     * @param point\n     */\n    SiblingTooltip.prototype.showTooltip = function (view, point) {\n        var siblings = getSilbings(view);\n        each(siblings, function (sibling) {\n            var siblingPoint = getSiblingPoint(view, sibling, point);\n            sibling.showTooltip(siblingPoint);\n        });\n    };\n    /**\n     * 隐藏同一层级的 tooltip\n     * @param view\n     */\n    SiblingTooltip.prototype.hideTooltip = function (view) {\n        var siblings = getSilbings(view);\n        each(siblings, function (sibling) {\n            sibling.hideTooltip();\n        });\n    };\n    return SiblingTooltip;\n}(TooltipAction));\nexport default SiblingTooltip;\n//# sourceMappingURL=sibling.js.map","import { __assign, __extends } from \"tslib\";\nimport { isEqual, get } from '@antv/util';\nimport Action from '../../base';\nimport { HtmlTooltip } from '../../../../dependents';\n/**\n * 用于组件文本省略后需要展示完整信息的 Tooltip Action\n * @ignore\n */\nvar EllipsisText = /** @class */ (function (_super) {\n    __extends(EllipsisText, _super);\n    function EllipsisText() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.timeStamp = 0;\n        return _this;\n    }\n    EllipsisText.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.tooltip && this.tooltip.destroy();\n    };\n    /**\n     * 显示 Tooltip\n     * @returns\n     */\n    EllipsisText.prototype.show = function () {\n        var context = this.context;\n        var ev = context.event;\n        var lastTimeStamp = this.timeStamp;\n        var timeStamp = +new Date();\n        if (timeStamp - lastTimeStamp > 16) {\n            var preLoc = this.location;\n            var curLoc = { x: ev.x, y: ev.y };\n            if (!preLoc || !isEqual(preLoc, curLoc)) {\n                this.showTooltip(curLoc);\n            }\n            this.timeStamp = timeStamp;\n            this.location = curLoc;\n        }\n    };\n    /**\n     * 隐藏 Tooltip。\n     * @returns\n     */\n    EllipsisText.prototype.hide = function () {\n        this.hideTooltip();\n        this.location = null;\n    };\n    EllipsisText.prototype.showTooltip = function (curLoc) {\n        var context = this.context;\n        var ev = context.event;\n        var target = ev.target;\n        if (target && target.get('tip')) {\n            if (!this.tooltip) {\n                this.renderTooltip(); // 延迟生成\n            }\n            var tipContent = target.get('tip');\n            // 展示 tooltip\n            this.tooltip.update(__assign({ title: tipContent }, curLoc));\n            this.tooltip.show();\n        }\n    };\n    EllipsisText.prototype.hideTooltip = function () {\n        this.tooltip && this.tooltip.hide();\n    };\n    EllipsisText.prototype.renderTooltip = function () {\n        var view = this.context.view;\n        var canvas = view.canvas;\n        var region = {\n            start: { x: 0, y: 0 },\n            end: { x: canvas.get('width'), y: canvas.get('height') },\n        };\n        var theme = view.getTheme();\n        var tooltipStyles = get(theme, ['components', 'tooltip', 'domStyles'], {}); // 获取 tooltip 样式\n        var tooltip = new HtmlTooltip({\n            parent: canvas.get('el').parentNode,\n            region: region,\n            visible: false,\n            crosshairs: null,\n            domStyles: tooltipStyles,\n        });\n        tooltip.init();\n        tooltip.setCapture(false); // 不允许捕获事件\n        this.tooltip = tooltip;\n    };\n    return EllipsisText;\n}(Action));\nexport default EllipsisText;\n//# sourceMappingURL=ellipsis-text.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\nimport { getElementsByState } from '../util';\n/**\n * 状态量 Action 的基类\n * @abstract\n * @class\n * @ignore\n */\nvar StateBase = /** @class */ (function (_super) {\n    __extends(StateBase, _super);\n    function StateBase() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * 状态名称\n         */\n        _this.stateName = '';\n        return _this;\n    }\n    /**\n     * 是否具有某个状态\n     * @param element 图表 Element 元素\n     */\n    StateBase.prototype.hasState = function (element) {\n        return element.hasState(this.stateName);\n    };\n    /**\n     * 设置状态激活\n     * @param enable 状态值\n     */\n    StateBase.prototype.setElementState = function (element, enable) {\n        // 防止闪烁\n        element.setState(this.stateName, enable);\n    };\n    /**\n     * 设置状态\n     */\n    StateBase.prototype.setState = function () {\n        this.setStateEnable(true);\n    };\n    /**\n     * 清除所有 Element 的状态\n     */\n    StateBase.prototype.clear = function () {\n        var view = this.context.view;\n        this.clearViewState(view);\n    };\n    StateBase.prototype.clearViewState = function (view) {\n        var _this = this;\n        var elements = getElementsByState(view, this.stateName);\n        each(elements, function (el) {\n            _this.setElementState(el, false);\n        });\n    };\n    return StateBase;\n}(Action));\nexport default StateBase;\n//# sourceMappingURL=state-base.js.map","import { __extends } from \"tslib\";\nimport { each, isNil, get } from '@antv/util';\nimport { getCurrentElement, getDelegationObject, getElements, getElementValue, getScaleByField, isElementChange, isList, } from '../util';\nimport StateBase from './state-base';\nfunction getItem(shape) {\n    return get(shape.get('delegateObject'), 'item');\n}\n/**\n * 状态量 Action 的基类，允许多个 Element 同时拥有某个状态\n * @class\n * @ignore\n */\nvar ElementState = /** @class */ (function (_super) {\n    __extends(ElementState, _super);\n    function ElementState() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.ignoreListItemStates = ['unchecked'];\n        return _this;\n    }\n    // 是否忽略触发的列表项\n    ElementState.prototype.isItemIgnore = function (item, list) {\n        var states = this.ignoreListItemStates;\n        var filtered = states.filter(function (state) {\n            return list.hasState(item, state);\n        });\n        return !!filtered.length;\n    };\n    // 设置由组件选项导致的状态变化\n    ElementState.prototype.setStateByComponent = function (component, item, enable) {\n        var view = this.context.view;\n        var field = component.get('field');\n        var elements = getElements(view);\n        this.setElementsStateByItem(elements, field, item, enable);\n    };\n    // 处理触发源由 element 导致的状态变化\n    ElementState.prototype.setStateByElement = function (element, enable) {\n        this.setElementState(element, enable);\n    };\n    /** 组件的选项是否同 element 匹配 */\n    ElementState.prototype.isMathItem = function (element, field, item) {\n        var view = this.context.view;\n        var scale = getScaleByField(view, field);\n        var value = getElementValue(element, field);\n        return !isNil(value) && item.name === scale.getText(value);\n    };\n    ElementState.prototype.setElementsStateByItem = function (elements, field, item, enable) {\n        var _this = this;\n        each(elements, function (el) {\n            if (_this.isMathItem(el, field, item)) {\n                el.setState(_this.stateName, enable);\n            }\n        });\n    };\n    /** 设置状态是否激活 */\n    ElementState.prototype.setStateEnable = function (enable) {\n        var element = getCurrentElement(this.context);\n        if (element) {\n            // 触发源由于 element 导致\n            if (isElementChange(this.context)) {\n                this.setStateByElement(element, enable);\n            }\n        }\n        else {\n            // 触发源由组件导致\n            var delegateObject = getDelegationObject(this.context);\n            // 如果触发源时列表，图例、坐标轴\n            if (isList(delegateObject)) {\n                var item = delegateObject.item, component = delegateObject.component;\n                if (item && component && !this.isItemIgnore(item, component)) {\n                    var event_1 = this.context.event.gEvent;\n                    // 防止闪烁\n                    if (event_1 && event_1.fromShape && event_1.toShape && getItem(event_1.fromShape) === getItem(event_1.toShape)) {\n                        return;\n                    }\n                    this.setStateByComponent(component, item, enable);\n                }\n            }\n        }\n    };\n    /**\n     * 切换状态\n     */\n    ElementState.prototype.toggle = function () {\n        var element = getCurrentElement(this.context);\n        if (element) {\n            var hasState = element.hasState(this.stateName);\n            this.setElementState(element, !hasState);\n        }\n    };\n    /**\n     * 取消当前时间影响的状态\n     */\n    ElementState.prototype.reset = function () {\n        this.setStateEnable(false);\n    };\n    return ElementState;\n}(StateBase));\nexport default ElementState;\n//# sourceMappingURL=state.js.map","import { __extends } from \"tslib\";\nimport StateAction from './state';\n/**\n * 元素 active 的 Action，允许多个元素同时 active\n * @class\n * @ignore\n */\nvar ElementActive = /** @class */ (function (_super) {\n    __extends(ElementActive, _super);\n    function ElementActive() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'active';\n        return _this;\n    }\n    /**\n     * Active Element\n     */\n    ElementActive.prototype.active = function () {\n        this.setState();\n    };\n    return ElementActive;\n}(StateAction));\nexport default ElementActive;\n//# sourceMappingURL=active.js.map","import { __extends } from \"tslib\";\nimport Action from '../base';\nimport { getCurrentElement, getElementValue, getElementsByField } from '../util';\nimport { each } from '@antv/util';\n/**\n * Link Elements by color\n * @ignore\n */\nvar LinkByColor = /** @class */ (function (_super) {\n    __extends(LinkByColor, _super);\n    function LinkByColor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.cache = {};\n        return _this;\n    }\n    // 获取颜色对应的 scale\n    LinkByColor.prototype.getColorScale = function (view, element) {\n        var colorAttr = element.geometry.getAttribute('color');\n        if (!colorAttr) {\n            return null;\n        }\n        var scale = view.getScaleByField(colorAttr.getFields()[0]);\n        return scale;\n    };\n    // 获取连接的 path\n    LinkByColor.prototype.getLinkPath = function (element, nextElement) {\n        var bbox = element.shape.getCanvasBBox();\n        var nextBBox = nextElement.shape.getCanvasBBox();\n        var path = [\n            ['M', bbox.maxX, bbox.minY],\n            ['L', nextBBox.minX, nextBBox.minY],\n            ['L', nextBBox.minX, nextBBox.maxY],\n            ['L', bbox.maxX, bbox.maxY],\n            ['Z'],\n        ];\n        return path;\n    };\n    // 添加连接的图形\n    LinkByColor.prototype.addLinkShape = function (group, element, nextElement) {\n        group.addShape({\n            type: 'path',\n            attrs: {\n                opacity: 0.4,\n                fill: element.shape.attr('fill'),\n                path: this.getLinkPath(element, nextElement),\n            },\n        });\n    };\n    // 使用图形连接\n    LinkByColor.prototype.linkByElement = function (element) {\n        var _this = this;\n        var view = this.context.view;\n        var scale = this.getColorScale(view, element);\n        if (!scale) {\n            return;\n        }\n        var value = getElementValue(element, scale.field);\n        if (!this.cache[value]) {\n            var elements_1 = getElementsByField(view, scale.field, value);\n            var linkGroup = this.linkGroup;\n            var group_1 = linkGroup.addGroup();\n            this.cache[value] = group_1; // 缓存\n            var count_1 = elements_1.length;\n            each(elements_1, function (el, index) {\n                if (index < count_1 - 1) {\n                    var nextEl = elements_1[index + 1];\n                    _this.addLinkShape(group_1, el, nextEl);\n                }\n            });\n        }\n    };\n    // 移除连接\n    LinkByColor.prototype.removeLink = function (element) {\n        var scale = this.getColorScale(this.context.view, element);\n        if (!scale) {\n            return;\n        }\n        var value = getElementValue(element, scale.field);\n        if (this.cache[value]) {\n            this.cache[value].remove();\n            this.cache[value] = null;\n        }\n    };\n    /**\n     * 连接 elements\n     */\n    LinkByColor.prototype.link = function () {\n        var context = this.context;\n        if (!this.linkGroup) {\n            // 不允许被拾取\n            this.linkGroup = context.view.foregroundGroup.addGroup({\n                capture: false,\n            });\n        }\n        var element = getCurrentElement(context);\n        if (element) {\n            this.linkByElement(element);\n        }\n    };\n    /**\n     * 取消连接 elements\n     */\n    LinkByColor.prototype.unlink = function () {\n        var element = getCurrentElement(this.context);\n        if (element) {\n            this.removeLink(element);\n        }\n    };\n    /**\n     * 清除所有连接\n     */\n    LinkByColor.prototype.clear = function () {\n        if (this.linkGroup) {\n            this.linkGroup.clear();\n        }\n    };\n    /**\n     * 销毁\n     */\n    LinkByColor.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.linkGroup) {\n            this.linkGroup.remove();\n        }\n    };\n    return LinkByColor;\n}(Action));\nexport default LinkByColor;\n//# sourceMappingURL=link-by-color.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { getElements, getIntersectElements, getMaskedElements, getSiblingMaskElements, getSilbings, isInRecords, isMask, } from '../util';\nimport StateBase from './state-base';\n/**\n * @ignore\n * 区域设置状态的基础 Action\n */\nvar ElementRangeState = /** @class */ (function (_super) {\n    __extends(ElementRangeState, _super);\n    function ElementRangeState() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.startPoint = null;\n        _this.endPoint = null;\n        _this.isStarted = false;\n        /**\n         * 是否作用于当前 view 的 siblings，默认是 false 仅作用于自己\n         */\n        _this.effectSiblings = false;\n        /**\n         * 是否受 element 的数据影响，还是受包围盒的影响\n         */\n        _this.effectByRecord = false;\n        return _this;\n    }\n    // 获取当前的位置\n    ElementRangeState.prototype.getCurrentPoint = function () {\n        var event = this.context.event;\n        return {\n            x: event.x,\n            y: event.y,\n        };\n    };\n    /**\n     * 开始，记录开始选中的位置\n     */\n    ElementRangeState.prototype.start = function () {\n        this.clear(); // 开始的时候清理之前的状态\n        this.startPoint = this.getCurrentPoint();\n        this.isStarted = true;\n    };\n    ElementRangeState.prototype.getIntersectElements = function () {\n        var elements = null;\n        if (isMask(this.context)) {\n            elements = getMaskedElements(this.context, 10);\n        }\n        else {\n            var startPoint = this.startPoint;\n            var endPoint = this.isStarted ? this.getCurrentPoint() : this.endPoint;\n            // 如果没有开始，则不允许范围设置状态，保护性质\n            if (!startPoint || !endPoint) {\n                return;\n            }\n            // 计算框选区域\n            var box = {\n                minX: Math.min(startPoint.x, endPoint.x),\n                minY: Math.min(startPoint.y, endPoint.y),\n                maxX: Math.max(startPoint.x, endPoint.x),\n                maxY: Math.max(startPoint.y, endPoint.y),\n            };\n            // this.clear(); // 不全部清理，会导致闪烁\n            var view = this.context.view;\n            elements = getIntersectElements(view, box);\n        }\n        return elements;\n    };\n    /**\n     * 选中\n     */\n    ElementRangeState.prototype.setStateEnable = function (enable) {\n        if (this.effectSiblings && !this.effectByRecord) {\n            this.setSiblingsState(enable);\n        }\n        else {\n            var allElements = getElements(this.context.view);\n            var elements = this.getIntersectElements();\n            if (elements && elements.length) {\n                if (this.effectByRecord) {\n                    this.setSiblingsStateByRecord(elements, enable);\n                }\n                else {\n                    this.setElementsState(elements, enable, allElements);\n                }\n            }\n            else {\n                this.clear();\n            }\n        }\n    };\n    // 根据选中的 element 的数据进行设置状态\n    ElementRangeState.prototype.setSiblingsStateByRecord = function (elements, enable) {\n        var _this = this;\n        var view = this.context.view;\n        var siblings = getSilbings(view);\n        var records = elements.map(function (el) {\n            return el.getModel().data;\n        });\n        var xFiled = view.getXScale().field;\n        var yField = view.getYScales()[0].field;\n        each(siblings, function (sibling) {\n            var allElements = getElements(sibling);\n            var effectElements = allElements.filter(function (el) {\n                var record = el.getModel().data;\n                return isInRecords(records, record, xFiled, yField);\n            });\n            _this.setElementsState(effectElements, enable, allElements);\n        });\n    };\n    // 设置兄弟 view 的状态\n    ElementRangeState.prototype.setSiblingsState = function (enable) {\n        var _this = this;\n        var view = this.context.view;\n        var siblings = getSilbings(view);\n        if (isMask(this.context)) {\n            // 受 mask 影响\n            each(siblings, function (sibling) {\n                var allElements = getElements(sibling);\n                var effectElements = getSiblingMaskElements(_this.context, sibling, 10);\n                if (effectElements && effectElements.length) {\n                    _this.setElementsState(effectElements, enable, allElements);\n                }\n                else {\n                    _this.clearViewState(sibling);\n                }\n            });\n        }\n    };\n    ElementRangeState.prototype.setElementsState = function (elements, enable, allElements) {\n        var _this = this;\n        each(allElements, function (el) {\n            if (!elements.includes(el)) {\n                _this.setElementState(el, false);\n            }\n            else {\n                _this.setElementState(el, enable);\n            }\n        });\n    };\n    /**\n     * 结束\n     */\n    ElementRangeState.prototype.end = function () {\n        this.isStarted = false;\n        this.endPoint = this.getCurrentPoint();\n    };\n    // 复写 clear\n    ElementRangeState.prototype.clear = function () {\n        var _this = this;\n        var view = this.context.view;\n        // 判断是否影响 siblings\n        if (this.effectSiblings) {\n            var siblings = getSilbings(view);\n            each(siblings, function (sibling) {\n                _this.clearViewState(sibling);\n            });\n        }\n        else {\n            this.clearViewState(view);\n        }\n    };\n    return ElementRangeState;\n}(StateBase));\nexport default ElementRangeState;\n//# sourceMappingURL=range-state.js.map","import { __extends } from \"tslib\";\nimport ElementRangeState from './range-state';\n/**\n * @ignore\n * 图表元素区域 Active 的 Action\n */\nvar ElementRangeActive = /** @class */ (function (_super) {\n    __extends(ElementRangeActive, _super);\n    function ElementRangeActive() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'active';\n        return _this;\n    }\n    /**\n     * 图表元素 Active\n     */\n    ElementRangeActive.prototype.active = function () {\n        this.setState();\n    };\n    return ElementRangeActive;\n}(ElementRangeState));\nexport default ElementRangeActive;\n//# sourceMappingURL=range-active.js.map","import { __extends } from \"tslib\";\nimport { getCurrentElement, isElementChange } from '../util';\nimport StateBase from './state-base';\n/**\n * 单状态量的 Action 基类\n * @class\n * @ignore\n */\nvar ElementSingleState = /** @class */ (function (_super) {\n    __extends(ElementSingleState, _super);\n    function ElementSingleState() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElementSingleState.prototype.setStateEnable = function (enable) {\n        var element = getCurrentElement(this.context);\n        if (element) {\n            // 在同一个 element 内部移动，忽视 label 和 shape 之间\n            if (!isElementChange(this.context)) {\n                return;\n            }\n            // 仅支持单个状态量的元素，只能由 element 触发\n            if (enable) {\n                this.clear();\n                this.setElementState(element, true);\n            }\n            else if (this.hasState(element)) {\n                this.setElementState(element, false);\n            }\n        }\n    };\n    /**\n     * 切换选中，只允许选中一个\n     */\n    ElementSingleState.prototype.toggle = function () {\n        var element = getCurrentElement(this.context);\n        if (element) {\n            var hasState = this.hasState(element); // 提前获取状态\n            if (!hasState) {\n                this.clear();\n            }\n            this.setElementState(element, !hasState);\n        }\n    };\n    /**\n     * 取消当前时间影响的状态\n     */\n    ElementSingleState.prototype.reset = function () {\n        this.setStateEnable(false);\n    };\n    return ElementSingleState;\n}(StateBase));\nexport default ElementSingleState;\n//# sourceMappingURL=single-state.js.map","import { __extends } from \"tslib\";\nimport ElementSingleState from './single-state';\n/**\n * @ignore\n * 仅允许单个 Element Active 的 Action\n */\nvar ElementSingleActive = /** @class */ (function (_super) {\n    __extends(ElementSingleActive, _super);\n    function ElementSingleActive() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'active';\n        return _this;\n    }\n    /**\n     * 当前事件相关的 Element Active\n     */\n    ElementSingleActive.prototype.active = function () {\n        this.setState();\n    };\n    return ElementSingleActive;\n}(ElementSingleState));\nexport default ElementSingleActive;\n//# sourceMappingURL=single-active.js.map","import { each } from '@antv/util';\nimport { getElements } from '../util';\nvar STATUS_UNACTIVE = 'inactive';\nvar STATUS_ACTIVE = 'active';\n/**\n * @ignore\n * 清理 highlight 效果\n * @param view View 或者 Chart\n */\nexport function clearHighlight(view) {\n    var elements = getElements(view);\n    each(elements, function (el) {\n        if (el.hasState(STATUS_ACTIVE)) {\n            el.setState(STATUS_ACTIVE, false);\n        }\n        if (el.hasState(STATUS_UNACTIVE)) {\n            el.setState(STATUS_UNACTIVE, false);\n        }\n    });\n}\n/**\n * @ignore\n * 设置多个元素的 highlight\n * @param elements 元素集合\n * @param callback 设置回调函数\n * @param enable 设置或者取消\n */\nexport function setHighlightBy(elements, callback, enable) {\n    each(elements, function (el) {\n        // 需要处理 active 和 unactive 的互斥\n        if (callback(el)) {\n            if (el.hasState(STATUS_UNACTIVE)) {\n                el.setState(STATUS_UNACTIVE, false);\n            }\n            el.setState(STATUS_ACTIVE, enable);\n        }\n        else {\n            if (el.hasState(STATUS_ACTIVE)) {\n                el.setState(STATUS_ACTIVE, false);\n            }\n            el.setState(STATUS_UNACTIVE, enable);\n        }\n    });\n}\n//# sourceMappingURL=highlight-util.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { getElements, getElementsByState } from '../util';\nimport { clearHighlight } from './highlight-util';\nimport StateAction from './state';\nimport { ELEMENT_STATE } from '../../../constant';\nexport var STATUS_UNACTIVE = ELEMENT_STATE.INACTIVE;\nexport var STATUS_ACTIVE = ELEMENT_STATE.ACTIVE;\n/**\n * @ignore\n * highlight，指定图形高亮，其他图形变暗\n */\nvar ElementHighlight = /** @class */ (function (_super) {\n    __extends(ElementHighlight, _super);\n    function ElementHighlight() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = STATUS_ACTIVE;\n        return _this;\n    }\n    // 多个元素设置、取消 highlight\n    ElementHighlight.prototype.setElementsStateByItem = function (elements, field, item, enable) {\n        var _this = this;\n        var callback = function (el) { return _this.isMathItem(el, field, item); };\n        this.setHighlightBy(elements, callback, enable);\n    };\n    // 设置元素的 highlight\n    ElementHighlight.prototype.setElementHighlight = function (el, callback) {\n        if (callback(el)) {\n            if (el.hasState(STATUS_UNACTIVE)) {\n                el.setState(STATUS_UNACTIVE, false);\n            }\n            el.setState(STATUS_ACTIVE, true);\n        }\n        else if (!el.hasState(STATUS_ACTIVE)) {\n            el.setState(STATUS_UNACTIVE, true);\n        }\n    };\n    ElementHighlight.prototype.setHighlightBy = function (elements, callback, enable) {\n        var _this = this;\n        if (enable) {\n            // 如果是设置 highlight ，则将匹配的 element 设置成 active，\n            // 其他如果不是 active，则设置成 unactive\n            each(elements, function (el) {\n                _this.setElementHighlight(el, callback);\n            });\n        }\n        else {\n            // 如果取消 highlight，则要检测是否全部取消 highlight\n            var activeElements = getElementsByState(this.context.view, STATUS_ACTIVE);\n            var allCancel_1 = true;\n            // 检测所有 activeElements 都要取消 highlight\n            each(activeElements, function (el) {\n                if (!callback(el)) {\n                    allCancel_1 = false;\n                    return false;\n                }\n            });\n            if (allCancel_1) {\n                // 都要取消，则取消所有的 active，unactive 状态\n                this.clear();\n            }\n            else {\n                // 如果不是都要取消 highlight, 则设置匹配的 element 的状态为 unactive\n                // 其他 element 状态不变\n                each(elements, function (el) {\n                    if (callback(el)) {\n                        if (el.hasState(STATUS_ACTIVE)) {\n                            el.setState(STATUS_ACTIVE, false);\n                        }\n                        el.setState(STATUS_UNACTIVE, true);\n                    }\n                });\n            }\n        }\n    };\n    // 单个元素设置和取消 highlight\n    ElementHighlight.prototype.setElementState = function (element, enable) {\n        var view = this.context.view;\n        var elements = getElements(view);\n        this.setHighlightBy(elements, function (el) { return element === el; }, enable);\n    };\n    ElementHighlight.prototype.highlight = function () {\n        this.setState();\n    };\n    // 清理掉所有的 active， unactive 状态\n    ElementHighlight.prototype.clear = function () {\n        var view = this.context.view;\n        clearHighlight(view);\n    };\n    return ElementHighlight;\n}(StateAction));\nexport default ElementHighlight;\n//# sourceMappingURL=highlight.js.map","import { __extends } from \"tslib\";\nimport { getElements, getElementValue } from '../util';\nimport Highlight from './highlight';\n/**\n * Highlight color\n * @ignore\n */\nvar HighlightColor = /** @class */ (function (_super) {\n    __extends(HighlightColor, _super);\n    function HighlightColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HighlightColor.prototype.setStateByElement = function (element, enable) {\n        var view = this.context.view;\n        var colorAttr = element.geometry.getAttribute('color');\n        if (!colorAttr) {\n            return;\n        }\n        var scale = view.getScaleByField(colorAttr.getFields()[0]);\n        var value = getElementValue(element, scale.field);\n        var elements = getElements(view);\n        var highlightElements = elements.filter(function (el) {\n            return getElementValue(el, scale.field) === value;\n        });\n        this.setHighlightBy(elements, function (el) { return highlightElements.includes(el); }, enable);\n    };\n    return HighlightColor;\n}(Highlight));\nexport default HighlightColor;\n//# sourceMappingURL=highlight-by-color.js.map","import { __extends } from \"tslib\";\nimport { getElements, getElementValue, getCurrentElement } from '../util';\nimport Highlight, { STATUS_ACTIVE, STATUS_UNACTIVE } from './highlight';\n/**\n * Highlight x\n * @ignore\n */\nvar HighlightX = /** @class */ (function (_super) {\n    __extends(HighlightX, _super);\n    function HighlightX() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // 不允许多选\n    HighlightX.prototype.setElementHighlight = function (el, callback) {\n        if (callback(el)) {\n            if (el.hasState(STATUS_UNACTIVE)) {\n                el.setState(STATUS_UNACTIVE, false);\n            }\n            el.setState(STATUS_ACTIVE, true);\n        }\n        else {\n            el.setState(STATUS_UNACTIVE, true);\n            if (el.hasState(STATUS_ACTIVE)) {\n                el.setState(STATUS_ACTIVE, false);\n            }\n        }\n    };\n    HighlightX.prototype.setStateByElement = function (element, enable) {\n        var view = this.context.view;\n        var scale = view.getXScale();\n        var value = getElementValue(element, scale.field);\n        var elements = getElements(view);\n        var highlightElements = elements.filter(function (el) {\n            return getElementValue(el, scale.field) === value;\n        });\n        this.setHighlightBy(elements, function (el) { return highlightElements.includes(el); }, enable);\n    };\n    /**\n     * 切换状态\n     */\n    HighlightX.prototype.toggle = function () {\n        var element = getCurrentElement(this.context);\n        if (element) {\n            var hasState = element.hasState(this.stateName);\n            this.setStateByElement(element, !hasState);\n        }\n    };\n    return HighlightX;\n}(Highlight));\nexport default HighlightX;\n//# sourceMappingURL=highlight-by-x.js.map","import { __extends } from \"tslib\";\nimport { clearHighlight, setHighlightBy } from './highlight-util';\nimport ElementRangeState from './range-state';\n/**\n * @ignore\n * 区域 highlight 的 Action\n */\nvar ElementRangeHighlight = /** @class */ (function (_super) {\n    __extends(ElementRangeHighlight, _super);\n    function ElementRangeHighlight() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'active';\n        return _this;\n    }\n    // 清理掉所有的 active， unactive 状态\n    ElementRangeHighlight.prototype.clearViewState = function (view) {\n        clearHighlight(view);\n    };\n    /**\n     * 设置 highlight\n     */\n    ElementRangeHighlight.prototype.highlight = function () {\n        this.setState();\n    };\n    ElementRangeHighlight.prototype.setElementsState = function (elements, enable, allElements) {\n        setHighlightBy(allElements, function (el) { return elements.indexOf(el) >= 0; }, enable);\n    };\n    return ElementRangeHighlight;\n}(ElementRangeState));\nexport default ElementRangeHighlight;\n//# sourceMappingURL=range-highlight.js.map","import { __extends } from \"tslib\";\nimport { getElements } from '../util';\nimport { clearHighlight, setHighlightBy } from './highlight-util';\nimport ElementSingleState from './single-state';\n/**\n * @ignore\n * 单个 Element Highlight 的 Action\n */\nvar ElementSingleHighlight = /** @class */ (function (_super) {\n    __extends(ElementSingleHighlight, _super);\n    function ElementSingleHighlight() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'active';\n        return _this;\n    }\n    /**\n     * Element Highlight\n     */\n    ElementSingleHighlight.prototype.highlight = function () {\n        this.setState();\n    };\n    ElementSingleHighlight.prototype.setElementState = function (element, enable) {\n        var view = this.context.view;\n        var elements = getElements(view);\n        setHighlightBy(elements, function (el) { return element === el; }, enable);\n    };\n    // 清理掉所有的 active， unactive 状态\n    ElementSingleHighlight.prototype.clear = function () {\n        var view = this.context.view;\n        clearHighlight(view);\n    };\n    return ElementSingleHighlight;\n}(ElementSingleState));\nexport default ElementSingleHighlight;\n//# sourceMappingURL=single-highlight.js.map","import { __extends } from \"tslib\";\nimport ElementRangeState from './range-state';\n/**\n * @ignore\n * 区域选中的 Action\n */\nvar ElementRangeSelected = /** @class */ (function (_super) {\n    __extends(ElementRangeSelected, _super);\n    function ElementRangeSelected() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'selected';\n        return _this;\n    }\n    /**\n     * 选中\n     */\n    ElementRangeSelected.prototype.selected = function () {\n        this.setState();\n    };\n    return ElementRangeSelected;\n}(ElementRangeState));\nexport default ElementRangeSelected;\n//# sourceMappingURL=range-selected.js.map","import { __extends } from \"tslib\";\nimport StateAction from './state';\n/**\n * @ignore\n * 允许多选的 Action\n * @class\n */\nvar ElementMultipleSelected = /** @class */ (function (_super) {\n    __extends(ElementMultipleSelected, _super);\n    function ElementMultipleSelected() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'selected';\n        return _this;\n    }\n    /**\n     * 选中节点，允许多选\n     */\n    ElementMultipleSelected.prototype.selected = function () {\n        this.setState();\n    };\n    return ElementMultipleSelected;\n}(StateAction));\nexport default ElementMultipleSelected;\n//# sourceMappingURL=selected.js.map","import { __extends } from \"tslib\";\nimport ElementSingleState from './single-state';\n/**\n * @ignore\n * 单选的 Action\n */\nvar ElementSingleSelected = /** @class */ (function (_super) {\n    __extends(ElementSingleSelected, _super);\n    function ElementSingleSelected() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'selected';\n        return _this;\n    }\n    /**\n     * 选中\n     */\n    ElementSingleSelected.prototype.selected = function () {\n        this.setState();\n    };\n    return ElementSingleSelected;\n}(ElementSingleState));\nexport default ElementSingleSelected;\n//# sourceMappingURL=single-selected.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\nimport { getComponents } from '../util';\nimport { getCurrentElement, getDelegationObject, getElementValue, isList, getScaleByField } from '../util';\n/**\n * 列表项状态 Action 的基础类\n * @class\n * @ignore\n */\nvar ListState = /** @class */ (function (_super) {\n    __extends(ListState, _super);\n    function ListState() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = '';\n        _this.ignoreItemStates = [];\n        return _this;\n    }\n    /** 获取触发的列表组件 */\n    ListState.prototype.getTriggerListInfo = function () {\n        var delegateObject = getDelegationObject(this.context);\n        var info = null;\n        if (isList(delegateObject)) {\n            info = {\n                item: delegateObject.item,\n                list: delegateObject.component,\n            };\n        }\n        return info;\n    };\n    // 获取所有允许执行 Action 的组件\n    ListState.prototype.getAllowComponents = function () {\n        var _this = this;\n        var view = this.context.view;\n        var components = getComponents(view);\n        var rst = [];\n        each(components, function (component) {\n            if (component.isList() && _this.allowSetStateByElement(component)) {\n                rst.push(component);\n            }\n        });\n        return rst;\n    };\n    /** 是否存在指定的状态 */\n    ListState.prototype.hasState = function (list, item) {\n        return list.hasState(item, this.stateName);\n    };\n    /** 清理组件的状态 */\n    ListState.prototype.clearAllComponentsState = function () {\n        var _this = this;\n        var components = this.getAllowComponents();\n        each(components, function (component) {\n            component.clearItemsState(_this.stateName);\n        });\n    };\n    // 不是所有的 component 都能进行 active，目前仅支持分类 scale 对应的组件\n    ListState.prototype.allowSetStateByElement = function (component) {\n        var field = component.get('field');\n        if (!field) {\n            return false;\n        }\n        if (this.cfg && this.cfg.componentNames) {\n            var name_1 = component.get('name');\n            // 如果配置了限制的 component name，则要进行检测\n            if (this.cfg.componentNames.indexOf(name_1) === -1) {\n                return false;\n            }\n        }\n        var view = this.context.view;\n        var scale = getScaleByField(view, field);\n        return scale && scale.isCategory;\n    };\n    // 检测是否允许触发对应的状态改变事件\n    ListState.prototype.allowSetStateByItem = function (item, list) {\n        var ignoreStates = this.ignoreItemStates;\n        if (ignoreStates.length) {\n            var filterStates = ignoreStates.filter(function (state) {\n                return list.hasState(item, state);\n            });\n            return filterStates.length === 0;\n        }\n        return true; // 没有定义忽略的状态时，允许\n    };\n    // 设置组件的 item active\n    ListState.prototype.setStateByElement = function (component, element, enable) {\n        var field = component.get('field');\n        var view = this.context.view;\n        var scale = getScaleByField(view, field);\n        var value = getElementValue(element, field);\n        var text = scale.getText(value);\n        this.setItemsState(component, text, enable);\n    };\n    // 设置状态\n    ListState.prototype.setStateEnable = function (enable) {\n        var _this = this;\n        var element = getCurrentElement(this.context);\n        if (element) {\n            // trigger by element\n            var components = this.getAllowComponents();\n            each(components, function (component) {\n                _this.setStateByElement(component, element, enable);\n            });\n        }\n        else {\n            // 被组件触发\n            var delegateObject = getDelegationObject(this.context);\n            if (isList(delegateObject)) {\n                var item = delegateObject.item, component = delegateObject.component;\n                if (this.allowSetStateByElement(component) && this.allowSetStateByItem(item, component)) {\n                    this.setItemState(component, item, enable);\n                }\n            }\n        }\n    };\n    // 多个 item 设置状态\n    ListState.prototype.setItemsState = function (list, name, enable) {\n        var _this = this;\n        var items = list.getItems();\n        each(items, function (item) {\n            if (item.name === name) {\n                _this.setItemState(list, item, enable);\n            }\n        });\n    };\n    // 单个 item 设置状态\n    ListState.prototype.setItemState = function (list, item, enable) {\n        list.setItemState(item, this.stateName, enable);\n    };\n    /**\n     * 设置状态\n     */\n    ListState.prototype.setState = function () {\n        this.setStateEnable(true);\n    };\n    /**\n     * 取消状态\n     */\n    ListState.prototype.reset = function () {\n        this.setStateEnable(false);\n    };\n    /**\n     * 切换状态\n     */\n    ListState.prototype.toggle = function () {\n        var triggerInfo = this.getTriggerListInfo();\n        if (triggerInfo && triggerInfo.item) {\n            var list = triggerInfo.list, item = triggerInfo.item;\n            var enable = this.hasState(list, item);\n            this.setItemState(list, item, !enable);\n        }\n    };\n    /**\n     * 取消状态\n     */\n    ListState.prototype.clear = function () {\n        var triggerInfo = this.getTriggerListInfo();\n        if (triggerInfo) {\n            triggerInfo.list.clearItemsState(this.stateName);\n        }\n        else {\n            this.clearAllComponentsState();\n        }\n    };\n    return ListState;\n}(Action));\nexport default ListState;\n//# sourceMappingURL=list-state.js.map","import { __extends } from \"tslib\";\nimport ListState from './list-state';\n/**\n * 列表项（图例项、坐标轴文本）激活的 Action\n * @class\n * @ignore\n */\nvar ListActive = /** @class */ (function (_super) {\n    __extends(ListActive, _super);\n    function ListActive() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'active';\n        return _this;\n    }\n    /**\n     * 激活选项\n     */\n    ListActive.prototype.active = function () {\n        this.setState();\n    };\n    return ListActive;\n}(ListState));\nexport default ListActive;\n//# sourceMappingURL=list-active.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport { clearList } from './list-highlight-util';\nimport ListState from './list-state';\nvar STATUS_UNACTIVE = 'inactive';\nvar STATUS_ACTIVE = 'active';\n/**\n * highlight Action 的效果是 active 和 inactive 两个状态的组合\n * @class\n * @ignore\n */\nvar ListHighlight = /** @class */ (function (_super) {\n    __extends(ListHighlight, _super);\n    function ListHighlight() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = STATUS_ACTIVE;\n        _this.ignoreItemStates = ['unchecked']; // 当存在 unchecked 状态时不触发\n        return _this;\n    }\n    // 如果 item.name 匹配，则设置 highlight 以及取消\n    ListHighlight.prototype.setItemsState = function (list, name, enable) {\n        this.setHighlightBy(list, function (item) { return item.name === name; }, enable);\n    };\n    // 单个 item 设置状态\n    ListHighlight.prototype.setItemState = function (list, item, enable) {\n        var items = list.getItems();\n        this.setHighlightBy(list, function (el) { return el === item; }, enable);\n    };\n    // 根据条件设置 highlight\n    ListHighlight.prototype.setHighlightBy = function (list, callback, enable) {\n        var items = list.getItems();\n        if (enable) {\n            // 设置 highlight 时，保留之前已经 Highlight 的项\n            each(items, function (item) {\n                if (callback(item)) {\n                    if (list.hasState(item, STATUS_UNACTIVE)) {\n                        list.setItemState(item, STATUS_UNACTIVE, false);\n                    }\n                    list.setItemState(item, STATUS_ACTIVE, true);\n                }\n                else if (!list.hasState(item, STATUS_ACTIVE)) {\n                    list.setItemState(item, STATUS_UNACTIVE, true);\n                }\n            });\n        }\n        else {\n            var activeItems = list.getItemsByState(STATUS_ACTIVE);\n            var allCancel_1 = true;\n            // 检测 activeItems 是否要全部取消\n            each(activeItems, function (item) {\n                if (!callback(item)) {\n                    allCancel_1 = false;\n                    return false;\n                }\n            });\n            if (allCancel_1) {\n                this.clear();\n            }\n            else {\n                // 如果不是都要取消 highlight, 则设置匹配的 element 的状态为 unactive\n                // 其他 element 状态不变\n                each(items, function (item) {\n                    if (callback(item)) {\n                        if (list.hasState(item, STATUS_ACTIVE)) {\n                            list.setItemState(item, STATUS_ACTIVE, false);\n                        }\n                        list.setItemState(item, STATUS_UNACTIVE, true);\n                    }\n                });\n            }\n        }\n    };\n    /**\n     * highlight 图例项（坐标轴文本）\n     */\n    ListHighlight.prototype.highlight = function () {\n        this.setState();\n    };\n    // 需要全部清理 active 和 unactive\n    ListHighlight.prototype.clear = function () {\n        var triggerInfo = this.getTriggerListInfo();\n        if (triggerInfo) {\n            clearList(triggerInfo.list);\n        }\n        else {\n            // 如果不是 component 的事件触发，则所有满足触发条件的组件都清除该状态\n            var components = this.getAllowComponents();\n            each(components, function (component) {\n                component.clearItemsState(STATUS_ACTIVE);\n                component.clearItemsState(STATUS_UNACTIVE);\n            });\n        }\n    };\n    return ListHighlight;\n}(ListState));\nexport default ListHighlight;\n//# sourceMappingURL=list-highlight.js.map","import { each } from '@antv/util';\nvar STATUS_UNACTIVE = 'inactive';\nvar STATUS_ACTIVE = 'active';\n/**\n * 清理图例的 Highlight 效果\n * @param list 列表组件，图例或者坐标轴\n * @ignore\n */\nexport function clearList(list) {\n    var items = list.getItems();\n    each(items, function (item) {\n        if (list.hasState(item, STATUS_ACTIVE)) {\n            list.setItemState(item, STATUS_ACTIVE, false);\n        }\n        if (list.hasState(item, STATUS_UNACTIVE)) {\n            list.setItemState(item, STATUS_UNACTIVE, false);\n        }\n    });\n}\n//# sourceMappingURL=list-highlight-util.js.map","import { __extends } from \"tslib\";\nimport ListState from './list-state';\n/**\n * 图例项和坐标轴文本选中的 Action\n * @ignore\n */\nvar ListSelected = /** @class */ (function (_super) {\n    __extends(ListSelected, _super);\n    function ListSelected() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'selected';\n        return _this;\n    }\n    ListSelected.prototype.selected = function () {\n        this.setState();\n    };\n    return ListSelected;\n}(ListState));\nexport default ListSelected;\n//# sourceMappingURL=list-selected.js.map","import { __extends } from \"tslib\";\nimport ListState from './list-state';\n/**\n * 图例项取消勾选的 Action\n * @ignore\n */\nvar ListUnchecked = /** @class */ (function (_super) {\n    __extends(ListUnchecked, _super);\n    function ListUnchecked() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.stateName = 'unchecked';\n        return _this;\n    }\n    /**\n     * 取消勾选\n     */\n    ListUnchecked.prototype.unchecked = function () {\n        this.setState();\n    };\n    return ListUnchecked;\n}(ListState));\nexport default ListUnchecked;\n//# sourceMappingURL=list-unchecked.js.map","import { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\n/**\n * @ignore\n * 辅助框 Action 的基类\n */\nvar MaskBase = /** @class */ (function (_super) {\n    __extends(MaskBase, _super);\n    function MaskBase() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        // mask 图形\n        _this.maskShape = null;\n        // 组成 mask 的各个点\n        _this.points = [];\n        // 开始 mask 的标记\n        _this.starting = false;\n        // 开始移动的标记\n        _this.moving = false;\n        _this.preMovePoint = null;\n        _this.shapeType = 'path';\n        return _this;\n    }\n    // 获取当前的位置\n    MaskBase.prototype.getCurrentPoint = function () {\n        var event = this.context.event;\n        return {\n            x: event.x,\n            y: event.y,\n        };\n    };\n    // 触发 mask 的事件\n    MaskBase.prototype.emitEvent = function (type) {\n        var eventName = \"mask:\" + type;\n        var view = this.context.view;\n        var event = this.context.event;\n        view.emit(eventName, {\n            target: this.maskShape,\n            shape: this.maskShape,\n            points: this.points,\n            x: event.x,\n            y: event.y,\n        });\n    };\n    // 创建 mask\n    MaskBase.prototype.createMask = function () {\n        var view = this.context.view;\n        var maskAttrs = this.getMaskAttrs();\n        var maskShape = view.foregroundGroup.addShape({\n            type: this.shapeType,\n            name: 'mask',\n            draggable: true,\n            attrs: __assign({ fill: '#C5D4EB', opacity: 0.3 }, maskAttrs),\n        });\n        return maskShape;\n    };\n    // 生成 mask 的路径\n    MaskBase.prototype.getMaskPath = function () {\n        return [];\n    };\n    /**\n     * 显示\n     */\n    MaskBase.prototype.show = function () {\n        if (this.maskShape) {\n            this.maskShape.show();\n            this.emitEvent('show');\n        }\n    };\n    /**\n     * 开始\n     */\n    MaskBase.prototype.start = function () {\n        this.starting = true;\n        // 开始时，保证移动结束\n        this.moving = false;\n        this.points = [this.getCurrentPoint()];\n        if (!this.maskShape) {\n            this.maskShape = this.createMask();\n            // 开始时设置 capture: false，可以避免创建、resize 时触发事件\n            this.maskShape.set('capture', false);\n        }\n        this.updateMask();\n        this.emitEvent('start');\n    };\n    /**\n     * 开始移动\n     */\n    MaskBase.prototype.moveStart = function () {\n        this.moving = true;\n        this.preMovePoint = this.getCurrentPoint();\n    };\n    /**\n     * 移动 mask\n     */\n    MaskBase.prototype.move = function () {\n        if (!this.moving || !this.maskShape) {\n            return;\n        }\n        var currentPoint = this.getCurrentPoint();\n        var preMovePoint = this.preMovePoint;\n        var dx = currentPoint.x - preMovePoint.x;\n        var dy = currentPoint.y - preMovePoint.y;\n        var points = this.points;\n        each(points, function (point) {\n            point.x += dx;\n            point.y += dy;\n        });\n        this.updateMask();\n        this.emitEvent('change');\n        this.preMovePoint = currentPoint;\n    };\n    MaskBase.prototype.updateMask = function () {\n        var attrs = this.getMaskAttrs();\n        this.maskShape.attr(attrs);\n    };\n    /**\n     * 结束移动\n     */\n    MaskBase.prototype.moveEnd = function () {\n        this.moving = false;\n        this.preMovePoint = null;\n    };\n    /**\n     * 结束\n     */\n    MaskBase.prototype.end = function () {\n        this.starting = false;\n        this.emitEvent('end');\n        if (this.maskShape) {\n            this.maskShape.set('capture', true);\n        }\n    };\n    /**\n     * 隐藏\n     */\n    MaskBase.prototype.hide = function () {\n        if (this.maskShape) {\n            this.maskShape.hide();\n            this.emitEvent('hide');\n        }\n    };\n    /**\n     * 大小变化\n     */\n    MaskBase.prototype.resize = function () {\n        // 只有进行中，才会允许大小变化\n        if (this.starting && this.maskShape) {\n            this.points.push(this.getCurrentPoint());\n            this.updateMask();\n            this.emitEvent('change');\n        }\n    };\n    /**\n     * 销毁\n     */\n    MaskBase.prototype.destroy = function () {\n        this.points = [];\n        if (this.maskShape) {\n            this.maskShape.remove();\n        }\n        this.maskShape = null;\n        this.preMovePoint = null;\n        _super.prototype.destroy.call(this);\n    };\n    return MaskBase;\n}(Action));\nexport default MaskBase;\n//# sourceMappingURL=base.js.map","import { __extends } from \"tslib\";\nimport { last } from '@antv/util';\nimport { distance } from '../util';\nimport MaskBase from './base';\n/**\n * @ignore\n * 圆形辅助框 Action\n */\nvar CircleMask = /** @class */ (function (_super) {\n    __extends(CircleMask, _super);\n    function CircleMask() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.shapeType = 'circle';\n        return _this;\n    }\n    CircleMask.prototype.getMaskAttrs = function () {\n        var points = this.points;\n        var currentPoint = last(this.points);\n        var r = 0;\n        var x = 0;\n        var y = 0;\n        if (points.length) {\n            var first = points[0];\n            r = distance(first, currentPoint) / 2;\n            x = (currentPoint.x + first.x) / 2;\n            y = (currentPoint.y + first.y) / 2;\n        }\n        return {\n            x: x,\n            y: y,\n            r: r,\n        };\n    };\n    return CircleMask;\n}(MaskBase));\nexport default CircleMask;\n//# sourceMappingURL=circle.js.map","import { __extends } from \"tslib\";\nimport { head, last } from '@antv/util';\nimport MaskBase from './base';\n/**\n * @ignore\n * 矩形的辅助框 Action\n */\nvar RectMask = /** @class */ (function (_super) {\n    __extends(RectMask, _super);\n    function RectMask() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.shapeType = 'rect';\n        return _this;\n    }\n    RectMask.prototype.getRegion = function () {\n        var points = this.points;\n        return {\n            start: head(points),\n            end: last(points),\n        };\n    };\n    // 添加图形\n    RectMask.prototype.getMaskAttrs = function () {\n        var _a = this.getRegion(), start = _a.start, end = _a.end;\n        var x = Math.min(start.x, end.x);\n        var y = Math.min(start.y, end.y);\n        var width = Math.abs(end.x - start.x);\n        var height = Math.abs(end.y - start.y);\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n        };\n    };\n    return RectMask;\n}(MaskBase));\nexport default RectMask;\n//# sourceMappingURL=rect.js.map","import { __extends } from \"tslib\";\nimport { clamp, head, last } from '@antv/util';\nimport RectMask from './rect';\nfunction clampPoint(point) {\n    point.x = clamp(point.x, 0, 1);\n    point.y = clamp(point.y, 0, 1);\n}\n/**\n * @ignore\n */\nvar DimRect = /** @class */ (function (_super) {\n    __extends(DimRect, _super);\n    function DimRect() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.dim = 'x';\n        _this.inPlot = true;\n        return _this;\n    }\n    DimRect.prototype.getRegion = function () {\n        var start = null;\n        var end = null;\n        var points = this.points;\n        var dim = this.dim;\n        var coord = this.context.view.getCoordinate();\n        var normalStart = coord.invert(head(points));\n        var normalEnd = coord.invert(last(points));\n        if (this.inPlot) {\n            // 约束到 0 - 1 范围内\n            clampPoint(normalStart);\n            clampPoint(normalEnd);\n        }\n        if (dim === 'x') {\n            // x 轴方向扩展, y 轴方向占满全部\n            start = coord.convert({\n                x: normalStart.x,\n                y: 0,\n            });\n            end = coord.convert({\n                x: normalEnd.x,\n                y: 1,\n            });\n        }\n        else {\n            // y 轴方向扩展, x 轴方向占满全部\n            start = coord.convert({\n                x: 0,\n                y: normalStart.y,\n            });\n            end = coord.convert({\n                x: 1,\n                y: normalEnd.y,\n            });\n        }\n        return {\n            start: start,\n            end: end,\n        };\n    };\n    return DimRect;\n}(RectMask));\nexport default DimRect;\n//# sourceMappingURL=dim-rect.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport MaskBase from './base';\n/**\n * @ignore\n * 多个点构成的 Path 辅助框 Action\n */\nvar PathMask = /** @class */ (function (_super) {\n    __extends(PathMask, _super);\n    function PathMask() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // 生成 mask 的路径\n    PathMask.prototype.getMaskPath = function () {\n        var points = this.points;\n        var path = [];\n        if (points.length) {\n            each(points, function (point, index) {\n                if (index === 0) {\n                    path.push(['M', point.x, point.y]);\n                }\n                else {\n                    path.push(['L', point.x, point.y]);\n                }\n            });\n            path.push(['L', points[0].x, points[0].y]);\n        }\n        return path;\n    };\n    PathMask.prototype.getMaskAttrs = function () {\n        return {\n            path: this.getMaskPath(),\n        };\n    };\n    /**\n     * 添加一个点\n     */\n    PathMask.prototype.addPoint = function () {\n        this.resize();\n    };\n    return PathMask;\n}(MaskBase));\nexport default PathMask;\n//# sourceMappingURL=path.js.map","import { __extends } from \"tslib\";\nimport { getSpline } from '../util';\nimport PathMask from './path';\n/**\n * Smooth path mask\n * @ignore\n */\nvar SmoothPathMask = /** @class */ (function (_super) {\n    __extends(SmoothPathMask, _super);\n    function SmoothPathMask() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // 生成 mask 的路径\n    SmoothPathMask.prototype.getMaskPath = function () {\n        var points = this.points;\n        return getSpline(points, true);\n    };\n    return SmoothPathMask;\n}(PathMask));\nexport default SmoothPathMask;\n//# sourceMappingURL=smooth-path.js.map","import { __extends } from \"tslib\";\n/**\n * @fileoverview 设置画布的箭头，参看：https://www.w3school.com.cn/jsref/prop_style_cursor.asp\n * @author dxq613\n */\nimport Action from './base';\n/**\n * 鼠标形状的 Action\n * @ignore\n */\nvar CursorAction = /** @class */ (function (_super) {\n    __extends(CursorAction, _super);\n    function CursorAction() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CursorAction.prototype.setCursor = function (cursor) {\n        var view = this.context.view;\n        view.getCanvas().setCursor(cursor);\n    };\n    /**\n     * 默认光标（通常是一个箭头）\n     */\n    CursorAction.prototype.default = function () {\n        this.setCursor('default');\n    };\n    /** 光标呈现为指示链接的指针（一只手） */\n    CursorAction.prototype.pointer = function () {\n        this.setCursor('pointer');\n    };\n    /** 此光标指示某对象可被移动。 */\n    CursorAction.prototype.move = function () {\n        this.setCursor('move');\n    };\n    /** 光标呈现为十字线。 */\n    CursorAction.prototype.crosshair = function () {\n        this.setCursor('crosshair');\n    };\n    /** 此光标指示程序正忙（通常是一只表或沙漏）。 */\n    CursorAction.prototype.wait = function () {\n        this.setCursor('wait');\n    };\n    /** 此光标指示可用的帮助（通常是一个问号或一个气球）。 */\n    CursorAction.prototype.help = function () {\n        this.setCursor('help');\n    };\n    /** 此光标指示文本。 */\n    CursorAction.prototype.text = function () {\n        this.setCursor('text');\n    };\n    /**\n     * 此光标指示矩形框的边缘可被向右（东）移动。\n     */\n    CursorAction.prototype.eResize = function () {\n        this.setCursor('e-resize');\n    };\n    /**\n     * 此光标指示矩形框的边缘可被向左（西）移动。\n     */\n    CursorAction.prototype.wResize = function () {\n        this.setCursor('w-resize');\n    };\n    /**\n     * 此光标指示矩形框的边缘可被向上（北）移动。\n     */\n    CursorAction.prototype.nResize = function () {\n        this.setCursor('n-resize');\n    };\n    /**\n     * 此光标指示矩形框的边缘可被向下（南）移动。\n     */\n    CursorAction.prototype.sResize = function () {\n        this.setCursor('s-resize');\n    };\n    /**\n     * 光标指示可移动的方向 右上方（东北）\n     */\n    CursorAction.prototype.neResize = function () {\n        this.setCursor('ne-resize');\n    };\n    /**\n     * 光标指示可移动的方向 左上方（西北）\n     */\n    CursorAction.prototype.nwResize = function () {\n        this.setCursor('nw-resize');\n    };\n    /**\n     * 光标指示可移动的方向右下方（东南）\n     */\n    CursorAction.prototype.seResize = function () {\n        this.setCursor('se-resize');\n    };\n    /**\n     * 光标指示可移动的方向左下方（西南）\n     */\n    CursorAction.prototype.swResize = function () {\n        this.setCursor('sw-resize');\n    };\n    /**\n     * 光标指示可以在上下方向移动\n     */\n    CursorAction.prototype.nsResize = function () {\n        this.setCursor('ns-resize');\n    };\n    /**\n     * 光标指示可以在左右方向移动\n     */\n    CursorAction.prototype.ewResize = function () {\n        this.setCursor('ew-resize');\n    };\n    return CursorAction;\n}(Action));\nexport default CursorAction;\n//# sourceMappingURL=cursor.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\nimport { getDelegationObject, getScaleByField, isList, isSlider } from '../util';\n/**\n * 数据过滤。\n * @ignore\n */\nvar DataFilter = /** @class */ (function (_super) {\n    __extends(DataFilter, _super);\n    function DataFilter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DataFilter.prototype.filterView = function (view, field, filter) {\n        var _this = this;\n        // 只有存在这个 scale 时才生效\n        if (view.getScaleByField(field)) {\n            view.filter(field, filter);\n        }\n        if (view.views && view.views.length) {\n            each(view.views, function (subView) {\n                _this.filterView(subView, field, filter);\n            });\n        }\n    };\n    /**\n     * 过滤数据\n     */\n    DataFilter.prototype.filter = function () {\n        var delegateObject = getDelegationObject(this.context);\n        if (delegateObject) {\n            var view = this.context.view;\n            var component = delegateObject.component;\n            var field = component.get('field');\n            // 列表类的组件能够触发\n            if (isList(delegateObject)) {\n                if (field) {\n                    var unCheckedItems = component.getItemsByState('unchecked');\n                    var scale_1 = getScaleByField(view, field);\n                    var names_1 = unCheckedItems.map(function (item) { return item.name; });\n                    if (names_1.length) {\n                        this.filterView(view, field, function (value) {\n                            var text = scale_1.getText(value);\n                            return !names_1.includes(text);\n                        });\n                    }\n                    else {\n                        this.filterView(view, field, null);\n                    }\n                    view.render(true);\n                }\n            }\n            else if (isSlider(delegateObject)) {\n                var range = component.getValue();\n                var min_1 = range[0], max_1 = range[1];\n                this.filterView(view, field, function (value) {\n                    return value >= min_1 && value <= max_1;\n                });\n                view.render(true);\n            }\n        }\n    };\n    return DataFilter;\n}(Action));\nexport default DataFilter;\n//# sourceMappingURL=filter.js.map","import { __extends } from \"tslib\";\nimport Action from '../base';\nimport { isMask } from '../util';\n// 获取对应的 scale\nfunction getFilter(scale, dim, point1, point2) {\n    var min = Math.min(point1[dim], point2[dim]);\n    var max = Math.max(point1[dim], point2[dim]);\n    var _a = scale.range, rangeMin = _a[0], rangeMax = _a[1];\n    // 约束值在 scale 的 range 之间\n    if (min < rangeMin) {\n        min = rangeMin;\n    }\n    if (max > rangeMax) {\n        max = rangeMax;\n    }\n    // 范围大于整个 view 的范围，则返回 null\n    if (min === rangeMax && max === rangeMax) {\n        return null;\n    }\n    var minValue = scale.invert(min);\n    var maxValue = scale.invert(max);\n    if (scale.isCategory) {\n        var minIndex = scale.values.indexOf(minValue);\n        var maxIndex = scale.values.indexOf(maxValue);\n        var arr_1 = scale.values.slice(minIndex, maxIndex + 1);\n        return function (value) {\n            return arr_1.includes(value);\n        };\n    }\n    else {\n        return function (value) {\n            return value >= minValue && value <= maxValue;\n        };\n    }\n}\n/**\n * 范围过滤的 Action\n * @ignore\n */\nvar RangeFilter = /** @class */ (function (_super) {\n    __extends(RangeFilter, _super);\n    function RangeFilter() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * 范围过滤生效的字段/维度，可以是 x, y\n         */\n        _this.dims = ['x', 'y'];\n        /** 起始点 */\n        _this.startPoint = null;\n        _this.isStarted = false;\n        return _this;\n    }\n    // x,y 是否生效\n    RangeFilter.prototype.hasDim = function (dim) {\n        return this.dims.includes(dim);\n    };\n    /**\n     * 开始范围过滤，记录范围过滤的起点\n     */\n    RangeFilter.prototype.start = function () {\n        var context = this.context;\n        this.isStarted = true;\n        this.startPoint = context.getCurrentPoint();\n    };\n    /**\n     * 过滤，以开始的点和当前点对数据进行过滤\n     */\n    RangeFilter.prototype.filter = function () {\n        var startPoint;\n        var currentPoint;\n        if (isMask(this.context)) {\n            var maskShape = this.context.event.target;\n            var bbox = maskShape.getCanvasBBox();\n            startPoint = { x: bbox.x, y: bbox.y };\n            currentPoint = { x: bbox.maxX, y: bbox.maxY };\n        }\n        else {\n            if (!this.isStarted) {\n                // 如果没有开始，则不执行过滤\n                return;\n            }\n            startPoint = this.startPoint;\n            currentPoint = this.context.getCurrentPoint();\n        }\n        if (Math.abs(startPoint.x - currentPoint.x) < 5 || Math.abs(startPoint.x - currentPoint.y) < 5) {\n            // 距离过小也不生效\n            return;\n        }\n        var view = this.context.view;\n        var coord = view.getCoordinate();\n        var normalCurrent = coord.invert(currentPoint);\n        var normalStart = coord.invert(startPoint);\n        // 设置 x 方向的 filter\n        if (this.hasDim('x')) {\n            var xScale = view.getXScale();\n            var filter = getFilter(xScale, 'x', normalCurrent, normalStart);\n            this.filterView(view, xScale.field, filter);\n        }\n        // 设置 y 方向的 filter\n        if (this.hasDim('y')) {\n            var yScale = view.getYScales()[0];\n            var filter = getFilter(yScale, 'y', normalCurrent, normalStart);\n            this.filterView(view, yScale.field, filter);\n        }\n        this.reRender(view);\n    };\n    /**\n     * 结束\n     */\n    RangeFilter.prototype.end = function () {\n        this.isStarted = false;\n    };\n    /**\n     * 取消同当前 Action 相关的过滤，指定的 x,y\n     */\n    RangeFilter.prototype.reset = function () {\n        var view = this.context.view;\n        this.isStarted = false;\n        if (this.hasDim('x')) {\n            var xScale = view.getXScale();\n            this.filterView(view, xScale.field, null); // 取消过滤\n        }\n        if (this.hasDim('y')) {\n            // y 轴过滤仅取第一个 yScale\n            var yScale = view.getYScales()[0];\n            this.filterView(view, yScale.field, null); // 取消过滤\n        }\n        this.reRender(view);\n    };\n    /**\n     * 对 view 进行过滤\n     */\n    RangeFilter.prototype.filterView = function (view, field, filter) {\n        view.filter(field, filter);\n    };\n    /**\n     * 重新渲染\n     * @param view\n     */\n    RangeFilter.prototype.reRender = function (view) {\n        view.render(true);\n    };\n    return RangeFilter;\n}(Action));\nexport default RangeFilter;\n//# sourceMappingURL=range-filter.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport RangeFilter from './range-filter';\nimport { getSilbings } from '../util';\n/**\n * 数据范围过滤，但不在当前的 view 上生效，而在当前的 view 同一层级的其他 views 上生效，用于实现联动过滤。\n * @ignore\n */\nvar SiblingFilter = /** @class */ (function (_super) {\n    __extends(SiblingFilter, _super);\n    function SiblingFilter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 对 view 进行过滤\n     * @param view\n     * @param field\n     * @param filter\n     */\n    SiblingFilter.prototype.filterView = function (view, field, filter) {\n        var siblings = getSilbings(view);\n        each(siblings, function (sibling) {\n            sibling.filter(field, filter);\n        });\n    };\n    /**\n     * 重新渲染\n     * @param view\n     */\n    SiblingFilter.prototype.reRender = function (view) {\n        var siblings = getSilbings(view);\n        each(siblings, function (sibling) {\n            sibling.render(true);\n        });\n    };\n    return SiblingFilter;\n}(RangeFilter));\nexport default SiblingFilter;\n//# sourceMappingURL=sibling-filter.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\nimport { getDelegationObject, getElements, getElementValue, getScaleByField, isList, isSlider, isMask, getMaskedElements, } from '../util';\n/**\n * 元素过滤的 Action，控制元素的显示隐藏\n * @ignore\n */\nvar ElementFilter = /** @class */ (function (_super) {\n    __extends(ElementFilter, _super);\n    function ElementFilter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * 过滤\n     */\n    ElementFilter.prototype.filter = function () {\n        var delegateObject = getDelegationObject(this.context);\n        var view = this.context.view;\n        var elements = getElements(view);\n        if (isMask(this.context)) {\n            var maskElements_1 = getMaskedElements(this.context, 10);\n            if (maskElements_1) {\n                each(elements, function (el) {\n                    if (maskElements_1.includes(el)) {\n                        el.show();\n                    }\n                    else {\n                        el.hide();\n                    }\n                });\n            }\n        }\n        else if (delegateObject) {\n            var component = delegateObject.component;\n            var field_1 = component.get('field');\n            // 列表类的组件能够触发\n            if (isList(delegateObject)) {\n                if (field_1) {\n                    var unCheckedItems = component.getItemsByState('unchecked');\n                    var scale_1 = getScaleByField(view, field_1);\n                    var names_1 = unCheckedItems.map(function (item) { return item.name; });\n                    // 直接控制显示、隐藏\n                    each(elements, function (el) {\n                        var value = getElementValue(el, field_1);\n                        var text = scale_1.getText(value);\n                        if (names_1.indexOf(text) >= 0) {\n                            el.hide();\n                        }\n                        else {\n                            el.show();\n                        }\n                    });\n                }\n            }\n            else if (isSlider(delegateObject)) {\n                var range = component.getValue();\n                var min_1 = range[0], max_1 = range[1];\n                each(elements, function (el) {\n                    var value = getElementValue(el, field_1);\n                    if (value >= min_1 && value <= max_1) {\n                        el.show();\n                    }\n                    else {\n                        el.hide();\n                    }\n                });\n            }\n        }\n    };\n    /**\n     * 清除过滤\n     */\n    ElementFilter.prototype.clear = function () {\n        var elements = getElements(this.context.view);\n        each(elements, function (el) {\n            el.show();\n        });\n    };\n    /**\n     * 恢复发生的过滤，保持同 data-filter 命名的一致\n     */\n    ElementFilter.prototype.reset = function () {\n        this.clear();\n    };\n    return ElementFilter;\n}(Action));\nexport default ElementFilter;\n//# sourceMappingURL=filter.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport Action from '../base';\nimport { getElements, getMaskedElements, getSiblingMaskElements, getSilbings, isInRecords, isMask } from '../util';\n/**\n * Sibling filter\n * @ignore\n */\nvar SiblingFilter = /** @class */ (function (_super) {\n    __extends(SiblingFilter, _super);\n    function SiblingFilter() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.byRecord = false;\n        return _this;\n    }\n    /**\n     * 过滤隐藏图形\n     */\n    SiblingFilter.prototype.filter = function () {\n        // 仅考虑 mask 导致的过滤\n        if (isMask(this.context)) {\n            if (this.byRecord) {\n                this.filterByRecord();\n            }\n            else {\n                this.filterByBBox();\n            }\n        }\n    };\n    // 根据框选的记录来做过滤\n    SiblingFilter.prototype.filterByRecord = function () {\n        var view = this.context.view;\n        var maskElements = getMaskedElements(this.context, 10);\n        if (!maskElements) {\n            return;\n        }\n        var xFiled = view.getXScale().field;\n        var yField = view.getYScales()[0].field;\n        var records = maskElements.map(function (el) {\n            return el.getModel().data;\n        });\n        var siblings = getSilbings(view);\n        each(siblings, function (sibling) {\n            var elements = getElements(sibling);\n            each(elements, function (el) {\n                var record = el.getModel().data;\n                // records.includes(record) 不生效，应该是数据的引用被改了\n                if (isInRecords(records, record, xFiled, yField)) {\n                    el.show();\n                }\n                else {\n                    el.hide();\n                }\n            });\n        });\n    };\n    // 根据被框选的包围盒做过滤\n    SiblingFilter.prototype.filterByBBox = function () {\n        var _this = this;\n        var view = this.context.view;\n        var siblings = getSilbings(view);\n        each(siblings, function (sibling) {\n            var maskElements = getSiblingMaskElements(_this.context, sibling, 10);\n            var elements = getElements(sibling);\n            if (maskElements) {\n                // mask 过小时返回为 null，不能是空数组，否则同未框选到混淆\n                each(elements, function (el) {\n                    if (maskElements.includes(el)) {\n                        el.show();\n                    }\n                    else {\n                        el.hide();\n                    }\n                });\n            }\n        });\n    };\n    /**\n     * 清理所有隐藏的图形\n     */\n    SiblingFilter.prototype.reset = function () {\n        var siblings = getSilbings(this.context.view);\n        each(siblings, function (sibling) {\n            var elements = getElements(sibling);\n            each(elements, function (el) {\n                el.show();\n            });\n        });\n    };\n    return SiblingFilter;\n}(Action));\nexport default SiblingFilter;\n//# sourceMappingURL=sibling-filter.js.map","import { __assign, __extends } from \"tslib\";\nimport { ext } from '@antv/matrix-util';\nimport { deepMix } from '@antv/util';\nimport { parsePadding } from '../../../util/padding';\nimport Action from '../base';\nvar PADDING_RIGHT = 10;\nvar PADDING_TOP = 5;\n/**\n * Button action\n * @ignore\n */\nvar ButtonAction = /** @class */ (function (_super) {\n    __extends(ButtonAction, _super);\n    function ButtonAction() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buttonGroup = null;\n        _this.buttonCfg = {\n            name: 'button',\n            text: 'button',\n            textStyle: {\n                x: 0,\n                y: 0,\n                fontSize: 12,\n                fill: '#333333',\n                cursor: 'pointer',\n            },\n            padding: [8, 10],\n            style: {\n                fill: '#f7f7f7',\n                stroke: '#cccccc',\n                cursor: 'pointer',\n            },\n            activeStyle: {\n                fill: '#e6e6e6',\n            },\n        };\n        return _this;\n    }\n    // mix 默认的配置和用户配置\n    ButtonAction.prototype.getButtonCfg = function () {\n        return deepMix(this.buttonCfg, this.cfg);\n    };\n    // 绘制 Button 和 文本\n    ButtonAction.prototype.drawButton = function () {\n        var config = this.getButtonCfg();\n        var group = this.context.view.foregroundGroup.addGroup({\n            name: config.name,\n        });\n        // 添加文本\n        var textShape = group.addShape({\n            type: 'text',\n            name: 'button-text',\n            attrs: __assign({ text: config.text }, config.textStyle),\n        });\n        var textBBox = textShape.getBBox();\n        var padding = parsePadding(config.padding);\n        // 添加背景按钮\n        var buttonShape = group.addShape({\n            type: 'rect',\n            name: 'button-rect',\n            attrs: __assign({ x: textBBox.x - padding[3], y: textBBox.y - padding[0], width: textBBox.width + padding[1] + padding[3], height: textBBox.height + padding[0] + padding[2] }, config.style),\n        });\n        buttonShape.toBack(); // 在后面\n        // active 效果内置\n        group.on('mouseenter', function () {\n            buttonShape.attr(config.activeStyle);\n        });\n        group.on('mouseleave', function () {\n            buttonShape.attr(config.style);\n        });\n        this.buttonGroup = group;\n    };\n    // 重置位置\n    ButtonAction.prototype.resetPosition = function () {\n        var view = this.context.view;\n        var coord = view.getCoordinate();\n        var point = coord.convert({ x: 1, y: 1 }); // 后面直接改成左上角\n        var buttonGroup = this.buttonGroup;\n        var bbox = buttonGroup.getBBox();\n        var matrix = ext.transform(null, [\n            ['t', point.x - bbox.width - PADDING_RIGHT, point.y + bbox.height + PADDING_TOP],\n        ]);\n        buttonGroup.setMatrix(matrix);\n    };\n    /**\n     * 显示\n     */\n    ButtonAction.prototype.show = function () {\n        if (!this.buttonGroup) {\n            this.drawButton();\n        }\n        this.resetPosition();\n        this.buttonGroup.show();\n    };\n    /**\n     * 隐藏\n     */\n    ButtonAction.prototype.hide = function () {\n        if (this.buttonGroup) {\n            this.buttonGroup.hide();\n        }\n    };\n    /**\n     * 销毁\n     */\n    ButtonAction.prototype.destroy = function () {\n        var buttonGroup = this.buttonGroup;\n        if (buttonGroup) {\n            buttonGroup.remove();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    return ButtonAction;\n}(Action));\nexport default ButtonAction;\n//# sourceMappingURL=button.js.map","import { __extends } from \"tslib\";\nimport Action from '../base';\nimport { distance } from '../util';\nvar DISTANCE = 4; // 移动的最小距离\n/**\n * @ignore\n * View 支持 Drag 的 Action\n */\nvar Drag = /** @class */ (function (_super) {\n    __extends(Drag, _super);\n    function Drag() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        // Action 开始，不等同于 拖拽开始，需要判定移动的范围\n        _this.starting = false;\n        // 拖拽开始\n        _this.dragStart = false;\n        return _this;\n    }\n    /**\n     * 开始\n     */\n    Drag.prototype.start = function () {\n        this.starting = true;\n        this.startPoint = this.context.getCurrentPoint();\n    };\n    /**\n     * 拖拽\n     */\n    Drag.prototype.drag = function () {\n        if (!this.startPoint) {\n            return;\n        }\n        var current = this.context.getCurrentPoint();\n        var view = this.context.view;\n        var event = this.context.event;\n        if (!this.dragStart) {\n            if (distance(current, this.startPoint) > DISTANCE) {\n                view.emit('dragstart', {\n                    target: event.target,\n                    x: event.x,\n                    y: event.y,\n                });\n                this.dragStart = true;\n            }\n        }\n        else {\n            view.emit('drag', {\n                target: event.target,\n                x: event.x,\n                y: event.y,\n            });\n        }\n    };\n    /**\n     * 结束\n     */\n    Drag.prototype.end = function () {\n        if (this.dragStart) {\n            var view = this.context.view;\n            var event_1 = this.context.event;\n            view.emit('dragend', {\n                target: event_1.target,\n                x: event_1.x,\n                y: event_1.y,\n            });\n        }\n        this.starting = false;\n        this.dragStart = false;\n    };\n    return Drag;\n}(Action));\nexport default Drag;\n//# sourceMappingURL=drag.js.map","import { __extends } from \"tslib\";\nimport { ext } from '@antv/matrix-util';\nimport { Action } from '..';\nimport { distance } from '../util';\nvar MIN_DISTANCE = 5;\n/**\n * @ignore\n * View 移动的 Action\n */\nvar Move = /** @class */ (function (_super) {\n    __extends(Move, _super);\n    function Move() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.starting = false;\n        _this.isMoving = false;\n        // private cacheRange = null;\n        _this.startPoint = null;\n        _this.startMatrix = null;\n        return _this;\n    }\n    /**\n     * 开始移动\n     */\n    Move.prototype.start = function () {\n        this.starting = true;\n        this.startPoint = this.context.getCurrentPoint();\n        // 缓存开始时的矩阵，防止反复拖拽\n        this.startMatrix = this.context.view.middleGroup.getMatrix();\n    };\n    /**\n     * 移动\n     */\n    Move.prototype.move = function () {\n        if (!this.starting) {\n            return;\n        }\n        var startPoint = this.startPoint;\n        var currentPoint = this.context.getCurrentPoint();\n        var d = distance(startPoint, currentPoint);\n        if (d > MIN_DISTANCE && !this.isMoving) {\n            this.isMoving = true;\n        }\n        if (this.isMoving) {\n            var view = this.context.view;\n            var matrix = ext.transform(this.startMatrix, [\n                ['t', currentPoint.x - startPoint.x, currentPoint.y - startPoint.y],\n            ]);\n            view.backgroundGroup.setMatrix(matrix);\n            view.foregroundGroup.setMatrix(matrix);\n            view.middleGroup.setMatrix(matrix);\n        }\n    };\n    /**\n     * 结束移动\n     */\n    Move.prototype.end = function () {\n        if (this.isMoving) {\n            this.isMoving = false;\n        }\n        this.startMatrix = null;\n        this.starting = false;\n        this.startPoint = null;\n    };\n    /**\n     * 回滚\n     */\n    Move.prototype.reset = function () {\n        this.starting = false;\n        this.startPoint = null;\n        this.isMoving = false;\n        var view = this.context.view;\n        view.backgroundGroup.resetMatrix();\n        view.foregroundGroup.resetMatrix();\n        view.middleGroup.resetMatrix();\n        this.isMoving = false;\n    };\n    return Move;\n}(Action));\nexport default Move;\n//# sourceMappingURL=move.js.map","import { __extends } from \"tslib\";\nimport { Action } from '..';\nvar DIM_X = 'x';\nvar DIM_Y = 'y';\n/**\n * Scale translate\n * @ignore\n */\nvar ScaleTranslate = /** @class */ (function (_super) {\n    __extends(ScaleTranslate, _super);\n    function ScaleTranslate() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.dims = [DIM_X, DIM_Y];\n        _this.cfgFields = ['dims'];\n        _this.cacheScaleDefs = {};\n        return _this;\n    }\n    // 是否支持对应字段的平移\n    ScaleTranslate.prototype.hasDim = function (dim) {\n        return this.dims.includes(dim);\n    };\n    ScaleTranslate.prototype.getScale = function (dim) {\n        var view = this.context.view;\n        if (dim === 'x') {\n            return view.getXScale();\n        }\n        else {\n            return view.getYScales()[0];\n        }\n    };\n    ScaleTranslate.prototype.resetDim = function (dim) {\n        var view = this.context.view;\n        if (this.hasDim(dim) && this.cacheScaleDefs[dim]) {\n            var scale = this.getScale(dim);\n            view.scale(scale.field, this.cacheScaleDefs[dim]);\n            this.cacheScaleDefs[dim] = null;\n        }\n    };\n    /**\n     * 回滚\n     */\n    ScaleTranslate.prototype.reset = function () {\n        this.resetDim(DIM_X);\n        this.resetDim(DIM_Y);\n        var view = this.context.view;\n        view.render(true);\n    };\n    return ScaleTranslate;\n}(Action));\nexport default ScaleTranslate;\n//# sourceMappingURL=scale-transform.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport TransformAction from './scale-transform';\n/**\n * 拖拽 Scale 的 Action\n * @ignore\n */\nvar ScaleTranslate = /** @class */ (function (_super) {\n    __extends(ScaleTranslate, _super);\n    function ScaleTranslate() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.startPoint = null;\n        _this.starting = false;\n        _this.startCache = {};\n        return _this;\n    }\n    /**\n     * 开始\n     */\n    ScaleTranslate.prototype.start = function () {\n        var _this = this;\n        this.startPoint = this.context.getCurrentPoint();\n        this.starting = true;\n        var dims = this.dims;\n        each(dims, function (dim) {\n            var scale = _this.getScale(dim);\n            var min = scale.min, max = scale.max, values = scale.values;\n            _this.startCache[dim] = { min: min, max: max, values: values };\n        });\n    };\n    // 平移分类的度量\n    // private translateCategory(dim, scale, normalPoint) {\n    // }\n    /**\n     * 结束\n     */\n    ScaleTranslate.prototype.end = function () {\n        this.startPoint = null;\n        this.starting = false;\n        this.startCache = {};\n    };\n    /**\n     * 平移\n     */\n    ScaleTranslate.prototype.translate = function () {\n        var _this = this;\n        if (!this.starting) {\n            return;\n        }\n        var startPoint = this.startPoint;\n        var coord = this.context.view.getCoordinate();\n        var currentPoint = this.context.getCurrentPoint();\n        var normalStart = coord.invert(startPoint);\n        var noramlCurrent = coord.invert(currentPoint);\n        var dx = noramlCurrent.x - normalStart.x;\n        var dy = noramlCurrent.y - normalStart.y;\n        var view = this.context.view;\n        var dims = this.dims;\n        each(dims, function (dim) {\n            _this.translateDim(dim, { x: dx * -1, y: dy * -1 });\n        });\n        view.render(true);\n    };\n    // 平移度量\n    ScaleTranslate.prototype.translateDim = function (dim, normalPoint) {\n        if (this.hasDim(dim)) {\n            var scale = this.getScale(dim);\n            if (scale.isLinear) {\n                this.translateLinear(dim, scale, normalPoint);\n            }\n            //  else { // 暂时仅处理连续字段\n            // this.translateCategory(dim, scale, normalPoint);\n            // }\n        }\n    };\n    // linear 度量平移\n    ScaleTranslate.prototype.translateLinear = function (dim, scale, normalPoint) {\n        var view = this.context.view;\n        var _a = this.startCache[dim], min = _a.min, max = _a.max;\n        var range = max - min;\n        var d = normalPoint[dim] * range;\n        // 只有第一次缓存，否则无法回滚\n        if (!this.cacheScaleDefs[dim]) {\n            this.cacheScaleDefs[dim] = {\n                // @ts-ignore\n                nice: scale.nice,\n                min: min,\n                max: max,\n            };\n        }\n        view.scale(scale.field, {\n            // @ts-ignore\n            nice: false,\n            min: min + d,\n            max: max + d,\n        });\n    };\n    // 平移分类的度量\n    // private translateCategory(dim, scale, normalPoint) {\n    // }\n    /**\n     * 回滚\n     */\n    ScaleTranslate.prototype.reset = function () {\n        _super.prototype.reset.call(this);\n        this.startPoint = null;\n        this.starting = false;\n    };\n    return ScaleTranslate;\n}(TransformAction));\nexport default ScaleTranslate;\n//# sourceMappingURL=scale-translate.js.map","import { __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport TransformAction from './scale-transform';\n/**\n * 缩放 Scale 的 Action\n * @ignore\n */\nvar ScaleTranslate = /** @class */ (function (_super) {\n    __extends(ScaleTranslate, _super);\n    function ScaleTranslate() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.zoomRatio = 0.05;\n        return _this;\n        // 平移分类的度量\n        // private translateCategory(dim, scale, normalPoint) {\n        // }\n    }\n    /**\n     * 缩小\n     */\n    ScaleTranslate.prototype.zoomIn = function () {\n        this.zoom(this.zoomRatio);\n    };\n    ScaleTranslate.prototype.zoom = function (scale) {\n        var _this = this;\n        var dims = this.dims;\n        each(dims, function (dim) {\n            _this.zoomDim(dim, scale);\n        });\n        this.context.view.render(true);\n    };\n    /**\n     * 放大\n     */\n    ScaleTranslate.prototype.zoomOut = function () {\n        this.zoom(-1 * this.zoomRatio);\n    };\n    // 缩放度量\n    ScaleTranslate.prototype.zoomDim = function (dim, dRatio) {\n        if (this.hasDim(dim)) {\n            var scale = this.getScale(dim);\n            if (scale.isLinear) {\n                this.zoomLinear(dim, scale, dRatio);\n            }\n            //  else { // 暂时仅处理连续字段\n            // this.zoomCategory(dim, scale, normalPoint);\n            // }\n        }\n    };\n    // linear 度量平移\n    ScaleTranslate.prototype.zoomLinear = function (dim, scale, dRatio) {\n        var view = this.context.view;\n        // 只有第一次缓存，否则无法回滚\n        if (!this.cacheScaleDefs[dim]) {\n            this.cacheScaleDefs[dim] = {\n                // @ts-ignore\n                nice: scale.nice,\n                min: scale.min,\n                max: scale.max,\n            };\n        }\n        // 使用使用原始度量作为缩放标准\n        var scaleDef = this.cacheScaleDefs[dim];\n        var range = scaleDef.max - scaleDef.min;\n        var min = scale.min, max = scale.max;\n        var d = dRatio * range;\n        var toMin = min - d;\n        var toMax = max + d;\n        var curRange = toMax - toMin;\n        var scaled = curRange / range;\n        if (toMax > toMin && scaled < 100 && scaled > 0.01) {\n            view.scale(scale.field, {\n                // @ts-ignore\n                nice: false,\n                min: min - d,\n                max: max + d,\n            });\n        }\n    };\n    return ScaleTranslate;\n}(TransformAction));\nexport default ScaleTranslate;\n//# sourceMappingURL=scale-zoom.js.map","// 注册黑暗主题\nimport { registerTheme } from './core';\nimport { antvDark } from './theme/style-sheet/dark';\nimport { createThemeByStylesheet } from './util/theme';\nregisterTheme('dark', createThemeByStylesheet(antvDark));\n// 注册 G 渲染引擎\nimport * as CanvasEngine from '@antv/g-canvas';\nimport * as SVGEngine from '@antv/g-svg';\nimport { registerEngine } from './core';\nregisterEngine('canvas', CanvasEngine);\nregisterEngine('svg', SVGEngine);\n// 注册 G2 内置的 geometry\nimport { registerGeometry } from './core';\nimport Area from './geometry/area';\nimport Edge from './geometry/edge';\nimport Heatmap from './geometry/heatmap';\nimport Interval from './geometry/interval';\nimport Line from './geometry/line';\nimport Path from './geometry/path';\nimport Point from './geometry/point';\nimport Polygon from './geometry/polygon';\nimport Schema from './geometry/schema';\nregisterGeometry('Polygon', Polygon);\nregisterGeometry('Interval', Interval);\nregisterGeometry('Schema', Schema);\nregisterGeometry('Path', Path);\nregisterGeometry('Point', Point);\nregisterGeometry('Line', Line);\nregisterGeometry('Area', Area);\nregisterGeometry('Edge', Edge);\nregisterGeometry('Heatmap', Heatmap);\n// 引入所有内置的 shapes\nimport './geometry/shape/area/line';\nimport './geometry/shape/area/smooth';\nimport './geometry/shape/area/smooth-line';\nimport './geometry/shape/edge/arc';\nimport './geometry/shape/edge/smooth';\nimport './geometry/shape/edge/vhv';\nimport './geometry/shape/interval/funnel';\nimport './geometry/shape/interval/hollow-rect';\nimport './geometry/shape/interval/line';\nimport './geometry/shape/interval/pyramid';\nimport './geometry/shape/interval/tick';\nimport './geometry/shape/line/step';\nimport './geometry/shape/point/hollow';\nimport './geometry/shape/point/image';\nimport './geometry/shape/point/solid';\nimport './geometry/shape/schema/box';\nimport './geometry/shape/schema/candle';\nimport './geometry/shape/polygon/square';\n// 注册 Geometry 内置的 label\nimport { registerGeometryLabel } from './core';\nimport GeometryLabel from './geometry/label/base';\nimport IntervalLabel from './geometry/label/interval';\nimport PieLabel from './geometry/label/pie';\nimport PolarLabel from './geometry/label/polar';\nregisterGeometryLabel('base', GeometryLabel);\nregisterGeometryLabel('interval', IntervalLabel);\nregisterGeometryLabel('pie', PieLabel);\nregisterGeometryLabel('polar', PolarLabel);\n// 注册 Geometry label 内置的布局函数\nimport { registerGeometryLabelLayout } from './core';\nimport { distribute } from './geometry/label/layout/pie/distribute';\nimport { pieOuterLabelLayout } from './geometry/label/layout/pie/outer';\nimport { pieSpiderLabelLayout } from './geometry/label/layout/pie/spider';\nimport { limitInCanvas } from './geometry/label/layout/limit-in-canvas';\nimport { limitInShape } from './geometry/label/layout/limit-in-shape';\nimport { fixedOverlap, overlap } from './geometry/label/layout/overlap';\nimport { hideOverlap } from './geometry/label/layout/hide-overlap';\nimport { adjustColor } from './geometry/label/layout/adjust-color';\nimport { intervalAdjustPosition } from './geometry/label/layout/interval/adjust-position';\nimport { pointAdjustPosition } from './geometry/label/layout/point/adjust-position';\nregisterGeometryLabelLayout('overlap', overlap);\nregisterGeometryLabelLayout('distribute', distribute);\nregisterGeometryLabelLayout('fixed-overlap', fixedOverlap);\nregisterGeometryLabelLayout('hide-overlap', hideOverlap);\nregisterGeometryLabelLayout('limit-in-shape', limitInShape);\nregisterGeometryLabelLayout('limit-in-canvas', limitInCanvas);\nregisterGeometryLabelLayout('pie-outer', pieOuterLabelLayout);\nregisterGeometryLabelLayout('adjust-color', adjustColor);\nregisterGeometryLabelLayout('interval-adjust-position', intervalAdjustPosition);\nregisterGeometryLabelLayout('point-adjust-position', pointAdjustPosition);\nregisterGeometryLabelLayout('pie-spider', pieSpiderLabelLayout);\n// 注册需要的动画执行函数\nimport { fadeIn, fadeOut } from './animate/animation/fade';\nimport { growInX, growInXY, growInY } from './animate/animation/grow-in';\nimport { pathIn } from './animate/animation/path-in';\nimport { positionUpdate } from './animate/animation/position-update';\nimport { scaleInX, scaleInY } from './animate/animation/scale-in';\nimport { sectorPathUpdate } from './animate/animation/sector-path-update';\nimport { waveIn } from './animate/animation/wave-in';\nimport { zoomIn, zoomOut } from './animate/animation/zoom';\nimport { registerAnimation } from './core';\nregisterAnimation('fade-in', fadeIn);\nregisterAnimation('fade-out', fadeOut);\nregisterAnimation('grow-in-x', growInX);\nregisterAnimation('grow-in-xy', growInXY);\nregisterAnimation('grow-in-y', growInY);\nregisterAnimation('scale-in-x', scaleInX);\nregisterAnimation('scale-in-y', scaleInY);\nregisterAnimation('wave-in', waveIn);\nregisterAnimation('zoom-in', zoomIn);\nregisterAnimation('zoom-out', zoomOut);\nregisterAnimation('position-update', positionUpdate);\nregisterAnimation('sector-path-update', sectorPathUpdate);\nregisterAnimation('path-in', pathIn);\n// 注册内置的 Facet\nimport { registerFacet } from './core';\nimport Circle from './facet/circle';\nimport List from './facet/list';\nimport Matrix from './facet/matrix';\nimport Mirror from './facet/mirror';\nimport Rect from './facet/rect';\nimport Tree from './facet/tree';\nregisterFacet('rect', Rect);\nregisterFacet('mirror', Mirror);\nregisterFacet('list', List);\nregisterFacet('matrix', Matrix);\nregisterFacet('circle', Circle);\nregisterFacet('tree', Tree);\n// 注册内置的 Component\nimport { registerComponentController } from './core';\nimport Annotation from './chart/controller/annotation';\nimport Axis from './chart/controller/axis';\nimport Legend from './chart/controller/legend';\nimport Slider from './chart/controller/slider';\nimport Tooltip from './chart/controller/tooltip';\nimport Scrollbar from './chart/controller/scrollbar';\n// register build-in components\nregisterComponentController('axis', Axis);\nregisterComponentController('legend', Legend);\nregisterComponentController('tooltip', Tooltip);\nregisterComponentController('annotation', Annotation);\nregisterComponentController('slider', Slider);\nregisterComponentController('scrollbar', Scrollbar);\n// 注册 Interaction Action\nimport { registerAction } from './core';\nimport ActiveRegion from './interaction/action/active-region';\nimport SiblingTooltip from './interaction/action/component/tooltip/sibling';\nimport TooltipAction from './interaction/action/component/tooltip/geometry';\nimport EllipsisTextAction from './interaction/action/component/tooltip/ellipsis-text';\nimport ElmentActive from './interaction/action/element/active';\nimport ElementLinkByColor from './interaction/action/element/link-by-color';\nimport ElmentRangeActive from './interaction/action/element/range-active';\nimport ElmentSingleActive from './interaction/action/element/single-active';\nimport ElmentHighlight from './interaction/action/element/highlight';\nimport ElmentHighlightByColor from './interaction/action/element/highlight-by-color';\nimport ElmentHighlightByX from './interaction/action/element/highlight-by-x';\nimport ElmentRangeHighlight from './interaction/action/element/range-highlight';\nimport ElmentSingleHighlight from './interaction/action/element/single-highlight';\nimport ElementRangeSelected from './interaction/action/element/range-selected';\nimport ElementSelected from './interaction/action/element/selected';\nimport ElementSingleSelected from './interaction/action/element/single-selected';\nimport ListActive from './interaction/action/component/list-active';\nimport ListHighlight from './interaction/action/component/list-highlight';\nimport ListSelected from './interaction/action/component/list-selected';\nimport ListUnchecked from './interaction/action/component/list-unchecked';\nimport CircleMask from './interaction/action/mask/circle';\nimport DimMask from './interaction/action/mask/dim-rect';\nimport PathMask from './interaction/action/mask/path';\nimport RectMask from './interaction/action/mask/rect';\nimport SmoothPathMask from './interaction/action/mask/smooth-path';\nimport CursorAction from './interaction/action/cursor';\nimport DataFilter from './interaction/action/data/filter';\nimport DataRangeFilter from './interaction/action/data/range-filter';\nimport SiblingFilter from './interaction/action/data/sibling-filter';\nimport ElementFilter from './interaction/action/element/filter';\nimport ElementSiblingFilter from './interaction/action/element/sibling-filter';\nimport ButtonAction from './interaction/action/view/button';\nimport ViewDrag from './interaction/action/view/drag';\nimport ViewMove from './interaction/action/view/move';\nimport ScaleTranslate from './interaction/action/view/scale-translate';\nimport ScaleZoom from './interaction/action/view/scale-zoom';\nregisterAction('tooltip', TooltipAction);\nregisterAction('sibling-tooltip', SiblingTooltip);\nregisterAction('ellipsis-text', EllipsisTextAction);\nregisterAction('element-active', ElmentActive);\nregisterAction('element-single-active', ElmentSingleActive);\nregisterAction('element-range-active', ElmentRangeActive);\nregisterAction('element-highlight', ElmentHighlight);\nregisterAction('element-highlight-by-x', ElmentHighlightByX);\nregisterAction('element-highlight-by-color', ElmentHighlightByColor);\nregisterAction('element-single-highlight', ElmentSingleHighlight);\nregisterAction('element-range-highlight', ElmentRangeHighlight);\nregisterAction('element-sibling-highlight', ElmentRangeHighlight, {\n    effectSiblings: true,\n    effectByRecord: true,\n});\nregisterAction('element-selected', ElementSelected);\nregisterAction('element-single-selected', ElementSingleSelected);\nregisterAction('element-range-selected', ElementRangeSelected);\nregisterAction('element-link-by-color', ElementLinkByColor);\nregisterAction('active-region', ActiveRegion);\nregisterAction('list-active', ListActive);\nregisterAction('list-selected', ListSelected);\nregisterAction('list-highlight', ListHighlight);\nregisterAction('list-unchecked', ListUnchecked);\nregisterAction('legend-item-highlight', ListHighlight, {\n    componentNames: ['legend'],\n});\nregisterAction('axis-label-highlight', ListHighlight, {\n    componentNames: ['axis'],\n});\nregisterAction('rect-mask', RectMask);\nregisterAction('x-rect-mask', DimMask, { dim: 'x' });\nregisterAction('y-rect-mask', DimMask, { dim: 'y' });\nregisterAction('circle-mask', CircleMask);\nregisterAction('path-mask', PathMask);\nregisterAction('smooth-path-mask', SmoothPathMask);\nregisterAction('cursor', CursorAction);\nregisterAction('data-filter', DataFilter);\nregisterAction('brush', DataRangeFilter);\nregisterAction('brush-x', DataRangeFilter, { dims: ['x'] });\nregisterAction('brush-y', DataRangeFilter, { dims: ['y'] });\nregisterAction('sibling-filter', SiblingFilter);\nregisterAction('sibling-x-filter', SiblingFilter);\nregisterAction('sibling-y-filter', SiblingFilter);\nregisterAction('element-filter', ElementFilter);\nregisterAction('element-sibling-filter', ElementSiblingFilter);\nregisterAction('element-sibling-filter-record', ElementSiblingFilter, { byRecord: true });\nregisterAction('view-drag', ViewDrag);\nregisterAction('view-move', ViewMove);\nregisterAction('scale-translate', ScaleTranslate);\nregisterAction('scale-zoom', ScaleZoom);\nregisterAction('reset-button', ButtonAction, {\n    name: 'reset-button',\n    text: 'reset',\n});\n// 注册默认的 Interaction 交互行为\nimport { registerInteraction } from './core';\nfunction isPointInView(context) {\n    return context.isInPlot();\n}\n// 注册 tooltip 的 interaction\nregisterInteraction('tooltip', {\n    start: [\n        { trigger: 'plot:mousemove', action: 'tooltip:show', throttle: { wait: 50, leading: true, trailing: false } },\n        { trigger: 'plot:touchmove', action: 'tooltip:show', throttle: { wait: 50, leading: true, trailing: false } },\n    ],\n    end: [\n        { trigger: 'plot:mouseleave', action: 'tooltip:hide' },\n        { trigger: 'plot:leave', action: 'tooltip:hide' },\n        { trigger: 'plot:touchend', action: 'tooltip:hide' },\n    ],\n});\nregisterInteraction('ellipsis-text', {\n    start: [\n        {\n            trigger: 'legend-item-name:mousemove',\n            action: 'ellipsis-text:show',\n            throttle: { wait: 50, leading: true, trailing: false },\n        },\n        {\n            trigger: 'legend-item-name:touchstart',\n            action: 'ellipsis-text:show',\n            throttle: { wait: 50, leading: true, trailing: false },\n        },\n        {\n            trigger: 'axis-label:mousemove',\n            action: 'ellipsis-text:show',\n            throttle: { wait: 50, leading: true, trailing: false },\n        },\n        {\n            trigger: 'axis-label:touchstart',\n            action: 'ellipsis-text:show',\n            throttle: { wait: 50, leading: true, trailing: false },\n        },\n    ],\n    end: [\n        { trigger: 'legend-item-name:mouseleave', action: 'ellipsis-text:hide' },\n        { trigger: 'legend-item-name:touchend', action: 'ellipsis-text:hide' },\n        { trigger: 'axis-label:mouseleave', action: 'ellipsis-text:hide' },\n        { trigger: 'axis-label:touchend', action: 'ellipsis-text:hide' },\n    ],\n});\n// 移动到 element 上 active\nregisterInteraction('element-active', {\n    start: [{ trigger: 'element:mouseenter', action: 'element-active:active' }],\n    end: [{ trigger: 'element:mouseleave', action: 'element-active:reset' }],\n});\n// 点击选中，允许取消\nregisterInteraction('element-selected', {\n    start: [{ trigger: 'element:click', action: 'element-selected:toggle' }],\n});\n// hover highlight，允许取消\nregisterInteraction('element-highlight', {\n    start: [{ trigger: 'element:mouseenter', action: 'element-highlight:highlight' }],\n    end: [{ trigger: 'element:mouseleave', action: 'element-highlight:reset' }],\n});\n// hover highlight by x，允许取消\nregisterInteraction('element-highlight-by-x', {\n    start: [{ trigger: 'element:mouseenter', action: 'element-highlight-by-x:highlight' }],\n    end: [{ trigger: 'element:mouseleave', action: 'element-highlight-by-x:reset' }],\n});\n// hover highlight by y，允许取消\nregisterInteraction('element-highlight-by-color', {\n    start: [{ trigger: 'element:mouseenter', action: 'element-highlight-by-color:highlight' }],\n    end: [{ trigger: 'element:mouseleave', action: 'element-highlight-by-color:reset' }],\n});\n// legend hover，element active\nregisterInteraction('legend-active', {\n    start: [{ trigger: 'legend-item:mouseenter', action: ['list-active:active', 'element-active:active'] }],\n    end: [{ trigger: 'legend-item:mouseleave', action: ['list-active:reset', 'element-active:reset'] }],\n});\n// legend hover，element active\nregisterInteraction('legend-highlight', {\n    start: [\n        { trigger: 'legend-item:mouseenter', action: ['legend-item-highlight:highlight', 'element-highlight:highlight'] },\n    ],\n    end: [{ trigger: 'legend-item:mouseleave', action: ['legend-item-highlight:reset', 'element-highlight:reset'] }],\n});\n// legend hover，element active\nregisterInteraction('axis-label-highlight', {\n    start: [\n        { trigger: 'axis-label:mouseenter', action: ['axis-label-highlight:highlight', 'element-highlight:highlight'] },\n    ],\n    end: [{ trigger: 'axis-label:mouseleave', action: ['axis-label-highlight:reset', 'element-highlight:reset'] }],\n});\n// legend hover，element active\nregisterInteraction('element-list-highlight', {\n    start: [{ trigger: 'element:mouseenter', action: ['list-highlight:highlight', 'element-highlight:highlight'] }],\n    end: [{ trigger: 'element:mouseleave', action: ['list-highlight:reset', 'element-highlight:reset'] }],\n});\n// 框选\nregisterInteraction('element-range-highlight', {\n    showEnable: [\n        { trigger: 'plot:mouseenter', action: 'cursor:crosshair' },\n        { trigger: 'mask:mouseenter', action: 'cursor:move' },\n        { trigger: 'plot:mouseleave', action: 'cursor:default' },\n        { trigger: 'mask:mouseleave', action: 'cursor:crosshair' },\n    ],\n    start: [\n        {\n            trigger: 'plot:mousedown',\n            isEnable: function (context) {\n                // 不要点击在 mask 上重新开始\n                return !context.isInShape('mask');\n            },\n            action: ['rect-mask:start', 'rect-mask:show'],\n        },\n        {\n            trigger: 'mask:dragstart',\n            action: ['rect-mask:moveStart'],\n        },\n    ],\n    processing: [\n        {\n            trigger: 'plot:mousemove',\n            action: ['rect-mask:resize'],\n        },\n        {\n            trigger: 'mask:drag',\n            action: ['rect-mask:move'],\n        },\n        {\n            trigger: 'mask:change',\n            action: ['element-range-highlight:highlight'],\n        },\n    ],\n    end: [\n        { trigger: 'plot:mouseup', action: ['rect-mask:end'] },\n        { trigger: 'mask:dragend', action: ['rect-mask:moveEnd'] },\n        {\n            trigger: 'document:mouseup',\n            isEnable: function (context) {\n                return !context.isInPlot();\n            },\n            action: ['element-range-highlight:clear', 'rect-mask:end', 'rect-mask:hide'],\n        },\n    ],\n    rollback: [{ trigger: 'dblclick', action: ['element-range-highlight:clear', 'rect-mask:hide'] }],\n});\nregisterInteraction('brush', {\n    showEnable: [\n        { trigger: 'plot:mouseenter', action: 'cursor:crosshair' },\n        { trigger: 'plot:mouseleave', action: 'cursor:default' },\n    ],\n    start: [\n        {\n            trigger: 'mousedown',\n            isEnable: isPointInView,\n            action: ['brush:start', 'rect-mask:start', 'rect-mask:show'],\n        },\n    ],\n    processing: [\n        {\n            trigger: 'mousemove',\n            isEnable: isPointInView,\n            action: ['rect-mask:resize'],\n        },\n    ],\n    end: [\n        {\n            trigger: 'mouseup',\n            isEnable: isPointInView,\n            action: ['brush:filter', 'brush:end', 'rect-mask:end', 'rect-mask:hide', 'reset-button:show'],\n        },\n    ],\n    rollback: [{ trigger: 'reset-button:click', action: ['brush:reset', 'reset-button:hide', 'cursor:crosshair'] }],\n});\nregisterInteraction('brush-visible', {\n    showEnable: [\n        { trigger: 'plot:mouseenter', action: 'cursor:crosshair' },\n        { trigger: 'plot:mouseleave', action: 'cursor:default' },\n    ],\n    start: [\n        {\n            trigger: 'plot:mousedown',\n            action: ['rect-mask:start', 'rect-mask:show'],\n        },\n    ],\n    processing: [\n        {\n            trigger: 'plot:mousemove',\n            action: ['rect-mask:resize'],\n        },\n        { trigger: 'mask:change', action: ['element-range-highlight:highlight'] },\n    ],\n    end: [\n        {\n            trigger: 'plot:mouseup',\n            action: ['rect-mask:end', 'rect-mask:hide', 'element-filter:filter', 'element-range-highlight:clear'],\n        },\n    ],\n    rollback: [\n        {\n            trigger: 'dblclick',\n            action: ['element-filter:clear'],\n        },\n    ],\n});\nregisterInteraction('brush-x', {\n    showEnable: [\n        { trigger: 'plot:mouseenter', action: 'cursor:crosshair' },\n        { trigger: 'plot:mouseleave', action: 'cursor:default' },\n    ],\n    start: [\n        {\n            trigger: 'mousedown',\n            isEnable: isPointInView,\n            action: ['brush-x:start', 'x-rect-mask:start', 'x-rect-mask:show'],\n        },\n    ],\n    processing: [\n        {\n            trigger: 'mousemove',\n            isEnable: isPointInView,\n            action: ['x-rect-mask:resize'],\n        },\n    ],\n    end: [\n        {\n            trigger: 'mouseup',\n            isEnable: isPointInView,\n            action: ['brush-x:filter', 'brush-x:end', 'x-rect-mask:end', 'x-rect-mask:hide'],\n        },\n    ],\n    rollback: [{ trigger: 'dblclick', action: ['brush-x:reset'] }],\n});\nregisterInteraction('element-path-highlight', {\n    showEnable: [\n        { trigger: 'plot:mouseenter', action: 'cursor:crosshair' },\n        { trigger: 'plot:mouseleave', action: 'cursor:default' },\n    ],\n    start: [\n        { trigger: 'mousedown', isEnable: isPointInView, action: 'path-mask:start' },\n        { trigger: 'mousedown', isEnable: isPointInView, action: 'path-mask:show' },\n    ],\n    processing: [{ trigger: 'mousemove', action: 'path-mask:addPoint' }],\n    end: [{ trigger: 'mouseup', action: 'path-mask:end' }],\n    rollback: [{ trigger: 'dblclick', action: 'path-mask:hide' }],\n});\n// 点击选中，允许取消\nregisterInteraction('element-single-selected', {\n    start: [{ trigger: 'element:click', action: 'element-single-selected:toggle' }],\n});\n// 筛选数据\nregisterInteraction('legend-filter', {\n    showEnable: [\n        { trigger: 'legend-item:mouseenter', action: 'cursor:pointer' },\n        { trigger: 'legend-item:mouseleave', action: 'cursor:default' },\n    ],\n    start: [{ trigger: 'legend-item:click', action: ['list-unchecked:toggle', 'data-filter:filter'] }],\n});\n// 筛选数据\nregisterInteraction('continuous-filter', {\n    start: [{ trigger: 'legend:valuechanged', action: 'data-filter:filter' }],\n});\n// 筛选数据\nregisterInteraction('continuous-visible-filter', {\n    start: [{ trigger: 'legend:valuechanged', action: 'element-filter:filter' }],\n});\n// 筛选图形\nregisterInteraction('legend-visible-filter', {\n    showEnable: [\n        { trigger: 'legend-item:mouseenter', action: 'cursor:pointer' },\n        { trigger: 'legend-item:mouseleave', action: 'cursor:default' },\n    ],\n    start: [{ trigger: 'legend-item:click', action: ['list-unchecked:toggle', 'element-filter:filter'] }],\n});\n// 出现背景框\nregisterInteraction('active-region', {\n    start: [{ trigger: 'plot:mousemove', action: 'active-region:show' }],\n    end: [{ trigger: 'plot:mouseleave', action: 'active-region:hide' }],\n});\nfunction isWheelDown(event) {\n    event.gEvent.preventDefault();\n    return event.gEvent.originalEvent.deltaY > 0;\n}\nregisterInteraction('view-zoom', {\n    start: [\n        {\n            trigger: 'plot:mousewheel',\n            isEnable: function (context) {\n                return isWheelDown(context.event);\n            },\n            action: 'scale-zoom:zoomOut',\n            throttle: { wait: 100, leading: true, trailing: false },\n        },\n        {\n            trigger: 'plot:mousewheel',\n            isEnable: function (context) {\n                return !isWheelDown(context.event);\n            },\n            action: 'scale-zoom:zoomIn',\n            throttle: { wait: 100, leading: true, trailing: false },\n        },\n    ],\n});\nregisterInteraction('sibling-tooltip', {\n    start: [{ trigger: 'plot:mousemove', action: 'sibling-tooltip:show' }],\n    end: [{ trigger: 'plot:mouseleave', action: 'sibling-tooltip:hide' }],\n});\nexport * from './core';\n// 一些工具方法导出\nimport { getAngle, polarToCartesian } from './util/graphics';\nimport { rotate, transform, translate, zoom } from './util/transform';\nexport var Util = {\n    translate: translate,\n    rotate: rotate,\n    zoom: zoom,\n    transform: transform,\n    getAngle: getAngle,\n    polarToCartesian: polarToCartesian,\n};\n//# sourceMappingURL=index.js.map","import { isObject, each, find, get } from '@antv/util';\nimport { polarToCartesian } from '../../../../util/graphics';\n/** label text和line距离 4px */\nvar MARGIN = 4;\nfunction antiCollision(labelShapes, labels, lineHeight, plotRange, center, isRight) {\n    // adjust y position of labels to avoid overlapping\n    var overlapping = true;\n    var start = plotRange.start;\n    var end = plotRange.end;\n    var startY = Math.min(start.y, end.y);\n    var totalHeight = Math.abs(start.y - end.y);\n    var i;\n    var maxY = 0;\n    var minY = Number.MIN_VALUE;\n    var boxes = labels.map(function (label) {\n        if (label.y > maxY) {\n            maxY = label.y;\n        }\n        if (label.y < minY) {\n            minY = label.y;\n        }\n        return {\n            size: lineHeight,\n            targets: [label.y - startY],\n        };\n    });\n    minY -= startY;\n    if (maxY - startY > totalHeight) {\n        totalHeight = maxY - startY;\n    }\n    while (overlapping) {\n        /* eslint no-loop-func: 0 */\n        boxes.forEach(function (box) {\n            var target = (Math.min.apply(minY, box.targets) + Math.max.apply(minY, box.targets)) / 2;\n            box.pos = Math.min(Math.max(minY, target - box.size / 2), totalHeight - box.size);\n            // box.pos = Math.max(0, target - box.size / 2);\n        });\n        // detect overlapping and join boxes\n        overlapping = false;\n        i = boxes.length;\n        while (i--) {\n            if (i > 0) {\n                var previousBox = boxes[i - 1];\n                var box = boxes[i];\n                if (previousBox.pos + previousBox.size > box.pos) {\n                    // overlapping\n                    previousBox.size += box.size;\n                    previousBox.targets = previousBox.targets.concat(box.targets);\n                    // overflow, shift up\n                    if (previousBox.pos + previousBox.size > totalHeight) {\n                        previousBox.pos = totalHeight - previousBox.size;\n                    }\n                    boxes.splice(i, 1); // removing box\n                    overlapping = true;\n                }\n            }\n        }\n    }\n    i = 0;\n    // step 4: normalize y and adjust x\n    boxes.forEach(function (b) {\n        var posInCompositeBox = startY + lineHeight / 2; // middle of the label\n        b.targets.forEach(function () {\n            labels[i].y = b.pos + posInCompositeBox;\n            posInCompositeBox += lineHeight;\n            i++;\n        });\n    });\n    var labelsMap = {};\n    for (var _i = 0, labelShapes_1 = labelShapes; _i < labelShapes_1.length; _i++) {\n        var labelShape = labelShapes_1[_i];\n        labelsMap[labelShape.get('id')] = labelShape;\n    }\n    // (x - cx)^2 + (y - cy)^2 = totalR^2\n    labels.forEach(function (label) {\n        var rPow2 = label.r * label.r;\n        var dyPow2 = Math.pow(Math.abs(label.y - center.y), 2);\n        if (rPow2 < dyPow2) {\n            label.x = center.x;\n        }\n        else {\n            var dx = Math.sqrt(rPow2 - dyPow2);\n            if (!isRight) {\n                // left\n                label.x = center.x - dx;\n            }\n            else {\n                // right\n                label.x = center.x + dx;\n            }\n        }\n        // adjust labelShape\n        var labelShape = labelsMap[label.id];\n        labelShape.attr('x', label.x);\n        labelShape.attr('y', label.y);\n        // because group could not effect text-shape, should set text-shape position manually\n        var textShape = find(labelShape.getChildren(), function (ele) { return ele.get('type') === 'text'; });\n        // @ts-ignore\n        if (textShape) {\n            textShape.attr('y', label.y);\n            textShape.attr('x', label.x);\n        }\n    });\n}\nexport function distribute(items, labels, shapes, region) {\n    var offset = items[0] ? items[0].offset : 0;\n    var coordinate = labels[0].get('coordinate');\n    var radius = coordinate.getRadius();\n    var center = coordinate.getCenter();\n    if (offset > 0) {\n        // const lineHeight = get(this.geometry.theme, ['pieLabels', 'labelHeight'], 14);\n        var lineHeight_1 = 14; // TODO\n        var totalR = radius + offset;\n        var totalHeight_1 = totalR * 2 + lineHeight_1 * 2;\n        var plotRange_1 = {\n            start: coordinate.start,\n            end: coordinate.end,\n        };\n        // step 1: separate labels\n        var halves_1 = [\n            [],\n            [],\n        ];\n        items.forEach(function (labelItem) {\n            if (!labelItem) {\n                return;\n            }\n            if (labelItem.textAlign === 'right') {\n                // left\n                halves_1[0].push(labelItem);\n            }\n            else {\n                // right or center will be put on the right side\n                halves_1[1].push(labelItem);\n            }\n        });\n        halves_1.forEach(function (half, index) {\n            // step 2: reduce labels\n            var maxLabelsCountForOneSide = totalHeight_1 / lineHeight_1;\n            if (half.length > maxLabelsCountForOneSide) {\n                half.sort(function (a, b) {\n                    // sort by percentage DESC\n                    return b['..percent'] - a['..percent'];\n                });\n                half.splice(maxLabelsCountForOneSide, half.length - maxLabelsCountForOneSide);\n            }\n            // step 3: distribute position (x and y)\n            half.sort(function (a, b) {\n                // sort by y ASC\n                return a.y - b.y;\n            });\n            antiCollision(labels, half, lineHeight_1, plotRange_1, center, index);\n        });\n    }\n    // 配置 labelLine\n    each(items, function (item) {\n        if (item && item.labelLine) {\n            var distance = item.offset;\n            var angle = item.angle;\n            // 贴近圆周\n            var startPoint = polarToCartesian(center.x, center.y, radius, angle);\n            var innerPoint = polarToCartesian(center.x, center.y, radius + distance / 2, angle);\n            var itemX = item.x + get(item, 'offsetX', 0);\n            var itemY = item.y + get(item, 'offsetY', 0);\n            var endPoint = {\n                x: itemX - Math.cos(angle) * MARGIN,\n                y: itemY - Math.sin(angle) * MARGIN,\n            };\n            if (!isObject(item.labelLine)) {\n                // labelLine: true\n                item.labelLine = {};\n            }\n            item.labelLine.path = [\n                \"M \" + startPoint.x,\n                startPoint.y + \" Q\" + innerPoint.x,\n                innerPoint.y + \" \" + endPoint.x,\n                endPoint.y,\n            ].join(',');\n        }\n    });\n}\n//# sourceMappingURL=distribute.js.map","import { get } from '@antv/util';\nimport { isIntersect } from '../../../util/collision-detect';\nimport { getlLabelBackgroundInfo } from '../util';\n/**\n * label 防遮挡布局：在不改变 label 位置的情况下对相互重叠的 label 进行隐藏（非移除）\n * 不同于 'overlap' 类型的布局，该布局不会对 label 的位置进行偏移调整。\n * @param labels 参与布局调整的 label 数组集合\n */\nexport function hideOverlap(items, labels, shapes, region) {\n    // todo 添加 labelrank\n    // each label will hide the next one because the next one always has lower rank.\n    // Detect overlapping labels\n    for (var i = 0; i < labels.length; i++) {\n        var label1 = labels[i];\n        if (labels[i].get('visible')) {\n            for (var j = i + 1; j < labels.length; j++) {\n                var label2 = labels[j];\n                if (label1 && label2 && label1 !== label2 && label2.get('visible')) {\n                    var box1 = getlLabelBackgroundInfo(label1, items[i], get(items[i], 'background.padding'));\n                    var box2 = getlLabelBackgroundInfo(label2, items[j], get(items[j], 'background.padding'));\n                    if (isIntersect(box1, box2)) {\n                        labels[j].set('visible', false);\n                    }\n                }\n            }\n        }\n    }\n}\n//# sourceMappingURL=hide-overlap.js.map","import { each } from '@antv/util';\n/**\n * @ignore\n * 根据图形元素以及 label 的 bbox 进行调整，如果 label 超出了 shape 的 bbox 则不展示\n */\nexport function limitInShape(items, labels, shapes, region) {\n    each(labels, function (label, index) {\n        var labelBBox = label.getCanvasBBox(); // 文本有可能发生旋转\n        var shapeBBox = shapes[index].getBBox();\n        if (labelBBox.minX < shapeBBox.minX ||\n            labelBBox.minY < shapeBBox.minY ||\n            labelBBox.maxX > shapeBBox.maxX ||\n            labelBBox.maxY > shapeBBox.maxY) {\n            label.remove(true); // 超出则不展示\n        }\n    });\n}\n//# sourceMappingURL=limit-in-shape.js.map","import { each } from '@antv/util';\nimport { translate } from '../../../util/transform';\n/**\n * @ignore\n * 将 label 限制在画布范围内，简单得将超出画布的 label 往画布内调整\n * @param labels\n * @param cfg\n */\nexport function limitInCanvas(items, labels, shapes, region) {\n    each(labels, function (label) {\n        var regionMinX = region.minX, regionMinY = region.minY, regionMaxX = region.maxX, regionMaxY = region.maxY;\n        var _a = label.getCanvasBBox(), minX = _a.minX, minY = _a.minY, maxX = _a.maxX, maxY = _a.maxY, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var finalX = x;\n        var finalY = y;\n        if (minX < regionMinX || maxX < regionMinX) {\n            // 超出左侧\n            finalX = regionMinX;\n        }\n        if (minY < regionMinY || maxY < regionMinY) {\n            // 超出顶部\n            finalY = regionMinY;\n        }\n        if (minX > regionMaxX) {\n            // 整体超出右侧\n            finalX = regionMaxX - width;\n        }\n        else if (maxX > regionMaxX) {\n            // 超出右侧\n            finalX = finalX - (maxX - regionMaxX);\n        }\n        if (minY > regionMaxY) {\n            // 整体超出顶部\n            finalY = regionMaxY - height;\n        }\n        else if (maxY > regionMaxY) {\n            // 超出底部\n            finalY = finalY - (maxY - regionMaxY);\n        }\n        if (finalX !== x || finalY !== y) {\n            translate(label, finalX - x, finalY - y);\n        }\n    });\n}\n//# sourceMappingURL=limit-in-canvas.js.map","import { isObject, each, get, groupBy } from '@antv/util';\nimport { polarToCartesian } from '../../../../util/graphics';\nimport { antiCollision } from './util';\n/** label text和line距离 4px */\nvar MARGIN = 4;\n/**\n * 配置 labelline\n * @param item PolarLabelItem\n */\nfunction drawLabelline(item /** PolarLabelItem */, coordinate) {\n    /** 坐标圆心 */\n    var center = coordinate.getCenter();\n    /** 圆半径 */\n    var radius = coordinate.getRadius();\n    if (item && item.labelLine) {\n        var angle = item.angle, labelOffset = item.offset;\n        // 贴近圆周\n        var startPoint = polarToCartesian(center.x, center.y, radius, angle);\n        var itemX = item.x + get(item, 'offsetX', 0) * (Math.cos(angle) > 0 ? 1 : -1);\n        var itemY = item.y + get(item, 'offsetY', 0) * (Math.sin(angle) > 0 ? 1 : -1);\n        var endPoint = {\n            x: itemX - Math.cos(angle) * MARGIN,\n            y: itemY - Math.sin(angle) * MARGIN,\n        };\n        var smoothConnector = item.labelLine.smooth;\n        var path = [];\n        var dx = endPoint.x - center.x;\n        var dy = endPoint.y - center.y;\n        var endAngle = Math.atan(dy / dx);\n        // 第三象限 & 第四象限\n        if (dx < 0) {\n            endAngle += Math.PI;\n        }\n        // 默认 smooth, undefined 也为 smooth\n        if (smoothConnector === false) {\n            if (!isObject(item.labelLine)) {\n                // labelLine: true\n                item.labelLine = {};\n            }\n            // 表示弧线的方向，0 表示从起点到终点沿逆时针画弧, 1 表示顺时针\n            var sweepFlag = 0;\n            // 第一象限\n            if ((angle < 0 && angle > -Math.PI / 2) || angle > Math.PI * 1.5) {\n                if (endPoint.y > startPoint.y) {\n                    sweepFlag = 1;\n                }\n            }\n            // 第二象限\n            if (angle >= 0 && angle < Math.PI / 2) {\n                if (endPoint.y > startPoint.y) {\n                    sweepFlag = 1;\n                }\n            }\n            // 第三象限\n            if (angle >= Math.PI / 2 && angle < Math.PI) {\n                if (startPoint.y > endPoint.y) {\n                    sweepFlag = 1;\n                }\n            }\n            // 第四象限\n            if (angle < -Math.PI / 2 || (angle >= Math.PI && angle < Math.PI * 1.5)) {\n                if (startPoint.y > endPoint.y) {\n                    sweepFlag = 1;\n                }\n            }\n            var distance = labelOffset / 2 > 4 ? 4 : Math.max(labelOffset / 2 - 1, 0);\n            var breakPoint = polarToCartesian(center.x, center.y, radius + distance, angle);\n            // 圆弧的结束点\n            var breakPoint3 = polarToCartesian(center.x, center.y, radius + labelOffset / 2, endAngle);\n            /**\n             * @example\n             * M 100 100 L100 90 A 50 50 0 0 0 150 50\n             * 移动至 (100, 100), 连接到 (100, 90), 以 (50, 50) 为圆心，绘制圆弧至 (150, 50);\n             * A 命令的第 4 个参数 large-arc-flag, 决定弧线是大于还是小于 180 度: 0 表示小角度弧，1 表示大角\n             * 第 5 个参数: 是否顺时针绘制\n             */\n            // 默认小弧\n            var largeArcFlag = 0;\n            // step1: 移动至起点\n            path.push(\"M \" + startPoint.x + \" \" + startPoint.y);\n            // step2: 连接拐点\n            path.push(\"L \" + breakPoint.x + \" \" + breakPoint.y);\n            // step3: 绘制圆弧 至 结束点\n            path.push(\"A \" + center.x + \" \" + center.y + \" 0 \" + largeArcFlag + \" \" + sweepFlag + \" \" + breakPoint3.x + \" \" + breakPoint3.y);\n            // step4: 连接结束点\n            path.push(\"L \" + endPoint.x + \" \" + endPoint.y);\n        }\n        else {\n            var breakPoint = polarToCartesian(center.x, center.y, radius + (labelOffset / 2 > 4 ? 4 : Math.max(labelOffset / 2 - 1, 0)), angle);\n            // G2 旧的拉线\n            // path.push('Q', `${breakPoint.x}`, `${breakPoint.y}`, `${endPoint.x}`, `${endPoint.y}`);\n            var xSign = startPoint.x < center.x ? 1 : -1;\n            // step1: 连接结束点\n            path.push(\"M \" + endPoint.x + \" \" + endPoint.y);\n            var slope1 = (startPoint.y - center.y) / (startPoint.x - center.x);\n            var slope2 = (endPoint.y - center.y) / (endPoint.x - center.x);\n            if (Math.abs(slope1 - slope2) > Math.pow(Math.E, -16)) {\n                // step2: 绘制 curve line (起点 & 结合点与圆心的斜率不等时, 由于存在误差, 使用近似处理)\n                path.push.apply(path, [\n                    'C',\n                    endPoint.x + xSign * 4,\n                    endPoint.y,\n                    2 * breakPoint.x - startPoint.x,\n                    2 * breakPoint.y - startPoint.y,\n                    startPoint.x,\n                    startPoint.y,\n                ]);\n            }\n            // step3: 连接至起点\n            path.push(\"L \" + startPoint.x + \" \" + startPoint.y);\n        }\n        item.labelLine.path = path.join(' ');\n    }\n}\n/**\n * 饼图 outer-label 布局, 适用于 type = pie 且 label offset > 0 的标签\n */\nexport function pieOuterLabelLayout(items, labels, shapes, region) {\n    /** 坐标系 */\n    var coordinate = labels[0] && labels[0].get('coordinate');\n    if (!coordinate) {\n        return;\n    }\n    /** 坐标圆心 */\n    var center = coordinate.getCenter();\n    /** 圆半径 */\n    var radius = coordinate.getRadius();\n    /** label shapes */\n    var labelsMap = {};\n    for (var _i = 0, labels_1 = labels; _i < labels_1.length; _i++) {\n        var labelShape = labels_1[_i];\n        labelsMap[labelShape.get('id')] = labelShape;\n    }\n    // note labelHeight 可以控制 label 的行高\n    var labelHeight = get(items[0], 'labelHeight', 14);\n    var labelOffset = get(items[0], 'offset', 0);\n    if (labelOffset <= 0) {\n        return;\n    }\n    var LEFT_HALF_KEY = 'left';\n    var RIGHT_HALF_KEY = 'right';\n    // step 1: separate labels\n    var separateLabels = groupBy(items, function (item) { return (item.x < center.x ? LEFT_HALF_KEY : RIGHT_HALF_KEY); });\n    var start = coordinate.start, end = coordinate.end;\n    // step2: calculate totalHeight\n    var totalHeight = (radius + labelOffset + labelHeight) * 2;\n    var totalR = totalHeight / 2;\n    /** labels 容器的范围(后续根据组件的布局设计进行调整) */\n    var labelsContainerRange = {\n        minX: start.x,\n        maxX: end.x,\n        minY: center.y - totalR,\n        maxY: center.y + totalR,\n    };\n    // step 3: antiCollision\n    each(separateLabels, function (half, key) {\n        var maxLabelsCountForOneSide = totalHeight / labelHeight;\n        if (half.length > maxLabelsCountForOneSide) {\n            half.sort(function (a, b) {\n                // sort by percentage DESC\n                return b.percent - a.percent;\n            });\n            each(half, function (labelItem, idx) {\n                if (idx > maxLabelsCountForOneSide) {\n                    labelsMap[labelItem.id].set('visible', false);\n                    labelItem.invisible = true;\n                }\n            });\n        }\n        antiCollision(half, labelHeight, labelsContainerRange);\n    });\n    each(separateLabels, function (half, key) {\n        each(half, function (item) {\n            var isRight = key === RIGHT_HALF_KEY;\n            var labelShape = labelsMap[item.id];\n            // because group could not effect content-shape, should set content-shape position manually\n            var content = labelShape.getChildByIndex(0);\n            // textShape 发生过调整\n            if (content) {\n                var r = radius + labelOffset;\n                // (x - cx)^2 + (y - cy)^2 = totalR^2\n                var dy = item.y - center.y;\n                var rPow2 = Math.pow(r, 2);\n                var dyPow2 = Math.pow(dy, 2);\n                var dxPow2 = rPow2 - dyPow2 > 0 ? rPow2 - dyPow2 : 0;\n                var dx = Math.sqrt(dxPow2);\n                var dx_offset = Math.abs(Math.cos(item.angle) * r);\n                if (!isRight) {\n                    // left\n                    item.x = center.x - Math.max(dx, dx_offset);\n                }\n                else {\n                    // right\n                    item.x = center.x + Math.max(dx, dx_offset);\n                }\n            }\n            // adjust labelShape\n            if (content) {\n                content.attr('y', item.y);\n                content.attr('x', item.x);\n            }\n            drawLabelline(item, coordinate);\n        });\n    });\n}\n//# sourceMappingURL=outer.js.map","import { BBox } from '../../../util/bbox';\nimport { isContrastColorWhite } from '../../../util/color';\nexport function adjustColor(items, labels, shapes) {\n    if (shapes.length === 0) {\n        return;\n    }\n    var element = shapes[0].get('element');\n    var theme = element.geometry.theme;\n    var _a = theme.labels || {}, fillColorLight = _a.fillColorLight, fillColorDark = _a.fillColorDark;\n    shapes.forEach(function (shape, index) {\n        var label = labels[index];\n        var textShape = label.find(function (el) { return el.get('type') === 'text'; });\n        var shapeBBox = BBox.fromObject(shape.getBBox());\n        var textBBox = BBox.fromObject(textShape.getCanvasBBox());\n        // 如果文本包围图在图形内部\n        if (shapeBBox.contains(textBBox)) {\n            var bgColor = shape.attr('fill');\n            var fillWhite = isContrastColorWhite(bgColor);\n            if (fillWhite) {\n                if (fillColorLight) {\n                    textShape.attr('fill', fillColorLight);\n                }\n            }\n            else {\n                if (fillColorDark) {\n                    textShape.attr('fill', fillColorDark);\n                }\n            }\n        }\n    });\n}\n//# sourceMappingURL=adjust-color.js.map","import colorUtil from '@antv/color-util';\n// 根据YIQ亮度判断指定颜色取反色是不是白色\n// http://24ways.org/2010/calculating-color-contrast\nexport var isContrastColorWhite = function (color) {\n    var _a = colorUtil.rgb2arr(colorUtil.toRGB(color)), r = _a[0], g = _a[1], b = _a[2];\n    var isDark = (r * 299 + g * 587 + b * 114) / 1000 < 128;\n    return isDark;\n};\n//# sourceMappingURL=color.js.map","import { each, get, isNil, deepMix, groupBy } from '@antv/util';\nimport { polarToCartesian } from '../../../../util/graphics';\nimport { antiCollision } from './util';\nimport { translate } from '../../../../util/transform';\n/** 拐点偏移量, 暂不可配置 */\nvar INFLECTION_OFFSET = 4;\n/** 标签偏移量, distance between label and edge: offsetX */\nvar LABEL_OFFSET_X = 4;\n/** 标签与牵引线的偏移量 */\nvar LABEL_TEXT_LINE_OFFSET = 4;\nfunction drawLabelline(item, coordinate, inRight) {\n    /** 坐标圆心 */\n    var center = coordinate.getCenter();\n    /** 圆半径 */\n    var radius = coordinate.getRadius();\n    var startPoint = {\n        x: item.x - (inRight ? LABEL_TEXT_LINE_OFFSET : -LABEL_TEXT_LINE_OFFSET),\n        y: item.y,\n    };\n    var inflectionPoint = polarToCartesian(center.x, center.y, radius + INFLECTION_OFFSET, item.angle);\n    var p1 = { x: startPoint.x, y: startPoint.y };\n    var p2 = { x: inflectionPoint.x, y: inflectionPoint.y };\n    var endPoint = polarToCartesian(center.x, center.y, radius, item.angle);\n    var path = '';\n    // 文本被调整下去了，则添加拐点连接线\n    if (startPoint.y !== inflectionPoint.y) {\n        var offset = inRight ? 4 : -4;\n        p1.y = startPoint.y;\n        /** 是否在第一象限 */\n        if (item.angle < 0 && item.angle >= -Math.PI / 2) {\n            p1.x = Math.max(inflectionPoint.x, startPoint.x - offset);\n            if (startPoint.y < inflectionPoint.y) {\n                p2.y = p1.y;\n            }\n            else {\n                p2.y = inflectionPoint.y;\n                p2.x = Math.max(p2.x, p1.x - offset);\n            }\n        }\n        /** 是否在 第二象限 */\n        if (item.angle > 0 && item.angle < Math.PI / 2) {\n            p1.x = Math.max(inflectionPoint.x, startPoint.x - offset);\n            if (startPoint.y > inflectionPoint.y) {\n                p2.y = p1.y;\n            }\n            else {\n                p2.y = inflectionPoint.y;\n                p2.x = Math.max(p2.x, p1.x - offset);\n            }\n        }\n        /** 是否在 第三象限 */\n        if (item.angle > Math.PI / 2) {\n            p1.x = Math.min(inflectionPoint.x, startPoint.x - offset);\n            if (startPoint.y > inflectionPoint.y) {\n                p2.y = p1.y;\n            }\n            else {\n                p2.y = inflectionPoint.y;\n                p2.x = Math.min(p2.x, p1.x - offset);\n            }\n        }\n        /** 是否在 第四象限 */\n        if (item.angle < -Math.PI / 2) {\n            p1.x = Math.min(inflectionPoint.x, startPoint.x - offset);\n            if (startPoint.y < inflectionPoint.y) {\n                p2.y = p1.y;\n            }\n            else {\n                p2.y = inflectionPoint.y;\n                p2.x = Math.min(p2.x, p1.x - offset);\n            }\n        }\n    }\n    path = [\n        \"M \" + startPoint.x + \",\" + startPoint.y,\n        \"L \" + p1.x + \",\" + p1.y,\n        \"L \" + p2.x + \",\" + p2.y,\n        \"L \" + inflectionPoint.x + \",\" + inflectionPoint.y,\n        \"L \" + endPoint.x + \",\" + endPoint.y,\n    ].join(' ');\n    item.labelLine = deepMix({}, item.labelLine, { path: path });\n}\n/**\n * 饼图标签 spider 布局, 只适用于 pie-spider 的标签类型\n * region 应该是 labelsRenderer 容器的范围限制(便于后续组件间布局)\n */\nexport function pieSpiderLabelLayout(items, labels, shapes, region) {\n    /** 坐标系 */\n    var coordinate = labels[0] && labels[0].get('coordinate');\n    if (!coordinate) {\n        return;\n    }\n    /** 坐标圆心 */\n    var center = coordinate.getCenter();\n    /** 圆半径 */\n    var radius = coordinate.getRadius();\n    /** label shapes */\n    var labelsMap = {};\n    for (var _i = 0, labels_1 = labels; _i < labels_1.length; _i++) {\n        var labelShape = labels_1[_i];\n        labelsMap[labelShape.get('id')] = labelShape;\n    }\n    var labelHeight = get(items[0], 'labelHeight', 14);\n    var labelOffset = Math.max(get(items[0], 'offset', 0), INFLECTION_OFFSET);\n    // step 1: adjust items to spider\n    each(items, function (item) {\n        var label = get(labelsMap, item.id);\n        if (!label) {\n            return;\n        }\n        var inRight = item.x > center.x || (item.x === center.x && item.y > center.y);\n        var offsetX = !isNil(item.offsetX) ? item.offsetX : LABEL_OFFSET_X;\n        var inflectionPoint = polarToCartesian(center.x, center.y, radius + INFLECTION_OFFSET, item.angle);\n        var totalOffset = labelOffset + offsetX;\n        item.x = center.x + (inRight ? 1 : -1) * (radius + totalOffset);\n        item.y = inflectionPoint.y;\n    });\n    var start = coordinate.start, end = coordinate.end;\n    var LEFT_HALF_KEY = 'left';\n    var RIGHT_HALF_KEY = 'right';\n    // step 1: separate labels\n    var seperateLabels = groupBy(items, function (item) { return (item.x < center.x ? LEFT_HALF_KEY : RIGHT_HALF_KEY); });\n    // step2: calculate totalHeight\n    var totalHeight = (radius + labelOffset) * 2 + labelHeight;\n    each(seperateLabels, function (half) {\n        var halfHeight = half.length * labelHeight;\n        if (halfHeight > totalHeight) {\n            totalHeight = Math.min(halfHeight, Math.abs(start.y - end.y));\n        }\n    });\n    /** labels 容器的范围(后续根据组件的布局设计进行调整) */\n    var labelsContainerRange = {\n        minX: start.x,\n        maxX: end.x,\n        minY: center.y - totalHeight / 2,\n        maxY: center.y + totalHeight / 2,\n    };\n    // step 3: antiCollision\n    each(seperateLabels, function (half, key) {\n        var maxLabelsCountForOneSide = totalHeight / labelHeight;\n        if (half.length > maxLabelsCountForOneSide) {\n            half.sort(function (a, b) {\n                // sort by percentage DESC\n                return b.percent - a.percent;\n            });\n            each(half, function (labelItem, idx) {\n                if (idx > maxLabelsCountForOneSide) {\n                    labelsMap[labelItem.id].set('visible', false);\n                    labelItem.invisible = true;\n                }\n            });\n        }\n        antiCollision(half, labelHeight, labelsContainerRange);\n    });\n    var startY = labelsContainerRange.minY;\n    var endY = labelsContainerRange.maxY;\n    // step4: applyTo labels and adjust labelLines\n    each(seperateLabels, function (half, key) {\n        var inRight = key === RIGHT_HALF_KEY;\n        each(half, function (item) {\n            var label = get(labelsMap, item && item.id);\n            if (!label) {\n                return;\n            }\n            // out of range, hidden\n            if (item.y < startY || item.y > endY) {\n                label.set('visible', false);\n                return;\n            }\n            var labelContent = label.getChildByIndex(0);\n            var box = labelContent.getCanvasBBox();\n            var originalPos = { x: inRight ? box.x : box.maxX, y: box.y + box.height / 2 /** vertical-align: middle */ };\n            translate(labelContent, item.x - originalPos.x /** 从 pos.x 移动到 item.x */, item.y - originalPos.y);\n            // adjust labelLines\n            if (item.labelLine) {\n                drawLabelline(item, coordinate, inRight);\n            }\n        });\n    });\n}\n//# sourceMappingURL=spider.js.map","import { isNil } from '@antv/util';\n/**\n * @ignore\n * 单个 shape 动画\n * 渐现动画\n * @param shape 执行动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function fadeIn(shape, animateCfg, cfg) {\n    var endState = {\n        fillOpacity: isNil(shape.attr('fillOpacity')) ? 1 : shape.attr('fillOpacity'),\n        strokeOpacity: isNil(shape.attr('strokeOpacity')) ? 1 : shape.attr('strokeOpacity'),\n        opacity: isNil(shape.attr('opacity')) ? 1 : shape.attr('opacity'),\n    };\n    shape.attr({\n        fillOpacity: 0,\n        strokeOpacity: 0,\n        opacity: 0,\n    });\n    shape.animate(endState, animateCfg);\n}\n/**\n * @ignore\n * 单个 shape 动画\n * 渐隐动画\n * @param shape 执行动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function fadeOut(shape, animateCfg, cfg) {\n    var endState = {\n        fillOpacity: 0,\n        strokeOpacity: 0,\n        opacity: 0,\n    };\n    var easing = animateCfg.easing, duration = animateCfg.duration, delay = animateCfg.delay;\n    shape.animate(endState, duration, easing, function () {\n        shape.remove(true);\n    }, delay);\n}\n//# sourceMappingURL=fade.js.map","import { doScaleAnimate } from './util';\n/**\n * @ignore\n * 入场动画\n * x 方向的生长\n * @param element 执行动画的元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function growInX(element, animateCfg, cfg) {\n    var coordinate = cfg.coordinate, minYPoint = cfg.minYPoint;\n    doScaleAnimate(element, animateCfg, coordinate, minYPoint, 'x');\n}\n/**\n * @ignore\n * 入场动画\n * y 轴方向上的生长\n * @param element 执行动画的元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function growInY(element, animateCfg, cfg) {\n    var coordinate = cfg.coordinate, minYPoint = cfg.minYPoint;\n    doScaleAnimate(element, animateCfg, coordinate, minYPoint, 'y');\n}\n/**\n * @ignore\n * 入场\n * 中心点的向四周的生长动画\n * @param element 执行动画的元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function growInXY(element, animateCfg, cfg) {\n    var coordinate = cfg.coordinate, minYPoint = cfg.minYPoint;\n    doScaleAnimate(element, animateCfg, coordinate, minYPoint, 'xy');\n}\n//# sourceMappingURL=grow-in.js.map","import { ext } from '@antv/matrix-util';\n/**\n * @ignore\n * 沿着 x 方向放大的动画\n * @param shape\n * @param animateCfg\n * @param shapeModel\n */\nexport function scaleInX(shape, animateCfg, cfg) {\n    var box = shape.getBBox();\n    var mappingData = shape.get('origin').mappingData;\n    var points = mappingData.points;\n    // x 数值如果为负值，那么应该从右往左生长\n    var x = points[0].y - points[1].y > 0 ? box.maxX : box.minX;\n    var y = (box.minY + box.maxY) / 2;\n    shape.applyToMatrix([x, y, 1]);\n    var matrix = ext.transform(shape.getMatrix(), [\n        ['t', -x, -y],\n        ['s', 0.01, 1],\n        ['t', x, y],\n    ]);\n    shape.setMatrix(matrix);\n    shape.animate({\n        matrix: ext.transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 100, 1],\n            ['t', x, y],\n        ]),\n    }, animateCfg);\n}\n/**\n * @ignore\n * 沿着 y 方向放大的动画\n * @param shape\n * @param animateCfg\n * @param shapeModel\n */\nexport function scaleInY(shape, animateCfg, cfg) {\n    var box = shape.getBBox();\n    var mappingData = shape.get('origin').mappingData;\n    var x = (box.minX + box.maxX) / 2;\n    var points = mappingData.points;\n    // 数值如果为负值，那么应该从上往下生长，通过 shape 的关键点进行判断\n    var y = points[0].y - points[1].y <= 0 ? box.maxY : box.minY;\n    shape.applyToMatrix([x, y, 1]);\n    var matrix = ext.transform(shape.getMatrix(), [\n        ['t', -x, -y],\n        ['s', 1, 0.01],\n        ['t', x, y],\n    ]);\n    shape.setMatrix(matrix);\n    shape.animate({\n        matrix: ext.transform(shape.getMatrix(), [\n            ['t', -x, -y],\n            ['s', 1, 100],\n            ['t', x, y],\n        ]),\n    }, animateCfg);\n}\n//# sourceMappingURL=scale-in.js.map","import { __assign } from \"tslib\";\nimport { getCoordinateClipCfg } from '../../util/coordinate';\n/**\n * @ignore\n * 整体动画\n * 划入入场动画效果\n * @todo 放两张直角坐标系和极坐标系的图\n * @param element 参与动画的图形元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function waveIn(element, animateCfg, cfg) {\n    var _a = getCoordinateClipCfg(cfg.coordinate, 20), type = _a.type, startState = _a.startState, endState = _a.endState; // 根据坐标系类型获取整体的剪切区域配置信息\n    var clipShape = element.setClip({\n        type: type,\n        attrs: startState,\n    }); // 为 shape 设置剪切区域\n    // \b对剪切图形做动画\n    clipShape.animate(endState, __assign(__assign({}, animateCfg), { callback: function () {\n            if (element && !element.get('destroyed')) {\n                element.set('clipShape', null);\n            }\n            clipShape.remove(true); // 动画结束需要将剪切图形销毁\n        } }));\n}\n//# sourceMappingURL=wave-in.js.map","/**\n * @ignore\n * 坐标移动动画\n * @param shape 图形\n * @param animateCfg\n * @param cfg\n */\nexport function positionUpdate(shape, animateCfg, cfg) {\n    var toAttrs = cfg.toAttrs;\n    // @ts-ignore\n    var x = toAttrs.x;\n    // @ts-ignore\n    var y = toAttrs.y;\n    // @ts-ignore\n    delete toAttrs.x;\n    // @ts-ignore\n    delete toAttrs.y;\n    shape.attr(toAttrs);\n    shape.animate({\n        x: x,\n        y: y,\n    }, animateCfg);\n}\n//# sourceMappingURL=position-update.js.map","/**\n * @ignore\n * 入场动画\n * path 的入场动画\n * @param element 执行动画的元素\n * @param animateCfg 动画配置\n * @param cfg 额外信息\n */\nexport function pathIn(element, animateCfg, cfg) {\n    // @ts-ignore\n    var length = element.getTotalLength();\n    // 设置虚线样式\n    element.attr('lineDash', [length]);\n    element.animate(function (ratio) {\n        return {\n            // 对虚线偏移量做动画\n            lineDashOffset: (1 - ratio) * length,\n        };\n    }, animateCfg);\n}\n//# sourceMappingURL=path-in.js.map"],"sourceRoot":""}